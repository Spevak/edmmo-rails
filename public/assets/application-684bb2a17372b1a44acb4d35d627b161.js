function CodeMirrorREPL(t,e){function n(){}function i(){switch(x--){case 0:return x=0,void 0;case m.length:_=b.getLine(w).slice(k)}b.setLine(w,m[x])}function r(){switch(x++){case m.length:return x--,void 0;case m.length-1:return b.setLine(w,_),void 0}b.setLine(w,m[x])}function s(){var t=b.getLine(w),e=t.slice(k);y=!1,k=0,g.push(e),x=m.push(e),b.setLine(w++,t+"\n");var n=g.join("\n").replace(/\r/g,"\n"),i=v.isBalanced(n);i?(v.eval(n),g.length=0,b.setMarker(w,">>>")):null===i?(g.pop(),n=g.join("\n").replace("\r","\n"),b.setMarker(w,v.isBalanced(n)?">>>":"..")):b.setMarker(w,"..."),setTimeout(function(){y=!0},0)}function o(){var t=b.getLine(w).slice(k).length;b.setSelection({line:w,ch:0},{line:w,ch:t})}function a(){var t=b.somethingSelected(),e=b.getCursor(!0),n=e.line,i=e.ch;n===w&&i>=k+(t?0:1)&&(t||b.setSelection({line:n,ch:i-1},e),b.replaceSelection(""))}function l(){var t=b.getCursor(!0),e=t.line,n=t.ch;e===w&&n<b.getLine(e).length&&n>=k&&(b.somethingSelected()||b.setSelection({line:e,ch:n+1},t),b.replaceSelection(""))}function u(t,e){var n=e.to,i=e.from,r=e.text,o=e.next,a=r.length;if(y)if(i.line<w||i.ch<k)t.undo();else if(a-->1){t.undo();var l=t.getLine(w).slice(k);r[0]=l.slice(0,i.ch)+r[0];for(var c=0;a>c;c++)t.setLine(w,r[c]),s();t.setLine(w,r[a]+l.slice(n.ch))}o&&u(t,o)}function c(t,e){var n=y,i=w;y=!1,t=String(t);var r=b.getLine(w);if(t=t.replace(/\n/g,"\r")+"\n",r){b.setMarker(w,"");var s=b.getCursor().ch}b.setLine(w++,t),e&&b.markText({line:i,ch:0},{line:i,ch:t.length},e),r&&(b.setLine(w,r),b.setMarker(w,">>>"),b.setCursor({line:w,ch:s})),setTimeout(function(){y=n},0)}function f(t){b.setOption("mode",t)}function h(t){b.setOption("theme",t)}var p=document.getElementById(t);e=e||{},p.value="";var d={Up:i,Down:r,Delete:l,"Ctrl-Z":n,Enter:s,"Ctrl-A":o,"Ctrl-Delete":l,"Shift-Enter":s,Backspace:a,"Ctrl-Backspace":a},e={electricChars:!1,theme:e.theme,mode:e.mode,smartIndent:!1,lineWrapping:!0,extraKeys:d,onChange:u,indentUnit:4,undoDepth:1,gutter:!0},b=CodeMirror.fromTextArea(p,e),m=[],g=[],v=this,y=!0,_="",w=0,k=0,x=0;v.print=c,v.setMode=f,v.setTheme=h,b.setMarker(w,">>>")}!function(t,e){"object"==typeof module&&"object"==typeof module.exports?module.exports=t.document?e(t,!0):function(t){if(!t.document)throw new Error("jQuery requires a window with a document");return e(t)}:e(t)}("undefined"!=typeof window?window:this,function(t,e){function n(t){var e=t.length,n=se.type(t);return"function"===n||se.isWindow(t)?!1:1===t.nodeType&&e?!0:"array"===n||0===e||"number"==typeof e&&e>0&&e-1 in t}function i(t,e,n){if(se.isFunction(e))return se.grep(t,function(t,i){return!!e.call(t,i,t)!==n});if(e.nodeType)return se.grep(t,function(t){return t===e!==n});if("string"==typeof e){if(pe.test(e))return se.filter(e,t,n);e=se.filter(e,t)}return se.grep(t,function(t){return se.inArray(t,e)>=0!==n})}function r(t,e){do t=t[e];while(t&&1!==t.nodeType);return t}function s(t){var e=we[t]={};return se.each(t.match(_e)||[],function(t,n){e[n]=!0}),e}function o(){be.addEventListener?(be.removeEventListener("DOMContentLoaded",a,!1),t.removeEventListener("load",a,!1)):(be.detachEvent("onreadystatechange",a),t.detachEvent("onload",a))}function a(){(be.addEventListener||"load"===event.type||"complete"===be.readyState)&&(o(),se.ready())}function l(t,e,n){if(void 0===n&&1===t.nodeType){var i="data-"+e.replace(Ce,"-$1").toLowerCase();if(n=t.getAttribute(i),"string"==typeof n){try{n="true"===n?!0:"false"===n?!1:"null"===n?null:+n+""===n?+n:Te.test(n)?se.parseJSON(n):n}catch(r){}se.data(t,e,n)}else n=void 0}return n}function u(t){var e;for(e in t)if(("data"!==e||!se.isEmptyObject(t[e]))&&"toJSON"!==e)return!1;return!0}function c(t,e,n,i){if(se.acceptData(t)){var r,s,o=se.expando,a=t.nodeType,l=a?se.cache:t,u=a?t[o]:t[o]&&o;if(u&&l[u]&&(i||l[u].data)||void 0!==n||"string"!=typeof e)return u||(u=a?t[o]=V.pop()||se.guid++:o),l[u]||(l[u]=a?{}:{toJSON:se.noop}),("object"==typeof e||"function"==typeof e)&&(i?l[u]=se.extend(l[u],e):l[u].data=se.extend(l[u].data,e)),s=l[u],i||(s.data||(s.data={}),s=s.data),void 0!==n&&(s[se.camelCase(e)]=n),"string"==typeof e?(r=s[e],null==r&&(r=s[se.camelCase(e)])):r=s,r}}function f(t,e,n){if(se.acceptData(t)){var i,r,s=t.nodeType,o=s?se.cache:t,a=s?t[se.expando]:se.expando;if(o[a]){if(e&&(i=n?o[a]:o[a].data)){se.isArray(e)?e=e.concat(se.map(e,se.camelCase)):e in i?e=[e]:(e=se.camelCase(e),e=e in i?[e]:e.split(" ")),r=e.length;for(;r--;)delete i[e[r]];if(n?!u(i):!se.isEmptyObject(i))return}(n||(delete o[a].data,u(o[a])))&&(s?se.cleanData([t],!0):ie.deleteExpando||o!=o.window?delete o[a]:o[a]=null)}}}function h(){return!0}function p(){return!1}function d(){try{return be.activeElement}catch(t){}}function b(t){var e=Fe.split("|"),n=t.createDocumentFragment();if(n.createElement)for(;e.length;)n.createElement(e.pop());return n}function m(t,e){var n,i,r=0,s=typeof t.getElementsByTagName!==Se?t.getElementsByTagName(e||"*"):typeof t.querySelectorAll!==Se?t.querySelectorAll(e||"*"):void 0;if(!s)for(s=[],n=t.childNodes||t;null!=(i=n[r]);r++)!e||se.nodeName(i,e)?s.push(i):se.merge(s,m(i,e));return void 0===e||e&&se.nodeName(t,e)?se.merge([t],s):s}function g(t){Le.test(t.type)&&(t.defaultChecked=t.checked)}function v(t,e){return se.nodeName(t,"table")&&se.nodeName(11!==e.nodeType?e:e.firstChild,"tr")?t.getElementsByTagName("tbody")[0]||t.appendChild(t.ownerDocument.createElement("tbody")):t}function y(t){return t.type=(null!==se.find.attr(t,"type"))+"/"+t.type,t}function _(t){var e=Ve.exec(t.type);return e?t.type=e[1]:t.removeAttribute("type"),t}function w(t,e){for(var n,i=0;null!=(n=t[i]);i++)se._data(n,"globalEval",!e||se._data(e[i],"globalEval"))}function k(t,e){if(1===e.nodeType&&se.hasData(t)){var n,i,r,s=se._data(t),o=se._data(e,s),a=s.events;if(a){delete o.handle,o.events={};for(n in a)for(i=0,r=a[n].length;r>i;i++)se.event.add(e,n,a[n][i])}o.data&&(o.data=se.extend({},o.data))}}function x(t,e){var n,i,r;if(1===e.nodeType){if(n=e.nodeName.toLowerCase(),!ie.noCloneEvent&&e[se.expando]){r=se._data(e);for(i in r.events)se.removeEvent(e,i,r.handle);e.removeAttribute(se.expando)}"script"===n&&e.text!==t.text?(y(e).text=t.text,_(e)):"object"===n?(e.parentNode&&(e.outerHTML=t.outerHTML),ie.html5Clone&&t.innerHTML&&!se.trim(e.innerHTML)&&(e.innerHTML=t.innerHTML)):"input"===n&&Le.test(t.type)?(e.defaultChecked=e.checked=t.checked,e.value!==t.value&&(e.value=t.value)):"option"===n?e.defaultSelected=e.selected=t.defaultSelected:("input"===n||"textarea"===n)&&(e.defaultValue=t.defaultValue)}}function S(e,n){var i=se(n.createElement(e)).appendTo(n.body),r=t.getDefaultComputedStyle?t.getDefaultComputedStyle(i[0]).display:se.css(i[0],"display");return i.detach(),r}function T(t){var e=be,n=tn[t];return n||(n=S(t,e),"none"!==n&&n||(Je=(Je||se("<iframe frameborder='0' width='0' height='0'/>")).appendTo(e.documentElement),e=(Je[0].contentWindow||Je[0].contentDocument).document,e.write(),e.close(),n=S(t,e),Je.detach()),tn[t]=n),n}function C(t,e){return{get:function(){var n=t();if(null!=n)return n?(delete this.get,void 0):(this.get=e).apply(this,arguments)}}}function E(t,e){if(e in t)return e;for(var n=e.charAt(0).toUpperCase()+e.slice(1),i=e,r=dn.length;r--;)if(e=dn[r]+n,e in t)return e;return i}function $(t,e){for(var n,i,r,s=[],o=0,a=t.length;a>o;o++)i=t[o],i.style&&(s[o]=se._data(i,"olddisplay"),n=i.style.display,e?(s[o]||"none"!==n||(i.style.display=""),""===i.style.display&&Ae(i)&&(s[o]=se._data(i,"olddisplay",T(i.nodeName)))):s[o]||(r=Ae(i),(n&&"none"!==n||!r)&&se._data(i,"olddisplay",r?n:se.css(i,"display"))));for(o=0;a>o;o++)i=t[o],i.style&&(e&&"none"!==i.style.display&&""!==i.style.display||(i.style.display=e?s[o]||"":"none"));return t}function A(t,e,n){var i=cn.exec(e);return i?Math.max(0,i[1]-(n||0))+(i[2]||"px"):e}function N(t,e,n,i,r){for(var s=n===(i?"border":"content")?4:"width"===e?1:0,o=0;4>s;s+=2)"margin"===n&&(o+=se.css(t,n+$e[s],!0,r)),i?("content"===n&&(o-=se.css(t,"padding"+$e[s],!0,r)),"margin"!==n&&(o-=se.css(t,"border"+$e[s]+"Width",!0,r))):(o+=se.css(t,"padding"+$e[s],!0,r),"padding"!==n&&(o+=se.css(t,"border"+$e[s]+"Width",!0,r)));return o}function L(t,e,n){var i=!0,r="width"===e?t.offsetWidth:t.offsetHeight,s=en(t),o=ie.boxSizing()&&"border-box"===se.css(t,"boxSizing",!1,s);if(0>=r||null==r){if(r=nn(t,e,s),(0>r||null==r)&&(r=t.style[e]),sn.test(r))return r;i=o&&(ie.boxSizingReliable()||r===t.style[e]),r=parseFloat(r)||0}return r+N(t,e,n||(o?"border":"content"),i,s)+"px"}function M(t,e,n,i,r){return new M.prototype.init(t,e,n,i,r)}function I(){return setTimeout(function(){bn=void 0}),bn=se.now()}function R(t,e){var n,i={height:t},r=0;for(e=e?1:0;4>r;r+=2-e)n=$e[r],i["margin"+n]=i["padding"+n]=t;return e&&(i.opacity=i.width=t),i}function D(t,e,n){for(var i,r=(wn[e]||[]).concat(wn["*"]),s=0,o=r.length;o>s;s++)if(i=r[s].call(n,e,t))return i}function K(t,e,n){var i,r,s,o,a,l,u,c,f=this,h={},p=t.style,d=t.nodeType&&Ae(t),b=se._data(t,"fxshow");n.queue||(a=se._queueHooks(t,"fx"),null==a.unqueued&&(a.unqueued=0,l=a.empty.fire,a.empty.fire=function(){a.unqueued||l()}),a.unqueued++,f.always(function(){f.always(function(){a.unqueued--,se.queue(t,"fx").length||a.empty.fire()})})),1===t.nodeType&&("height"in e||"width"in e)&&(n.overflow=[p.overflow,p.overflowX,p.overflowY],u=se.css(t,"display"),c=T(t.nodeName),"none"===u&&(u=c),"inline"===u&&"none"===se.css(t,"float")&&(ie.inlineBlockNeedsLayout&&"inline"!==c?p.zoom=1:p.display="inline-block")),n.overflow&&(p.overflow="hidden",ie.shrinkWrapBlocks()||f.always(function(){p.overflow=n.overflow[0],p.overflowX=n.overflow[1],p.overflowY=n.overflow[2]}));for(i in e)if(r=e[i],gn.exec(r)){if(delete e[i],s=s||"toggle"===r,r===(d?"hide":"show")){if("show"!==r||!b||void 0===b[i])continue;d=!0}h[i]=b&&b[i]||se.style(t,i)}if(!se.isEmptyObject(h)){b?"hidden"in b&&(d=b.hidden):b=se._data(t,"fxshow",{}),s&&(b.hidden=!d),d?se(t).show():f.done(function(){se(t).hide()}),f.done(function(){var e;se._removeData(t,"fxshow");for(e in h)se.style(t,e,h[e])});for(i in h)o=D(d?b[i]:0,i,f),i in b||(b[i]=o.start,d&&(o.end=o.start,o.start="width"===i||"height"===i?1:0))}}function F(t,e){var n,i,r,s,o;for(n in t)if(i=se.camelCase(n),r=e[i],s=t[n],se.isArray(s)&&(r=s[1],s=t[n]=s[0]),n!==i&&(t[i]=s,delete t[n]),o=se.cssHooks[i],o&&"expand"in o){s=o.expand(s),delete t[i];for(n in s)n in t||(t[n]=s[n],e[n]=r)}else e[i]=r}function B(t,e,n){var i,r,s=0,o=_n.length,a=se.Deferred().always(function(){delete l.elem}),l=function(){if(r)return!1;for(var e=bn||I(),n=Math.max(0,u.startTime+u.duration-e),i=n/u.duration||0,s=1-i,o=0,l=u.tweens.length;l>o;o++)u.tweens[o].run(s);return a.notifyWith(t,[u,s,n]),1>s&&l?n:(a.resolveWith(t,[u]),!1)},u=a.promise({elem:t,props:se.extend({},e),opts:se.extend(!0,{specialEasing:{}},n),originalProperties:e,originalOptions:n,startTime:bn||I(),duration:n.duration,tweens:[],createTween:function(e,n){var i=se.Tween(t,u.opts,e,n,u.opts.specialEasing[e]||u.opts.easing);return u.tweens.push(i),i},stop:function(e){var n=0,i=e?u.tweens.length:0;if(r)return this;for(r=!0;i>n;n++)u.tweens[n].run(1);return e?a.resolveWith(t,[u,e]):a.rejectWith(t,[u,e]),this}}),c=u.props;for(F(c,u.opts.specialEasing);o>s;s++)if(i=_n[s].call(u,t,c,u.opts))return i;return se.map(c,D,u),se.isFunction(u.opts.start)&&u.opts.start.call(t,u),se.fx.timer(se.extend(l,{elem:t,anim:u,queue:u.opts.queue})),u.progress(u.opts.progress).done(u.opts.done,u.opts.complete).fail(u.opts.fail).always(u.opts.always)}function P(t){return function(e,n){"string"!=typeof e&&(n=e,e="*");var i,r=0,s=e.toLowerCase().match(_e)||[];if(se.isFunction(n))for(;i=s[r++];)"+"===i.charAt(0)?(i=i.slice(1)||"*",(t[i]=t[i]||[]).unshift(n)):(t[i]=t[i]||[]).push(n)}}function O(t,e,n,i){function r(a){var l;return s[a]=!0,se.each(t[a]||[],function(t,a){var u=a(e,n,i);return"string"!=typeof u||o||s[u]?o?!(l=u):void 0:(e.dataTypes.unshift(u),r(u),!1)}),l}var s={},o=t===Hn;return r(e.dataTypes[0])||!s["*"]&&r("*")}function j(t,e){var n,i,r=se.ajaxSettings.flatOptions||{};for(i in e)void 0!==e[i]&&((r[i]?t:n||(n={}))[i]=e[i]);return n&&se.extend(!0,t,n),t}function G(t,e,n){for(var i,r,s,o,a=t.contents,l=t.dataTypes;"*"===l[0];)l.shift(),void 0===r&&(r=t.mimeType||e.getResponseHeader("Content-Type"));if(r)for(o in a)if(a[o]&&a[o].test(r)){l.unshift(o);break}if(l[0]in n)s=l[0];else{for(o in n){if(!l[0]||t.converters[o+" "+l[0]]){s=o;break}i||(i=o)}s=s||i}return s?(s!==l[0]&&l.unshift(s),n[s]):void 0}function q(t,e,n,i){var r,s,o,a,l,u={},c=t.dataTypes.slice();if(c[1])for(o in t.converters)u[o.toLowerCase()]=t.converters[o];for(s=c.shift();s;)if(t.responseFields[s]&&(n[t.responseFields[s]]=e),!l&&i&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),l=s,s=c.shift())if("*"===s)s=l;else if("*"!==l&&l!==s){if(o=u[l+" "+s]||u["* "+s],!o)for(r in u)if(a=r.split(" "),a[1]===s&&(o=u[l+" "+a[0]]||u["* "+a[0]])){o===!0?o=u[r]:u[r]!==!0&&(s=a[0],c.unshift(a[1]));break}if(o!==!0)if(o&&t["throws"])e=o(e);else try{e=o(e)}catch(f){return{state:"parsererror",error:o?f:"No conversion from "+l+" to "+s}}}return{state:"success",data:e}}function z(t,e,n,i){var r;if(se.isArray(e))se.each(e,function(e,r){n||Xn.test(t)?i(t,r):z(t+"["+("object"==typeof r?e:"")+"]",r,n,i)});else if(n||"object"!==se.type(e))i(t,e);else for(r in e)z(t+"["+r+"]",e[r],n,i)}function H(){try{return new t.XMLHttpRequest}catch(e){}}function U(){try{return new t.ActiveXObject("Microsoft.XMLHTTP")}catch(e){}}function W(t){return se.isWindow(t)?t:9===t.nodeType?t.defaultView||t.parentWindow:!1}var V=[],X=V.slice,Q=V.concat,Y=V.push,Z=V.indexOf,J={},te=J.toString,ee=J.hasOwnProperty,ne="".trim,ie={},re="1.11.0",se=function(t,e){return new se.fn.init(t,e)},oe=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,ae=/^-ms-/,le=/-([\da-z])/gi,ue=function(t,e){return e.toUpperCase()};se.fn=se.prototype={jquery:re,constructor:se,selector:"",length:0,toArray:function(){return X.call(this)},get:function(t){return null!=t?0>t?this[t+this.length]:this[t]:X.call(this)},pushStack:function(t){var e=se.merge(this.constructor(),t);return e.prevObject=this,e.context=this.context,e},each:function(t,e){return se.each(this,t,e)},map:function(t){return this.pushStack(se.map(this,function(e,n){return t.call(e,n,e)}))},slice:function(){return this.pushStack(X.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(t){var e=this.length,n=+t+(0>t?e:0);return this.pushStack(n>=0&&e>n?[this[n]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:Y,sort:V.sort,splice:V.splice},se.extend=se.fn.extend=function(){var t,e,n,i,r,s,o=arguments[0]||{},a=1,l=arguments.length,u=!1;for("boolean"==typeof o&&(u=o,o=arguments[a]||{},a++),"object"==typeof o||se.isFunction(o)||(o={}),a===l&&(o=this,a--);l>a;a++)if(null!=(r=arguments[a]))for(i in r)t=o[i],n=r[i],o!==n&&(u&&n&&(se.isPlainObject(n)||(e=se.isArray(n)))?(e?(e=!1,s=t&&se.isArray(t)?t:[]):s=t&&se.isPlainObject(t)?t:{},o[i]=se.extend(u,s,n)):void 0!==n&&(o[i]=n));return o},se.extend({expando:"jQuery"+(re+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isFunction:function(t){return"function"===se.type(t)},isArray:Array.isArray||function(t){return"array"===se.type(t)},isWindow:function(t){return null!=t&&t==t.window},isNumeric:function(t){return t-parseFloat(t)>=0},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},isPlainObject:function(t){var e;if(!t||"object"!==se.type(t)||t.nodeType||se.isWindow(t))return!1;try{if(t.constructor&&!ee.call(t,"constructor")&&!ee.call(t.constructor.prototype,"isPrototypeOf"))return!1}catch(n){return!1}if(ie.ownLast)for(e in t)return ee.call(t,e);for(e in t);return void 0===e||ee.call(t,e)},type:function(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?J[te.call(t)]||"object":typeof t},globalEval:function(e){e&&se.trim(e)&&(t.execScript||function(e){t.eval.call(t,e)})(e)},camelCase:function(t){return t.replace(ae,"ms-").replace(le,ue)},nodeName:function(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()},each:function(t,e,i){var r,s=0,o=t.length,a=n(t);if(i){if(a)for(;o>s&&(r=e.apply(t[s],i),r!==!1);s++);else for(s in t)if(r=e.apply(t[s],i),r===!1)break}else if(a)for(;o>s&&(r=e.call(t[s],s,t[s]),r!==!1);s++);else for(s in t)if(r=e.call(t[s],s,t[s]),r===!1)break;return t},trim:ne&&!ne.call("﻿ ")?function(t){return null==t?"":ne.call(t)}:function(t){return null==t?"":(t+"").replace(oe,"")},makeArray:function(t,e){var i=e||[];return null!=t&&(n(Object(t))?se.merge(i,"string"==typeof t?[t]:t):Y.call(i,t)),i},inArray:function(t,e,n){var i;if(e){if(Z)return Z.call(e,t,n);for(i=e.length,n=n?0>n?Math.max(0,i+n):n:0;i>n;n++)if(n in e&&e[n]===t)return n}return-1},merge:function(t,e){for(var n=+e.length,i=0,r=t.length;n>i;)t[r++]=e[i++];if(n!==n)for(;void 0!==e[i];)t[r++]=e[i++];return t.length=r,t},grep:function(t,e,n){for(var i,r=[],s=0,o=t.length,a=!n;o>s;s++)i=!e(t[s],s),i!==a&&r.push(t[s]);return r},map:function(t,e,i){var r,s=0,o=t.length,a=n(t),l=[];if(a)for(;o>s;s++)r=e(t[s],s,i),null!=r&&l.push(r);else for(s in t)r=e(t[s],s,i),null!=r&&l.push(r);return Q.apply([],l)},guid:1,proxy:function(t,e){var n,i,r;return"string"==typeof e&&(r=t[e],e=t,t=r),se.isFunction(t)?(n=X.call(arguments,2),i=function(){return t.apply(e||this,n.concat(X.call(arguments)))},i.guid=t.guid=t.guid||se.guid++,i):void 0},now:function(){return+new Date},support:ie}),se.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(t,e){J["[object "+e+"]"]=e.toLowerCase()});var ce=function(t){function e(t,e,n,i){var r,s,o,a,l,u,f,d,b,m;if((e?e.ownerDocument||e:O)!==M&&L(e),e=e||M,n=n||[],!t||"string"!=typeof t)return n;if(1!==(a=e.nodeType)&&9!==a)return[];if(R&&!i){if(r=ve.exec(t))if(o=r[1]){if(9===a){if(s=e.getElementById(o),!s||!s.parentNode)return n;if(s.id===o)return n.push(s),n}else if(e.ownerDocument&&(s=e.ownerDocument.getElementById(o))&&B(e,s)&&s.id===o)return n.push(s),n}else{if(r[2])return J.apply(n,e.getElementsByTagName(t)),n;if((o=r[3])&&x.getElementsByClassName&&e.getElementsByClassName)return J.apply(n,e.getElementsByClassName(o)),n}if(x.qsa&&(!D||!D.test(t))){if(d=f=P,b=e,m=9===a&&t,1===a&&"object"!==e.nodeName.toLowerCase()){for(u=h(t),(f=e.getAttribute("id"))?d=f.replace(_e,"\\$&"):e.setAttribute("id",d),d="[id='"+d+"'] ",l=u.length;l--;)u[l]=d+p(u[l]);b=ye.test(t)&&c(e.parentNode)||e,m=u.join(",")}if(m)try{return J.apply(n,b.querySelectorAll(m)),n}catch(g){}finally{f||e.removeAttribute("id")}}}return w(t.replace(le,"$1"),e,n,i)}function n(){function t(n,i){return e.push(n+" ")>S.cacheLength&&delete t[e.shift()],t[n+" "]=i}var e=[];return t}function i(t){return t[P]=!0,t}function r(t){var e=M.createElement("div");try{return!!t(e)}catch(n){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function s(t,e){for(var n=t.split("|"),i=t.length;i--;)S.attrHandle[n[i]]=e}function o(t,e){var n=e&&t,i=n&&1===t.nodeType&&1===e.nodeType&&(~e.sourceIndex||V)-(~t.sourceIndex||V);if(i)return i;if(n)for(;n=n.nextSibling;)if(n===e)return-1;return t?1:-1}function a(t){return function(e){var n=e.nodeName.toLowerCase();return"input"===n&&e.type===t}}function l(t){return function(e){var n=e.nodeName.toLowerCase();return("input"===n||"button"===n)&&e.type===t}}function u(t){return i(function(e){return e=+e,i(function(n,i){for(var r,s=t([],n.length,e),o=s.length;o--;)n[r=s[o]]&&(n[r]=!(i[r]=n[r]))})})}function c(t){return t&&typeof t.getElementsByTagName!==W&&t}function f(){}function h(t,n){var i,r,s,o,a,l,u,c=z[t+" "];if(c)return n?0:c.slice(0);for(a=t,l=[],u=S.preFilter;a;){(!i||(r=ue.exec(a)))&&(r&&(a=a.slice(r[0].length)||a),l.push(s=[])),i=!1,(r=ce.exec(a))&&(i=r.shift(),s.push({value:i,type:r[0].replace(le," ")}),a=a.slice(i.length));for(o in S.filter)!(r=de[o].exec(a))||u[o]&&!(r=u[o](r))||(i=r.shift(),s.push({value:i,type:o,matches:r}),a=a.slice(i.length));if(!i)break}return n?a.length:a?e.error(t):z(t,l).slice(0)}function p(t){for(var e=0,n=t.length,i="";n>e;e++)i+=t[e].value;return i}function d(t,e,n){var i=e.dir,r=n&&"parentNode"===i,s=G++;return e.first?function(e,n,s){for(;e=e[i];)if(1===e.nodeType||r)return t(e,n,s)}:function(e,n,o){var a,l,u=[j,s];if(o){for(;e=e[i];)if((1===e.nodeType||r)&&t(e,n,o))return!0}else for(;e=e[i];)if(1===e.nodeType||r){if(l=e[P]||(e[P]={}),(a=l[i])&&a[0]===j&&a[1]===s)return u[2]=a[2];if(l[i]=u,u[2]=t(e,n,o))return!0}}}function b(t){return t.length>1?function(e,n,i){for(var r=t.length;r--;)if(!t[r](e,n,i))return!1;return!0}:t[0]}function m(t,e,n,i,r){for(var s,o=[],a=0,l=t.length,u=null!=e;l>a;a++)(s=t[a])&&(!n||n(s,i,r))&&(o.push(s),u&&e.push(a));return o}function g(t,e,n,r,s,o){return r&&!r[P]&&(r=g(r)),s&&!s[P]&&(s=g(s,o)),i(function(i,o,a,l){var u,c,f,h=[],p=[],d=o.length,b=i||_(e||"*",a.nodeType?[a]:a,[]),g=!t||!i&&e?b:m(b,h,t,a,l),v=n?s||(i?t:d||r)?[]:o:g;if(n&&n(g,v,a,l),r)for(u=m(v,p),r(u,[],a,l),c=u.length;c--;)(f=u[c])&&(v[p[c]]=!(g[p[c]]=f));if(i){if(s||t){if(s){for(u=[],c=v.length;c--;)(f=v[c])&&u.push(g[c]=f);s(null,v=[],u,l)}for(c=v.length;c--;)(f=v[c])&&(u=s?ee.call(i,f):h[c])>-1&&(i[u]=!(o[u]=f))}}else v=m(v===o?v.splice(d,v.length):v),s?s(null,o,v,l):J.apply(o,v)})}function v(t){for(var e,n,i,r=t.length,s=S.relative[t[0].type],o=s||S.relative[" "],a=s?1:0,l=d(function(t){return t===e},o,!0),u=d(function(t){return ee.call(e,t)>-1},o,!0),c=[function(t,n,i){return!s&&(i||n!==$)||((e=n).nodeType?l(t,n,i):u(t,n,i))}];r>a;a++)if(n=S.relative[t[a].type])c=[d(b(c),n)];else{if(n=S.filter[t[a].type].apply(null,t[a].matches),n[P]){for(i=++a;r>i&&!S.relative[t[i].type];i++);return g(a>1&&b(c),a>1&&p(t.slice(0,a-1).concat({value:" "===t[a-2].type?"*":""})).replace(le,"$1"),n,i>a&&v(t.slice(a,i)),r>i&&v(t=t.slice(i)),r>i&&p(t))}c.push(n)}return b(c)}function y(t,n){var r=n.length>0,s=t.length>0,o=function(i,o,a,l,u){var c,f,h,p=0,d="0",b=i&&[],g=[],v=$,y=i||s&&S.find.TAG("*",u),_=j+=null==v?1:Math.random()||.1,w=y.length;for(u&&($=o!==M&&o);d!==w&&null!=(c=y[d]);d++){if(s&&c){for(f=0;h=t[f++];)if(h(c,o,a)){l.push(c);break}u&&(j=_)}r&&((c=!h&&c)&&p--,i&&b.push(c))}if(p+=d,r&&d!==p){for(f=0;h=n[f++];)h(b,g,o,a);if(i){if(p>0)for(;d--;)b[d]||g[d]||(g[d]=Y.call(l));g=m(g)}J.apply(l,g),u&&!i&&g.length>0&&p+n.length>1&&e.uniqueSort(l)}return u&&(j=_,$=v),b};return r?i(o):o}function _(t,n,i){for(var r=0,s=n.length;s>r;r++)e(t,n[r],i);return i}function w(t,e,n,i){var r,s,o,a,l,u=h(t);if(!i&&1===u.length){if(s=u[0]=u[0].slice(0),s.length>2&&"ID"===(o=s[0]).type&&x.getById&&9===e.nodeType&&R&&S.relative[s[1].type]){if(e=(S.find.ID(o.matches[0].replace(we,ke),e)||[])[0],!e)return n;t=t.slice(s.shift().value.length)}for(r=de.needsContext.test(t)?0:s.length;r--&&(o=s[r],!S.relative[a=o.type]);)if((l=S.find[a])&&(i=l(o.matches[0].replace(we,ke),ye.test(s[0].type)&&c(e.parentNode)||e))){if(s.splice(r,1),t=i.length&&p(s),!t)return J.apply(n,i),n;break}}return E(t,u)(i,e,!R,n,ye.test(t)&&c(e.parentNode)||e),n}var k,x,S,T,C,E,$,A,N,L,M,I,R,D,K,F,B,P="sizzle"+-new Date,O=t.document,j=0,G=0,q=n(),z=n(),H=n(),U=function(t,e){return t===e&&(N=!0),0},W="undefined",V=1<<31,X={}.hasOwnProperty,Q=[],Y=Q.pop,Z=Q.push,J=Q.push,te=Q.slice,ee=Q.indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(this[e]===t)return e;return-1},ne="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",ie="[\\x20\\t\\r\\n\\f]",re="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",se=re.replace("w","w#"),oe="\\["+ie+"*("+re+")"+ie+"*(?:([*^$|!~]?=)"+ie+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+se+")|)|)"+ie+"*\\]",ae=":("+re+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+oe.replace(3,8)+")*)|.*)\\)|)",le=new RegExp("^"+ie+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ie+"+$","g"),ue=new RegExp("^"+ie+"*,"+ie+"*"),ce=new RegExp("^"+ie+"*([>+~]|"+ie+")"+ie+"*"),fe=new RegExp("="+ie+"*([^\\]'\"]*?)"+ie+"*\\]","g"),he=new RegExp(ae),pe=new RegExp("^"+se+"$"),de={ID:new RegExp("^#("+re+")"),CLASS:new RegExp("^\\.("+re+")"),TAG:new RegExp("^("+re.replace("w","w*")+")"),ATTR:new RegExp("^"+oe),PSEUDO:new RegExp("^"+ae),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ie+"*(even|odd|(([+-]|)(\\d*)n|)"+ie+"*(?:([+-]|)"+ie+"*(\\d+)|))"+ie+"*\\)|)","i"),bool:new RegExp("^(?:"+ne+")$","i"),needsContext:new RegExp("^"+ie+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ie+"*((?:-\\d)?\\d*)"+ie+"*\\)|)(?=[^-]|$)","i")},be=/^(?:input|select|textarea|button)$/i,me=/^h\d$/i,ge=/^[^{]+\{\s*\[native \w/,ve=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ye=/[+~]/,_e=/'|\\/g,we=new RegExp("\\\\([\\da-f]{1,6}"+ie+"?|("+ie+")|.)","ig"),ke=function(t,e,n){var i="0x"+e-65536;return i!==i||n?e:0>i?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,1023&i|56320)};try{J.apply(Q=te.call(O.childNodes),O.childNodes),Q[O.childNodes.length].nodeType}catch(xe){J={apply:Q.length?function(t,e){Z.apply(t,te.call(e))}:function(t,e){for(var n=t.length,i=0;t[n++]=e[i++];);t.length=n-1}}}x=e.support={},C=e.isXML=function(t){var e=t&&(t.ownerDocument||t).documentElement;return e?"HTML"!==e.nodeName:!1},L=e.setDocument=function(t){var e,n=t?t.ownerDocument||t:O,i=n.defaultView;return n!==M&&9===n.nodeType&&n.documentElement?(M=n,I=n.documentElement,R=!C(n),i&&i!==i.top&&(i.addEventListener?i.addEventListener("unload",function(){L()},!1):i.attachEvent&&i.attachEvent("onunload",function(){L()})),x.attributes=r(function(t){return t.className="i",!t.getAttribute("className")}),x.getElementsByTagName=r(function(t){return t.appendChild(n.createComment("")),!t.getElementsByTagName("*").length}),x.getElementsByClassName=ge.test(n.getElementsByClassName)&&r(function(t){return t.innerHTML="<div class='a'></div><div class='a i'></div>",t.firstChild.className="i",2===t.getElementsByClassName("i").length}),x.getById=r(function(t){return I.appendChild(t).id=P,!n.getElementsByName||!n.getElementsByName(P).length}),x.getById?(S.find.ID=function(t,e){if(typeof e.getElementById!==W&&R){var n=e.getElementById(t);return n&&n.parentNode?[n]:[]}},S.filter.ID=function(t){var e=t.replace(we,ke);return function(t){return t.getAttribute("id")===e}}):(delete S.find.ID,S.filter.ID=function(t){var e=t.replace(we,ke);return function(t){var n=typeof t.getAttributeNode!==W&&t.getAttributeNode("id");return n&&n.value===e}}),S.find.TAG=x.getElementsByTagName?function(t,e){return typeof e.getElementsByTagName!==W?e.getElementsByTagName(t):void 0}:function(t,e){var n,i=[],r=0,s=e.getElementsByTagName(t);if("*"===t){for(;n=s[r++];)1===n.nodeType&&i.push(n);return i}return s},S.find.CLASS=x.getElementsByClassName&&function(t,e){return typeof e.getElementsByClassName!==W&&R?e.getElementsByClassName(t):void 0},K=[],D=[],(x.qsa=ge.test(n.querySelectorAll))&&(r(function(t){t.innerHTML="<select t=''><option selected=''></option></select>",t.querySelectorAll("[t^='']").length&&D.push("[*^$]="+ie+"*(?:''|\"\")"),t.querySelectorAll("[selected]").length||D.push("\\["+ie+"*(?:value|"+ne+")"),t.querySelectorAll(":checked").length||D.push(":checked")}),r(function(t){var e=n.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),t.querySelectorAll("[name=d]").length&&D.push("name"+ie+"*[*^$|!~]?="),t.querySelectorAll(":enabled").length||D.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),D.push(",.*:")})),(x.matchesSelector=ge.test(F=I.webkitMatchesSelector||I.mozMatchesSelector||I.oMatchesSelector||I.msMatchesSelector))&&r(function(t){x.disconnectedMatch=F.call(t,"div"),F.call(t,"[s!='']:x"),K.push("!=",ae)}),D=D.length&&new RegExp(D.join("|")),K=K.length&&new RegExp(K.join("|")),e=ge.test(I.compareDocumentPosition),B=e||ge.test(I.contains)?function(t,e){var n=9===t.nodeType?t.documentElement:t,i=e&&e.parentNode;return t===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):t.compareDocumentPosition&&16&t.compareDocumentPosition(i)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},U=e?function(t,e){if(t===e)return N=!0,0;var i=!t.compareDocumentPosition-!e.compareDocumentPosition;return i?i:(i=(t.ownerDocument||t)===(e.ownerDocument||e)?t.compareDocumentPosition(e):1,1&i||!x.sortDetached&&e.compareDocumentPosition(t)===i?t===n||t.ownerDocument===O&&B(O,t)?-1:e===n||e.ownerDocument===O&&B(O,e)?1:A?ee.call(A,t)-ee.call(A,e):0:4&i?-1:1)}:function(t,e){if(t===e)return N=!0,0;var i,r=0,s=t.parentNode,a=e.parentNode,l=[t],u=[e];if(!s||!a)return t===n?-1:e===n?1:s?-1:a?1:A?ee.call(A,t)-ee.call(A,e):0;if(s===a)return o(t,e);for(i=t;i=i.parentNode;)l.unshift(i);for(i=e;i=i.parentNode;)u.unshift(i);for(;l[r]===u[r];)r++;return r?o(l[r],u[r]):l[r]===O?-1:u[r]===O?1:0},n):M},e.matches=function(t,n){return e(t,null,null,n)},e.matchesSelector=function(t,n){if((t.ownerDocument||t)!==M&&L(t),n=n.replace(fe,"='$1']"),!(!x.matchesSelector||!R||K&&K.test(n)||D&&D.test(n)))try{var i=F.call(t,n);if(i||x.disconnectedMatch||t.document&&11!==t.document.nodeType)return i}catch(r){}return e(n,M,null,[t]).length>0},e.contains=function(t,e){return(t.ownerDocument||t)!==M&&L(t),B(t,e)},e.attr=function(t,e){(t.ownerDocument||t)!==M&&L(t);var n=S.attrHandle[e.toLowerCase()],i=n&&X.call(S.attrHandle,e.toLowerCase())?n(t,e,!R):void 0;return void 0!==i?i:x.attributes||!R?t.getAttribute(e):(i=t.getAttributeNode(e))&&i.specified?i.value:null},e.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},e.uniqueSort=function(t){var e,n=[],i=0,r=0;if(N=!x.detectDuplicates,A=!x.sortStable&&t.slice(0),t.sort(U),N){for(;e=t[r++];)e===t[r]&&(i=n.push(r));for(;i--;)t.splice(n[i],1)}return A=null,t},T=e.getText=function(t){var e,n="",i=0,r=t.nodeType;if(r){if(1===r||9===r||11===r){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)n+=T(t)}else if(3===r||4===r)return t.nodeValue}else for(;e=t[i++];)n+=T(e);return n},S=e.selectors={cacheLength:50,createPseudo:i,match:de,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(we,ke),t[3]=(t[4]||t[5]||"").replace(we,ke),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||e.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&e.error(t[0]),t},PSEUDO:function(t){var e,n=!t[5]&&t[2];return de.CHILD.test(t[0])?null:(t[3]&&void 0!==t[4]?t[2]=t[4]:n&&he.test(n)&&(e=h(n,!0))&&(e=n.indexOf(")",n.length-e)-n.length)&&(t[0]=t[0].slice(0,e),t[2]=n.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(we,ke).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=q[t+" "];return e||(e=new RegExp("(^|"+ie+")"+t+"("+ie+"|$)"))&&q(t,function(t){return e.test("string"==typeof t.className&&t.className||typeof t.getAttribute!==W&&t.getAttribute("class")||"")})},ATTR:function(t,n,i){return function(r){var s=e.attr(r,t);return null==s?"!="===n:n?(s+="","="===n?s===i:"!="===n?s!==i:"^="===n?i&&0===s.indexOf(i):"*="===n?i&&s.indexOf(i)>-1:"$="===n?i&&s.slice(-i.length)===i:"~="===n?(" "+s+" ").indexOf(i)>-1:"|="===n?s===i||s.slice(0,i.length+1)===i+"-":!1):!0}},CHILD:function(t,e,n,i,r){var s="nth"!==t.slice(0,3),o="last"!==t.slice(-4),a="of-type"===e;return 1===i&&0===r?function(t){return!!t.parentNode}:function(e,n,l){var u,c,f,h,p,d,b=s!==o?"nextSibling":"previousSibling",m=e.parentNode,g=a&&e.nodeName.toLowerCase(),v=!l&&!a;if(m){if(s){for(;b;){for(f=e;f=f[b];)if(a?f.nodeName.toLowerCase()===g:1===f.nodeType)return!1;d=b="only"===t&&!d&&"nextSibling"}return!0}if(d=[o?m.firstChild:m.lastChild],o&&v){for(c=m[P]||(m[P]={}),u=c[t]||[],p=u[0]===j&&u[1],h=u[0]===j&&u[2],f=p&&m.childNodes[p];f=++p&&f&&f[b]||(h=p=0)||d.pop();)if(1===f.nodeType&&++h&&f===e){c[t]=[j,p,h];break}}else if(v&&(u=(e[P]||(e[P]={}))[t])&&u[0]===j)h=u[1];else for(;(f=++p&&f&&f[b]||(h=p=0)||d.pop())&&((a?f.nodeName.toLowerCase()!==g:1!==f.nodeType)||!++h||(v&&((f[P]||(f[P]={}))[t]=[j,h]),f!==e)););return h-=r,h===i||h%i===0&&h/i>=0}}},PSEUDO:function(t,n){var r,s=S.pseudos[t]||S.setFilters[t.toLowerCase()]||e.error("unsupported pseudo: "+t);return s[P]?s(n):s.length>1?(r=[t,t,"",n],S.setFilters.hasOwnProperty(t.toLowerCase())?i(function(t,e){for(var i,r=s(t,n),o=r.length;o--;)i=ee.call(t,r[o]),t[i]=!(e[i]=r[o])}):function(t){return s(t,0,r)}):s}},pseudos:{not:i(function(t){var e=[],n=[],r=E(t.replace(le,"$1"));return r[P]?i(function(t,e,n,i){for(var s,o=r(t,null,i,[]),a=t.length;a--;)(s=o[a])&&(t[a]=!(e[a]=s))}):function(t,i,s){return e[0]=t,r(e,null,s,n),!n.pop()}}),has:i(function(t){return function(n){return e(t,n).length>0}}),contains:i(function(t){return function(e){return(e.textContent||e.innerText||T(e)).indexOf(t)>-1
}}),lang:i(function(t){return pe.test(t||"")||e.error("unsupported lang: "+t),t=t.replace(we,ke).toLowerCase(),function(e){var n;do if(n=R?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return n=n.toLowerCase(),n===t||0===n.indexOf(t+"-");while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var n=t.location&&t.location.hash;return n&&n.slice(1)===e.id},root:function(t){return t===I},focus:function(t){return t===M.activeElement&&(!M.hasFocus||M.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:function(t){return t.disabled===!1},disabled:function(t){return t.disabled===!0},checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,t.selected===!0},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!S.pseudos.empty(t)},header:function(t){return me.test(t.nodeName)},input:function(t){return be.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:u(function(){return[0]}),last:u(function(t,e){return[e-1]}),eq:u(function(t,e,n){return[0>n?n+e:n]}),even:u(function(t,e){for(var n=0;e>n;n+=2)t.push(n);return t}),odd:u(function(t,e){for(var n=1;e>n;n+=2)t.push(n);return t}),lt:u(function(t,e,n){for(var i=0>n?n+e:n;--i>=0;)t.push(i);return t}),gt:u(function(t,e,n){for(var i=0>n?n+e:n;++i<e;)t.push(i);return t})}},S.pseudos.nth=S.pseudos.eq;for(k in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})S.pseudos[k]=a(k);for(k in{submit:!0,reset:!0})S.pseudos[k]=l(k);return f.prototype=S.filters=S.pseudos,S.setFilters=new f,E=e.compile=function(t,e){var n,i=[],r=[],s=H[t+" "];if(!s){for(e||(e=h(t)),n=e.length;n--;)s=v(e[n]),s[P]?i.push(s):r.push(s);s=H(t,y(r,i))}return s},x.sortStable=P.split("").sort(U).join("")===P,x.detectDuplicates=!!N,L(),x.sortDetached=r(function(t){return 1&t.compareDocumentPosition(M.createElement("div"))}),r(function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")})||s("type|href|height|width",function(t,e,n){return n?void 0:t.getAttribute(e,"type"===e.toLowerCase()?1:2)}),x.attributes&&r(function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")})||s("value",function(t,e,n){return n||"input"!==t.nodeName.toLowerCase()?void 0:t.defaultValue}),r(function(t){return null==t.getAttribute("disabled")})||s(ne,function(t,e,n){var i;return n?void 0:t[e]===!0?e.toLowerCase():(i=t.getAttributeNode(e))&&i.specified?i.value:null}),e}(t);se.find=ce,se.expr=ce.selectors,se.expr[":"]=se.expr.pseudos,se.unique=ce.uniqueSort,se.text=ce.getText,se.isXMLDoc=ce.isXML,se.contains=ce.contains;var fe=se.expr.match.needsContext,he=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,pe=/^.[^:#\[\.,]*$/;se.filter=function(t,e,n){var i=e[0];return n&&(t=":not("+t+")"),1===e.length&&1===i.nodeType?se.find.matchesSelector(i,t)?[i]:[]:se.find.matches(t,se.grep(e,function(t){return 1===t.nodeType}))},se.fn.extend({find:function(t){var e,n=[],i=this,r=i.length;if("string"!=typeof t)return this.pushStack(se(t).filter(function(){for(e=0;r>e;e++)if(se.contains(i[e],this))return!0}));for(e=0;r>e;e++)se.find(t,i[e],n);return n=this.pushStack(r>1?se.unique(n):n),n.selector=this.selector?this.selector+" "+t:t,n},filter:function(t){return this.pushStack(i(this,t||[],!1))},not:function(t){return this.pushStack(i(this,t||[],!0))},is:function(t){return!!i(this,"string"==typeof t&&fe.test(t)?se(t):t||[],!1).length}});var de,be=t.document,me=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,ge=se.fn.init=function(t,e){var n,i;if(!t)return this;if("string"==typeof t){if(n="<"===t.charAt(0)&&">"===t.charAt(t.length-1)&&t.length>=3?[null,t,null]:me.exec(t),!n||!n[1]&&e)return!e||e.jquery?(e||de).find(t):this.constructor(e).find(t);if(n[1]){if(e=e instanceof se?e[0]:e,se.merge(this,se.parseHTML(n[1],e&&e.nodeType?e.ownerDocument||e:be,!0)),he.test(n[1])&&se.isPlainObject(e))for(n in e)se.isFunction(this[n])?this[n](e[n]):this.attr(n,e[n]);return this}if(i=be.getElementById(n[2]),i&&i.parentNode){if(i.id!==n[2])return de.find(t);this.length=1,this[0]=i}return this.context=be,this.selector=t,this}return t.nodeType?(this.context=this[0]=t,this.length=1,this):se.isFunction(t)?"undefined"!=typeof de.ready?de.ready(t):t(se):(void 0!==t.selector&&(this.selector=t.selector,this.context=t.context),se.makeArray(t,this))};ge.prototype=se.fn,de=se(be);var ve=/^(?:parents|prev(?:Until|All))/,ye={children:!0,contents:!0,next:!0,prev:!0};se.extend({dir:function(t,e,n){for(var i=[],r=t[e];r&&9!==r.nodeType&&(void 0===n||1!==r.nodeType||!se(r).is(n));)1===r.nodeType&&i.push(r),r=r[e];return i},sibling:function(t,e){for(var n=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&n.push(t);return n}}),se.fn.extend({has:function(t){var e,n=se(t,this),i=n.length;return this.filter(function(){for(e=0;i>e;e++)if(se.contains(this,n[e]))return!0})},closest:function(t,e){for(var n,i=0,r=this.length,s=[],o=fe.test(t)||"string"!=typeof t?se(t,e||this.context):0;r>i;i++)for(n=this[i];n&&n!==e;n=n.parentNode)if(n.nodeType<11&&(o?o.index(n)>-1:1===n.nodeType&&se.find.matchesSelector(n,t))){s.push(n);break}return this.pushStack(s.length>1?se.unique(s):s)},index:function(t){return t?"string"==typeof t?se.inArray(this[0],se(t)):se.inArray(t.jquery?t[0]:t,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(se.unique(se.merge(this.get(),se(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),se.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return se.dir(t,"parentNode")},parentsUntil:function(t,e,n){return se.dir(t,"parentNode",n)},next:function(t){return r(t,"nextSibling")},prev:function(t){return r(t,"previousSibling")},nextAll:function(t){return se.dir(t,"nextSibling")},prevAll:function(t){return se.dir(t,"previousSibling")},nextUntil:function(t,e,n){return se.dir(t,"nextSibling",n)},prevUntil:function(t,e,n){return se.dir(t,"previousSibling",n)},siblings:function(t){return se.sibling((t.parentNode||{}).firstChild,t)},children:function(t){return se.sibling(t.firstChild)},contents:function(t){return se.nodeName(t,"iframe")?t.contentDocument||t.contentWindow.document:se.merge([],t.childNodes)}},function(t,e){se.fn[t]=function(n,i){var r=se.map(this,e,n);return"Until"!==t.slice(-5)&&(i=n),i&&"string"==typeof i&&(r=se.filter(i,r)),this.length>1&&(ye[t]||(r=se.unique(r)),ve.test(t)&&(r=r.reverse())),this.pushStack(r)}});var _e=/\S+/g,we={};se.Callbacks=function(t){t="string"==typeof t?we[t]||s(t):se.extend({},t);var e,n,i,r,o,a,l=[],u=!t.once&&[],c=function(s){for(n=t.memory&&s,i=!0,o=a||0,a=0,r=l.length,e=!0;l&&r>o;o++)if(l[o].apply(s[0],s[1])===!1&&t.stopOnFalse){n=!1;break}e=!1,l&&(u?u.length&&c(u.shift()):n?l=[]:f.disable())},f={add:function(){if(l){var i=l.length;!function s(e){se.each(e,function(e,n){var i=se.type(n);"function"===i?t.unique&&f.has(n)||l.push(n):n&&n.length&&"string"!==i&&s(n)})}(arguments),e?r=l.length:n&&(a=i,c(n))}return this},remove:function(){return l&&se.each(arguments,function(t,n){for(var i;(i=se.inArray(n,l,i))>-1;)l.splice(i,1),e&&(r>=i&&r--,o>=i&&o--)}),this},has:function(t){return t?se.inArray(t,l)>-1:!(!l||!l.length)},empty:function(){return l=[],r=0,this},disable:function(){return l=u=n=void 0,this},disabled:function(){return!l},lock:function(){return u=void 0,n||f.disable(),this},locked:function(){return!u},fireWith:function(t,n){return!l||i&&!u||(n=n||[],n=[t,n.slice?n.slice():n],e?u.push(n):c(n)),this},fire:function(){return f.fireWith(this,arguments),this},fired:function(){return!!i}};return f},se.extend({Deferred:function(t){var e=[["resolve","done",se.Callbacks("once memory"),"resolved"],["reject","fail",se.Callbacks("once memory"),"rejected"],["notify","progress",se.Callbacks("memory")]],n="pending",i={state:function(){return n},always:function(){return r.done(arguments).fail(arguments),this},then:function(){var t=arguments;return se.Deferred(function(n){se.each(e,function(e,s){var o=se.isFunction(t[e])&&t[e];r[s[1]](function(){var t=o&&o.apply(this,arguments);t&&se.isFunction(t.promise)?t.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[s[0]+"With"](this===i?n.promise():this,o?[t]:arguments)})}),t=null}).promise()},promise:function(t){return null!=t?se.extend(t,i):i}},r={};return i.pipe=i.then,se.each(e,function(t,s){var o=s[2],a=s[3];i[s[1]]=o.add,a&&o.add(function(){n=a},e[1^t][2].disable,e[2][2].lock),r[s[0]]=function(){return r[s[0]+"With"](this===r?i:this,arguments),this},r[s[0]+"With"]=o.fireWith}),i.promise(r),t&&t.call(r,r),r},when:function(t){var e,n,i,r=0,s=X.call(arguments),o=s.length,a=1!==o||t&&se.isFunction(t.promise)?o:0,l=1===a?t:se.Deferred(),u=function(t,n,i){return function(r){n[t]=this,i[t]=arguments.length>1?X.call(arguments):r,i===e?l.notifyWith(n,i):--a||l.resolveWith(n,i)}};if(o>1)for(e=new Array(o),n=new Array(o),i=new Array(o);o>r;r++)s[r]&&se.isFunction(s[r].promise)?s[r].promise().done(u(r,i,s)).fail(l.reject).progress(u(r,n,e)):--a;return a||l.resolveWith(i,s),l.promise()}});var ke;se.fn.ready=function(t){return se.ready.promise().done(t),this},se.extend({isReady:!1,readyWait:1,holdReady:function(t){t?se.readyWait++:se.ready(!0)},ready:function(t){if(t===!0?!--se.readyWait:!se.isReady){if(!be.body)return setTimeout(se.ready);se.isReady=!0,t!==!0&&--se.readyWait>0||(ke.resolveWith(be,[se]),se.fn.trigger&&se(be).trigger("ready").off("ready"))}}}),se.ready.promise=function(e){if(!ke)if(ke=se.Deferred(),"complete"===be.readyState)setTimeout(se.ready);else if(be.addEventListener)be.addEventListener("DOMContentLoaded",a,!1),t.addEventListener("load",a,!1);else{be.attachEvent("onreadystatechange",a),t.attachEvent("onload",a);var n=!1;try{n=null==t.frameElement&&be.documentElement}catch(i){}n&&n.doScroll&&!function r(){if(!se.isReady){try{n.doScroll("left")}catch(t){return setTimeout(r,50)}o(),se.ready()}}()}return ke.promise(e)};var xe,Se="undefined";for(xe in se(ie))break;ie.ownLast="0"!==xe,ie.inlineBlockNeedsLayout=!1,se(function(){var t,e,n=be.getElementsByTagName("body")[0];n&&(t=be.createElement("div"),t.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px",e=be.createElement("div"),n.appendChild(t).appendChild(e),typeof e.style.zoom!==Se&&(e.style.cssText="border:0;margin:0;width:1px;padding:1px;display:inline;zoom:1",(ie.inlineBlockNeedsLayout=3===e.offsetWidth)&&(n.style.zoom=1)),n.removeChild(t),t=e=null)}),function(){var t=be.createElement("div");if(null==ie.deleteExpando){ie.deleteExpando=!0;try{delete t.test}catch(e){ie.deleteExpando=!1}}t=null}(),se.acceptData=function(t){var e=se.noData[(t.nodeName+" ").toLowerCase()],n=+t.nodeType||1;return 1!==n&&9!==n?!1:!e||e!==!0&&t.getAttribute("classid")===e};var Te=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Ce=/([A-Z])/g;se.extend({cache:{},noData:{"applet ":!0,"embed ":!0,"object ":"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(t){return t=t.nodeType?se.cache[t[se.expando]]:t[se.expando],!!t&&!u(t)},data:function(t,e,n){return c(t,e,n)},removeData:function(t,e){return f(t,e)},_data:function(t,e,n){return c(t,e,n,!0)},_removeData:function(t,e){return f(t,e,!0)}}),se.fn.extend({data:function(t,e){var n,i,r,s=this[0],o=s&&s.attributes;if(void 0===t){if(this.length&&(r=se.data(s),1===s.nodeType&&!se._data(s,"parsedAttrs"))){for(n=o.length;n--;)i=o[n].name,0===i.indexOf("data-")&&(i=se.camelCase(i.slice(5)),l(s,i,r[i]));se._data(s,"parsedAttrs",!0)}return r}return"object"==typeof t?this.each(function(){se.data(this,t)}):arguments.length>1?this.each(function(){se.data(this,t,e)}):s?l(s,t,se.data(s,t)):void 0},removeData:function(t){return this.each(function(){se.removeData(this,t)})}}),se.extend({queue:function(t,e,n){var i;return t?(e=(e||"fx")+"queue",i=se._data(t,e),n&&(!i||se.isArray(n)?i=se._data(t,e,se.makeArray(n)):i.push(n)),i||[]):void 0},dequeue:function(t,e){e=e||"fx";var n=se.queue(t,e),i=n.length,r=n.shift(),s=se._queueHooks(t,e),o=function(){se.dequeue(t,e)};"inprogress"===r&&(r=n.shift(),i--),r&&("fx"===e&&n.unshift("inprogress"),delete s.stop,r.call(t,o,s)),!i&&s&&s.empty.fire()},_queueHooks:function(t,e){var n=e+"queueHooks";return se._data(t,n)||se._data(t,n,{empty:se.Callbacks("once memory").add(function(){se._removeData(t,e+"queue"),se._removeData(t,n)})})}}),se.fn.extend({queue:function(t,e){var n=2;return"string"!=typeof t&&(e=t,t="fx",n--),arguments.length<n?se.queue(this[0],t):void 0===e?this:this.each(function(){var n=se.queue(this,t,e);se._queueHooks(this,t),"fx"===t&&"inprogress"!==n[0]&&se.dequeue(this,t)})},dequeue:function(t){return this.each(function(){se.dequeue(this,t)})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){var n,i=1,r=se.Deferred(),s=this,o=this.length,a=function(){--i||r.resolveWith(s,[s])};for("string"!=typeof t&&(e=t,t=void 0),t=t||"fx";o--;)n=se._data(s[o],t+"queueHooks"),n&&n.empty&&(i++,n.empty.add(a));return a(),r.promise(e)}});var Ee=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,$e=["Top","Right","Bottom","Left"],Ae=function(t,e){return t=e||t,"none"===se.css(t,"display")||!se.contains(t.ownerDocument,t)},Ne=se.access=function(t,e,n,i,r,s,o){var a=0,l=t.length,u=null==n;if("object"===se.type(n)){r=!0;for(a in n)se.access(t,e,a,n[a],!0,s,o)}else if(void 0!==i&&(r=!0,se.isFunction(i)||(o=!0),u&&(o?(e.call(t,i),e=null):(u=e,e=function(t,e,n){return u.call(se(t),n)})),e))for(;l>a;a++)e(t[a],n,o?i:i.call(t[a],a,e(t[a],n)));return r?t:u?e.call(t):l?e(t[0],n):s},Le=/^(?:checkbox|radio)$/i;!function(){var t=be.createDocumentFragment(),e=be.createElement("div"),n=be.createElement("input");if(e.setAttribute("className","t"),e.innerHTML="  <link/><table></table><a href='/a'>a</a>",ie.leadingWhitespace=3===e.firstChild.nodeType,ie.tbody=!e.getElementsByTagName("tbody").length,ie.htmlSerialize=!!e.getElementsByTagName("link").length,ie.html5Clone="<:nav></:nav>"!==be.createElement("nav").cloneNode(!0).outerHTML,n.type="checkbox",n.checked=!0,t.appendChild(n),ie.appendChecked=n.checked,e.innerHTML="<textarea>x</textarea>",ie.noCloneChecked=!!e.cloneNode(!0).lastChild.defaultValue,t.appendChild(e),e.innerHTML="<input type='radio' checked='checked' name='t'/>",ie.checkClone=e.cloneNode(!0).cloneNode(!0).lastChild.checked,ie.noCloneEvent=!0,e.attachEvent&&(e.attachEvent("onclick",function(){ie.noCloneEvent=!1}),e.cloneNode(!0).click()),null==ie.deleteExpando){ie.deleteExpando=!0;try{delete e.test}catch(i){ie.deleteExpando=!1}}t=e=n=null}(),function(){var e,n,i=be.createElement("div");for(e in{submit:!0,change:!0,focusin:!0})n="on"+e,(ie[e+"Bubbles"]=n in t)||(i.setAttribute(n,"t"),ie[e+"Bubbles"]=i.attributes[n].expando===!1);i=null}();var Me=/^(?:input|select|textarea)$/i,Ie=/^key/,Re=/^(?:mouse|contextmenu)|click/,De=/^(?:focusinfocus|focusoutblur)$/,Ke=/^([^.]*)(?:\.(.+)|)$/;se.event={global:{},add:function(t,e,n,i,r){var s,o,a,l,u,c,f,h,p,d,b,m=se._data(t);if(m){for(n.handler&&(l=n,n=l.handler,r=l.selector),n.guid||(n.guid=se.guid++),(o=m.events)||(o=m.events={}),(c=m.handle)||(c=m.handle=function(t){return typeof se===Se||t&&se.event.triggered===t.type?void 0:se.event.dispatch.apply(c.elem,arguments)},c.elem=t),e=(e||"").match(_e)||[""],a=e.length;a--;)s=Ke.exec(e[a])||[],p=b=s[1],d=(s[2]||"").split(".").sort(),p&&(u=se.event.special[p]||{},p=(r?u.delegateType:u.bindType)||p,u=se.event.special[p]||{},f=se.extend({type:p,origType:b,data:i,handler:n,guid:n.guid,selector:r,needsContext:r&&se.expr.match.needsContext.test(r),namespace:d.join(".")},l),(h=o[p])||(h=o[p]=[],h.delegateCount=0,u.setup&&u.setup.call(t,i,d,c)!==!1||(t.addEventListener?t.addEventListener(p,c,!1):t.attachEvent&&t.attachEvent("on"+p,c))),u.add&&(u.add.call(t,f),f.handler.guid||(f.handler.guid=n.guid)),r?h.splice(h.delegateCount++,0,f):h.push(f),se.event.global[p]=!0);t=null}},remove:function(t,e,n,i,r){var s,o,a,l,u,c,f,h,p,d,b,m=se.hasData(t)&&se._data(t);if(m&&(c=m.events)){for(e=(e||"").match(_e)||[""],u=e.length;u--;)if(a=Ke.exec(e[u])||[],p=b=a[1],d=(a[2]||"").split(".").sort(),p){for(f=se.event.special[p]||{},p=(i?f.delegateType:f.bindType)||p,h=c[p]||[],a=a[2]&&new RegExp("(^|\\.)"+d.join("\\.(?:.*\\.|)")+"(\\.|$)"),l=s=h.length;s--;)o=h[s],!r&&b!==o.origType||n&&n.guid!==o.guid||a&&!a.test(o.namespace)||i&&i!==o.selector&&("**"!==i||!o.selector)||(h.splice(s,1),o.selector&&h.delegateCount--,f.remove&&f.remove.call(t,o));l&&!h.length&&(f.teardown&&f.teardown.call(t,d,m.handle)!==!1||se.removeEvent(t,p,m.handle),delete c[p])}else for(p in c)se.event.remove(t,p+e[u],n,i,!0);se.isEmptyObject(c)&&(delete m.handle,se._removeData(t,"events"))}},trigger:function(e,n,i,r){var s,o,a,l,u,c,f,h=[i||be],p=ee.call(e,"type")?e.type:e,d=ee.call(e,"namespace")?e.namespace.split("."):[];if(a=c=i=i||be,3!==i.nodeType&&8!==i.nodeType&&!De.test(p+se.event.triggered)&&(p.indexOf(".")>=0&&(d=p.split("."),p=d.shift(),d.sort()),o=p.indexOf(":")<0&&"on"+p,e=e[se.expando]?e:new se.Event(p,"object"==typeof e&&e),e.isTrigger=r?2:3,e.namespace=d.join("."),e.namespace_re=e.namespace?new RegExp("(^|\\.)"+d.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=i),n=null==n?[e]:se.makeArray(n,[e]),u=se.event.special[p]||{},r||!u.trigger||u.trigger.apply(i,n)!==!1)){if(!r&&!u.noBubble&&!se.isWindow(i)){for(l=u.delegateType||p,De.test(l+p)||(a=a.parentNode);a;a=a.parentNode)h.push(a),c=a;c===(i.ownerDocument||be)&&h.push(c.defaultView||c.parentWindow||t)}for(f=0;(a=h[f++])&&!e.isPropagationStopped();)e.type=f>1?l:u.bindType||p,s=(se._data(a,"events")||{})[e.type]&&se._data(a,"handle"),s&&s.apply(a,n),s=o&&a[o],s&&s.apply&&se.acceptData(a)&&(e.result=s.apply(a,n),e.result===!1&&e.preventDefault());if(e.type=p,!r&&!e.isDefaultPrevented()&&(!u._default||u._default.apply(h.pop(),n)===!1)&&se.acceptData(i)&&o&&i[p]&&!se.isWindow(i)){c=i[o],c&&(i[o]=null),se.event.triggered=p;try{i[p]()}catch(b){}se.event.triggered=void 0,c&&(i[o]=c)}return e.result}},dispatch:function(t){t=se.event.fix(t);var e,n,i,r,s,o=[],a=X.call(arguments),l=(se._data(this,"events")||{})[t.type]||[],u=se.event.special[t.type]||{};if(a[0]=t,t.delegateTarget=this,!u.preDispatch||u.preDispatch.call(this,t)!==!1){for(o=se.event.handlers.call(this,t,l),e=0;(r=o[e++])&&!t.isPropagationStopped();)for(t.currentTarget=r.elem,s=0;(i=r.handlers[s++])&&!t.isImmediatePropagationStopped();)(!t.namespace_re||t.namespace_re.test(i.namespace))&&(t.handleObj=i,t.data=i.data,n=((se.event.special[i.origType]||{}).handle||i.handler).apply(r.elem,a),void 0!==n&&(t.result=n)===!1&&(t.preventDefault(),t.stopPropagation()));return u.postDispatch&&u.postDispatch.call(this,t),t.result}},handlers:function(t,e){var n,i,r,s,o=[],a=e.delegateCount,l=t.target;if(a&&l.nodeType&&(!t.button||"click"!==t.type))for(;l!=this;l=l.parentNode||this)if(1===l.nodeType&&(l.disabled!==!0||"click"!==t.type)){for(r=[],s=0;a>s;s++)i=e[s],n=i.selector+" ",void 0===r[n]&&(r[n]=i.needsContext?se(n,this).index(l)>=0:se.find(n,this,null,[l]).length),r[n]&&r.push(i);r.length&&o.push({elem:l,handlers:r})}return a<e.length&&o.push({elem:this,handlers:e.slice(a)}),o},fix:function(t){if(t[se.expando])return t;var e,n,i,r=t.type,s=t,o=this.fixHooks[r];for(o||(this.fixHooks[r]=o=Re.test(r)?this.mouseHooks:Ie.test(r)?this.keyHooks:{}),i=o.props?this.props.concat(o.props):this.props,t=new se.Event(s),e=i.length;e--;)n=i[e],t[n]=s[n];return t.target||(t.target=s.srcElement||be),3===t.target.nodeType&&(t.target=t.target.parentNode),t.metaKey=!!t.metaKey,o.filter?o.filter(t,s):t},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(t,e){return null==t.which&&(t.which=null!=e.charCode?e.charCode:e.keyCode),t}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(t,e){var n,i,r,s=e.button,o=e.fromElement;return null==t.pageX&&null!=e.clientX&&(i=t.target.ownerDocument||be,r=i.documentElement,n=i.body,t.pageX=e.clientX+(r&&r.scrollLeft||n&&n.scrollLeft||0)-(r&&r.clientLeft||n&&n.clientLeft||0),t.pageY=e.clientY+(r&&r.scrollTop||n&&n.scrollTop||0)-(r&&r.clientTop||n&&n.clientTop||0)),!t.relatedTarget&&o&&(t.relatedTarget=o===t.target?e.toElement:o),t.which||void 0===s||(t.which=1&s?1:2&s?3:4&s?2:0),t}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==d()&&this.focus)try{return this.focus(),!1}catch(t){}},delegateType:"focusin"},blur:{trigger:function(){return this===d()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return se.nodeName(this,"input")&&"checkbox"===this.type&&this.click?(this.click(),!1):void 0},_default:function(t){return se.nodeName(t.target,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&(t.originalEvent.returnValue=t.result)}}},simulate:function(t,e,n,i){var r=se.extend(new se.Event,n,{type:t,isSimulated:!0,originalEvent:{}});i?se.event.trigger(r,null,e):se.event.dispatch.call(e,r),r.isDefaultPrevented()&&n.preventDefault()}},se.removeEvent=be.removeEventListener?function(t,e,n){t.removeEventListener&&t.removeEventListener(e,n,!1)}:function(t,e,n){var i="on"+e;t.detachEvent&&(typeof t[i]===Se&&(t[i]=null),t.detachEvent(i,n))},se.Event=function(t,e){return this instanceof se.Event?(t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&(t.returnValue===!1||t.getPreventDefault&&t.getPreventDefault())?h:p):this.type=t,e&&se.extend(this,e),this.timeStamp=t&&t.timeStamp||se.now(),this[se.expando]=!0,void 0):new se.Event(t,e)},se.Event.prototype={isDefaultPrevented:p,isPropagationStopped:p,isImmediatePropagationStopped:p,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=h,t&&(t.preventDefault?t.preventDefault():t.returnValue=!1)},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=h,t&&(t.stopPropagation&&t.stopPropagation(),t.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=h,this.stopPropagation()}},se.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(t,e){se.event.special[t]={delegateType:e,bindType:e,handle:function(t){var n,i=this,r=t.relatedTarget,s=t.handleObj;return(!r||r!==i&&!se.contains(i,r))&&(t.type=s.origType,n=s.handler.apply(this,arguments),t.type=e),n}}}),ie.submitBubbles||(se.event.special.submit={setup:function(){return se.nodeName(this,"form")?!1:(se.event.add(this,"click._submit keypress._submit",function(t){var e=t.target,n=se.nodeName(e,"input")||se.nodeName(e,"button")?e.form:void 0;n&&!se._data(n,"submitBubbles")&&(se.event.add(n,"submit._submit",function(t){t._submit_bubble=!0}),se._data(n,"submitBubbles",!0))}),void 0)},postDispatch:function(t){t._submit_bubble&&(delete t._submit_bubble,this.parentNode&&!t.isTrigger&&se.event.simulate("submit",this.parentNode,t,!0))},teardown:function(){return se.nodeName(this,"form")?!1:(se.event.remove(this,"._submit"),void 0)}}),ie.changeBubbles||(se.event.special.change={setup:function(){return Me.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(se.event.add(this,"propertychange._change",function(t){"checked"===t.originalEvent.propertyName&&(this._just_changed=!0)}),se.event.add(this,"click._change",function(t){this._just_changed&&!t.isTrigger&&(this._just_changed=!1),se.event.simulate("change",this,t,!0)})),!1):(se.event.add(this,"beforeactivate._change",function(t){var e=t.target;Me.test(e.nodeName)&&!se._data(e,"changeBubbles")&&(se.event.add(e,"change._change",function(t){!this.parentNode||t.isSimulated||t.isTrigger||se.event.simulate("change",this.parentNode,t,!0)}),se._data(e,"changeBubbles",!0))}),void 0)},handle:function(t){var e=t.target;return this!==e||t.isSimulated||t.isTrigger||"radio"!==e.type&&"checkbox"!==e.type?t.handleObj.handler.apply(this,arguments):void 0},teardown:function(){return se.event.remove(this,"._change"),!Me.test(this.nodeName)}}),ie.focusinBubbles||se.each({focus:"focusin",blur:"focusout"},function(t,e){var n=function(t){se.event.simulate(e,t.target,se.event.fix(t),!0)};se.event.special[e]={setup:function(){var i=this.ownerDocument||this,r=se._data(i,e);r||i.addEventListener(t,n,!0),se._data(i,e,(r||0)+1)},teardown:function(){var i=this.ownerDocument||this,r=se._data(i,e)-1;r?se._data(i,e,r):(i.removeEventListener(t,n,!0),se._removeData(i,e))}}}),se.fn.extend({on:function(t,e,n,i,r){var s,o;if("object"==typeof t){"string"!=typeof e&&(n=n||e,e=void 0);for(s in t)this.on(s,e,n,t[s],r);return this}if(null==n&&null==i?(i=e,n=e=void 0):null==i&&("string"==typeof e?(i=n,n=void 0):(i=n,n=e,e=void 0)),i===!1)i=p;else if(!i)return this;return 1===r&&(o=i,i=function(t){return se().off(t),o.apply(this,arguments)},i.guid=o.guid||(o.guid=se.guid++)),this.each(function(){se.event.add(this,t,i,n,e)})},one:function(t,e,n,i){return this.on(t,e,n,i,1)},off:function(t,e,n){var i,r;if(t&&t.preventDefault&&t.handleObj)return i=t.handleObj,se(t.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof t){for(r in t)this.off(r,e,t[r]);return this}return(e===!1||"function"==typeof e)&&(n=e,e=void 0),n===!1&&(n=p),this.each(function(){se.event.remove(this,t,n,e)})},trigger:function(t,e){return this.each(function(){se.event.trigger(t,e,this)})},triggerHandler:function(t,e){var n=this[0];return n?se.event.trigger(t,e,n,!0):void 0}});var Fe="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",Be=/ jQuery\d+="(?:null|\d+)"/g,Pe=new RegExp("<(?:"+Fe+")[\\s/>]","i"),Oe=/^\s+/,je=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Ge=/<([\w:]+)/,qe=/<tbody/i,ze=/<|&#?\w+;/,He=/<(?:script|style|link)/i,Ue=/checked\s*(?:[^=]|=\s*.checked.)/i,We=/^$|\/(?:java|ecma)script/i,Ve=/^true\/(.*)/,Xe=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,Qe={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:ie.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},Ye=b(be),Ze=Ye.appendChild(be.createElement("div"));Qe.optgroup=Qe.option,Qe.tbody=Qe.tfoot=Qe.colgroup=Qe.caption=Qe.thead,Qe.th=Qe.td,se.extend({clone:function(t,e,n){var i,r,s,o,a,l=se.contains(t.ownerDocument,t);if(ie.html5Clone||se.isXMLDoc(t)||!Pe.test("<"+t.nodeName+">")?s=t.cloneNode(!0):(Ze.innerHTML=t.outerHTML,Ze.removeChild(s=Ze.firstChild)),!(ie.noCloneEvent&&ie.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||se.isXMLDoc(t)))for(i=m(s),a=m(t),o=0;null!=(r=a[o]);++o)i[o]&&x(r,i[o]);if(e)if(n)for(a=a||m(t),i=i||m(s),o=0;null!=(r=a[o]);o++)k(r,i[o]);else k(t,s);return i=m(s,"script"),i.length>0&&w(i,!l&&m(t,"script")),i=a=r=null,s},buildFragment:function(t,e,n,i){for(var r,s,o,a,l,u,c,f=t.length,h=b(e),p=[],d=0;f>d;d++)if(s=t[d],s||0===s)if("object"===se.type(s))se.merge(p,s.nodeType?[s]:s);else if(ze.test(s)){for(a=a||h.appendChild(e.createElement("div")),l=(Ge.exec(s)||["",""])[1].toLowerCase(),c=Qe[l]||Qe._default,a.innerHTML=c[1]+s.replace(je,"<$1></$2>")+c[2],r=c[0];r--;)a=a.lastChild;if(!ie.leadingWhitespace&&Oe.test(s)&&p.push(e.createTextNode(Oe.exec(s)[0])),!ie.tbody)for(s="table"!==l||qe.test(s)?"<table>"!==c[1]||qe.test(s)?0:a:a.firstChild,r=s&&s.childNodes.length;r--;)se.nodeName(u=s.childNodes[r],"tbody")&&!u.childNodes.length&&s.removeChild(u);for(se.merge(p,a.childNodes),a.textContent="";a.firstChild;)a.removeChild(a.firstChild);a=h.lastChild}else p.push(e.createTextNode(s));for(a&&h.removeChild(a),ie.appendChecked||se.grep(m(p,"input"),g),d=0;s=p[d++];)if((!i||-1===se.inArray(s,i))&&(o=se.contains(s.ownerDocument,s),a=m(h.appendChild(s),"script"),o&&w(a),n))for(r=0;s=a[r++];)We.test(s.type||"")&&n.push(s);return a=null,h},cleanData:function(t,e){for(var n,i,r,s,o=0,a=se.expando,l=se.cache,u=ie.deleteExpando,c=se.event.special;null!=(n=t[o]);o++)if((e||se.acceptData(n))&&(r=n[a],s=r&&l[r])){if(s.events)for(i in s.events)c[i]?se.event.remove(n,i):se.removeEvent(n,i,s.handle);l[r]&&(delete l[r],u?delete n[a]:typeof n.removeAttribute!==Se?n.removeAttribute(a):n[a]=null,V.push(r))}}}),se.fn.extend({text:function(t){return Ne(this,function(t){return void 0===t?se.text(this):this.empty().append((this[0]&&this[0].ownerDocument||be).createTextNode(t))},null,t,arguments.length)},append:function(){return this.domManip(arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=v(this,t);e.appendChild(t)}})},prepend:function(){return this.domManip(arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=v(this,t);e.insertBefore(t,e.firstChild)}})},before:function(){return this.domManip(arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this)})},after:function(){return this.domManip(arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)})},remove:function(t,e){for(var n,i=t?se.filter(t,this):this,r=0;null!=(n=i[r]);r++)e||1!==n.nodeType||se.cleanData(m(n)),n.parentNode&&(e&&se.contains(n.ownerDocument,n)&&w(m(n,"script")),n.parentNode.removeChild(n));return this},empty:function(){for(var t,e=0;null!=(t=this[e]);e++){for(1===t.nodeType&&se.cleanData(m(t,!1));t.firstChild;)t.removeChild(t.firstChild);t.options&&se.nodeName(t,"select")&&(t.options.length=0)}return this},clone:function(t,e){return t=null==t?!1:t,e=null==e?t:e,this.map(function(){return se.clone(this,t,e)})},html:function(t){return Ne(this,function(t){var e=this[0]||{},n=0,i=this.length;if(void 0===t)return 1===e.nodeType?e.innerHTML.replace(Be,""):void 0;if(!("string"!=typeof t||He.test(t)||!ie.htmlSerialize&&Pe.test(t)||!ie.leadingWhitespace&&Oe.test(t)||Qe[(Ge.exec(t)||["",""])[1].toLowerCase()])){t=t.replace(je,"<$1></$2>");try{for(;i>n;n++)e=this[n]||{},1===e.nodeType&&(se.cleanData(m(e,!1)),e.innerHTML=t);e=0}catch(r){}}e&&this.empty().append(t)},null,t,arguments.length)},replaceWith:function(){var t=arguments[0];return this.domManip(arguments,function(e){t=this.parentNode,se.cleanData(m(this)),t&&t.replaceChild(e,this)}),t&&(t.length||t.nodeType)?this:this.remove()},detach:function(t){return this.remove(t,!0)},domManip:function(t,e){t=Q.apply([],t);var n,i,r,s,o,a,l=0,u=this.length,c=this,f=u-1,h=t[0],p=se.isFunction(h);if(p||u>1&&"string"==typeof h&&!ie.checkClone&&Ue.test(h))return this.each(function(n){var i=c.eq(n);p&&(t[0]=h.call(this,n,i.html())),i.domManip(t,e)});if(u&&(a=se.buildFragment(t,this[0].ownerDocument,!1,this),n=a.firstChild,1===a.childNodes.length&&(a=n),n)){for(s=se.map(m(a,"script"),y),r=s.length;u>l;l++)i=a,l!==f&&(i=se.clone(i,!0,!0),r&&se.merge(s,m(i,"script"))),e.call(this[l],i,l);if(r)for(o=s[s.length-1].ownerDocument,se.map(s,_),l=0;r>l;l++)i=s[l],We.test(i.type||"")&&!se._data(i,"globalEval")&&se.contains(o,i)&&(i.src?se._evalUrl&&se._evalUrl(i.src):se.globalEval((i.text||i.textContent||i.innerHTML||"").replace(Xe,"")));a=n=null}return this}}),se.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,e){se.fn[t]=function(t){for(var n,i=0,r=[],s=se(t),o=s.length-1;o>=i;i++)n=i===o?this:this.clone(!0),se(s[i])[e](n),Y.apply(r,n.get());return this.pushStack(r)}});var Je,tn={};!function(){var t,e,n=be.createElement("div"),i="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;padding:0;margin:0;border:0";n.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",t=n.getElementsByTagName("a")[0],t.style.cssText="float:left;opacity:.5",ie.opacity=/^0.5/.test(t.style.opacity),ie.cssFloat=!!t.style.cssFloat,n.style.backgroundClip="content-box",n.cloneNode(!0).style.backgroundClip="",ie.clearCloneStyle="content-box"===n.style.backgroundClip,t=n=null,ie.shrinkWrapBlocks=function(){var t,n,r,s;if(null==e){if(t=be.getElementsByTagName("body")[0],!t)return;s="border:0;width:0;height:0;position:absolute;top:0;left:-9999px",n=be.createElement("div"),r=be.createElement("div"),t.appendChild(n).appendChild(r),e=!1,typeof r.style.zoom!==Se&&(r.style.cssText=i+";width:1px;padding:1px;zoom:1",r.innerHTML="<div></div>",r.firstChild.style.width="5px",e=3!==r.offsetWidth),t.removeChild(n),t=n=r=null
}return e}}();var en,nn,rn=/^margin/,sn=new RegExp("^("+Ee+")(?!px)[a-z%]+$","i"),on=/^(top|right|bottom|left)$/;t.getComputedStyle?(en=function(t){return t.ownerDocument.defaultView.getComputedStyle(t,null)},nn=function(t,e,n){var i,r,s,o,a=t.style;return n=n||en(t),o=n?n.getPropertyValue(e)||n[e]:void 0,n&&(""!==o||se.contains(t.ownerDocument,t)||(o=se.style(t,e)),sn.test(o)&&rn.test(e)&&(i=a.width,r=a.minWidth,s=a.maxWidth,a.minWidth=a.maxWidth=a.width=o,o=n.width,a.width=i,a.minWidth=r,a.maxWidth=s)),void 0===o?o:o+""}):be.documentElement.currentStyle&&(en=function(t){return t.currentStyle},nn=function(t,e,n){var i,r,s,o,a=t.style;return n=n||en(t),o=n?n[e]:void 0,null==o&&a&&a[e]&&(o=a[e]),sn.test(o)&&!on.test(e)&&(i=a.left,r=t.runtimeStyle,s=r&&r.left,s&&(r.left=t.currentStyle.left),a.left="fontSize"===e?"1em":o,o=a.pixelLeft+"px",a.left=i,s&&(r.left=s)),void 0===o?o:o+""||"auto"}),function(){function e(){var e,n,i=be.getElementsByTagName("body")[0];i&&(e=be.createElement("div"),n=be.createElement("div"),e.style.cssText=u,i.appendChild(e).appendChild(n),n.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:absolute;display:block;padding:1px;border:1px;width:4px;margin-top:1%;top:1%",se.swap(i,null!=i.style.zoom?{zoom:1}:{},function(){r=4===n.offsetWidth}),s=!0,o=!1,a=!0,t.getComputedStyle&&(o="1%"!==(t.getComputedStyle(n,null)||{}).top,s="4px"===(t.getComputedStyle(n,null)||{width:"4px"}).width),i.removeChild(e),n=i=null)}var n,i,r,s,o,a,l=be.createElement("div"),u="border:0;width:0;height:0;position:absolute;top:0;left:-9999px",c="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;padding:0;margin:0;border:0";l.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",n=l.getElementsByTagName("a")[0],n.style.cssText="float:left;opacity:.5",ie.opacity=/^0.5/.test(n.style.opacity),ie.cssFloat=!!n.style.cssFloat,l.style.backgroundClip="content-box",l.cloneNode(!0).style.backgroundClip="",ie.clearCloneStyle="content-box"===l.style.backgroundClip,n=l=null,se.extend(ie,{reliableHiddenOffsets:function(){if(null!=i)return i;var t,e,n,r=be.createElement("div"),s=be.getElementsByTagName("body")[0];if(s)return r.setAttribute("className","t"),r.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",t=be.createElement("div"),t.style.cssText=u,s.appendChild(t).appendChild(r),r.innerHTML="<table><tr><td></td><td>t</td></tr></table>",e=r.getElementsByTagName("td"),e[0].style.cssText="padding:0;margin:0;border:0;display:none",n=0===e[0].offsetHeight,e[0].style.display="",e[1].style.display="none",i=n&&0===e[0].offsetHeight,s.removeChild(t),r=s=null,i},boxSizing:function(){return null==r&&e(),r},boxSizingReliable:function(){return null==s&&e(),s},pixelPosition:function(){return null==o&&e(),o},reliableMarginRight:function(){var e,n,i,r;if(null==a&&t.getComputedStyle){if(e=be.getElementsByTagName("body")[0],!e)return;n=be.createElement("div"),i=be.createElement("div"),n.style.cssText=u,e.appendChild(n).appendChild(i),r=i.appendChild(be.createElement("div")),r.style.cssText=i.style.cssText=c,r.style.marginRight=r.style.width="0",i.style.width="1px",a=!parseFloat((t.getComputedStyle(r,null)||{}).marginRight),e.removeChild(n)}return a}})}(),se.swap=function(t,e,n,i){var r,s,o={};for(s in e)o[s]=t.style[s],t.style[s]=e[s];r=n.apply(t,i||[]);for(s in e)t.style[s]=o[s];return r};var an=/alpha\([^)]*\)/i,ln=/opacity\s*=\s*([^)]*)/,un=/^(none|table(?!-c[ea]).+)/,cn=new RegExp("^("+Ee+")(.*)$","i"),fn=new RegExp("^([+-])=("+Ee+")","i"),hn={position:"absolute",visibility:"hidden",display:"block"},pn={letterSpacing:0,fontWeight:400},dn=["Webkit","O","Moz","ms"];se.extend({cssHooks:{opacity:{get:function(t,e){if(e){var n=nn(t,"opacity");return""===n?"1":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":ie.cssFloat?"cssFloat":"styleFloat"},style:function(t,e,n,i){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var r,s,o,a=se.camelCase(e),l=t.style;if(e=se.cssProps[a]||(se.cssProps[a]=E(l,a)),o=se.cssHooks[e]||se.cssHooks[a],void 0===n)return o&&"get"in o&&void 0!==(r=o.get(t,!1,i))?r:l[e];if(s=typeof n,"string"===s&&(r=fn.exec(n))&&(n=(r[1]+1)*r[2]+parseFloat(se.css(t,e)),s="number"),null!=n&&n===n&&("number"!==s||se.cssNumber[a]||(n+="px"),ie.clearCloneStyle||""!==n||0!==e.indexOf("background")||(l[e]="inherit"),!(o&&"set"in o&&void 0===(n=o.set(t,n,i)))))try{l[e]="",l[e]=n}catch(u){}}},css:function(t,e,n,i){var r,s,o,a=se.camelCase(e);return e=se.cssProps[a]||(se.cssProps[a]=E(t.style,a)),o=se.cssHooks[e]||se.cssHooks[a],o&&"get"in o&&(s=o.get(t,!0,n)),void 0===s&&(s=nn(t,e,i)),"normal"===s&&e in pn&&(s=pn[e]),""===n||n?(r=parseFloat(s),n===!0||se.isNumeric(r)?r||0:s):s}}),se.each(["height","width"],function(t,e){se.cssHooks[e]={get:function(t,n,i){return n?0===t.offsetWidth&&un.test(se.css(t,"display"))?se.swap(t,hn,function(){return L(t,e,i)}):L(t,e,i):void 0},set:function(t,n,i){var r=i&&en(t);return A(t,n,i?N(t,e,i,ie.boxSizing()&&"border-box"===se.css(t,"boxSizing",!1,r),r):0)}}}),ie.opacity||(se.cssHooks.opacity={get:function(t,e){return ln.test((e&&t.currentStyle?t.currentStyle.filter:t.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":e?"1":""},set:function(t,e){var n=t.style,i=t.currentStyle,r=se.isNumeric(e)?"alpha(opacity="+100*e+")":"",s=i&&i.filter||n.filter||"";n.zoom=1,(e>=1||""===e)&&""===se.trim(s.replace(an,""))&&n.removeAttribute&&(n.removeAttribute("filter"),""===e||i&&!i.filter)||(n.filter=an.test(s)?s.replace(an,r):s+" "+r)}}),se.cssHooks.marginRight=C(ie.reliableMarginRight,function(t,e){return e?se.swap(t,{display:"inline-block"},nn,[t,"marginRight"]):void 0}),se.each({margin:"",padding:"",border:"Width"},function(t,e){se.cssHooks[t+e]={expand:function(n){for(var i=0,r={},s="string"==typeof n?n.split(" "):[n];4>i;i++)r[t+$e[i]+e]=s[i]||s[i-2]||s[0];return r}},rn.test(t)||(se.cssHooks[t+e].set=A)}),se.fn.extend({css:function(t,e){return Ne(this,function(t,e,n){var i,r,s={},o=0;if(se.isArray(e)){for(i=en(t),r=e.length;r>o;o++)s[e[o]]=se.css(t,e[o],!1,i);return s}return void 0!==n?se.style(t,e,n):se.css(t,e)},t,e,arguments.length>1)},show:function(){return $(this,!0)},hide:function(){return $(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each(function(){Ae(this)?se(this).show():se(this).hide()})}}),se.Tween=M,M.prototype={constructor:M,init:function(t,e,n,i,r,s){this.elem=t,this.prop=n,this.easing=r||"swing",this.options=e,this.start=this.now=this.cur(),this.end=i,this.unit=s||(se.cssNumber[n]?"":"px")},cur:function(){var t=M.propHooks[this.prop];return t&&t.get?t.get(this):M.propHooks._default.get(this)},run:function(t){var e,n=M.propHooks[this.prop];return this.pos=e=this.options.duration?se.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):M.propHooks._default.set(this),this}},M.prototype.init.prototype=M.prototype,M.propHooks={_default:{get:function(t){var e;return null==t.elem[t.prop]||t.elem.style&&null!=t.elem.style[t.prop]?(e=se.css(t.elem,t.prop,""),e&&"auto"!==e?e:0):t.elem[t.prop]},set:function(t){se.fx.step[t.prop]?se.fx.step[t.prop](t):t.elem.style&&(null!=t.elem.style[se.cssProps[t.prop]]||se.cssHooks[t.prop])?se.style(t.elem,t.prop,t.now+t.unit):t.elem[t.prop]=t.now}}},M.propHooks.scrollTop=M.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},se.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2}},se.fx=M.prototype.init,se.fx.step={};var bn,mn,gn=/^(?:toggle|show|hide)$/,vn=new RegExp("^(?:([+-])=|)("+Ee+")([a-z%]*)$","i"),yn=/queueHooks$/,_n=[K],wn={"*":[function(t,e){var n=this.createTween(t,e),i=n.cur(),r=vn.exec(e),s=r&&r[3]||(se.cssNumber[t]?"":"px"),o=(se.cssNumber[t]||"px"!==s&&+i)&&vn.exec(se.css(n.elem,t)),a=1,l=20;if(o&&o[3]!==s){s=s||o[3],r=r||[],o=+i||1;do a=a||".5",o/=a,se.style(n.elem,t,o+s);while(a!==(a=n.cur()/i)&&1!==a&&--l)}return r&&(o=n.start=+o||+i||0,n.unit=s,n.end=r[1]?o+(r[1]+1)*r[2]:+r[2]),n}]};se.Animation=se.extend(B,{tweener:function(t,e){se.isFunction(t)?(e=t,t=["*"]):t=t.split(" ");for(var n,i=0,r=t.length;r>i;i++)n=t[i],wn[n]=wn[n]||[],wn[n].unshift(e)},prefilter:function(t,e){e?_n.unshift(t):_n.push(t)}}),se.speed=function(t,e,n){var i=t&&"object"==typeof t?se.extend({},t):{complete:n||!n&&e||se.isFunction(t)&&t,duration:t,easing:n&&e||e&&!se.isFunction(e)&&e};return i.duration=se.fx.off?0:"number"==typeof i.duration?i.duration:i.duration in se.fx.speeds?se.fx.speeds[i.duration]:se.fx.speeds._default,(null==i.queue||i.queue===!0)&&(i.queue="fx"),i.old=i.complete,i.complete=function(){se.isFunction(i.old)&&i.old.call(this),i.queue&&se.dequeue(this,i.queue)},i},se.fn.extend({fadeTo:function(t,e,n,i){return this.filter(Ae).css("opacity",0).show().end().animate({opacity:e},t,n,i)},animate:function(t,e,n,i){var r=se.isEmptyObject(t),s=se.speed(e,n,i),o=function(){var e=B(this,se.extend({},t),s);(r||se._data(this,"finish"))&&e.stop(!0)};return o.finish=o,r||s.queue===!1?this.each(o):this.queue(s.queue,o)},stop:function(t,e,n){var i=function(t){var e=t.stop;delete t.stop,e(n)};return"string"!=typeof t&&(n=e,e=t,t=void 0),e&&t!==!1&&this.queue(t||"fx",[]),this.each(function(){var e=!0,r=null!=t&&t+"queueHooks",s=se.timers,o=se._data(this);if(r)o[r]&&o[r].stop&&i(o[r]);else for(r in o)o[r]&&o[r].stop&&yn.test(r)&&i(o[r]);for(r=s.length;r--;)s[r].elem!==this||null!=t&&s[r].queue!==t||(s[r].anim.stop(n),e=!1,s.splice(r,1));(e||!n)&&se.dequeue(this,t)})},finish:function(t){return t!==!1&&(t=t||"fx"),this.each(function(){var e,n=se._data(this),i=n[t+"queue"],r=n[t+"queueHooks"],s=se.timers,o=i?i.length:0;for(n.finish=!0,se.queue(this,t,[]),r&&r.stop&&r.stop.call(this,!0),e=s.length;e--;)s[e].elem===this&&s[e].queue===t&&(s[e].anim.stop(!0),s.splice(e,1));for(e=0;o>e;e++)i[e]&&i[e].finish&&i[e].finish.call(this);delete n.finish})}}),se.each(["toggle","show","hide"],function(t,e){var n=se.fn[e];se.fn[e]=function(t,i,r){return null==t||"boolean"==typeof t?n.apply(this,arguments):this.animate(R(e,!0),t,i,r)}}),se.each({slideDown:R("show"),slideUp:R("hide"),slideToggle:R("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,e){se.fn[t]=function(t,n,i){return this.animate(e,t,n,i)}}),se.timers=[],se.fx.tick=function(){var t,e=se.timers,n=0;for(bn=se.now();n<e.length;n++)t=e[n],t()||e[n]!==t||e.splice(n--,1);e.length||se.fx.stop(),bn=void 0},se.fx.timer=function(t){se.timers.push(t),t()?se.fx.start():se.timers.pop()},se.fx.interval=13,se.fx.start=function(){mn||(mn=setInterval(se.fx.tick,se.fx.interval))},se.fx.stop=function(){clearInterval(mn),mn=null},se.fx.speeds={slow:600,fast:200,_default:400},se.fn.delay=function(t,e){return t=se.fx?se.fx.speeds[t]||t:t,e=e||"fx",this.queue(e,function(e,n){var i=setTimeout(e,t);n.stop=function(){clearTimeout(i)}})},function(){var t,e,n,i,r=be.createElement("div");r.setAttribute("className","t"),r.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",t=r.getElementsByTagName("a")[0],n=be.createElement("select"),i=n.appendChild(be.createElement("option")),e=r.getElementsByTagName("input")[0],t.style.cssText="top:1px",ie.getSetAttribute="t"!==r.className,ie.style=/top/.test(t.getAttribute("style")),ie.hrefNormalized="/a"===t.getAttribute("href"),ie.checkOn=!!e.value,ie.optSelected=i.selected,ie.enctype=!!be.createElement("form").enctype,n.disabled=!0,ie.optDisabled=!i.disabled,e=be.createElement("input"),e.setAttribute("value",""),ie.input=""===e.getAttribute("value"),e.value="t",e.setAttribute("type","radio"),ie.radioValue="t"===e.value,t=e=n=i=r=null}();var kn=/\r/g;se.fn.extend({val:function(t){var e,n,i,r=this[0];{if(arguments.length)return i=se.isFunction(t),this.each(function(n){var r;1===this.nodeType&&(r=i?t.call(this,n,se(this).val()):t,null==r?r="":"number"==typeof r?r+="":se.isArray(r)&&(r=se.map(r,function(t){return null==t?"":t+""})),e=se.valHooks[this.type]||se.valHooks[this.nodeName.toLowerCase()],e&&"set"in e&&void 0!==e.set(this,r,"value")||(this.value=r))});if(r)return e=se.valHooks[r.type]||se.valHooks[r.nodeName.toLowerCase()],e&&"get"in e&&void 0!==(n=e.get(r,"value"))?n:(n=r.value,"string"==typeof n?n.replace(kn,""):null==n?"":n)}}}),se.extend({valHooks:{option:{get:function(t){var e=se.find.attr(t,"value");return null!=e?e:se.text(t)}},select:{get:function(t){for(var e,n,i=t.options,r=t.selectedIndex,s="select-one"===t.type||0>r,o=s?null:[],a=s?r+1:i.length,l=0>r?a:s?r:0;a>l;l++)if(n=i[l],!(!n.selected&&l!==r||(ie.optDisabled?n.disabled:null!==n.getAttribute("disabled"))||n.parentNode.disabled&&se.nodeName(n.parentNode,"optgroup"))){if(e=se(n).val(),s)return e;o.push(e)}return o},set:function(t,e){for(var n,i,r=t.options,s=se.makeArray(e),o=r.length;o--;)if(i=r[o],se.inArray(se.valHooks.option.get(i),s)>=0)try{i.selected=n=!0}catch(a){i.scrollHeight}else i.selected=!1;return n||(t.selectedIndex=-1),r}}}}),se.each(["radio","checkbox"],function(){se.valHooks[this]={set:function(t,e){return se.isArray(e)?t.checked=se.inArray(se(t).val(),e)>=0:void 0}},ie.checkOn||(se.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})});var xn,Sn,Tn=se.expr.attrHandle,Cn=/^(?:checked|selected)$/i,En=ie.getSetAttribute,$n=ie.input;se.fn.extend({attr:function(t,e){return Ne(this,se.attr,t,e,arguments.length>1)},removeAttr:function(t){return this.each(function(){se.removeAttr(this,t)})}}),se.extend({attr:function(t,e,n){var i,r,s=t.nodeType;if(t&&3!==s&&8!==s&&2!==s)return typeof t.getAttribute===Se?se.prop(t,e,n):(1===s&&se.isXMLDoc(t)||(e=e.toLowerCase(),i=se.attrHooks[e]||(se.expr.match.bool.test(e)?Sn:xn)),void 0===n?i&&"get"in i&&null!==(r=i.get(t,e))?r:(r=se.find.attr(t,e),null==r?void 0:r):null!==n?i&&"set"in i&&void 0!==(r=i.set(t,n,e))?r:(t.setAttribute(e,n+""),n):(se.removeAttr(t,e),void 0))},removeAttr:function(t,e){var n,i,r=0,s=e&&e.match(_e);if(s&&1===t.nodeType)for(;n=s[r++];)i=se.propFix[n]||n,se.expr.match.bool.test(n)?$n&&En||!Cn.test(n)?t[i]=!1:t[se.camelCase("default-"+n)]=t[i]=!1:se.attr(t,n,""),t.removeAttribute(En?n:i)},attrHooks:{type:{set:function(t,e){if(!ie.radioValue&&"radio"===e&&se.nodeName(t,"input")){var n=t.value;return t.setAttribute("type",e),n&&(t.value=n),e}}}}}),Sn={set:function(t,e,n){return e===!1?se.removeAttr(t,n):$n&&En||!Cn.test(n)?t.setAttribute(!En&&se.propFix[n]||n,n):t[se.camelCase("default-"+n)]=t[n]=!0,n}},se.each(se.expr.match.bool.source.match(/\w+/g),function(t,e){var n=Tn[e]||se.find.attr;Tn[e]=$n&&En||!Cn.test(e)?function(t,e,i){var r,s;return i||(s=Tn[e],Tn[e]=r,r=null!=n(t,e,i)?e.toLowerCase():null,Tn[e]=s),r}:function(t,e,n){return n?void 0:t[se.camelCase("default-"+e)]?e.toLowerCase():null}}),$n&&En||(se.attrHooks.value={set:function(t,e,n){return se.nodeName(t,"input")?(t.defaultValue=e,void 0):xn&&xn.set(t,e,n)}}),En||(xn={set:function(t,e,n){var i=t.getAttributeNode(n);return i||t.setAttributeNode(i=t.ownerDocument.createAttribute(n)),i.value=e+="","value"===n||e===t.getAttribute(n)?e:void 0}},Tn.id=Tn.name=Tn.coords=function(t,e,n){var i;return n?void 0:(i=t.getAttributeNode(e))&&""!==i.value?i.value:null},se.valHooks.button={get:function(t,e){var n=t.getAttributeNode(e);return n&&n.specified?n.value:void 0},set:xn.set},se.attrHooks.contenteditable={set:function(t,e,n){xn.set(t,""===e?!1:e,n)}},se.each(["width","height"],function(t,e){se.attrHooks[e]={set:function(t,n){return""===n?(t.setAttribute(e,"auto"),n):void 0}}})),ie.style||(se.attrHooks.style={get:function(t){return t.style.cssText||void 0},set:function(t,e){return t.style.cssText=e+""}});var An=/^(?:input|select|textarea|button|object)$/i,Nn=/^(?:a|area)$/i;se.fn.extend({prop:function(t,e){return Ne(this,se.prop,t,e,arguments.length>1)},removeProp:function(t){return t=se.propFix[t]||t,this.each(function(){try{this[t]=void 0,delete this[t]}catch(e){}})}}),se.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(t,e,n){var i,r,s,o=t.nodeType;if(t&&3!==o&&8!==o&&2!==o)return s=1!==o||!se.isXMLDoc(t),s&&(e=se.propFix[e]||e,r=se.propHooks[e]),void 0!==n?r&&"set"in r&&void 0!==(i=r.set(t,n,e))?i:t[e]=n:r&&"get"in r&&null!==(i=r.get(t,e))?i:t[e]},propHooks:{tabIndex:{get:function(t){var e=se.find.attr(t,"tabindex");return e?parseInt(e,10):An.test(t.nodeName)||Nn.test(t.nodeName)&&t.href?0:-1}}}}),ie.hrefNormalized||se.each(["href","src"],function(t,e){se.propHooks[e]={get:function(t){return t.getAttribute(e,4)}}}),ie.optSelected||(se.propHooks.selected={get:function(t){var e=t.parentNode;return e&&(e.selectedIndex,e.parentNode&&e.parentNode.selectedIndex),null}}),se.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){se.propFix[this.toLowerCase()]=this}),ie.enctype||(se.propFix.enctype="encoding");var Ln=/[\t\r\n\f]/g;se.fn.extend({addClass:function(t){var e,n,i,r,s,o,a=0,l=this.length,u="string"==typeof t&&t;if(se.isFunction(t))return this.each(function(e){se(this).addClass(t.call(this,e,this.className))});if(u)for(e=(t||"").match(_e)||[];l>a;a++)if(n=this[a],i=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(Ln," "):" ")){for(s=0;r=e[s++];)i.indexOf(" "+r+" ")<0&&(i+=r+" ");o=se.trim(i),n.className!==o&&(n.className=o)}return this},removeClass:function(t){var e,n,i,r,s,o,a=0,l=this.length,u=0===arguments.length||"string"==typeof t&&t;if(se.isFunction(t))return this.each(function(e){se(this).removeClass(t.call(this,e,this.className))});if(u)for(e=(t||"").match(_e)||[];l>a;a++)if(n=this[a],i=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(Ln," "):"")){for(s=0;r=e[s++];)for(;i.indexOf(" "+r+" ")>=0;)i=i.replace(" "+r+" "," ");o=t?se.trim(i):"",n.className!==o&&(n.className=o)}return this},toggleClass:function(t,e){var n=typeof t;return"boolean"==typeof e&&"string"===n?e?this.addClass(t):this.removeClass(t):se.isFunction(t)?this.each(function(n){se(this).toggleClass(t.call(this,n,this.className,e),e)}):this.each(function(){if("string"===n)for(var e,i=0,r=se(this),s=t.match(_e)||[];e=s[i++];)r.hasClass(e)?r.removeClass(e):r.addClass(e);else(n===Se||"boolean"===n)&&(this.className&&se._data(this,"__className__",this.className),this.className=this.className||t===!1?"":se._data(this,"__className__")||"")})},hasClass:function(t){for(var e=" "+t+" ",n=0,i=this.length;i>n;n++)if(1===this[n].nodeType&&(" "+this[n].className+" ").replace(Ln," ").indexOf(e)>=0)return!0;return!1}}),se.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(t,e){se.fn[e]=function(t,n){return arguments.length>0?this.on(e,null,t,n):this.trigger(e)}}),se.fn.extend({hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)},bind:function(t,e,n){return this.on(t,null,e,n)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,n,i){return this.on(e,t,n,i)},undelegate:function(t,e,n){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",n)}});var Mn=se.now(),In=/\?/,Rn=/(,)|(\[|{)|(}|])|"(?:[^"\\\r\n]|\\["\\\/bfnrt]|\\u[\da-fA-F]{4})*"\s*:?|true|false|null|-?(?!0\d)\d+(?:\.\d+|)(?:[eE][+-]?\d+|)/g;se.parseJSON=function(e){if(t.JSON&&t.JSON.parse)return t.JSON.parse(e+"");var n,i=null,r=se.trim(e+"");return r&&!se.trim(r.replace(Rn,function(t,e,r,s){return n&&e&&(i=0),0===i?t:(n=r||e,i+=!s-!r,"")}))?Function("return "+r)():se.error("Invalid JSON: "+e)},se.parseXML=function(e){var n,i;if(!e||"string"!=typeof e)return null;try{t.DOMParser?(i=new DOMParser,n=i.parseFromString(e,"text/xml")):(n=new ActiveXObject("Microsoft.XMLDOM"),n.async="false",n.loadXML(e))}catch(r){n=void 0}return n&&n.documentElement&&!n.getElementsByTagName("parsererror").length||se.error("Invalid XML: "+e),n};var Dn,Kn,Fn=/#.*$/,Bn=/([?&])_=[^&]*/,Pn=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,On=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,jn=/^(?:GET|HEAD)$/,Gn=/^\/\//,qn=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,zn={},Hn={},Un="*/".concat("*");try{Kn=location.href}catch(Wn){Kn=be.createElement("a"),Kn.href="",Kn=Kn.href}Dn=qn.exec(Kn.toLowerCase())||[],se.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Kn,type:"GET",isLocal:On.test(Dn[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Un,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":se.parseJSON,"text xml":se.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?j(j(t,se.ajaxSettings),e):j(se.ajaxSettings,t)},ajaxPrefilter:P(zn),ajaxTransport:P(Hn),ajax:function(t,e){function n(t,e,n,i){var r,c,g,v,_,k=e;2!==y&&(y=2,a&&clearTimeout(a),u=void 0,o=i||"",w.readyState=t>0?4:0,r=t>=200&&300>t||304===t,n&&(v=G(f,w,n)),v=q(f,v,w,r),r?(f.ifModified&&(_=w.getResponseHeader("Last-Modified"),_&&(se.lastModified[s]=_),_=w.getResponseHeader("etag"),_&&(se.etag[s]=_)),204===t||"HEAD"===f.type?k="nocontent":304===t?k="notmodified":(k=v.state,c=v.data,g=v.error,r=!g)):(g=k,(t||!k)&&(k="error",0>t&&(t=0))),w.status=t,w.statusText=(e||k)+"",r?d.resolveWith(h,[c,k,w]):d.rejectWith(h,[w,k,g]),w.statusCode(m),m=void 0,l&&p.trigger(r?"ajaxSuccess":"ajaxError",[w,f,r?c:g]),b.fireWith(h,[w,k]),l&&(p.trigger("ajaxComplete",[w,f]),--se.active||se.event.trigger("ajaxStop")))}"object"==typeof t&&(e=t,t=void 0),e=e||{};var i,r,s,o,a,l,u,c,f=se.ajaxSetup({},e),h=f.context||f,p=f.context&&(h.nodeType||h.jquery)?se(h):se.event,d=se.Deferred(),b=se.Callbacks("once memory"),m=f.statusCode||{},g={},v={},y=0,_="canceled",w={readyState:0,getResponseHeader:function(t){var e;if(2===y){if(!c)for(c={};e=Pn.exec(o);)c[e[1].toLowerCase()]=e[2];e=c[t.toLowerCase()]}return null==e?null:e},getAllResponseHeaders:function(){return 2===y?o:null},setRequestHeader:function(t,e){var n=t.toLowerCase();return y||(t=v[n]=v[n]||t,g[t]=e),this},overrideMimeType:function(t){return y||(f.mimeType=t),this},statusCode:function(t){var e;if(t)if(2>y)for(e in t)m[e]=[m[e],t[e]];else w.always(t[w.status]);return this},abort:function(t){var e=t||_;return u&&u.abort(e),n(0,e),this}};if(d.promise(w).complete=b.add,w.success=w.done,w.error=w.fail,f.url=((t||f.url||Kn)+"").replace(Fn,"").replace(Gn,Dn[1]+"//"),f.type=e.method||e.type||f.method||f.type,f.dataTypes=se.trim(f.dataType||"*").toLowerCase().match(_e)||[""],null==f.crossDomain&&(i=qn.exec(f.url.toLowerCase()),f.crossDomain=!(!i||i[1]===Dn[1]&&i[2]===Dn[2]&&(i[3]||("http:"===i[1]?"80":"443"))===(Dn[3]||("http:"===Dn[1]?"80":"443")))),f.data&&f.processData&&"string"!=typeof f.data&&(f.data=se.param(f.data,f.traditional)),O(zn,f,e,w),2===y)return w;l=f.global,l&&0===se.active++&&se.event.trigger("ajaxStart"),f.type=f.type.toUpperCase(),f.hasContent=!jn.test(f.type),s=f.url,f.hasContent||(f.data&&(s=f.url+=(In.test(s)?"&":"?")+f.data,delete f.data),f.cache===!1&&(f.url=Bn.test(s)?s.replace(Bn,"$1_="+Mn++):s+(In.test(s)?"&":"?")+"_="+Mn++)),f.ifModified&&(se.lastModified[s]&&w.setRequestHeader("If-Modified-Since",se.lastModified[s]),se.etag[s]&&w.setRequestHeader("If-None-Match",se.etag[s])),(f.data&&f.hasContent&&f.contentType!==!1||e.contentType)&&w.setRequestHeader("Content-Type",f.contentType),w.setRequestHeader("Accept",f.dataTypes[0]&&f.accepts[f.dataTypes[0]]?f.accepts[f.dataTypes[0]]+("*"!==f.dataTypes[0]?", "+Un+"; q=0.01":""):f.accepts["*"]);for(r in f.headers)w.setRequestHeader(r,f.headers[r]);if(f.beforeSend&&(f.beforeSend.call(h,w,f)===!1||2===y))return w.abort();_="abort";for(r in{success:1,error:1,complete:1})w[r](f[r]);if(u=O(Hn,f,e,w)){w.readyState=1,l&&p.trigger("ajaxSend",[w,f]),f.async&&f.timeout>0&&(a=setTimeout(function(){w.abort("timeout")},f.timeout));try{y=1,u.send(g,n)}catch(k){if(!(2>y))throw k;n(-1,k)}}else n(-1,"No Transport");return w},getJSON:function(t,e,n){return se.get(t,e,n,"json")},getScript:function(t,e){return se.get(t,void 0,e,"script")}}),se.each(["get","post"],function(t,e){se[e]=function(t,n,i,r){return se.isFunction(n)&&(r=r||i,i=n,n=void 0),se.ajax({url:t,type:e,dataType:r,data:n,success:i})}}),se.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(t,e){se.fn[e]=function(t){return this.on(e,t)}}),se._evalUrl=function(t){return se.ajax({url:t,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},se.fn.extend({wrapAll:function(t){if(se.isFunction(t))return this.each(function(e){se(this).wrapAll(t.call(this,e))});if(this[0]){var e=se(t,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var t=this;t.firstChild&&1===t.firstChild.nodeType;)t=t.firstChild;return t}).append(this)}return this},wrapInner:function(t){return se.isFunction(t)?this.each(function(e){se(this).wrapInner(t.call(this,e))}):this.each(function(){var e=se(this),n=e.contents();n.length?n.wrapAll(t):e.append(t)})},wrap:function(t){var e=se.isFunction(t);return this.each(function(n){se(this).wrapAll(e?t.call(this,n):t)})},unwrap:function(){return this.parent().each(function(){se.nodeName(this,"body")||se(this).replaceWith(this.childNodes)}).end()}}),se.expr.filters.hidden=function(t){return t.offsetWidth<=0&&t.offsetHeight<=0||!ie.reliableHiddenOffsets()&&"none"===(t.style&&t.style.display||se.css(t,"display"))},se.expr.filters.visible=function(t){return!se.expr.filters.hidden(t)};var Vn=/%20/g,Xn=/\[\]$/,Qn=/\r?\n/g,Yn=/^(?:submit|button|image|reset|file)$/i,Zn=/^(?:input|select|textarea|keygen)/i;se.param=function(t,e){var n,i=[],r=function(t,e){e=se.isFunction(e)?e():null==e?"":e,i[i.length]=encodeURIComponent(t)+"="+encodeURIComponent(e)};if(void 0===e&&(e=se.ajaxSettings&&se.ajaxSettings.traditional),se.isArray(t)||t.jquery&&!se.isPlainObject(t))se.each(t,function(){r(this.name,this.value)});else for(n in t)z(n,t[n],e,r);return i.join("&").replace(Vn,"+")},se.fn.extend({serialize:function(){return se.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var t=se.prop(this,"elements");return t?se.makeArray(t):this}).filter(function(){var t=this.type;return this.name&&!se(this).is(":disabled")&&Zn.test(this.nodeName)&&!Yn.test(t)&&(this.checked||!Le.test(t))}).map(function(t,e){var n=se(this).val();return null==n?null:se.isArray(n)?se.map(n,function(t){return{name:e.name,value:t.replace(Qn,"\r\n")}}):{name:e.name,value:n.replace(Qn,"\r\n")}}).get()}}),se.ajaxSettings.xhr=void 0!==t.ActiveXObject?function(){return!this.isLocal&&/^(get|post|head|put|delete|options)$/i.test(this.type)&&H()||U()}:H;var Jn=0,ti={},ei=se.ajaxSettings.xhr();t.ActiveXObject&&se(t).on("unload",function(){for(var t in ti)ti[t](void 0,!0)}),ie.cors=!!ei&&"withCredentials"in ei,ei=ie.ajax=!!ei,ei&&se.ajaxTransport(function(t){if(!t.crossDomain||ie.cors){var e;return{send:function(n,i){var r,s=t.xhr(),o=++Jn;if(s.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(r in t.xhrFields)s[r]=t.xhrFields[r];t.mimeType&&s.overrideMimeType&&s.overrideMimeType(t.mimeType),t.crossDomain||n["X-Requested-With"]||(n["X-Requested-With"]="XMLHttpRequest");for(r in n)void 0!==n[r]&&s.setRequestHeader(r,n[r]+"");s.send(t.hasContent&&t.data||null),e=function(n,r){var a,l,u;if(e&&(r||4===s.readyState))if(delete ti[o],e=void 0,s.onreadystatechange=se.noop,r)4!==s.readyState&&s.abort();else{u={},a=s.status,"string"==typeof s.responseText&&(u.text=s.responseText);try{l=s.statusText}catch(c){l=""}a||!t.isLocal||t.crossDomain?1223===a&&(a=204):a=u.text?200:404}u&&i(a,l,u,s.getAllResponseHeaders())},t.async?4===s.readyState?setTimeout(e):s.onreadystatechange=ti[o]=e:e()},abort:function(){e&&e(void 0,!0)}}}}),se.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(t){return se.globalEval(t),t}}}),se.ajaxPrefilter("script",function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET",t.global=!1)}),se.ajaxTransport("script",function(t){if(t.crossDomain){var e,n=be.head||se("head")[0]||be.documentElement;return{send:function(i,r){e=be.createElement("script"),e.async=!0,t.scriptCharset&&(e.charset=t.scriptCharset),e.src=t.url,e.onload=e.onreadystatechange=function(t,n){(n||!e.readyState||/loaded|complete/.test(e.readyState))&&(e.onload=e.onreadystatechange=null,e.parentNode&&e.parentNode.removeChild(e),e=null,n||r(200,"success"))},n.insertBefore(e,n.firstChild)},abort:function(){e&&e.onload(void 0,!0)}}}});var ni=[],ii=/(=)\?(?=&|$)|\?\?/;se.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=ni.pop()||se.expando+"_"+Mn++;return this[t]=!0,t}}),se.ajaxPrefilter("json jsonp",function(e,n,i){var r,s,o,a=e.jsonp!==!1&&(ii.test(e.url)?"url":"string"==typeof e.data&&!(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&ii.test(e.data)&&"data");return a||"jsonp"===e.dataTypes[0]?(r=e.jsonpCallback=se.isFunction(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,a?e[a]=e[a].replace(ii,"$1"+r):e.jsonp!==!1&&(e.url+=(In.test(e.url)?"&":"?")+e.jsonp+"="+r),e.converters["script json"]=function(){return o||se.error(r+" was not called"),o[0]},e.dataTypes[0]="json",s=t[r],t[r]=function(){o=arguments},i.always(function(){t[r]=s,e[r]&&(e.jsonpCallback=n.jsonpCallback,ni.push(r)),o&&se.isFunction(s)&&s(o[0]),o=s=void 0}),"script"):void 0}),se.parseHTML=function(t,e,n){if(!t||"string"!=typeof t)return null;"boolean"==typeof e&&(n=e,e=!1),e=e||be;var i=he.exec(t),r=!n&&[];return i?[e.createElement(i[1])]:(i=se.buildFragment([t],e,r),r&&r.length&&se(r).remove(),se.merge([],i.childNodes))};var ri=se.fn.load;se.fn.load=function(t,e,n){if("string"!=typeof t&&ri)return ri.apply(this,arguments);var i,r,s,o=this,a=t.indexOf(" ");return a>=0&&(i=t.slice(a,t.length),t=t.slice(0,a)),se.isFunction(e)?(n=e,e=void 0):e&&"object"==typeof e&&(s="POST"),o.length>0&&se.ajax({url:t,type:s,dataType:"html",data:e}).done(function(t){r=arguments,o.html(i?se("<div>").append(se.parseHTML(t)).find(i):t)}).complete(n&&function(t,e){o.each(n,r||[t.responseText,e,t])}),this},se.expr.filters.animated=function(t){return se.grep(se.timers,function(e){return t===e.elem}).length};var si=t.document.documentElement;se.offset={setOffset:function(t,e,n){var i,r,s,o,a,l,u,c=se.css(t,"position"),f=se(t),h={};"static"===c&&(t.style.position="relative"),a=f.offset(),s=se.css(t,"top"),l=se.css(t,"left"),u=("absolute"===c||"fixed"===c)&&se.inArray("auto",[s,l])>-1,u?(i=f.position(),o=i.top,r=i.left):(o=parseFloat(s)||0,r=parseFloat(l)||0),se.isFunction(e)&&(e=e.call(t,n,a)),null!=e.top&&(h.top=e.top-a.top+o),null!=e.left&&(h.left=e.left-a.left+r),"using"in e?e.using.call(t,h):f.css(h)}},se.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each(function(e){se.offset.setOffset(this,t,e)});var e,n,i={top:0,left:0},r=this[0],s=r&&r.ownerDocument;if(s)return e=s.documentElement,se.contains(e,r)?(typeof r.getBoundingClientRect!==Se&&(i=r.getBoundingClientRect()),n=W(s),{top:i.top+(n.pageYOffset||e.scrollTop)-(e.clientTop||0),left:i.left+(n.pageXOffset||e.scrollLeft)-(e.clientLeft||0)}):i},position:function(){if(this[0]){var t,e,n={top:0,left:0},i=this[0];return"fixed"===se.css(i,"position")?e=i.getBoundingClientRect():(t=this.offsetParent(),e=this.offset(),se.nodeName(t[0],"html")||(n=t.offset()),n.top+=se.css(t[0],"borderTopWidth",!0),n.left+=se.css(t[0],"borderLeftWidth",!0)),{top:e.top-n.top-se.css(i,"marginTop",!0),left:e.left-n.left-se.css(i,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent||si;t&&!se.nodeName(t,"html")&&"static"===se.css(t,"position");)t=t.offsetParent;return t||si})}}),se.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,e){var n=/Y/.test(e);se.fn[t]=function(i){return Ne(this,function(t,i,r){var s=W(t);return void 0===r?s?e in s?s[e]:s.document.documentElement[i]:t[i]:(s?s.scrollTo(n?se(s).scrollLeft():r,n?r:se(s).scrollTop()):t[i]=r,void 0)},t,i,arguments.length,null)}}),se.each(["top","left"],function(t,e){se.cssHooks[e]=C(ie.pixelPosition,function(t,n){return n?(n=nn(t,e),sn.test(n)?se(t).position()[e]+"px":n):void 0})}),se.each({Height:"height",Width:"width"},function(t,e){se.each({padding:"inner"+t,content:e,"":"outer"+t},function(n,i){se.fn[i]=function(i,r){var s=arguments.length&&(n||"boolean"!=typeof i),o=n||(i===!0||r===!0?"margin":"border");
return Ne(this,function(e,n,i){var r;return se.isWindow(e)?e.document.documentElement["client"+t]:9===e.nodeType?(r=e.documentElement,Math.max(e.body["scroll"+t],r["scroll"+t],e.body["offset"+t],r["offset"+t],r["client"+t])):void 0===i?se.css(e,n,o):se.style(e,n,i,o)},e,s?i:void 0,s,null)}})}),se.fn.size=function(){return this.length},se.fn.andSelf=se.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return se});var oi=t.jQuery,ai=t.$;return se.noConflict=function(e){return t.$===se&&(t.$=ai),e&&t.jQuery===se&&(t.jQuery=oi),se},typeof e===Se&&(t.jQuery=t.$=se),se}),function(t,e){t.rails!==e&&t.error("jquery-ujs has already been loaded!");var n,i=t(document);t.rails=n={linkClickSelector:"a[data-confirm], a[data-method], a[data-remote], a[data-disable-with]",buttonClickSelector:"button[data-remote]",inputChangeSelector:"select[data-remote], input[data-remote], textarea[data-remote]",formSubmitSelector:"form",formInputClickSelector:"form input[type=submit], form input[type=image], form button[type=submit], form button:not([type])",disableSelector:"input[data-disable-with], button[data-disable-with], textarea[data-disable-with]",enableSelector:"input[data-disable-with]:disabled, button[data-disable-with]:disabled, textarea[data-disable-with]:disabled",requiredInputSelector:"input[name][required]:not([disabled]),textarea[name][required]:not([disabled])",fileInputSelector:"input[type=file]",linkDisableSelector:"a[data-disable-with]",CSRFProtection:function(e){var n=t('meta[name="csrf-token"]').attr("content");n&&e.setRequestHeader("X-CSRF-Token",n)},refreshCSRFTokens:function(){var e=t("meta[name=csrf-token]").attr("content"),n=t("meta[name=csrf-param]").attr("content");t('form input[name="'+n+'"]').val(e)},fire:function(e,n,i){var r=t.Event(n);return e.trigger(r,i),r.result!==!1},confirm:function(t){return confirm(t)},ajax:function(e){return t.ajax(e)},href:function(t){return t.attr("href")},handleRemote:function(i){var r,s,o,a,l,u,c,f;if(n.fire(i,"ajax:before")){if(a=i.data("cross-domain"),l=a===e?null:a,u=i.data("with-credentials")||null,c=i.data("type")||t.ajaxSettings&&t.ajaxSettings.dataType,i.is("form")){r=i.attr("method"),s=i.attr("action"),o=i.serializeArray();var h=i.data("ujs:submit-button");h&&(o.push(h),i.data("ujs:submit-button",null))}else i.is(n.inputChangeSelector)?(r=i.data("method"),s=i.data("url"),o=i.serialize(),i.data("params")&&(o=o+"&"+i.data("params"))):i.is(n.buttonClickSelector)?(r=i.data("method")||"get",s=i.data("url"),o=i.serialize(),i.data("params")&&(o=o+"&"+i.data("params"))):(r=i.data("method"),s=n.href(i),o=i.data("params")||null);f={type:r||"GET",data:o,dataType:c,beforeSend:function(t,r){return r.dataType===e&&t.setRequestHeader("accept","*/*;q=0.5, "+r.accepts.script),n.fire(i,"ajax:beforeSend",[t,r])},success:function(t,e,n){i.trigger("ajax:success",[t,e,n])},complete:function(t,e){i.trigger("ajax:complete",[t,e])},error:function(t,e,n){i.trigger("ajax:error",[t,e,n])},crossDomain:l},u&&(f.xhrFields={withCredentials:u}),s&&(f.url=s);var p=n.ajax(f);return i.trigger("ajax:send",p),p}return!1},handleMethod:function(i){var r=n.href(i),s=i.data("method"),o=i.attr("target"),a=t("meta[name=csrf-token]").attr("content"),l=t("meta[name=csrf-param]").attr("content"),u=t('<form method="post" action="'+r+'"></form>'),c='<input name="_method" value="'+s+'" type="hidden" />';l!==e&&a!==e&&(c+='<input name="'+l+'" value="'+a+'" type="hidden" />'),o&&u.attr("target",o),u.hide().append(c).appendTo("body"),u.submit()},disableFormElements:function(e){e.find(n.disableSelector).each(function(){var e=t(this),n=e.is("button")?"html":"val";e.data("ujs:enable-with",e[n]()),e[n](e.data("disable-with")),e.prop("disabled",!0)})},enableFormElements:function(e){e.find(n.enableSelector).each(function(){var e=t(this),n=e.is("button")?"html":"val";e.data("ujs:enable-with")&&e[n](e.data("ujs:enable-with")),e.prop("disabled",!1)})},allowAction:function(t){var e,i=t.data("confirm"),r=!1;return i?(n.fire(t,"confirm")&&(r=n.confirm(i),e=n.fire(t,"confirm:complete",[r])),r&&e):!0},blankInputs:function(e,n,i){var r,s,o=t(),a=n||"input,textarea",l=e.find(a);return l.each(function(){if(r=t(this),s=r.is("input[type=checkbox],input[type=radio]")?r.is(":checked"):r.val(),!s==!i){if(r.is("input[type=radio]")&&l.filter('input[type=radio]:checked[name="'+r.attr("name")+'"]').length)return!0;o=o.add(r)}}),o.length?o:!1},nonBlankInputs:function(t,e){return n.blankInputs(t,e,!0)},stopEverything:function(e){return t(e.target).trigger("ujs:everythingStopped"),e.stopImmediatePropagation(),!1},disableElement:function(t){t.data("ujs:enable-with",t.html()),t.html(t.data("disable-with")),t.bind("click.railsDisable",function(t){return n.stopEverything(t)})},enableElement:function(t){t.data("ujs:enable-with")!==e&&(t.html(t.data("ujs:enable-with")),t.removeData("ujs:enable-with")),t.unbind("click.railsDisable")}},n.fire(i,"rails:attachBindings")&&(t.ajaxPrefilter(function(t,e,i){t.crossDomain||n.CSRFProtection(i)}),i.delegate(n.linkDisableSelector,"ajax:complete",function(){n.enableElement(t(this))}),i.delegate(n.linkClickSelector,"click.rails",function(i){var r=t(this),s=r.data("method"),o=r.data("params"),a=i.metaKey||i.ctrlKey;if(!n.allowAction(r))return n.stopEverything(i);if(!a&&r.is(n.linkDisableSelector)&&n.disableElement(r),r.data("remote")!==e){if(a&&(!s||"GET"===s)&&!o)return!0;var l=n.handleRemote(r);return l===!1?n.enableElement(r):l.error(function(){n.enableElement(r)}),!1}return r.data("method")?(n.handleMethod(r),!1):void 0}),i.delegate(n.buttonClickSelector,"click.rails",function(e){var i=t(this);return n.allowAction(i)?(n.handleRemote(i),!1):n.stopEverything(e)}),i.delegate(n.inputChangeSelector,"change.rails",function(e){var i=t(this);return n.allowAction(i)?(n.handleRemote(i),!1):n.stopEverything(e)}),i.delegate(n.formSubmitSelector,"submit.rails",function(i){var r=t(this),s=r.data("remote")!==e,o=n.blankInputs(r,n.requiredInputSelector),a=n.nonBlankInputs(r,n.fileInputSelector);if(!n.allowAction(r))return n.stopEverything(i);if(o&&r.attr("novalidate")==e&&n.fire(r,"ajax:aborted:required",[o]))return n.stopEverything(i);if(s){if(a){setTimeout(function(){n.disableFormElements(r)},13);var l=n.fire(r,"ajax:aborted:file",[a]);return l||setTimeout(function(){n.enableFormElements(r)},13),l}return n.handleRemote(r),!1}setTimeout(function(){n.disableFormElements(r)},13)}),i.delegate(n.formInputClickSelector,"click.rails",function(e){var i=t(this);if(!n.allowAction(i))return n.stopEverything(e);var r=i.attr("name"),s=r?{name:r,value:i.val()}:null;i.closest("form").data("ujs:submit-button",s)}),i.delegate(n.formSubmitSelector,"ajax:beforeSend.rails",function(e){this==e.target&&n.disableFormElements(t(this))}),i.delegate(n.formSubmitSelector,"ajax:complete.rails",function(e){this==e.target&&n.enableFormElements(t(this))}),t(function(){n.refreshCSRFTokens()}))}(jQuery),function(){var t,e,n,i,r,s,o,a,l,u,c,f,h,p,d,b,m,g,v,y,_,w,k,x,S,T,C,E,$,A,N,L,M,I,R,D,K,F,B,P,O,j,G,q,z,H,U,W,V,X,Q,Y,Z,J,te,ee,ne,ie,re,se,oe=[].indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(e in this&&this[e]===t)return e;return-1},ae=[].slice;K={},c=10,te=!1,b=null,M=null,T=["html"],G=null,p=null,re=null,_=function(t){var e;return W(),u(),q(t),te&&(e=ee(t))?(w(e),k(t)):k(t,Z)},ee=function(t){var e;return e=K[t],e&&!e.transitionCacheDisabled?e:void 0},m=function(t){return null==t&&(t=!0),te=t},k=function(t,e){return null==e&&(e=function(){return function(){}}(this)),ne("page:fetch",{url:t}),null!=re&&re.abort(),re=new XMLHttpRequest,re.open("GET",X(t),!0),re.setRequestHeader("Accept","text/html, application/xhtml+xml, application/xml"),re.setRequestHeader("X-XHR-Referer",G),re.onload=function(){var n;return ne("page:receive"),(n=O())?(f.apply(null,y(n)),z(),e(),ne("page:load")):document.location.href=t},re.onloadend=function(){return re=null},re.onerror=function(){return document.location.href=t},re.send()},w=function(t){return null!=re&&re.abort(),f(t.title,t.body),j(t),ne("page:restore")},u=function(){return K[b.url]={url:document.location.href,body:document.body,title:document.title,positionY:window.pageYOffset,positionX:window.pageXOffset,cachedAt:(new Date).getTime(),transitionCacheDisabled:null!=document.querySelector("[data-no-transition-cache]")},h(c)},B=function(t){return null==t&&(t=c),/^[\d]+$/.test(t)?c=parseInt(t):void 0},h=function(t){var e,n,i,r,s,o;for(i=Object.keys(K),e=i.map(function(t){return K[t].cachedAt}).sort(function(t,e){return e-t}),o=[],r=0,s=i.length;s>r;r++)n=i[r],K[n].cachedAt<=e[t]&&(ne("page:expire",K[n]),o.push(delete K[n]));return o},f=function(e,n,i,r){return document.title=e,document.documentElement.replaceChild(n,document.body),null!=i&&t.update(i),r&&g(),b=window.history.state,ne("page:change"),ne("page:update")},g=function(){var t,e,n,i,r,s,o,a,l,u,c,f;for(s=Array.prototype.slice.call(document.body.querySelectorAll('script:not([data-turbolinks-eval="false"])')),o=0,l=s.length;l>o;o++)if(r=s[o],""===(c=r.type)||"text/javascript"===c){for(e=document.createElement("script"),f=r.attributes,a=0,u=f.length;u>a;a++)t=f[a],e.setAttribute(t.name,t.value);e.appendChild(document.createTextNode(r.innerHTML)),i=r.parentNode,n=r.nextSibling,i.removeChild(r),i.insertBefore(e,n)}},Q=function(t){return t.innerHTML=t.innerHTML.replace(/<noscript[\S\s]*?<\/noscript>/gi,""),t},q=function(t){return t!==G?window.history.pushState({turbolinks:!0,url:t},"",t):void 0},z=function(){var t,e;return(t=re.getResponseHeader("X-XHR-Redirected-To"))?(e=V(t)===t?document.location.hash:"",window.history.replaceState(b,"",t+e)):void 0},W=function(){return G=document.location.href},U=function(){return window.history.replaceState({turbolinks:!0,url:document.location.href},"",document.location.href)},H=function(){return b=window.history.state},j=function(t){return window.scrollTo(t.positionX,t.positionY)},Z=function(){return document.location.hash?document.location.href=document.location.href:window.scrollTo(0,0)},X=function(t){return V(t)},V=function(t){var e;return e=t,null==t.href&&(e=document.createElement("A"),e.href=t),e.href.replace(e.hash,"")},P=function(t){var e,n;return e=(null!=(n=document.cookie.match(new RegExp(t+"=(\\w+)")))?n[1].toUpperCase():void 0)||"",document.cookie=t+"=; expires=Thu, 01-Jan-70 00:00:01 GMT; path=/",e},ne=function(t,e){var n;return n=document.createEvent("Events"),e&&(n.data=e),n.initEvent(t,!0,!0),document.dispatchEvent(n)},F=function(){return!ne("page:before-change")},O=function(){var t,e,n,i,r,s;return e=function(){var t;return 400<=(t=re.status)&&600>t},s=function(){return re.getResponseHeader("Content-Type").match(/^(?:text\/html|application\/xhtml\+xml|application\/xml)(?:;|$)/)},i=function(t){var e,n,i,r,s;for(r=t.head.childNodes,s=[],n=0,i=r.length;i>n;n++)e=r[n],null!=("function"==typeof e.getAttribute?e.getAttribute("data-turbolinks-track"):void 0)&&s.push(e.getAttribute("src")||e.getAttribute("href"));return s},t=function(t){var e;return M||(M=i(document)),e=i(t),e.length!==M.length||r(e,M).length!==M.length},r=function(t,e){var n,i,r,s,o;for(t.length>e.length&&(s=[e,t],t=s[0],e=s[1]),o=[],i=0,r=t.length;r>i;i++)n=t[i],oe.call(e,n)>=0&&o.push(n);return o},!e()&&s()&&(n=p(re.responseText),n&&!t(n))?n:void 0},y=function(e){var n;return n=e.querySelector("title"),[null!=n?n.textContent:void 0,Q(e.body),t.get(e).token,"runScripts"]},t={get:function(t){var e;return null==t&&(t=document),{node:e=t.querySelector('meta[name="csrf-token"]'),token:null!=e?"function"==typeof e.getAttribute?e.getAttribute("content"):void 0:void 0}},update:function(t){var e;return e=this.get(),null!=e.token&&null!=t&&e.token!==t?e.node.setAttribute("content",t):void 0}},i=function(){var t,e,n,i,r,s;e=function(t){return(new DOMParser).parseFromString(t,"text/html")},t=function(t){var e;return e=document.implementation.createHTMLDocument(""),e.documentElement.innerHTML=t,e},n=function(t){var e;return e=document.implementation.createHTMLDocument(""),e.open("replace"),e.write(t),e.close(),e};try{if(window.DOMParser)return r=e("<html><body><p>test"),e}catch(o){return i=o,r=t("<html><body><p>test"),t}finally{if(1!==(null!=r?null!=(s=r.body)?s.childNodes.length:void 0:void 0))return n}},$=function(t){return t.defaultPrevented?void 0:(document.removeEventListener("click",x,!1),document.addEventListener("click",x,!1))},x=function(t){var e;return t.defaultPrevented||(e=v(t),"A"!==e.nodeName||C(t,e))?void 0:(F()||ie(e.href),t.preventDefault())},v=function(t){var e;for(e=t.target;e.parentNode&&"A"!==e.nodeName;)e=e.parentNode;return e},d=function(t){return location.protocol!==t.protocol||location.host!==t.host},n=function(t){return(t.hash&&V(t))===V(location)||t.href===location.href+"#"},R=function(t){var e;return e=V(t),e.match(/\.[a-z]+(\?.*)?$/g)&&!e.match(new RegExp("\\.(?:"+T.join("|")+")?(\\?.*)?$","g"))},I=function(t){for(var e;!e&&t!==document;)e=null!=t.getAttribute("data-no-turbolink"),t=t.parentNode;return e},J=function(t){return 0!==t.target.length},D=function(t){return t.which>1||t.metaKey||t.ctrlKey||t.shiftKey||t.altKey},C=function(t,e){return d(e)||n(e)||R(e)||I(e)||J(e)||D(t)},e=function(){var t,e,n,i;for(e=1<=arguments.length?ae.call(arguments,0):[],n=0,i=e.length;i>n;n++)t=e[n],T.push(t);return T},l=function(t){return setTimeout(t,500)},A=function(){return document.addEventListener("DOMContentLoaded",function(){return ne("page:change"),ne("page:update")},!0)},L=function(){return"undefined"!=typeof jQuery?jQuery(document).on("ajaxSuccess",function(t,e){return jQuery.trim(e.responseText)?ne("page:update"):void 0}):void 0},N=function(t){var e,n;return(null!=(n=t.state)?n.turbolinks:void 0)?(e=K[t.state.url])?(u(),w(e)):ie(t.target.location.href):void 0},E=function(){return U(),H(),p=i(),document.addEventListener("click",$,!0),l(function(){return window.addEventListener("popstate",N,!1)})},S=void 0!==window.history.state||navigator.userAgent.match(/Firefox\/2[6|7]/),o=window.history&&window.history.pushState&&window.history.replaceState&&S,r=!navigator.userAgent.match(/CriOS\//),Y="GET"===(se=P("request_method"))||""===se,a=o&&r&&Y,s=document.addEventListener&&document.createEvent,s&&(A(),L()),a?(ie=_,E()):ie=function(t){return document.location.href=t},this.Turbolinks={visit:ie,pagesCached:B,enableTransitionCache:m,allowLinkExtensions:e,supported:a}}.call(this),function(){function t(){this.data=[],this.n=2*Ti+1;for(var t=null,e=0;e<this.n;e++){for(var t=[],n=0;n<this.n;n++)t.push(-1);this.data.push(t)}}function e(t){document.getElementById("log-text").innerHTML+="<li class='log-msg'>"+t+"</li>"}function n(t){var n="Error on call to "+t+". Response: ";return function(t){return e(n+t),new di.builtin.str(n+t)}}function i(t){return function(n){return di.builtin.statusFunction(),di.builtin.tilesFunction(),0===n.err&&e("Took a step "+t+". Now at position ("+Si.playerData.x.toString()+", "+Si.playerData.y.toString()+")"),1===n.err&&e("Can’t walk there..."),2===n.err&&e("Immobilized!"),new di.builtin.nmber(n.err,di.builtin.nmber.int$)}}function r(t){return 0===t.err&&e("Picked up item!"),1===t.err&&e("That item isn't there!"),2===t.err&&e("You can't access this tile!"),new di.builtin.nmber(t.err,di.builtin.nmber.int$)}function s(t){return 0===t.err&&e("Dropped item"),1===t.err&&e("You don't have that item!"),new di.builtin.nmber(t.err,di.builtin.nmber.int$)}function o(t){return 0===t.err&&e("Used item."),1===t.err&&e("You don't have that item!"),2===t.err&&e("Erm... I don't think you can do that with that item."),new di.builtin.nmber(t.err,di.builtin.nmber.int$)}function a(t){var n=new di.builtin.nmber(t.hp,di.builtin.nmber.int$),i=new di.builtin.nmber(t.battery,di.builtin.nmber.int$),r="Health: "+t.hp.toString()+" Battery: "+t.battery.toString(),r=r+" Position: ("+t.x.toString()+", "+t.y.toString()+")";return e(r),Si.playerData.facing=Ci[t.facing],Si.playerData.health=t.hp,Si.playerData.battery=t.battery,Si.playerData.x=t.x,Si.playerData.y=t.y,new di.builtin.tuple([n,i])}function l(t){return new di.builtin.nmber(t.err,di.builtin.nmber.int$)}function u(t){return new di.builtin.nmber(t.err,di.builtin.nmber.int$)}function c(t){var e=Si.mapData.n;Si.playerData.display=!0;var n=t.player_x,i=t.player_y,r=n-Ti,s=i-Ti;t=t.tiles;var o,a;if(t.length<(2*Ti+1)*(2*Ti+1))for(o=-Ti;Ti>=o;o++)for(a=-Ti;Ti>=a;a++)Si.mapData.setTile(o,a,-1);for(var l=0;l<t.length;l++)o=t[l].x,a=t[l].y,(0>o-r||o-r>e||0>a-s||a-s>e)&&alert("tile indices out of range"),Si.mapData.setTile(o-n,a-i,t[l].tile_type);return Si.renderMap(Si.Map.getIndices()),new di.builtin.nmber(0,di.builtin.int$)}function f(){return new di.builtin.str("charactersSuccess response handling not yet implemented")}function h(t,e,n,i,r){var s=new XMLHttpRequest;s.open(t,e,!1),s.setRequestHeader("Content-type","application/json"),t=document.getElementsByTagName("meta"),e="no token found";for(var o=0;o<t.length;o++)"csrf-token"==t[o].getAttribute("name")&&(e=t[o].getAttribute("content"));return s.setRequestHeader("X-CSRF-Token",e),s.send(JSON.stringify(r)),200===s.status?n(JSON.parse(s.responseText)):i(JSON.parse(s.responseText))}function p(){return"("+Array.prototype.slice.call(arguments).join("|")+")"}function d(){return p.apply(null,arguments)+"?"}function b(t,e){for(var n=t.length;n--;)if(t[n]===e)return!0;return!1}function m(t,e){for(var n=t.length;n>0&&-1!==e.indexOf(t.charAt(n-1));--n);return t.substring(0,n)}function g(t,e){return this.filename=t,this.grammar=e,this}function v(t,e){for(var n=t.length;n--;)if(t[n][0]===e[0]&&t[n][1]===e[1])return!0;return!1}function y(t,e){void 0===e&&(e="file_input");var n=new g(t,di.ParseTables);"file_input"===e?n.setup(di.ParseTables.sym.file_input):pi.asserts.fail("todo;");var i=di.Tokenizer.Tokens.T_COMMENT,r=di.Tokenizer.Tokens.T_NL,s=di.Tokenizer.Tokens.T_OP,o=new di.Tokenizer(t,"single_input"===e,function(t,e,o,a,l){return t!==i&&t!==r&&(t===s&&(t=di.OpMap[e]),n.addtoken(t,e,[o,a,l]))?!0:void 0});return function(t){if(t=o.generateTokens(t)){if("done"!==t)throw new di.builtin.ParseError("incomplete input",this.filename);return n.rootnode}return!1}}function _(){}function w(){}function k(){}function x(){}function S(){}function T(){}function C(){}function E(){}function $(){}function A(){}function N(){}function L(){}function M(){}function I(){}function R(){}function D(){}function K(){}function F(){}function B(){}function P(){}function O(){}function j(){}function G(){}function q(){}function z(){}function H(){}function U(){}function W(){}function V(){}function X(){}function Q(){}function Y(){}function Z(){}function J(){}function te(t){return this.body=t,this}function ee(t){return this.body=t,this}function ne(t){return pi.asserts.assert(null!==t&&void 0!==t),this.body=t,this}function ie(t){return this.body=t,this}function re(t,e,n,i,r,s){return pi.asserts.assert(null!==t&&void 0!==t),pi.asserts.assert(null!==e&&void 0!==e),this.name=t,this.args=e,this.body=n,this.decorator_list=i,this.lineno=r,this.col_offset=s,this}function se(t,e,n,i,r,s){return pi.asserts.assert(null!==t&&void 0!==t),this.name=t,this.bases=e,this.body=n,this.decorator_list=i,this.lineno=r,this.col_offset=s,this}function oe(t,e,n){return this.value=t,this.lineno=e,this.col_offset=n,this}function ae(t,e,n){return this.targets=t,this.lineno=e,this.col_offset=n,this}function le(t,e,n,i){return pi.asserts.assert(null!==e&&void 0!==e),this.targets=t,this.value=e,this.lineno=n,this.col_offset=i,this}function ue(t,e,n,i,r){return pi.asserts.assert(null!==t&&void 0!==t),pi.asserts.assert(null!==e&&void 0!==e),pi.asserts.assert(null!==n&&void 0!==n),this.target=t,this.op=e,this.value=n,this.lineno=i,this.col_offset=r,this}function ce(t,e,n,i,r){return this.dest=t,this.values=e,this.nl=n,this.lineno=i,this.col_offset=r,this}function fe(t,e,n,i,r,s){return pi.asserts.assert(null!==t&&void 0!==t),pi.asserts.assert(null!==e&&void 0!==e),this.target=t,this.iter=e,this.body=n,this.orelse=i,this.lineno=r,this.col_offset=s,this}function he(t,e,n,i,r){return pi.asserts.assert(null!==t&&void 0!==t),this.test=t,this.body=e,this.orelse=n,this.lineno=i,this.col_offset=r,this}function pe(t,e,n,i,r){return pi.asserts.assert(null!==t&&void 0!==t),this.test=t,this.body=e,this.orelse=n,this.lineno=i,this.col_offset=r,this}function de(t,e,n,i,r){return pi.asserts.assert(null!==t&&void 0!==t),this.context_expr=t,this.optional_vars=e,this.body=n,this.lineno=i,this.col_offset=r,this}function be(t,e,n,i,r){return this.type=t,this.inst=e,this.tback=n,this.lineno=i,this.col_offset=r,this}function me(t,e,n,i,r){return this.body=t,this.handlers=e,this.orelse=n,this.lineno=i,this.col_offset=r,this}function ge(t,e,n,i){return this.body=t,this.finalbody=e,this.lineno=n,this.col_offset=i,this}function ve(t,e,n,i){return pi.asserts.assert(null!==t&&void 0!==t),this.test=t,this.msg=e,this.lineno=n,this.col_offset=i,this}function ye(t,e,n){return this.names=t,this.lineno=e,this.col_offset=n,this}function _e(t,e,n,i,r){return pi.asserts.assert(null!==t&&void 0!==t),this.module=t,this.names=e,this.level=n,this.lineno=i,this.col_offset=r,this}function we(t,e,n,i,r){return pi.asserts.assert(null!==t&&void 0!==t),this.body=t,this.globals=e,this.locals=n,this.lineno=i,this.col_offset=r,this}function ke(t,e,n){return this.names=t,this.lineno=e,this.col_offset=n,this}function xe(t,e,n){return pi.asserts.assert(null!==t&&void 0!==t),this.value=t,this.lineno=e,this.col_offset=n,this}function Se(t,e){return this.lineno=t,this.col_offset=e,this}function Te(t,e){return this.lineno=t,this.col_offset=e,this}function Ce(t,e){return this.lineno=t,this.col_offset=e,this}function Ee(t,e,n,i){return pi.asserts.assert(null!==t&&void 0!==t),this.op=t,this.values=e,this.lineno=n,this.col_offset=i,this}function $e(t,e,n,i,r){return pi.asserts.assert(null!==t&&void 0!==t),pi.asserts.assert(null!==e&&void 0!==e),pi.asserts.assert(null!==n&&void 0!==n),this.left=t,this.op=e,this.right=n,this.lineno=i,this.col_offset=r,this}function Ae(t,e,n,i){return pi.asserts.assert(null!==t&&void 0!==t),pi.asserts.assert(null!==e&&void 0!==e),this.op=t,this.operand=e,this.lineno=n,this.col_offset=i,this}function Ne(t,e,n,i){return pi.asserts.assert(null!==t&&void 0!==t),pi.asserts.assert(null!==e&&void 0!==e),this.args=t,this.body=e,this.lineno=n,this.col_offset=i,this}function Le(t,e,n,i,r){return pi.asserts.assert(null!==t&&void 0!==t),pi.asserts.assert(null!==e&&void 0!==e),pi.asserts.assert(null!==n&&void 0!==n),this.test=t,this.body=e,this.orelse=n,this.lineno=i,this.col_offset=r,this}function Me(t,e,n,i){return this.keys=t,this.values=e,this.lineno=n,this.col_offset=i,this}function Ie(t,e,n,i){return pi.asserts.assert(null!==t&&void 0!==t),this.elt=t,this.generators=e,this.lineno=n,this.col_offset=i,this}function Re(t,e,n,i){return pi.asserts.assert(null!==t&&void 0!==t),this.elt=t,this.generators=e,this.lineno=n,this.col_offset=i,this}function De(t,e,n){return this.value=t,this.lineno=e,this.col_offset=n,this}function Ke(t,e,n,i,r){return pi.asserts.assert(null!==t&&void 0!==t),this.left=t,this.ops=e,this.comparators=n,this.lineno=i,this.col_offset=r,this}function Fe(t,e,n,i,r,s,o){return pi.asserts.assert(null!==t&&void 0!==t),this.func=t,this.args=e,this.keywords=n,this.starargs=i,this.kwargs=r,this.lineno=s,this.col_offset=o,this}function Be(t,e,n){return pi.asserts.assert(null!==t&&void 0!==t),this.n=t,this.lineno=e,this.col_offset=n,this}function Pe(t,e,n){return pi.asserts.assert(null!==t&&void 0!==t),this.s=t,this.lineno=e,this.col_offset=n,this}function Oe(t,e,n,i,r){return pi.asserts.assert(null!==t&&void 0!==t),pi.asserts.assert(null!==e&&void 0!==e),pi.asserts.assert(null!==n&&void 0!==n),this.value=t,this.attr=e,this.ctx=n,this.lineno=i,this.col_offset=r,this}function je(t,e,n,i,r){return pi.asserts.assert(null!==t&&void 0!==t),pi.asserts.assert(null!==e&&void 0!==e),pi.asserts.assert(null!==n&&void 0!==n),this.value=t,this.slice=e,this.ctx=n,this.lineno=i,this.col_offset=r,this}function Ge(t,e,n,i){return pi.asserts.assert(null!==t&&void 0!==t),pi.asserts.assert(null!==e&&void 0!==e),this.id=t,this.ctx=e,this.lineno=n,this.col_offset=i,this}function qe(t,e,n,i){return pi.asserts.assert(null!==e&&void 0!==e),this.elts=t,this.ctx=e,this.lineno=n,this.col_offset=i,this}function ze(t,e,n,i){return pi.asserts.assert(null!==e&&void 0!==e),this.elts=t,this.ctx=e,this.lineno=n,this.col_offset=i,this}function He(){return this}function Ue(t,e,n){return this.lower=t,this.upper=e,this.step=n,this}function We(t){return this.dims=t,this}function Ve(t){return pi.asserts.assert(null!==t&&void 0!==t),this.value=t,this}function Xe(t,e,n){return pi.asserts.assert(null!==t&&void 0!==t),pi.asserts.assert(null!==e&&void 0!==e),this.target=t,this.iter=e,this.ifs=n,this}function Qe(t,e,n,i,r){return this.type=t,this.name=e,this.body=n,this.lineno=i,this.col_offset=r,this}function Ye(t,e,n,i){return this.args=t,this.vararg=e,this.kwarg=n,this.defaults=i,this}function Ze(t,e){return pi.asserts.assert(null!==t&&void 0!==t),pi.asserts.assert(null!==e&&void 0!==e),this.arg=t,this.value=e,this}function Je(t,e){return pi.asserts.assert(null!==t&&void 0!==t),this.name=t,this.asname=e,this}function tn(t,e){this.c_encoding=t,this.c_filename=e}function en(t){return pi.asserts.assert(void 0!==t),null===t.children?0:t.children.length}function nn(t,e){return pi.asserts.assert(void 0!==t),pi.asserts.assert(void 0!==e),t.children[e]}function rn(t,e){pi.asserts.assert(t.type===e,"node wasn't expected type")}function sn(t){return pi.asserts.assert("string"==typeof t,"expecting string, got "+typeof t),new di.builtin.str(t)}function on(t){switch(t.type){case cr.single_input:if(nn(t,0).type===fr.T_NEWLINE)break;return on(nn(t,0));case cr.file_input:for(var e=0,n=0;n<en(t);++n){var i=nn(t,n);i.type===cr.stmt&&(e+=on(i))}return e;case cr.stmt:return on(nn(t,0));case cr.compound_stmt:return 1;case cr.simple_stmt:return Math.floor(en(t)/2);case cr.suite:if(1===en(t))return on(nn(t,0));for(e=0,n=2;n<en(t)-1;++n)e+=on(nn(t,n));return e;default:pi.asserts.fail("Non-statement found")}return 0}function an(t,e,n,i){if("None"===n)throw new di.builtin.SyntaxError("assignment to None",t.c_filename,i);if("True"===n||"False"===n)throw new di.builtin.SyntaxError("assignment to True or False is forbidden",t.c_filename,i)}function ln(t,e,n,i){pi.asserts.assert(n!==S&&n!==x);var r=null,s=null;switch(e.constructor){case Oe:case Ge:n===w&&an(t,i,e.attr,i.lineno),e.ctx=n;break;case je:e.ctx=n;break;case qe:e.ctx=n,r=e.elts;break;case ze:if(0===e.elts.length)throw new di.builtin.SyntaxError("can't assign to ()",t.c_filename,i.lineno);e.ctx=n,r=e.elts;break;case Ne:s="lambda";break;case Fe:s="function call";break;case Ee:case $e:case Ae:s="operator";break;case Re:s="generator expression";break;case De:s="yield expression";break;case Ie:s="list comprehension";break;case Me:case Be:case Pe:s="literal";break;case Ke:s="comparison";break;case Le:s="conditional expression";break;default:pi.asserts.fail("unhandled expression in assignment")}if(s)throw new di.builtin.SyntaxError("can't "+(n===w?"assign to":"delete")+" "+s,t.c_filename,i.lineno);if(r)for(e=0;e<r.length;++e)ln(t,r[e],n,i)}function un(t){return pi.asserts.assert(void 0!==hr[t.type]),hr[t.type]}function cn(t,e){if(rn(e,cr.comp_op),1===en(e))switch(e=nn(e,0),e.type){case fr.T_LESS:return U;case fr.T_GREATER:return V;case fr.T_EQEQUAL:return z;case fr.T_LESSEQUAL:return W;case fr.T_GREATEREQUAL:return X;case fr.T_NOTEQUAL:return H;case fr.T_NAME:if("in"===e.value)return Z;if("is"===e.value)return Q}else if(2===en(e)&&nn(e,0).type===fr.T_NAME){if("in"===nn(e,1).value)return J;if("is"===nn(e,0).value)return Y}pi.asserts.fail("invalid comp_op")}function fn(t,e){pi.asserts.assert(e.type===cr.testlist||e.type===cr.listmaker||e.type===cr.testlist_gexp||e.type===cr.testlist_safe||e.type===cr.testlist1);for(var n=[],i=0;i<en(e);i+=2)pi.asserts.assert(nn(e,i).type===cr.test||nn(e,i).type===cr.old_test),n[i/2]=ti(t,nn(e,i));return n}function hn(t,e){rn(e,cr.suite);var n,i=[],r=0;if(nn(e,0).type===cr.simple_stmt){e=nn(e,0),n=en(e)-1,nn(e,n-1).type===fr.T_SEMI&&(n-=1);for(var s=0;n>s;s+=2)i[r++]=ni(t,nn(e,s))}else for(s=2;s<en(e)-1;++s)if(n=nn(e,s),rn(n,cr.stmt),1===on(n))i[r++]=ni(t,n);else{n=nn(n,0),rn(n,cr.simple_stmt);for(var o=0;o<en(n);o+=2){if(0===en(nn(n,o))){pi.asserts.assert(o+1===en(n));break}i[r++]=ni(t,nn(n,o))}}return pi.asserts.assert(r===on(e)),i}function pn(t,e,n){if(rn(e,cr.except_clause),rn(n,cr.suite),1===en(e))return new Qe(null,null,hn(t,n),e.lineno,e.col_offset);if(2===en(e))return new Qe(ti(t,nn(e,1)),null,hn(t,n),e.lineno,e.col_offset);if(4===en(e)){var i=ti(t,nn(e,3));return ln(t,i,w,nn(e,3)),new Qe(ti(t,nn(e,1)),i,hn(t,n),e.lineno,e.col_offset)}pi.asserts.fail("wrong number of children for except clause")}function dn(t,e){var n,i=en(e),r=(i-3)/3,s=[],o=null;if(rn(e,cr.try_stmt),n=hn(t,nn(e,2)),nn(e,i-3).type===fr.T_NAME)"finally"===nn(e,i-3).value?(i>=9&&nn(e,i-6).type===fr.T_NAME&&(s=hn(t,nn(e,i-4)),r--),o=hn(t,nn(e,i-1))):s=hn(t,nn(e,i-1)),r--;else if(nn(e,i-3).type!==cr.except_clause)throw new di.builtin.SyntaxError("malformed 'try' statement",t.c_filename,e.lineno);if(r>0){for(var i=[],a=0;r>a;++a)i[a]=pn(t,nn(e,3+3*a),nn(e,5+3*a));if(r=new me(n,i,s,e.lineno,e.col_offset),!o)return r;n=[r]}return pi.asserts.assert(null!==o),new ge(n,o,e.lineno,e.col_offset)}function bn(t,e){rn(e,cr.dotted_name);for(var n=e.lineno,i=e.col_offset,r=sn(nn(e,0).value),s=new Ge(r,_,n,i),o=2;o<en(e);o+=2)r=sn(nn(e,o).value),s=new Oe(s,r,_,n,i);return s}function mn(t,e){rn(e,cr.decorator),rn(nn(e,0),fr.T_AT),rn(nn(e,en(e)-1),fr.T_NEWLINE);var n=bn(t,nn(e,1));return 3===en(e)?n:5===en(e)?new Fe(n,[],[],null,null,e.lineno,e.col_offset):In(t,nn(e,3),n)}function gn(t,e){rn(e,cr.decorators);for(var n=[],i=0;i<en(e);++i)n[i]=mn(t,nn(e,i));return n}function vn(t,e){rn(e,cr.decorated);var n=gn(t,nn(e,0));pi.asserts.assert(nn(e,1).type===cr.funcdef||nn(e,1).type===cr.classdef);var i=null;return nn(e,1).type===cr.funcdef?i=Fn(t,nn(e,1),n):nn(e,1)===cr.classdef&&(i=Pn(t,nn(e,1),n)),i&&(i.lineno=e.lineno,i.col_offset=e.col_offset),i}function yn(t,e){return rn(e,cr.with_var),ti(t,nn(e,1))}function _n(t,e){var n=3;pi.asserts.assert(e.type===cr.with_stmt);var i=ti(t,nn(e,1));if(nn(e,2).type===cr.with_var){var r=yn(t,nn(e,2));ln(t,r,w,e),n=4}return new de(i,r,hn(t,nn(e,n)),e.lineno,e.col_offset)}function wn(t,e){var n,i=null,r=null,s=en(e);return pi.asserts.assert(2===s||4===s||6===s),rn(e,cr.exec_stmt),n=ti(t,nn(e,1)),s>=4&&(i=ti(t,nn(e,3))),6===s&&(r=ti(t,nn(e,5))),new we(n,i,r,e.lineno,e.col_offset)}function kn(t,e){if(rn(e,cr.if_stmt),4===en(e))return new pe(ti(t,nn(e,1)),hn(t,nn(e,3)),[],e.lineno,e.col_offset);var n=nn(e,4).value.charAt(2);if("s"===n)return new pe(ti(t,nn(e,1)),hn(t,nn(e,3)),hn(t,nn(e,6)),e.lineno,e.col_offset);if("i"===n){var n=en(e)-4,i=!1,r=[];for(nn(e,n+1).type===fr.T_NAME&&"s"===nn(e,n+1).value.charAt(2)&&(i=!0,n-=3),n/=4,i&&(r=[new pe(ti(t,nn(e,en(e)-6)),hn(t,nn(e,en(e)-4)),hn(t,nn(e,en(e)-1)),nn(e,en(e)-6).lineno,nn(e,en(e)-6).col_offset)],n--),i=0;n>i;++i)var s=5+4*(n-i-1),r=[new pe(ti(t,nn(e,s)),hn(t,nn(e,s+2)),r,nn(e,s).lineno,nn(e,s).col_offset)];return new pe(ti(t,nn(e,1)),hn(t,nn(e,3)),r,e.lineno,e.col_offset)}pi.asserts.fail("unexpected token in 'if' statement")}function xn(t,e,n){rn(e,cr.exprlist);for(var i=[],r=0;r<en(e);r+=2){var s=ti(t,nn(e,r));i[r/2]=s,n&&ln(t,s,n,nn(e,r))}return i}function Sn(t,e){return rn(e,cr.del_stmt),new ae(xn(t,nn(e,1),k),e.lineno,e.col_offset)}function Tn(t,e){rn(e,cr.global_stmt);for(var n=[],i=1;i<en(e);i+=2)n[(i-1)/2]=sn(nn(e,i).value);return new ke(n,e.lineno,e.col_offset)}function Cn(t,e){return rn(e,cr.assert_stmt),2===en(e)?new ve(ti(t,nn(e,1)),null,e.lineno,e.col_offset):4===en(e)?new ve(ti(t,nn(e,1)),ti(t,nn(e,3)),e.lineno,e.col_offset):(pi.asserts.fail("improper number of parts to assert stmt"),void 0)}function En(t,e){t:for(;;)switch(e.type){case cr.import_as_name:var n=null,i=sn(nn(e,0).value);return 3===en(e)&&(n=nn(e,2).value),new Je(i,null==n?null:sn(n));case cr.dotted_as_name:if(1===en(e)){e=nn(e,0);continue t}return n=En(t,nn(e,0)),pi.asserts.assert(!n.asname),n.asname=sn(nn(e,2).value),n;case cr.dotted_name:if(1===en(e))return new Je(sn(nn(e,0).value),null);for(n="",i=0;i<en(e);i+=2)n+=nn(e,i).value+".";return new Je(sn(n.substr(0,n.length-1)),null);case fr.T_STAR:return new Je(sn("*"),null);default:throw new di.builtin.SyntaxError("unexpected import name",t.c_filename,e.lineno)}}function $n(t,e){rn(e,cr.import_stmt);var n=e.lineno,i=e.col_offset;if(e=nn(e,0),e.type===cr.import_name){e=nn(e,1),rn(e,cr.dotted_as_names);for(var r=[],s=0;s<en(e);s+=2)r[s/2]=En(t,nn(e,s));return new ye(r,n,i)}if(e.type===cr.import_from){for(var o=null,a=0,r=1;r<en(e);++r){if(nn(e,r).type===cr.dotted_name){o=En(t,nn(e,r)),r++;
break}if(nn(e,r).type!==fr.T_DOT)break;a++}switch(++r,nn(e,r).type){case fr.T_STAR:e=nn(e,r);break;case fr.T_LPAR:e=nn(e,r+1),en(e);break;case cr.import_as_names:if(e=nn(e,r),r=en(e),0===r%2)throw new di.builtin.SyntaxError("trailing comma not allowed without surrounding parentheses",t.c_filename,e.lineno);break;default:throw new di.builtin.SyntaxError("Unexpected node-type in from-import",t.c_filename,e.lineno)}if(r=[],e.type===fr.T_STAR)r[0]=En(t,e);else for(s=0;s<en(e);s+=2)r[s/2]=En(t,nn(e,s));return new _e(sn(o?o.name.v:""),r,a,n,i)}throw new di.builtin.SyntaxError("unknown import statement",t.c_filename,e.lineno)}function An(t,e){return pi.asserts.assert(e.type===cr.testlist_gexp||e.type===cr.argument),1<en(e)&&nn(e,1).type===cr.gen_for?jn(t,e):Hn(t,e)}function Nn(t,e){function n(t,e){for(var n=0;;){if(rn(e,cr.list_iter),nn(e,0).type===cr.list_for)return n;if(e=nn(e,0),rn(e,cr.list_if),n++,2==en(e))return n;e=nn(e,2)}}rn(e,cr.listmaker),pi.asserts.assert(1<en(e));for(var i=ti(t,nn(e,0)),r=function(t,e){var n=0,i=nn(e,1);t:for(;;){if(n++,rn(i,cr.list_for),5!==en(i))return n;i=nn(i,4);e:for(;;){if(rn(i,cr.list_iter),i=nn(i,0),i.type===cr.list_for)continue t;if(i.type===cr.list_if){if(3===en(i)){i=nn(i,2);continue e}return n}break}break}}(t,e),s=[],o=nn(e,1),a=0;r>a;++a){rn(o,cr.list_for);var l=nn(o,1),u=xn(t,l,w),c=Hn(t,nn(o,3)),l=1===en(l)?new Xe(u[0],c,[]):new Xe(new ze(u,w,o.lineno,o.col_offset),c,[]);if(5===en(o)){for(var o=nn(o,4),u=n(t,o),c=[],f=0;u>f;++f)rn(o,cr.list_iter),o=nn(o,0),rn(o,cr.list_if),c[f]=ti(t,nn(o,1)),3===en(o)&&(o=nn(o,2));o.type===cr.list_iter&&(o=nn(o,0)),l.ifs=c}s[a]=l}return new Ie(i,s,e.lineno,e.col_offset)}function Ln(t,e){if(nn(e,0).type===fr.T_MINUS&&2===en(e)){var n=nn(e,1);if(n.type===cr.factor&&1===en(n)&&(n=nn(n,0),n.type===cr.power&&1===en(n)&&(n=nn(n,0),n.type===cr.atom))){var i=nn(n,0);if(i.type===fr.T_NUMBER)return i.value="-"+i.value,Zn(t,n)}}switch(n=ti(t,nn(e,1)),nn(e,0).type){case fr.T_PLUS:return new Ae(G,n,e.lineno,e.col_offset);case fr.T_MINUS:return new Ae(q,n,e.lineno,e.col_offset);case fr.T_TILDE:return new Ae(O,n,e.lineno,e.col_offset)}pi.asserts.fail("unhandled factor")}function Mn(t,e){var n=[];rn(e,cr.for_stmt),9===en(e)&&(n=hn(t,nn(e,8)));var i=nn(e,1),r=xn(t,i,w),i=1===en(i)?r[0]:new ze(r,w,e.lineno,e.col_offset);return new fe(i,Hn(t,nn(e,3)),hn(t,nn(e,5)),n,e.lineno,e.col_offset)}function In(t,e,n){rn(e,cr.arglist);for(var i=0,r=0,s=0,o=0;o<en(e);++o){var a=nn(e,o);a.type===cr.argument&&(1===en(a)?i++:nn(a,1).type===cr.gen_for?s++:r++)}if(s>1||s&&(i||r))throw new di.builtin.SyntaxError("Generator expression must be parenthesized if not sole argument",t.c_filename,e.lineno);if(i+r+s>255)throw new di.builtin.SyntaxError("more than 255 arguments",t.c_filename,e.lineno);for(var s=[],l=[],r=i=0,u=null,c=null,o=0;o<en(e);++o)if(a=nn(e,o),a.type===cr.argument)if(1===en(a)){if(r)throw new di.builtin.SyntaxError("non-keyword arg after keyword arg",t.c_filename,e.lineno);if(u)throw new di.builtin.SyntaxError("only named arguments may follow *expression",t.c_filename,e.lineno);s[i++]=ti(t,nn(a,0))}else if(nn(a,1).type===cr.gen_for)s[i++]=jn(t,a);else{var f=ti(t,nn(a,0));if(f.constructor===Ne)throw new di.builtin.SyntaxError("lambda cannot contain assignment",t.c_filename,e.lineno);if(f.constructor!==Ge)throw new di.builtin.SyntaxError("keyword can't be an expression",t.c_filename,e.lineno);f=f.id,an(t,nn(a,0),f,e.lineno);for(var h=0;r>h;++h)if(l[h].arg===f)throw new di.builtin.SyntaxError("keyword argument repeated",t.c_filename,e.lineno);l[r++]=new Ze(f,ti(t,nn(a,2)))}else a.type===fr.T_STAR?u=ti(t,nn(e,++o)):a.type===fr.T_DOUBLESTAR&&(c=ti(t,nn(e,++o)));return new Fe(n,s,l,u,c,n.lineno,n.col_offset)}function Rn(t,e,n){if(rn(e,cr.trailer),nn(e,0).type===fr.T_LPAR)return 2===en(e)?new Fe(n,[],[],null,null,e.lineno,e.col_offset):In(t,nn(e,1),n);if(nn(e,0).type===fr.T_DOT)return new Oe(n,sn(nn(e,1).value),_,e.lineno,e.col_offset);if(rn(nn(e,0),fr.T_LSQB),rn(nn(e,2),fr.T_RSQB),e=nn(e,1),1===en(e))return new je(n,Yn(t,nn(e,0)),_,e.lineno,e.col_offset);for(var i=!0,r=[],s=0;s<en(e);s+=2){var o=Yn(t,nn(e,s));o.constructor!==Ve&&(i=!1),r[s/2]=o}if(!i)return new je(n,new We(r),_,e.lineno,e.col_offset);for(t=[],s=0;s<r.length;++s)o=r[s],pi.asserts.assert(o.constructor===Ve&&null!==o.value&&void 0!==o.value),t[s]=o.value;return r=new ze(t,_,e.lineno,e.col_offset),new je(n,new Ve(r),_,e.lineno,e.col_offset)}function Dn(t,e){var n;switch(rn(e,cr.flow_stmt),n=nn(e,0),n.type){case cr.break_stmt:return new Te(e.lineno,e.col_offset);case cr.continue_stmt:return new Ce(e.lineno,e.col_offset);case cr.yield_stmt:return new xe(ti(t,nn(n,0)),e.lineno,e.col_offset);case cr.return_stmt:return 1===en(n)?new oe(null,e.lineno,e.col_offset):new oe(Hn(t,nn(n,1)),e.lineno,e.col_offset);case cr.raise_stmt:if(1===en(n))return new be(null,null,null,e.lineno,e.col_offset);if(2===en(n))return new be(ti(t,nn(n,1)),null,null,e.lineno,e.col_offset);if(4===en(n))return new be(ti(t,nn(n,1)),ti(t,nn(n,3)),null,e.lineno,e.col_offset);if(6===en(n))return new be(ti(t,nn(n,1)),ti(t,nn(n,3)),ti(t,nn(n,5)),e.lineno,e.col_offset);default:pi.asserts.fail("unexpected flow_stmt")}pi.asserts.fail("unhandled flow statement")}function Kn(t,e){var n,i=null,r=null;if(e.type===cr.parameters){if(2===en(e))return new Ye([],null,null,[]);e=nn(e,1)}rn(e,cr.varargslist);for(var s=[],o=[],a=!1,l=0,u=0,c=0;l<en(e);)switch(n=nn(e,l),n.type){case cr.fpdef:for(var f=0;;){if(l+1<en(e)&&nn(e,l+1).type===fr.T_EQUAL)o[u++]=ti(t,nn(e,l+2)),l+=2,a=!0;else if(a){if(f)throw new di.builtin.SyntaxError("parenthesized arg with default",t.c_filename,e.lineno);throw new di.builtin.SyntaxError("non-default argument follows default argument",t.c_filename,e.lineno)}{if(3!==en(n)){if(nn(n,0).type===fr.T_NAME){an(t,e,nn(n,0).value,e.lineno);var h=sn(nn(n,0).value);s[c++]=new Ge(h,T,n.lineno,n.col_offset)}if(l+=2,f)throw new di.builtin.SyntaxError("parenthesized argument names are invalid",t.c_filename,e.lineno);break}if(n=nn(n,1),1!==en(n))throw new di.builtin.SyntaxError("tuple parameter unpacking has been removed",t.c_filename,e.lineno);f=!0,n=nn(n,0),pi.asserts.assert(n.type===cr.fpdef)}}break;case fr.T_STAR:an(t,nn(e,l+1),nn(e,l+1).value,e.lineno),i=sn(nn(e,l+1).value),l+=3;break;case fr.T_DOUBLESTAR:an(t,nn(e,l+1),nn(e,l+1).value,e.lineno),r=sn(nn(e,l+1).value),l+=3;break;default:pi.asserts.fail("unexpected node in varargslist")}return new Ye(s,i,r,o)}function Fn(t,e,n){rn(e,cr.funcdef);var i=sn(nn(e,1).value);an(t,nn(e,1),nn(e,1).value,e.lineno);var r=Kn(t,nn(e,2));return t=hn(t,nn(e,4)),new re(i,r,t,n,e.lineno,e.col_offset)}function Bn(t,e){return pi.asserts.assert(0<en(e)),rn(e,cr.testlist),1===en(e)?[ti(t,nn(e,0))]:fn(t,e)}function Pn(t,e,n){rn(e,cr.classdef),an(t,e,nn(e,1).value,e.lineno);var i=sn(nn(e,1).value);if(4===en(e))return new se(i,[],hn(t,nn(e,3)),n,e.lineno,e.col_offset);if(nn(e,3).type===fr.T_RPAR)return new se(i,[],hn(t,nn(e,5)),n,e.lineno,e.col_offset);var r=Bn(t,nn(e,3));return t=hn(t,nn(e,6)),new se(i,r,t,n,e.lineno,e.col_offset)}function On(t,e){var n,i;return 3===en(e)?(n=new Ye([],null,null,[]),i=ti(t,nn(e,2))):(n=Kn(t,nn(e,1)),i=ti(t,nn(e,3))),new Ne(n,i,e.lineno,e.col_offset)}function jn(t,e){function n(t,e){for(var n=0;;){if(rn(e,cr.gen_iter),nn(e,0).type===cr.gen_for)return n;if(e=nn(e,0),rn(e,cr.gen_if),n++,2==en(e))return n;e=nn(e,2)}}pi.asserts.assert(e.type===cr.testlist_gexp||e.type===cr.argument),pi.asserts.assert(1<en(e));for(var i=ti(t,nn(e,0)),r=function(t,e){var n=0,i=nn(e,1);t:for(;;){if(n++,rn(i,cr.gen_for),5!==en(i))return n;i=nn(i,4);e:for(;;){if(rn(i,cr.gen_iter),i=nn(i,0),i.type===cr.gen_for)continue t;if(i.type===cr.gen_if){if(3===en(i)){i=nn(i,2);continue e}return n}break}break}pi.asserts.fail("logic error in countGenFors")}(t,e),s=[],o=nn(e,1),a=0;r>a;++a){rn(o,cr.gen_for);var l=nn(o,1),u=xn(t,l,w),c=ti(t,nn(o,3)),l=1===en(l)?new Xe(u[0],c,[]):new Xe(new ze(u,w,o.lineno,o.col_offset),c,[]);if(5===en(o)){for(var o=nn(o,4),u=n(t,o),f=[],h=0;u>h;++h)rn(o,cr.gen_iter),o=nn(o,0),rn(o,cr.gen_if),c=ti(t,nn(o,1)),f[h]=c,3===en(o)&&(o=nn(o,2));o.type===cr.gen_iter&&(o=nn(o,0)),l.ifs=f}s[a]=l}return new Re(i,s,e.lineno,e.col_offset)}function Gn(t,e){return rn(e,cr.while_stmt),4===en(e)?new he(ti(t,nn(e,1)),hn(t,nn(e,3)),[],e.lineno,e.col_offset):7===en(e)?new he(ti(t,nn(e,1)),hn(t,nn(e,3)),hn(t,nn(e,6)),e.lineno,e.col_offset):(pi.asserts.fail("wrong number of tokens for 'while' stmt"),void 0)}function qn(t,e){switch(rn(e,cr.augassign),e=nn(e,0),e.value.charAt(0)){case"+":return $;case"-":return A;case"/":return"/"===e.value.charAt(1)?P:L;case"%":return M;case"<":return R;case">":return D;case"&":return B;case"^":return F;case"|":return K;case"*":return"*"===e.value.charAt(1)?I:N;default:pi.asserts.fail("invalid augassign")}}function zn(t,e){for(var n=new $e(ti(t,nn(e,0)),un(nn(e,1)),ti(t,nn(e,2)),e.lineno,e.col_offset),i=(en(e)-1)/2,r=1;i>r;++r)var s=nn(e,2*r+1),o=un(s),a=ti(t,nn(e,2*r+2)),n=new $e(n,o,a,s.lineno,s.col_offset);return n}function Hn(t,e){return pi.asserts.assert(0<en(e)),e.type===cr.testlist_gexp?1<en(e)&&pi.asserts.assert(nn(e,1).type!==cr.gen_for):pi.asserts.assert(e.type===cr.testlist||e.type===cr.testlist_safe||e.type===cr.testlist1),1===en(e)?ti(t,nn(e,0)):new ze(fn(t,e),_,e.lineno,e.col_offset)}function Un(t,e){if(rn(e,cr.expr_stmt),1===en(e))return new xe(Hn(t,nn(e,0)),e.lineno,e.col_offset);if(nn(e,1).type===cr.augassign){var n=nn(e,0),i=Hn(t,n);switch(i.constructor){case Re:throw new di.builtin.SyntaxError("augmented assignment to generator expression not possible",t.c_filename,e.lineno);case De:throw new di.builtin.SyntaxError("augmented assignment to yield expression not possible",t.c_filename,e.lineno);case Ge:an(t,n,i.id,e.lineno);break;case Oe:case je:break;default:throw new di.builtin.SyntaxError("illegal expression for augmented assignment",t.c_filename,e.lineno)}return ln(t,i,w,n),n=nn(e,2),n=n.type===cr.testlist?Hn(t,n):ti(t,n),new ue(i,qn(t,nn(e,1)),n,e.lineno,e.col_offset)}rn(nn(e,1),fr.T_EQUAL);for(var i=[],r=0;r<en(e)-2;r+=2){if(n=nn(e,r),n.type===cr.yield_expr)throw new di.builtin.SyntaxError("assignment to yield expression not possible",t.c_filename,e.lineno);n=Hn(t,n),ln(t,n,w,nn(e,r)),i[r/2]=n}return n=nn(e,en(e)-1),n=n.type===cr.testlist?Hn(t,n):ti(t,n),new le(i,n,e.lineno,e.col_offset)}function Wn(t,e){return pi.asserts.assert(5===en(e)),new Le(ti(t,nn(e,2)),ti(t,nn(e,0)),ti(t,nn(e,4)),e.lineno,e.col_offset)}function Vn(t,e){var n=e.charAt(0),i=!1;if("u"===n||"U"===n?(e=e.substr(1),n=e.charAt(0)):("r"===n||"R"===n)&&(e=e.substr(1),n=e.charAt(0),i=!0),pi.asserts.assert("b"!==n&&"B"!==n,"todo; haven't done b'' strings yet"),pi.asserts.assert("'"===n||'"'===n&&e.charAt(e.length-1)===n),e=e.substr(1,e.length-2),4<=e.length&&e.charAt(0)===n&&e.charAt(1)===n&&(pi.asserts.assert(e.charAt(e.length-1)===n&&e.charAt(e.length-2)===n),e=e.substr(2,e.length-4)),i||-1===e.indexOf("\\"))n=sn(decodeURIComponent(escape(e)));else{for(var n=sn,i=e,r=i.length,s="",o=0;r>o;++o){var a=i.charAt(o);if("\\"===a){if(++o,a=i.charAt(o),"n"===a)s+="\n";else if("\\"===a)s+="\\";else if("t"===a)s+="	";else if("r"===a)s+="\r";else if("b"===a)s+="\b";else if("f"===a)s+="\f";else if("v"===a)s+="";else if("0"===a)s+="\x00";else if('"'===a)s+='"';else if("'"===a)s+="'";else if("\n"!==a)if("x"===a)var a=i.charAt(++o),l=i.charAt(++o),s=s+String.fromCharCode(parseInt(a+l,16));else if("u"===a||"U"===a)var a=i.charAt(++o),l=i.charAt(++o),u=i.charAt(++o),c=i.charAt(++o),s=s+String.fromCharCode(parseInt(a+l,16),parseInt(u+c,16));else s+="\\"+a}else s+=a}n=n(s)}return n}function Xn(t,e){rn(nn(e,0),fr.T_STRING);for(var n=new di.builtin.str(""),i=0;i<en(e);++i)try{n=n.sq$concat(Vn(t,nn(e,i).value))}catch(r){throw new di.builtin.SyntaxError("invalid string (possibly contains a unicode character)",t.c_filename,nn(e,i).lineno)}return n}function Qn(t,e,n){var i=e.charAt(e.length-1);if("j"===i||"J"===i)throw new di.builtin.SyntaxError("complex numbers are currently unsupported",t.c_filename,n);if("l"===i||"L"===i)return di.longFromStr(e.substr(0,e.length-1),0);if(-1!==e.indexOf("."))return new di.builtin.nmber(parseFloat(e),di.builtin.nmber.float$);if(n=e,t=!1,"-"===e.charAt(0)&&(n=e.substr(1),t=!0),"0"!==n.charAt(0)||"x"!==n.charAt(1)&&"X"!==n.charAt(1)){if(-1!==e.indexOf("e")||-1!==e.indexOf("E"))return new di.builtin.nmber(parseFloat(e),di.builtin.nmber.float$);"0"!==n.charAt(0)||"b"!==n.charAt(1)&&"B"!==n.charAt(1)?"0"===n.charAt(0)?"0"===n?n=0:(n=n.substring(1),("o"===n.charAt(0)||"O"===n.charAt(0))&&(n=n.substring(1)),n=parseInt(n,8)):n=parseInt(n,10):(n=n.substring(2),n=parseInt(n,2))}else n=n.substring(2),n=parseInt(n,16);return n>di.builtin.lng.threshold$&&Math.floor(n)===n&&-1===e.indexOf("e")&&-1===e.indexOf("E")?di.longFromStr(e,0):t?new di.builtin.nmber(-n,di.builtin.int$):new di.builtin.nmber(n,di.builtin.int$)}function Yn(t,e){rn(e,cr.subscript);var n=nn(e,0),i=null,r=null,s=null;return n.type===fr.T_DOT?new He:1===en(e)&&n.type===cr.test?new Ve(ti(t,n)):(n.type===cr.test&&(i=ti(t,n)),n.type===fr.T_COLON?1<en(e)&&(n=nn(e,1),n.type===cr.test&&(r=ti(t,n))):2<en(e)&&(n=nn(e,2),n.type===cr.test&&(r=ti(t,n))),n=nn(e,en(e)-1),n.type===cr.sliceop&&(1===en(n)?(n=nn(n,0),s=new Ge(sn("None"),_,n.lineno,n.col_offset)):(n=nn(n,1),n.type===cr.test&&(s=ti(t,n)))),new Ue(i,r,s))}function Zn(t,e){var n=nn(e,0);switch(n.type){case fr.T_NAME:return new Ge(sn(n.value),_,e.lineno,e.col_offset);case fr.T_STRING:return new Pe(Xn(t,e),e.lineno,e.col_offset);case fr.T_NUMBER:return new Be(Qn(t,n.value,e.lineno),e.lineno,e.col_offset);case fr.T_LPAR:return n=nn(e,1),n.type===fr.T_RPAR?new ze([],_,e.lineno,e.col_offset):n.type===cr.yield_expr?ti(t,n):1<en(n)&&nn(n,1).type===cr.gen_for?jn(t,n):An(t,n);case fr.T_LSQB:return n=nn(e,1),n.type===fr.T_RSQB?new qe([],_,e.lineno,e.col_offset):(rn(n,cr.listmaker),1===en(n)||nn(n,1).type===fr.T_COMMA?new qe(fn(t,n),_,e.lineno,e.col_offset):Nn(t,n));case fr.T_LBRACE:n=nn(e,1),en(n);for(var i=[],r=[],s=0;s<en(n);s+=4)i[s/4]=ti(t,nn(n,s)),r[s/4]=ti(t,nn(n,s+2));return new Me(i,r,e.lineno,e.col_offset);case fr.T_BACKQUOTE:throw new di.builtin.SyntaxError("backquote not supported, use repr()",t.c_filename,e.lineno);default:pi.asserts.fail("unhandled atom",n.type)}}function Jn(t,e){rn(e,cr.power);var n=Zn(t,nn(e,0));if(1===en(e))return n;for(var i=1;i<en(e);++i){var r=nn(e,i);if(r.type!==cr.trailer)break;r=Rn(t,r,n),r.lineno=n.lineno,r.col_offset=n.col_offset,n=r}return nn(e,en(e)-1).type===cr.factor&&(i=ti(t,nn(e,en(e)-1)),n=new $e(n,I,i,e.lineno,e.col_offset)),n}function ti(t,e){t:for(;;){switch(e.type){case cr.test:case cr.old_test:if(nn(e,0).type===cr.lambdef||nn(e,0).type===cr.old_lambdef)return On(t,nn(e,0));if(1<en(e))return Wn(t,e);case cr.or_test:case cr.and_test:if(1===en(e)){e=nn(e,0);continue t}for(var n=[],i=0;i<en(e);i+=2)n[i/2]=ti(t,nn(e,i));return"and"===nn(e,1).value?new Ee(C,n,e.lineno,e.col_offset):(pi.asserts.assert("or"===nn(e,1).value),new Ee(E,n,e.lineno,e.col_offset));case cr.not_test:if(1===en(e)){e=nn(e,0);continue t}return new Ae(j,ti(t,nn(e,1)),e.lineno,e.col_offset);case cr.comparison:if(1===en(e)){e=nn(e,0);continue t}for(var n=[],r=[],i=1;i<en(e);i+=2)n[(i-1)/2]=cn(t,nn(e,i)),r[(i-1)/2]=ti(t,nn(e,i+1));return new Ke(ti(t,nn(e,0)),n,r,e.lineno,e.col_offset);case cr.expr:case cr.xor_expr:case cr.and_expr:case cr.shift_expr:case cr.arith_expr:case cr.term:if(1===en(e)){e=nn(e,0);continue t}return zn(t,e);case cr.yield_expr:return i=null,2===en(e)&&(i=Hn(t,nn(e,1))),new De(i,e.lineno,e.col_offset);case cr.factor:if(1===en(e)){e=nn(e,0);continue t}return Ln(t,e);case cr.power:return Jn(t,e);default:pi.asserts.fail("unhandled expr","n.type: %d",e.type)}break}}function ei(t,e){var n=1,i=null;rn(e,cr.print_stmt),2<=en(e)&&nn(e,1).type===fr.T_RIGHTSHIFT&&(i=ti(t,nn(e,2)),n=4);for(var r=[],s=0;n<en(e);n+=2,++s)r[s]=ti(t,nn(e,n));return n=nn(e,en(e)-1).type===fr.T_COMMA?!1:!0,new ce(i,r,n,e.lineno,e.col_offset)}function ni(t,e){if(e.type===cr.stmt&&(pi.asserts.assert(1===en(e)),e=nn(e,0)),e.type===cr.simple_stmt&&(pi.asserts.assert(1===on(e)),e=nn(e,0)),e.type===cr.small_stmt)switch(rn(e,cr.small_stmt),e=nn(e,0),e.type){case cr.expr_stmt:return Un(t,e);case cr.print_stmt:return ei(t,e);case cr.del_stmt:return Sn(t,e);case cr.pass_stmt:return new Se(e.lineno,e.col_offset);case cr.flow_stmt:return Dn(t,e);case cr.import_stmt:return $n(t,e);case cr.global_stmt:return Tn(t,e);case cr.exec_stmt:return wn(t,e);case cr.assert_stmt:return Cn(t,e);default:pi.asserts.fail("unhandled small_stmt")}else{var n=nn(e,0);switch(rn(e,cr.compound_stmt),n.type){case cr.if_stmt:return kn(t,n);case cr.while_stmt:return Gn(t,n);case cr.for_stmt:return Mn(t,n);case cr.try_stmt:return dn(t,n);case cr.with_stmt:return _n(t,n);case cr.funcdef:return Fn(t,n,[]);case cr.classdef:return Pn(t,n,[]);case cr.decorated:return vn(t,n);default:pi.asserts.assert("unhandled compound_stmt")}}}function ii(t,e,n){this.__name=t,this.__flags=e,this.__scope=e>>_r&wr,this.__namespaces=n||[]}function ri(t,e,n,i,r){this.symFlags={},this.name=e,this.varnames=[],this.children=[],this.blockType=n,this.returnsValue=this.varkeywords=this.varargs=this.generator=this.childHasFree=this.hasFree=this.isNested=!1,this.lineno=r,this.table=t,t.cur&&(t.cur.nested||t.cur.blockType===$r)&&(this.isNested=!0),i.scopeId=Nr++,t.stss[i.scopeId]=this,this.symbols={}}function si(t){this.filename=t,this.top=this.cur=null,this.stack=[],this.curClass=this.global=null,this.tmpname=0,this.stss={}}function oi(t,e){for(var n in e)t[n]=e[n]}function ai(t,e,n,i){this.filename=t,this.st=e,this.flags=n,this.interactive=!1,this.nestlevel=0,this.u=null,this.stack=[],this.result=[],this.allUnits=[],this.source=i?i.split("\n"):!1}function li(){this.private_=this.name=this.ste=null,this.lineno=this.firstlineno=0,this.linenoSet=!1,this.localnames=[],this.blocknum=0,this.blocks=[],this.curblock=0,this.scopename=null,this.suffixCode=this.switchCode=this.varDeclsCode=this.prefixCode="",this.breakBlocks=[],this.continueBlocks=[],this.exceptBlocks=[],this.finallyBlocks=[]}function ui(t){return!0!==Mr[t]?t:t+"_$rw$"}function ci(t){return Ir[t]?t+"_$rn$":t}function fi(t,e){var n=e.v,i=null;return null===t||null===n||"_"!==n.charAt(0)||"_"!==n.charAt(1)||"_"===n.charAt(n.length-1)&&"_"===n.charAt(n.length-2)?e:(i=t.v,i.replace(/_/g,""),""===i?e:(i=t.v,i.replace(/^_*/,""),i=new di.builtin.str("_"+i+n)))}var hi=!0,pi=pi||{};pi.global=this,pi.exportPath_=function(t,e,n){t=t.split("."),n=n||pi.global,t[0]in n||!n.execScript||n.execScript("var "+t[0]);for(var i;t.length&&(i=t.shift());)t.length||void 0===e?n=n[i]?n[i]:n[i]={}:n[i]=e},pi.define=function(t,e){var n=e;hi||pi.global.CLOSURE_DEFINES&&Object.prototype.hasOwnProperty.call(pi.global.CLOSURE_DEFINES,t)&&(n=pi.global.CLOSURE_DEFINES[t]),pi.exportPath_(t,n)},pi.DEBUG=!1,pi.LOCALE="en",pi.TRUSTED_SITE=!0,pi.provide=function(t){if(!hi){if(pi.isProvided_(t))throw Error('Namespace "'+t+'" already declared.');delete pi.implicitNamespaces_[t];for(var e=t;(e=e.substring(0,e.lastIndexOf(".")))&&!pi.getObjectByName(e);)pi.implicitNamespaces_[e]=!0}pi.exportPath_(t)},pi.setTestOnly=function(t){if(hi&&!pi.DEBUG)throw t=t||"",Error(": "+t)},hi||(pi.isProvided_=function(t){return!pi.implicitNamespaces_[t]&&!!pi.getObjectByName(t)},pi.implicitNamespaces_={}),pi.getObjectByName=function(t,e){for(var n,i=t.split("."),r=e||pi.global;n=i.shift();){if(!pi.isDefAndNotNull(r[n]))return null;r=r[n]}return r},pi.globalize=function(t,e){var n,i=e||pi.global;for(n in t)i[n]=t[n]},pi.addDependency=function(t,e,n){if(pi.DEPENDENCIES_ENABLED){var i;t=t.replace(/\\/g,"/");for(var r=pi.dependencies_,s=0;i=e[s];s++)r.nameToPath[i]=t,t in r.pathToNames||(r.pathToNames[t]={}),r.pathToNames[t][i]=!0;for(i=0;e=n[i];i++)t in r.requires||(r.requires[t]={}),r.requires[t][e]=!0}},pi.ENABLE_DEBUG_LOADER=!0,pi.require=function(t){if(!hi&&!pi.isProvided_(t)){if(pi.ENABLE_DEBUG_LOADER){var e=pi.getPathFromDeps_(t);if(e)return pi.included_[e]=!0,pi.writeScripts_(),void 0}throw t="goog.require could not find: "+t,pi.global.console&&pi.global.console.error(t),Error(t)}},pi.basePath="",pi.nullFunction=function(){},pi.identityFunction=function(t){return t},pi.abstractMethod=function(){throw Error("unimplemented abstract method")},pi.addSingletonGetter=function(t){t.getInstance=function(){return t.instance_?t.instance_:(pi.DEBUG&&(pi.instantiatedSingletons_[pi.instantiatedSingletons_.length]=t),t.instance_=new t)}},pi.instantiatedSingletons_=[],pi.DEPENDENCIES_ENABLED=!hi&&pi.ENABLE_DEBUG_LOADER,pi.DEPENDENCIES_ENABLED&&(pi.included_={},pi.dependencies_={pathToNames:{},nameToPath:{},requires:{},visited:{},written:{}},pi.inHtmlDocument_=function(){var t=pi.global.document;return"undefined"!=typeof t&&"write"in t},pi.findBasePath_=function(){if(pi.global.CLOSURE_BASE_PATH)pi.basePath=pi.global.CLOSURE_BASE_PATH;else if(pi.inHtmlDocument_())for(var t=pi.global.document.getElementsByTagName("script"),e=t.length-1;e>=0;--e){var n=t[e].src,i=n.lastIndexOf("?"),i=-1==i?n.length:i;if("base.js"==n.substr(i-7,7)){pi.basePath=n.substr(0,i-7);break}}},pi.importScript_=function(t){var e=pi.global.CLOSURE_IMPORT_SCRIPT||pi.writeScriptTag_;!pi.dependencies_.written[t]&&e(t)&&(pi.dependencies_.written[t]=!0)},pi.writeScriptTag_=function(t){if(pi.inHtmlDocument_()){var e=pi.global.document;if("complete"==e.readyState){if(/\bdeps.js$/.test(t))return!1;throw Error('Cannot write "'+t+'" after document load')}return e.write('<script type="text/javascript" src="'+t+'"></script>'),!0}return!1},pi.writeScripts_=function(){function t(e){if(!(e in r.written)){if(!(e in r.visited)&&(r.visited[e]=!0,e in r.requires))for(var s in r.requires[e])if(!pi.isProvided_(s)){if(!(s in r.nameToPath))throw Error("Undefined nameToPath for "+s);t(r.nameToPath[s])}e in i||(i[e]=!0,n.push(e))}}var e,n=[],i={},r=pi.dependencies_;for(e in pi.included_)r.written[e]||t(e);for(e=0;e<n.length;e++){if(!n[e])throw Error("Undefined script input");pi.importScript_(pi.basePath+n[e])}},pi.getPathFromDeps_=function(t){return t in pi.dependencies_.nameToPath?pi.dependencies_.nameToPath[t]:null},pi.findBasePath_(),pi.global.CLOSURE_NO_DEPS||pi.importScript_(pi.basePath+"deps.js")),pi.typeOf=function(t){var e=typeof t;if("object"==e){if(!t)return"null";if(t instanceof Array)return"array";if(t instanceof Object)return e;var n=Object.prototype.toString.call(t);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof t.length&&"undefined"!=typeof t.splice&&"undefined"!=typeof t.propertyIsEnumerable&&!t.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||"undefined"!=typeof t.call&&"undefined"!=typeof t.propertyIsEnumerable&&!t.propertyIsEnumerable("call"))return"function"}else if("function"==e&&"undefined"==typeof t.call)return"object";return e},pi.isDef=function(t){return void 0!==t},pi.isNull=function(t){return null===t},pi.isDefAndNotNull=function(t){return null!=t},pi.isArray=function(t){return"array"==pi.typeOf(t)},pi.isArrayLike=function(t){var e=pi.typeOf(t);return"array"==e||"object"==e&&"number"==typeof t.length},pi.isDateLike=function(t){return pi.isObject(t)&&"function"==typeof t.getFullYear},pi.isString=function(t){return"string"==typeof t},pi.isBoolean=function(t){return"boolean"==typeof t},pi.isNumber=function(t){return"number"==typeof t},pi.isFunction=function(t){return"function"==pi.typeOf(t)},pi.isObject=function(t){var e=typeof t;return"object"==e&&null!=t||"function"==e},pi.getUid=function(t){return t[pi.UID_PROPERTY_]||(t[pi.UID_PROPERTY_]=++pi.uidCounter_)},pi.removeUid=function(t){"removeAttribute"in t&&t.removeAttribute(pi.UID_PROPERTY_);try{delete t[pi.UID_PROPERTY_]}catch(e){}},pi.UID_PROPERTY_="closure_uid_"+(1e9*Math.random()>>>0),pi.uidCounter_=0,pi.getHashCode=pi.getUid,pi.removeHashCode=pi.removeUid,pi.cloneObject=function(t){var e=pi.typeOf(t);if("object"==e||"array"==e){if(t.clone)return t.clone();var n,e="array"==e?[]:{};for(n in t)e[n]=pi.cloneObject(t[n]);return e}return t},pi.bindNative_=function(t){return t.call.apply(t.bind,arguments)},pi.bindJs_=function(t,e){if(!t)throw Error();if(2<arguments.length){var n=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,n),t.apply(e,i)}}return function(){return t.apply(e,arguments)}},pi.bind=function(){return pi.bind=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?pi.bindNative_:pi.bindJs_,pi.bind.apply(null,arguments)},pi.partial=function(t){var e=Array.prototype.slice.call(arguments,1);return function(){var n=Array.prototype.slice.call(arguments);return n.unshift.apply(n,e),t.apply(this,n)}},pi.mixin=function(t,e){for(var n in e)t[n]=e[n]},pi.now=pi.TRUSTED_SITE&&Date.now||function(){return+new Date},pi.globalEval=function(t){if(pi.global.execScript)pi.global.execScript(t,"JavaScript");else{if(!pi.global.eval)throw Error("goog.globalEval not available");if(null==pi.evalWorksForGlobals_&&(pi.global.eval("var _et_ = 1;"),"undefined"!=typeof pi.global._et_?(delete pi.global._et_,pi.evalWorksForGlobals_=!0):pi.evalWorksForGlobals_=!1),pi.evalWorksForGlobals_)pi.global.eval(t);else{var e=pi.global.document,n=e.createElement("script");n.type="text/javascript",n.defer=!1,n.appendChild(e.createTextNode(t)),e.body.appendChild(n),e.body.removeChild(n)}}},pi.evalWorksForGlobals_=null,pi.getCssName=function(t,e){var n=function(t){return pi.cssNameMapping_[t]||t},i=function(t){t=t.split("-");for(var e=[],i=0;i<t.length;i++)e.push(n(t[i]));return e.join("-")},i=pi.cssNameMapping_?"BY_WHOLE"==pi.cssNameMappingStyle_?n:i:function(t){return t};return e?t+"-"+i(e):i(t)},pi.setCssNameMapping=function(t,e){pi.cssNameMapping_=t,pi.cssNameMappingStyle_=e},!hi&&pi.global.CLOSURE_CSS_NAME_MAPPING&&(pi.cssNameMapping_=pi.global.CLOSURE_CSS_NAME_MAPPING),pi.getMsg=function(t,e){var n,i=e||{};for(n in i){var r=(""+i[n]).replace(/\$/g,"$$$$");t=t.replace(RegExp("\\{\\$"+n+"\\}","gi"),r)}return t},pi.getMsgWithFallback=function(t){return t},pi.exportSymbol=function(t,e,n){pi.exportPath_(t,e,n)},pi.exportProperty=function(t,e,n){t[e]=n},pi.inherits=function(t,e){function n(){}n.prototype=e.prototype,t.superClass_=e.prototype,t.prototype=new n,t.prototype.constructor=t},pi.base=function(t,e){var n=arguments.callee.caller;if(pi.DEBUG&&!n)throw Error("arguments.caller not defined.  goog.base() expects not to be running in strict mode. See http://www.ecma-international.org/ecma-262/5.1/#sec-C");if(n.superClass_)return n.superClass_.constructor.apply(t,Array.prototype.slice.call(arguments,1));for(var i=Array.prototype.slice.call(arguments,2),r=!1,s=t.constructor;s;s=s.superClass_&&s.superClass_.constructor)if(s.prototype[e]===n)r=!0;else if(r)return s.prototype[e].apply(t,i);if(t[e]===n)return t.constructor.prototype[e].apply(t,i);throw Error("goog.base called from a method of one name to a method of a different name")},pi.scope=function(t){t.call(pi.global)},pi.string={},pi.string.Unicode={NBSP:" "},pi.string.startsWith=function(t,e){return 0==t.lastIndexOf(e,0)},pi.string.endsWith=function(t,e){var n=t.length-e.length;return n>=0&&t.indexOf(e,n)==n},pi.string.caseInsensitiveStartsWith=function(t,e){return 0==pi.string.caseInsensitiveCompare(e,t.substr(0,e.length))},pi.string.caseInsensitiveEndsWith=function(t,e){return 0==pi.string.caseInsensitiveCompare(e,t.substr(t.length-e.length,e.length))},pi.string.caseInsensitiveEquals=function(t,e){return t.toLowerCase()==e.toLowerCase()},pi.string.subs=function(t){for(var e=t.split("%s"),n="",i=Array.prototype.slice.call(arguments,1);i.length&&1<e.length;)n+=e.shift()+i.shift();return n+e.join("%s")},pi.string.collapseWhitespace=function(t){return t.replace(/[\s\xa0]+/g," ").replace(/^\s+|\s+$/g,"")},pi.string.isEmpty=function(t){return/^[\s\xa0]*$/.test(t)},pi.string.isEmptySafe=function(t){return pi.string.isEmpty(pi.string.makeSafe(t))},pi.string.isBreakingWhitespace=function(t){return!/[^\t\n\r ]/.test(t)},pi.string.isAlpha=function(t){return!/[^a-zA-Z]/.test(t)},pi.string.isNumeric=function(t){return!/[^0-9]/.test(t)},pi.string.isAlphaNumeric=function(t){return!/[^a-zA-Z0-9]/.test(t)},pi.string.isSpace=function(t){return" "==t},pi.string.isUnicodeChar=function(t){return 1==t.length&&t>=" "&&"~">=t||t>=""&&"�">=t},pi.string.stripNewlines=function(t){return t.replace(/(\r\n|\r|\n)+/g," ")},pi.string.canonicalizeNewlines=function(t){return t.replace(/(\r\n|\r|\n)/g,"\n")},pi.string.normalizeWhitespace=function(t){return t.replace(/\xa0|\s/g," ")},pi.string.normalizeSpaces=function(t){return t.replace(/\xa0|[ \t]+/g," ")},pi.string.collapseBreakingSpaces=function(t){return t.replace(/[\t\r\n ]+/g," ").replace(/^[\t\r\n ]+|[\t\r\n ]+$/g,"")},pi.string.trim=function(t){return t.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")},pi.string.trimLeft=function(t){return t.replace(/^[\s\xa0]+/,"")},pi.string.trimRight=function(t){return t.replace(/[\s\xa0]+$/,"")},pi.string.caseInsensitiveCompare=function(t,e){var n=String(t).toLowerCase(),i=String(e).toLowerCase();return i>n?-1:n==i?0:1},pi.string.numerateCompareRegExp_=/(\.\d+)|(\d+)|(\D+)/g,pi.string.numerateCompare=function(t,e){if(t==e)return 0;if(!t)return-1;if(!e)return 1;for(var n=t.toLowerCase().match(pi.string.numerateCompareRegExp_),i=e.toLowerCase().match(pi.string.numerateCompareRegExp_),r=Math.min(n.length,i.length),s=0;r>s;s++){var o=n[s],a=i[s];if(o!=a)return n=parseInt(o,10),!isNaN(n)&&(i=parseInt(a,10),!isNaN(i)&&n-i)?n-i:a>o?-1:1}return n.length!=i.length?n.length-i.length:e>t?-1:1},pi.string.urlEncode=function(t){return encodeURIComponent(String(t))},pi.string.urlDecode=function(t){return decodeURIComponent(t.replace(/\+/g," "))},pi.string.newLineToBr=function(t,e){return t.replace(/(\r\n|\r|\n)/g,e?"<br />":"<br>")},pi.string.htmlEscape=function(t,e){return e?t.replace(pi.string.amperRe_,"&amp;").replace(pi.string.ltRe_,"&lt;").replace(pi.string.gtRe_,"&gt;").replace(pi.string.quotRe_,"&quot;"):pi.string.allRe_.test(t)?(-1!=t.indexOf("&")&&(t=t.replace(pi.string.amperRe_,"&amp;")),-1!=t.indexOf("<")&&(t=t.replace(pi.string.ltRe_,"&lt;")),-1!=t.indexOf(">")&&(t=t.replace(pi.string.gtRe_,"&gt;")),-1!=t.indexOf('"')&&(t=t.replace(pi.string.quotRe_,"&quot;")),t):t},pi.string.amperRe_=/&/g,pi.string.ltRe_=/</g,pi.string.gtRe_=/>/g,pi.string.quotRe_=/\"/g,pi.string.allRe_=/[&<>\"]/,pi.string.unescapeEntities=function(t){return pi.string.contains(t,"&")?"document"in pi.global?pi.string.unescapeEntitiesUsingDom_(t):pi.string.unescapePureXmlEntities_(t):t},pi.string.unescapeEntitiesUsingDom_=function(t){var e={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"'},n=document.createElement("div");return t.replace(pi.string.HTML_ENTITY_PATTERN_,function(t,i){var r=e[t];if(r)return r;if("#"==i.charAt(0)){var s=Number("0"+i.substr(1));isNaN(s)||(r=String.fromCharCode(s))}return r||(n.innerHTML=t+" ",r=n.firstChild.nodeValue.slice(0,-1)),e[t]=r})},pi.string.unescapePureXmlEntities_=function(t){return t.replace(/&([^;]+);/g,function(t,e){switch(e){case"amp":return"&";case"lt":return"<";case"gt":return">";case"quot":return'"';default:if("#"==e.charAt(0)){var n=Number("0"+e.substr(1));if(!isNaN(n))return String.fromCharCode(n)}return t}})},pi.string.HTML_ENTITY_PATTERN_=/&([^;\s<&]+);?/g,pi.string.whitespaceEscape=function(t,e){return pi.string.newLineToBr(t.replace(/  /g," &#160;"),e)},pi.string.stripQuotes=function(t,e){for(var n=e.length,i=0;n>i;i++){var r=1==n?e:e.charAt(i);if(t.charAt(0)==r&&t.charAt(t.length-1)==r)return t.substring(1,t.length-1)}return t},pi.string.truncate=function(t,e,n){return n&&(t=pi.string.unescapeEntities(t)),t.length>e&&(t=t.substring(0,e-3)+"..."),n&&(t=pi.string.htmlEscape(t)),t},pi.string.truncateMiddle=function(t,e,n,i){if(n&&(t=pi.string.unescapeEntities(t)),i&&t.length>e){i>e&&(i=e);var r=t.length-i;t=t.substring(0,e-i)+"..."+t.substring(r)}else t.length>e&&(i=Math.floor(e/2),r=t.length-i,t=t.substring(0,i+e%2)+"..."+t.substring(r));return n&&(t=pi.string.htmlEscape(t)),t},pi.string.specialEscapeChars_={"\x00":"\\0","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t","":"\\x0B",'"':'\\"',"\\":"\\\\"},pi.string.jsEscapeCache_={"'":"\\'"},pi.string.quote=function(t){if(t=String(t),t.quote)return t.quote();for(var e=['"'],n=0;n<t.length;n++){var i=t.charAt(n),r=i.charCodeAt(0);e[n+1]=pi.string.specialEscapeChars_[i]||(r>31&&127>r?i:pi.string.escapeChar(i))}return e.push('"'),e.join("")},pi.string.escapeString=function(t){for(var e=[],n=0;n<t.length;n++)e[n]=pi.string.escapeChar(t.charAt(n));return e.join("")},pi.string.escapeChar=function(t){if(t in pi.string.jsEscapeCache_)return pi.string.jsEscapeCache_[t];if(t in pi.string.specialEscapeChars_)return pi.string.jsEscapeCache_[t]=pi.string.specialEscapeChars_[t];var e=t,n=t.charCodeAt(0);
return n>31&&127>n?e=t:(256>n?(e="\\x",(16>n||n>256)&&(e+="0")):(e="\\u",4096>n&&(e+="0")),e+=n.toString(16).toUpperCase()),pi.string.jsEscapeCache_[t]=e},pi.string.toMap=function(t){for(var e={},n=0;n<t.length;n++)e[t.charAt(n)]=!0;return e},pi.string.contains=function(t,e){return-1!=t.indexOf(e)},pi.string.countOf=function(t,e){return t&&e?t.split(e).length-1:0},pi.string.removeAt=function(t,e,n){var i=t;return e>=0&&e<t.length&&n>0&&(i=t.substr(0,e)+t.substr(e+n,t.length-e-n)),i},pi.string.remove=function(t,e){var n=RegExp(pi.string.regExpEscape(e),"");return t.replace(n,"")},pi.string.removeAll=function(t,e){var n=RegExp(pi.string.regExpEscape(e),"g");return t.replace(n,"")},pi.string.regExpEscape=function(t){return String(t).replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")},pi.string.repeat=function(t,e){return Array(e+1).join(t)},pi.string.padNumber=function(t,e,n){return t=pi.isDef(n)?t.toFixed(n):String(t),n=t.indexOf("."),-1==n&&(n=t.length),pi.string.repeat("0",Math.max(0,e-n))+t},pi.string.makeSafe=function(t){return null==t?"":String(t)},pi.string.buildString=function(){return Array.prototype.join.call(arguments,"")},pi.string.getRandomString=function(){return Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^pi.now()).toString(36)},pi.string.compareVersions=function(t,e){for(var n=0,i=pi.string.trim(String(t)).split("."),r=pi.string.trim(String(e)).split("."),s=Math.max(i.length,r.length),o=0;0==n&&s>o;o++){var a=i[o]||"",l=r[o]||"",u=RegExp("(\\d*)(\\D*)","g"),c=RegExp("(\\d*)(\\D*)","g");do{var f=u.exec(a)||["","",""],h=c.exec(l)||["","",""];if(0==f[0].length&&0==h[0].length)break;var n=0==f[1].length?0:parseInt(f[1],10),p=0==h[1].length?0:parseInt(h[1],10),n=pi.string.compareElements_(n,p)||pi.string.compareElements_(0==f[2].length,0==h[2].length)||pi.string.compareElements_(f[2],h[2])}while(0==n)}return n},pi.string.compareElements_=function(t,e){return e>t?-1:t>e?1:0},pi.string.HASHCODE_MAX_=4294967296,pi.string.hashCode=function(t){for(var e=0,n=0;n<t.length;++n)e=31*e+t.charCodeAt(n),e%=pi.string.HASHCODE_MAX_;return e},pi.string.uniqueStringCounter_=2147483648*Math.random()|0,pi.string.createUniqueString=function(){return"goog_"+pi.string.uniqueStringCounter_++},pi.string.toNumber=function(t){var e=Number(t);return 0==e&&pi.string.isEmpty(t)?0/0:e},pi.string.isLowerCamelCase=function(t){return/^[a-z]+([A-Z][a-z]*)*$/.test(t)},pi.string.isUpperCamelCase=function(t){return/^([A-Z][a-z]*)+$/.test(t)},pi.string.toCamelCase=function(t){return String(t).replace(/\-([a-z])/g,function(t,e){return e.toUpperCase()})},pi.string.toSelectorCase=function(t){return String(t).replace(/([A-Z])/g,"-$1").toLowerCase()},pi.string.toTitleCase=function(t,e){var n=pi.isString(e)?pi.string.regExpEscape(e):"\\s";return t.replace(RegExp("(^"+(n?"|["+n+"]+":"")+")([a-z])","g"),function(t,e,n){return e+n.toUpperCase()})},pi.string.parseInt=function(t){return isFinite(t)&&(t=String(t)),pi.isString(t)?/^\s*-?0x/i.test(t)?parseInt(t,16):parseInt(t,10):0/0},pi.string.splitLimit=function(t,e,n){t=t.split(e);for(var i=[];n>0&&t.length;)i.push(t.shift()),n--;return t.length&&i.push(t.join(e)),i},pi.debug={},pi.debug.Error=function(t){Error.captureStackTrace?Error.captureStackTrace(this,pi.debug.Error):this.stack=Error().stack||"",t&&(this.message=String(t))},pi.inherits(pi.debug.Error,Error),pi.debug.Error.prototype.name="CustomError",pi.asserts={},pi.asserts.ENABLE_ASSERTS=pi.DEBUG,pi.asserts.AssertionError=function(t,e){e.unshift(t),pi.debug.Error.call(this,pi.string.subs.apply(null,e)),e.shift(),this.messagePattern=t},pi.inherits(pi.asserts.AssertionError,pi.debug.Error),pi.asserts.AssertionError.prototype.name="AssertionError",pi.asserts.doAssertFailure_=function(t,e,n,i){var r="Assertion failed";if(n)var r=r+(": "+n),s=i;else t&&(r+=": "+t,s=e);throw new pi.asserts.AssertionError(""+r,s||[])},pi.asserts.assert=function(t,e){return pi.asserts.ENABLE_ASSERTS&&!t&&pi.asserts.doAssertFailure_("",null,e,Array.prototype.slice.call(arguments,2)),t},pi.asserts.fail=function(t){if(pi.asserts.ENABLE_ASSERTS)throw new pi.asserts.AssertionError("Failure"+(t?": "+t:""),Array.prototype.slice.call(arguments,1))},pi.asserts.assertNumber=function(t,e){return pi.asserts.ENABLE_ASSERTS&&!pi.isNumber(t)&&pi.asserts.doAssertFailure_("Expected number but got %s: %s.",[pi.typeOf(t),t],e,Array.prototype.slice.call(arguments,2)),t},pi.asserts.assertString=function(t,e){return pi.asserts.ENABLE_ASSERTS&&!pi.isString(t)&&pi.asserts.doAssertFailure_("Expected string but got %s: %s.",[pi.typeOf(t),t],e,Array.prototype.slice.call(arguments,2)),t},pi.asserts.assertFunction=function(t,e){return pi.asserts.ENABLE_ASSERTS&&!pi.isFunction(t)&&pi.asserts.doAssertFailure_("Expected function but got %s: %s.",[pi.typeOf(t),t],e,Array.prototype.slice.call(arguments,2)),t},pi.asserts.assertObject=function(t,e){return pi.asserts.ENABLE_ASSERTS&&!pi.isObject(t)&&pi.asserts.doAssertFailure_("Expected object but got %s: %s.",[pi.typeOf(t),t],e,Array.prototype.slice.call(arguments,2)),t},pi.asserts.assertArray=function(t,e){return pi.asserts.ENABLE_ASSERTS&&!pi.isArray(t)&&pi.asserts.doAssertFailure_("Expected array but got %s: %s.",[pi.typeOf(t),t],e,Array.prototype.slice.call(arguments,2)),t},pi.asserts.assertBoolean=function(t,e){return pi.asserts.ENABLE_ASSERTS&&!pi.isBoolean(t)&&pi.asserts.doAssertFailure_("Expected boolean but got %s: %s.",[pi.typeOf(t),t],e,Array.prototype.slice.call(arguments,2)),t},pi.asserts.assertInstanceof=function(t,e,n){return!pi.asserts.ENABLE_ASSERTS||t instanceof e||pi.asserts.doAssertFailure_("instanceof check failed.",null,n,Array.prototype.slice.call(arguments,3)),t},pi.asserts.assertObjectPrototypeIsIntact=function(){for(var t in Object.prototype)pi.asserts.fail(t+" should not be enumerable in Object.prototype.")};var di=di||{};di.configure=function(t){di.output=t.output||di.output,pi.asserts.assert("function"==typeof di.output),di.debugout=t.debugout||di.debugout,pi.asserts.assert("function"==typeof di.debugout),di.read=t.read||di.read,pi.asserts.assert("function"==typeof di.read),di.timeoutMsg=t.timeoutMsg||di.timeoutMsg,pi.asserts.assert("function"==typeof di.timeoutMsg),pi.exportSymbol("Sk.timeoutMsg",di.timeoutMsg),di.sysargv=t.sysargv||di.sysargv,pi.asserts.assert(pi.isArrayLike(di.sysargv)),di.python3=t.python3||di.python3,pi.asserts.assert("boolean"==typeof di.python3),di.inputfun=t.inputfun||di.inputfun,pi.asserts.assert("function"==typeof di.inputfun),di.throwSystemExit=t.systemexit||!1,pi.asserts.assert("boolean"==typeof di.throwSystemExit),t.syspath&&(di.syspath=t.syspath,pi.asserts.assert(pi.isArrayLike(di.syspath)),di.realsyspath=void 0,di.sysmodules=new di.builtin.dict([])),di.misceval.softspace_=!1},pi.exportSymbol("Sk.configure",di.configure),di.timeoutMsg=function(){return"Program exceeded run time limit."},pi.exportSymbol("Sk.timeoutMsg",di.timeoutMsg),di.output=function(){},di.read=function(){throw"Sk.read has not been implemented"},di.sysargv=[],di.getSysArgv=function(){return di.sysargv},pi.exportSymbol("Sk.getSysArgv",di.getSysArgv),di.syspath=[],di.inBrowser=void 0!==pi.global.document,di.debugout=function(){},function(){void 0!==pi.global.write?di.output=pi.global.write:void 0!==pi.global.console&&void 0!==pi.global.console.log?di.output=function(t){pi.global.console.log(t)}:void 0!==pi.global.print&&(di.output=pi.global.print),void 0!==pi.global.print&&(di.debugout=pi.global.print)}(),di.inBrowser||(pi.global.CLOSURE_IMPORT_SCRIPT=function(t){return pi.global.eval(pi.global.read("support/closure-library/closure/goog/"+t)),!0}),di.python3=!1,di.inputfun=function(t){return prompt(t)},pi.exportSymbol("Sk.python3",di.python3),pi.exportSymbol("Sk.inputfun",di.inputfun);var bi="api/v1/player/move",mi="api/v1/player/pickup",gi="api/v1/player/drop",vi="api/v1/player/use",yi="api/v1/player/status",_i="api/v1/player/inspect",wi="api/v1/player/characters",ki="api/v1/world/tiles",xi="api/v1/player/dig",Si=function(){return{constants:{},mapData:{},setMapData:function(t){this.mapData=t},playerData:{},setPlayerData:function(t){this.playerData=t},log:e}}();pi.exportSymbol("Bq",Si);var Ti=12,Ci={0:"north",1:"east",2:"south",3:"west"},Ei={rubbish:0},$i={0:" ",1:"…",2:"~",3:"%",4:"█",5:"¯",6:"]",7:"_",8:"[",9:"╗",10:"╔",11:"╚",12:"╝",50:"#",51:"^",52:"v",53:">",54:"<",65:"A",66:"B",67:"C",68:"D",69:"E",70:"F",71:"G",72:"H",73:"I",74:"J",75:"K",76:"L",77:"M",78:"N",79:"O",80:"P",81:"Q",82:"R",83:"S",84:"T",85:"U",86:"V",87:"W",88:"X",89:"Y",90:"Z",97:"a",98:"b",99:"c",100:"d",101:"e",102:"f",103:"g",104:"h",105:"i",106:"j",107:"k",108:"l",109:"m",110:"n",111:"o",112:"p",113:"q",114:"r",115:"s",116:"t",117:"u",118:"v",119:"w",120:"x",121:"y",122:"z",200:"█",201:"╗",202:"╔",203:"═",204:"╚",205:"╝",206:"║",207:"_",208:"|",209:"[",210:"]",211:"\\",212:"/",213:"(",214:")",215:"^",216:",",217:"¯",218:".",219:">"},Ai=[[200,200,200,200,200,200,201,0,0,200,200,200,200,200,200,201,0,200,200,200,200,200,200,200,200],[200,200,202,203,203,200,200,201,200,200,202,203,203,203,200,200,201,204,203,203,200,200,202,203,203],[200,200,200,200,200,200,202,205,200,200,206,0,0,0,200,200,206,0,0,0,200,200,206,0,0],[200,200,202,203,203,200,200,201,200,200,206,0,0,0,200,200,206,0,0,0,200,200,206,0,0],[200,200,200,200,200,200,202,205,204,200,200,200,200,200,200,202,205,0,0,0,200,200,206,0,0],[204,203,203,203,203,203,205,0,0,204,203,203,203,203,203,205,0,0,0,0,204,203,205,0,0],[0,0,207,207,207,207,0,207,0,0,207,0,207,207,207,207,0,207,207,207,207,0,207,207,207],[0,0,208,0,0,208,0,208,0,0,208,0,208,207,207,207,0,209,207,207,0,0,0,208,0],[0,0,208,207,211,208,0,208,207,207,208,0,208,207,207,207,0,207,207,207,210,0,0,208,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,207,0,0,0,0,0,0,0,0,207,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,213,207,214,0,0,0,0,0,0,213,207,214,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,211,211,207,207,207,207,207,207,212,212,207,207,0,0],[0,0,0,0,0,0,0,0,0,0,0,212,211,211,0,0,0,0,212,212,0,0,212,208,0],[0,0,207,0,0,207,0,0,0,0,212,207,207,207,207,207,207,207,207,207,207,212,0,208,0],[0,212,212,0,0,211,211,0,0,0,208,0,0,0,0,0,0,0,0,0,0,208,0,208,0],[208,208,0,0,0,208,208,0,0,0,208,0,0,0,215,0,0,215,0,0,0,208,0,208,0],[0,211,211,0,212,212,0,0,0,0,208,0,0,0,0,207,207,216,0,0,0,208,0,212,0],[0,0,208,0,208,0,0,0,0,212,208,207,207,207,207,207,207,207,207,207,207,208,212,217,212],[0,0,211,0,211,0,0,0,212,0,0,0,0,0,208,0,0,0,208,0,0,0,0,212,0],[0,0,0,211,0,211,0,208,217,217,217,217,217,217,217,217,217,217,217,217,217,217,217,208,0],[0,0,0,0,211,0,217,208,0,208,217,217,217,217,217,217,217,217,217,217,217,208,0,208,0],[0,0,0,0,0,211,207,208,0,208,80,121,116,104,111,110,0,2,218,6,0,208,0,208,0],[0,0,0,0,0,0,0,208,0,208,219,219,219,0,0,0,0,0,0,0,0,208,0,208,0]];Si.constants.MAP_MAX_INDEX=Ti,Si.constants.direction=Ci,Si.constants.itemId=Ei,Si.constants.tileChars=$i,Si.constants.splashArt=Ai,t.prototype.data=[],t.prototype.n=0,t.prototype.tileAt=function(t,e){return Math.abs(t)>Ti||Math.abs(e)>Ti?-1:this.data[t+Ti][e+Ti]},t.prototype.setTile=function(t,e,n){return Math.abs(t)>Ti||Math.abs(e)>Ti?-1:(this.data[t+Ti][e+Ti]=n,void 0)};var Ni=new t,Li={health:0,battery:0,facing:0,display:!1};Si.setMapData(Ni),Si.setPlayerData(Li),di.builtin={},di.builtin.range=function(t,e,n){var i,r=[];if(di.builtin.pyCheckArgs("range",arguments,1,3),di.builtin.pyCheckType("start","integer",di.builtin.checkInt(t)),void 0!==e&&di.builtin.pyCheckType("stop","integer",di.builtin.checkInt(e)),void 0!==n&&di.builtin.pyCheckType("step","integer",di.builtin.checkInt(n)),t=di.builtin.asnum$(t),e=di.builtin.asnum$(e),n=di.builtin.asnum$(n),void 0===e&&void 0===n?(e=t,t=0,n=1):void 0===n&&(n=1),0===n)throw new di.builtin.ValueError("range() step argument must not be zero");if(n>0)for(i=t;e>i;i+=n)r.push(new di.builtin.nmber(i,di.builtin.nmber.int$));else for(i=t;i>e;i+=n)r.push(new di.builtin.nmber(i,di.builtin.nmber.int$));return new di.builtin.list(r)},di.builtin.asnum$=function(t){return void 0===t||null===t?t:t.constructor===di.builtin.none?null:t.constructor===di.builtin.bool?t.v?1:0:"number"==typeof t?t:"string"==typeof t?t:t.constructor===di.builtin.nmber?t.v:t.constructor===di.builtin.lng?t.cantBeInt()?t.str$(10,!0):t.toInt$():t.constructor===di.builtin.biginteger?0<t.trueCompare(new di.builtin.biginteger(di.builtin.lng.threshold$))||0>t.trueCompare(new di.builtin.biginteger(-di.builtin.lng.threshold$))?t.toString():t.intValue():t},pi.exportSymbol("Sk.builtin.asnum$",di.builtin.asnum$),di.builtin.assk$=function(t,e){return new di.builtin.nmber(t,e)},pi.exportSymbol("Sk.builtin.assk$",di.builtin.assk$),di.builtin.asnum$nofloat=function(t){if(void 0===t||null===t)return t;if(t.constructor===di.builtin.none)return null;if(t.constructor===di.builtin.bool)return t.v?1:0;if("number"==typeof t&&(t=t.toString()),t.constructor===di.builtin.nmber&&(t=t.v.toString()),t.constructor===di.builtin.lng&&(t=t.str$(10,!0)),t.constructor===di.builtin.biginteger&&(t=t.toString()),0>t.indexOf(".")&&0>t.indexOf("e")&&0>t.indexOf("E"))return t;var e,n=0;if(0<=t.indexOf("e")?(e=t.substr(0,t.indexOf("e")),n=t.substr(t.indexOf("e")+1)):0<=t.indexOf("E")?(e=t.substr(0,t.indexOf("e")),n=t.substr(t.indexOf("E")+1)):e=t,n=parseInt(n,10),t=e.indexOf("."),0>t){if(n>=0){for(;0<n--;)e+="0";return e}return e.length>-n?e.substr(0,e.length+n):0}for(e=0==t?e.substr(1):t<e.length?e.substr(0,t)+e.substr(t+1):e.substr(0,t),t+=n;t>e.length;)e+="0";return e=0>=t?0:e.substr(0,t)},pi.exportSymbol("Sk.builtin.asnum$nofloat",di.builtin.asnum$nofloat),di.builtin.round=function(t,e){var n;if(di.builtin.pyCheckArgs("round",arguments,1,2),!di.builtin.checkNumber(t))throw new di.builtin.TypeError("a float is required");if(void 0!==e&&!di.misceval.isIndex(e))throw new di.builtin.TypeError("'"+di.abstr.typeName(e)+"' object cannot be interpreted as an index");return void 0===e&&(e=0),t=di.builtin.asnum$(t),e=di.misceval.asIndex(e),n=Math.pow(10,e),n=Math.round(t*n)/n,new di.builtin.nmber(n,di.builtin.nmber.float$)},di.builtin.len=function(t){if(di.builtin.pyCheckArgs("len",arguments,1,1),t.sq$length)return new di.builtin.nmber(t.sq$length(),di.builtin.nmber.int$);if(t.mp$length)return new di.builtin.nmber(t.mp$length(),di.builtin.nmber.int$);if(t.tp$length)return new di.builtin.nmber(t.tp$length(),di.builtin.nmber.int$);throw new di.builtin.TypeError("object of type '"+di.abstr.typeName(t)+"' has no len()")},di.builtin.min=function(){di.builtin.pyCheckArgs("min",arguments,1),arguments=di.misceval.arrayFromArguments(arguments);for(var t=arguments[0],e=1;e<arguments.length;++e)di.misceval.richCompareBool(arguments[e],t,"Lt")&&(t=arguments[e]);return t},di.builtin.max=function(){di.builtin.pyCheckArgs("max",arguments,1),arguments=di.misceval.arrayFromArguments(arguments);for(var t=arguments[0],e=1;e<arguments.length;++e)di.misceval.richCompareBool(arguments[e],t,"Gt")&&(t=arguments[e]);return t},di.builtin.any=function(t){var e,n;if(di.builtin.pyCheckArgs("any",arguments,1),!di.builtin.checkIterable(t))throw new di.builtin.TypeError("'"+di.abstr.typeName(t)+"' object is not iterable");for(e=t.tp$iter(),n=e.tp$iternext();void 0!==n;n=e.tp$iternext())if(di.misceval.isTrue(n))return!0;return!1},di.builtin.all=function(t){var e,n;if(di.builtin.pyCheckArgs("all",arguments,1),!di.builtin.checkIterable(t))throw new di.builtin.TypeError("'"+di.abstr.typeName(t)+"' object is not iterable");for(e=t.tp$iter(),n=e.tp$iternext();void 0!==n;n=e.tp$iternext())if(!di.misceval.isTrue(n))return!1;return!0},di.builtin.sum=function(t,e){var n,i,r,s;if(di.builtin.pyCheckArgs("sum",arguments,1,2),di.builtin.pyCheckType("iter","iterable",di.builtin.checkIterable(t)),void 0!==e&&di.builtin.checkString(e))throw new di.builtin.TypeError("sum() can't sum strings [use ''.join(seq) instead]");for(n=void 0===e?new di.builtin.nmber(0,di.builtin.nmber.int$):e,i=t.tp$iter(),r=i.tp$iternext();void 0!==r;r=i.tp$iternext()){if(r.skType===di.builtin.nmber.float$?(s=!0,n.skType!==di.builtin.nmber.float$&&(n=new di.builtin.nmber(di.builtin.asnum$(n),di.builtin.nmber.float$))):r instanceof di.builtin.lng&&(s||n instanceof di.builtin.lng||(n=new di.builtin.lng(n))),void 0===n.nb$add(r))throw new di.builtin.TypeError("unsupported operand type(s) for +: '"+di.abstr.typeName(n)+"' and '"+di.abstr.typeName(r)+"'");n=n.nb$add(r)}return n},di.builtin.zip=function(){if(0===arguments.length)return new di.builtin.list([]);for(var t=[],e=0;e<arguments.length;e++){if(!arguments[e].tp$iter)throw"TypeError: argument "+e+" must support iteration";t.push(arguments[e].tp$iter())}for(var n=[],i=!1;!i;){for(var r=[],e=0;e<arguments.length;e++){var s=t[e].tp$iternext();if(void 0===s){i=!0;break}r.push(s)}i||n.push(new di.builtin.tuple(r))}return new di.builtin.list(n)},di.builtin.abs=function(t){return di.builtin.pyCheckArgs("abs",arguments,1,1),di.builtin.pyCheckType("x","number",di.builtin.checkNumber(t)),new di.builtin.nmber(Math.abs(di.builtin.asnum$(t)),t.skType)},di.builtin.ord=function(t){if(di.builtin.pyCheckArgs("ord",arguments,1,1),!di.builtin.checkString(t))throw new di.builtin.TypeError("ord() expected a string of length 1, but "+di.abstr.typeName(t)+" found");if(1!==t.v.length)throw new di.builtin.TypeError("ord() expected a character, but string of length "+t.v.length+" found");return new di.builtin.nmber(t.v.charCodeAt(0),di.builtin.nmber.int$)},di.builtin.chr=function(t){if(di.builtin.pyCheckArgs("chr",arguments,1,1),!di.builtin.checkInt(t))throw new di.builtin.TypeError("an integer is required");if(t=di.builtin.asnum$(t),0>t||t>255)throw new di.builtin.ValueError("chr() arg not in range(256)");return new di.builtin.str(String.fromCharCode(t))},di.builtin.int2str_=function(t,e,n){var i="";if(t instanceof di.builtin.lng){var r="";return 2!==e&&(r="L"),i=t.str$(e,!1),t.nb$isnegative()?new di.builtin.str("-"+n+i+r):new di.builtin.str(n+i+r)}return t=di.misceval.asIndex(t),i=t.toString(e),0>t?new di.builtin.str("-"+n+i.slice(1)):new di.builtin.str(n+i)},di.builtin.hex=function(t){if(di.builtin.pyCheckArgs("hex",arguments,1,1),!di.misceval.isIndex(t))throw new di.builtin.TypeError("hex() argument can't be converted to hex");return di.builtin.int2str_(t,16,"0x")},di.builtin.oct=function(t){if(di.builtin.pyCheckArgs("oct",arguments,1,1),!di.misceval.isIndex(t))throw new di.builtin.TypeError("oct() argument can't be converted to hex");return di.builtin.int2str_(t,8,"0")},di.builtin.bin=function(t){if(di.builtin.pyCheckArgs("bin",arguments,1,1),!di.misceval.isIndex(t))throw new di.builtin.TypeError("'"+di.abstr.typeName(t)+"' object can't be interpreted as an index");return di.builtin.int2str_(t,2,"0b")},di.builtin.dir=function(t){di.builtin.pyCheckArgs("dir",arguments,1,1);var e,n,i,r,s,o=function(t){var e=null;return-1!==["__bases__","__mro__","__class__"].indexOf(t)?null:(-1!==t.indexOf("$")?e=di.builtin.dir.slotNameToRichName(t):"_"!==t.charAt(t.length-1)?e=t:"_"===t.charAt(0)&&(e=t),e)},a=[];for(e in t.constructor.prototype)(n=o(e))&&a.push(new di.builtin.str(n));if(t.$d)if(t.$d.tp$iter)for(i=t.$d.tp$iter(),e=i.tp$iternext();void 0!==e;e=i.tp$iternext())n=new di.builtin.str(e),(n=o(n.v))&&a.push(new di.builtin.str(n));else for(n in t.$d)a.push(new di.builtin.str(n));if(i=t.tp$mro)for(i=t.tp$mro,e=0;e<i.v.length;++e)for(s in r=i.v[e])r.hasOwnProperty(s)&&(n=o(s))&&a.push(new di.builtin.str(n));return a.sort(function(t,e){return(t.v>e.v)-(t.v<e.v)}),new di.builtin.list(a.filter(function(t,e,n){return t!==n[e+1]}))},di.builtin.dir.slotNameToRichName=function(){},di.builtin.repr=function(t){return di.builtin.pyCheckArgs("repr",arguments,1,1),di.misceval.objectRepr(t)},di.builtin.open=function(t,e,n){if(di.builtin.pyCheckArgs("open",arguments,1,3),void 0===e&&(e=new di.builtin.str("r")),"r"!==e.v&&"rb"!==e.v)throw"todo; haven't implemented non-read opens";return new di.builtin.file(t,e,n)},di.builtin.isinstance=function(t,e){if(di.builtin.pyCheckArgs("isinstance",arguments,2,2),!(di.builtin.checkClass(e)||e instanceof di.builtin.tuple))throw new di.builtin.TypeError("isinstance() arg 2 must be a class, type, or tuple of classes and types");if(e===di.builtin.int_.prototype.ob$type)return"number"===t.tp$name&&t.skType===di.builtin.nmber.int$;if(e===di.builtin.float_.prototype.ob$type)return"number"===t.tp$name&&t.skType===di.builtin.nmber.float$;if(e===di.builtin.none.prototype.ob$type)return t instanceof di.builtin.none;if(t.ob$type===e)return!0;if(e instanceof di.builtin.tuple){for(var n=0;n<e.v.length;++n)if(di.builtin.isinstance(t,e.v[n]))return!0;return!1}var i=function(t,e){if(t===e)return!0;if(void 0===t.$d)return!1;for(var n=t.$d.mp$subscript(di.builtin.type.basesStr_),r=0;r<n.v.length;++r)if(i(n.v[r],e))return!0;return!1};return i(t.ob$type,e)},di.builtin.hashCount=0,di.builtin.hash=function(t){return di.builtin.pyCheckArgs("hash",arguments,1,1),t instanceof Object&&void 0!==t.tp$hash?t.$savedHash_?t.$savedHash_:(t.$savedHash_=t.tp$hash(),t.$savedHash_):t instanceof Object&&void 0!==t.__hash__?di.misceval.callsim(t.__hash__,t):t instanceof di.builtin.bool?t.v?1:0:t instanceof di.builtin.none?0:t instanceof Object?(void 0===t.__id&&(di.builtin.hashCount+=1,t.__id=di.builtin.hashCount),t.__id):"number"==typeof t?t:null===t?0:!0===t?1:!1===t?0:typeof t+" "+String(t)},di.builtin.getattr=function(t,e,n){if(di.builtin.pyCheckArgs("getattr",arguments,2,3),!di.builtin.checkString(e))throw new di.builtin.TypeError("attribute name must be string");var i=t.tp$getattr(e.v);if(void 0===i){if(void 0!==n)return n;throw new di.builtin.AttributeError("'"+di.abstr.typeName(t)+"' object has no attribute '"+e.v+"'")}return i},di.builtin.raw_input=function(t){return t=di.inputfun(t.v),new di.builtin.str(t)},di.builtin.input=function(t){return t=di.inputfun(t.v),new di.builtin.str(t)},di.builtin.jseval=function(t){pi.global.eval(t)},di.builtin.jsmillis=function(){return(new Date).valueOf()},di.builtin.superbi=function(){throw new di.builtin.NotImplementedError("super is not yet implemented, please report your use case as a github issue.")},di.builtin.eval_=function(){throw new di.builtin.NotImplementedError("eval is not yet implemented")},di.builtin.map=function(t,e){if(di.builtin.pyCheckArgs("map",arguments,2),t instanceof di.builtin.none&&(t={func_code:function(t){return t}}),2<arguments.length){var n,i=[],r=Array.prototype.slice.apply(arguments).slice(1);for(n in r){if(void 0===r[n].tp$iter){var s=parseInt(n,10)+2;throw new di.builtin.TypeError("argument "+s+" to map() must support iteration")}r[n]=r[n].tp$iter()}for(;;){var o=[],a=0;for(n in r)s=r[n].tp$iternext(),void 0===s?(o.push(di.builtin.none.none$),a++):o.push(s);if(a===r.length)break;i.push(o)}e=new di.builtin.list(i)}if(void 0===e.tp$iter)throw new di.builtin.TypeError("'"+di.abstr.typeName(e)+"' object is not iterable");for(i=[],r=e.tp$iter(),s=r.tp$iternext();void 0!==s;)s instanceof Array||(s=[s]),i.push(t.func_code.apply(this,s)),s=r.tp$iternext();return new di.builtin.list(i)},di.builtin.reduce=function(t,e,n){di.builtin.pyCheckArgs("reduce",arguments,2,3);var i=e.tp$iter();if(void 0===n&&(n=i.tp$iternext(),void 0===n))throw new di.builtin.TypeError("reduce() of empty sequence with no initial value");for(var r=n,s=i.tp$iternext();void 0!==s;)r=t.func_code(r,s),s=i.tp$iternext();return r},di.builtin.filter=function(t,e){if(di.builtin.pyCheckArgs("filter",arguments,2,2),void 0===e.tp$iter)throw new di.builtin.TypeError("'"+di.abstr.typeName(e)+"' object is not iterable");t instanceof di.builtin.none&&(t={func_code:function(t){return di.builtin.bool(t)}});var n=function(){return[]},i=function(t,e){return t.push(e),t},r=function(t){return new di.builtin.list(t)};e.__class__===di.builtin.str?(n=function(){return new di.builtin.str("")},i=function(t,e){return t.sq$concat(e)},r=function(t){return t}):e.__class__===di.builtin.tuple&&(r=function(t){return new di.builtin.tuple(t)});var s=e.tp$iter(),o=s.tp$iternext(),n=n();if(void 0===o)return r(n);for(;void 0!==o;)di.misceval.isTrue(t.func_code(o))&&(n=i(n,o)),o=s.tp$iternext();return r(n)},di.builtin.hasattr=function(t,e){if(di.builtin.pyCheckArgs("hasattr",arguments,2,2),!di.builtin.checkString(e))throw new di.builtin.TypeError("hasattr(): attribute name must be string");if(t.tp$getattr)return t.tp$getattr(e.v)?!0:!1;throw new di.builtin.AttributeError("Object has no tp$getattr method")},di.builtin.pow=function(t,e,n){di.builtin.pyCheckArgs("pow",arguments,2,3);var i=di.builtin.asnum$(t),r=di.builtin.asnum$(e);if(di.builtin.asnum$(n),!di.builtin.checkNumber(t)||!di.builtin.checkNumber(e)){if(void 0===n)throw new di.builtin.TypeError("unsupported operand type(s) for pow(): '"+di.abstr.typeName(t)+"' and '"+di.abstr.typeName(e)+"'");throw new di.builtin.TypeError("unsupported operand type(s) for pow(): '"+di.abstr.typeName(t)+"', '"+di.abstr.typeName(e)+"', '"+di.abstr.typeName(n)+"'")}if(0>i&&e.skType===di.builtin.nmber.float$)throw new di.builtin.ValueError("negative number cannot be raised to a fractional power");if(void 0===n)return i=Math.pow(i,r),t.skType===di.builtin.nmber.float$||e.skType===di.builtin.nmber.float$||0>r?new di.builtin.nmber(i,di.builtin.nmber.float$):t instanceof di.builtin.lng||e instanceof di.builtin.lng?new di.builtin.lng(i):new di.builtin.nmber(i,di.builtin.nmber.int$);if(!di.builtin.checkInt(t)||!di.builtin.checkInt(e)||!di.builtin.checkInt(n))throw new di.builtin.TypeError("pow() 3rd argument not allowed unless all arguments are integers");if(0>r)throw new di.builtin.TypeError("pow() 2nd argument cannot be negative when 3rd argument specified");return t instanceof di.builtin.lng||e instanceof di.builtin.lng||n instanceof di.builtin.lng||1/0===Math.pow(i,r)?(t=new di.builtin.lng(t),t.nb$power(e,n)):new di.builtin.nmber(Math.pow(i,r),di.builtin.nmber.int$).nb$remainder(n)},di.builtin.quit=function(t){throw t=new di.builtin.str(t).v,new di.builtin.SystemExit(t)},di.builtin.sorted=function(t,e,n,i){var r;if(void 0===n||n instanceof di.builtin.none)e instanceof di.builtin.none||void 0===e||(r=e),t=new di.builtin.list(t);else{r=e instanceof di.builtin.none?{func_code:function(t,e){return di.misceval.richCompareBool(t[0],e[0],"Lt")?new di.builtin.nmber(-1,di.builtin.nmber.int$):new di.builtin.nmber(0,di.builtin.nmber.int$)}}:{func_code:function(t,n){return e.func_code(t[0],n[0])}},t=t.tp$iter();for(var s=t.tp$iternext(),o=[];void 0!==s;)o.push([n.func_code(s),s]),s=t.tp$iternext();t=new di.builtin.list(o)}if(void 0!==r?t.list_sort_(t,r):t.list_sort_(t),i&&t.list_reverse_(t),void 0!==n&&!(n instanceof di.builtin.none)){for(t=t.tp$iter(),s=t.tp$iternext(),o=[];void 0!==s;)o.push(s[1]),s=t.tp$iternext();t=new di.builtin.list(o)}return t},di.builtin.bytearray=function(){throw new di.builtin.NotImplementedError("bytearray is not yet implemented")},di.builtin.callable=function(){throw new di.builtin.NotImplementedError("callable is not yet implemented")},di.builtin.complex=function(){throw new di.builtin.NotImplementedError("complex is not yet implemented")},di.builtin.delattr=function(){throw new di.builtin.NotImplementedError("delattr is not yet implemented")},di.builtin.divmod=function(){throw new di.builtin.NotImplementedError("divmod is not yet implemented")},di.builtin.execfile=function(){throw new di.builtin.NotImplementedError("execfile is not yet implemented")},di.builtin.format=function(){throw new di.builtin.NotImplementedError("format is not yet implemented")},di.builtin.frozenset=function(){throw new di.builtin.NotImplementedError("frozenset is not yet implemented")},di.builtin.globals=function(){throw new di.builtin.NotImplementedError("globals is not yet implemented")},di.builtin.help=function(){throw new di.builtin.NotImplementedError("help is not yet implemented")},di.builtin.issubclass=function(){throw new di.builtin.NotImplementedError("issubclass is not yet implemented")},di.builtin.iter=function(){throw new di.builtin.NotImplementedError("iter is not yet implemented")},di.builtin.locals=function(){throw new di.builtin.NotImplementedError("locals is not yet implemented")},di.builtin.memoryview=function(){throw new di.builtin.NotImplementedError("memoryview is not yet implemented")},di.builtin.next_=function(){throw new di.builtin.NotImplementedError("next is not yet implemented")},di.builtin.property=function(){throw new di.builtin.NotImplementedError("property is not yet implemented")},di.builtin.reload=function(){throw new di.builtin.NotImplementedError("reload is not yet implemented")},di.builtin.reversed=function(){throw new di.builtin.NotImplementedError("reversed is not yet implemented")},di.builtin.unichr=function(){throw new di.builtin.NotImplementedError("unichr is not yet implemented")},di.builtin.vars=function(){throw new di.builtin.NotImplementedError("vars is not yet implemented")},di.builtin.xrange=di.builtin.range,di.builtin.apply_=function(){throw new di.builtin.NotImplementedError("apply is not yet implemented")},di.builtin.buffer=function(){throw new di.builtin.NotImplementedError("buffer is not yet implemented")},di.builtin.coerce=function(){throw new di.builtin.NotImplementedError("coerce is not yet implemented")},di.builtin.intern=function(){throw new di.builtin.NotImplementedError("intern is not yet implemented")},di.builtin.goFunction=function(t){di.builtin.pyCheckArgs("goFunction",arguments,1,1),di.builtin.pyCheckType("dir","string",di.builtin.checkString(t));var e=t.v,r=n(bi),s=i(e);return h("POST",bi,s,r,{direction:e})},di.builtin.pickupFunction=function(t){di.builtin.pyCheckArgs("pickupFunction",arguments,1,1),di.builtin.pyCheckType("name","string",di.builtin.checkString(t));var e=Si.playerData.x,i=Si.playerData.y,s=Ei[t.v],o=n(mi);return h("POST",mi,r,o,{x:e,y:i,item_id:s})},di.builtin.dropFunction=function(t){di.builtin.pyCheckArgs("dropFunction",arguments,1,1),di.builtin.pyCheckType("name","string",di.builtin.checkString(t));var e=Ei[t.v],i=n(gi);return h("POST",gi,s,i,{item_id:e})},di.builtin.useFunction=function(t,e){di.builtin.pyCheckArgs("useFunction",arguments,2,2),di.builtin.pyCheckType("name","string",di.builtin.checkString(t)),di.builtin.pyCheckType("args","string",di.builtin.checkString(e));var i=Ei[t.v],r=e.v,s=n(vi);return h("POST",vi,o,s,{item_id:i,args:r})},di.builtin.statusFunction=function(){di.builtin.pyCheckArgs("statusFunction",arguments,0,0);var t=n(yi);return h("GET",yi,a,t,{})},di.builtin.digFunction=function(){di.builtin.pyCheckArgs("digFunction",arguments,0,0);var t=n(xi);return h("POST",xi,u,t,{})},di.builtin.inspectFunction=function(t){di.builtin.pyCheckArgs("inspectFunction",arguments,1,1),di.builtin.pyCheckType("name","string",di.builtin.checkString(t));var e=Ei[t.v],i=n(_i);return h("POST",_i,l,i,{item_id:e})},di.builtin.charactersFunction=function(){di.builtin.pyCheckArgs("charactersFunction",arguments,0,0);var t=n(wi);return h("GET",wi,f,t,{})},di.builtin.tilesFunction=function(){di.builtin.pyCheckArgs("tilesFunction",arguments,0,0);var t=n(ki);return h("GET",ki,c,t,{})},di.builtin.Exception=function(t){t=Array.prototype.slice.call(arguments);for(var e=0;e<t.length;++e)"string"==typeof t[e]&&(t[e]=new di.builtin.str(t[e]));this.args=new di.builtin.tuple(t),this.filename=di.currFilename?di.currFilename:3<=this.args.sq$length()?this.args.v[1].v?this.args.v[1].v:"<unknown>":"<unknown>",this.lineno=3<=this.args.sq$length()?this.args.v[2]:0<di.currLineNo?di.currLineNo:"<unknown>",this.colno=0<di.currColNo?di.currColNo:"<unknown>"},di.builtin.Exception.prototype.tp$name="Exception",di.builtin.Exception.prototype.tp$str=function(){var t;if(t=""+this.tp$name,this.args&&(t+=": "+(0<this.args.v.length?this.args.v[0].v:"")),t+=" on line "+this.lineno,4<this.args.v.length){t+="\n"+this.args.v[4].v+"\n";for(var e=0;e<this.args.v[3];++e)t+=" ";t+="^\n"}return new di.builtin.str(t)},di.builtin.Exception.prototype.toString=function(){return this.tp$str().v},pi.exportSymbol("Sk.builtin.Exception",di.builtin.Exception),di.builtin.AssertionError=function(){if(!(this instanceof di.builtin.AssertionError)){var t=Object.create(di.builtin.AssertionError.prototype);return t.constructor.apply(t,arguments),t}di.builtin.Exception.apply(this,arguments)},pi.inherits(di.builtin.AssertionError,di.builtin.Exception),di.builtin.AssertionError.prototype.tp$name="AssertionError",pi.exportSymbol("Sk.builtin.AssertionError",di.builtin.AssertionError),di.builtin.AttributeError=function(){if(!(this instanceof di.builtin.AttributeError)){var t=Object.create(di.builtin.AttributeError.prototype);return t.constructor.apply(t,arguments),t}di.builtin.Exception.apply(this,arguments)},pi.inherits(di.builtin.AttributeError,di.builtin.Exception),di.builtin.AttributeError.prototype.tp$name="AttributeError",di.builtin.ImportError=function(){if(!(this instanceof di.builtin.ImportError)){var t=Object.create(di.builtin.ImportError.prototype);
return t.constructor.apply(t,arguments),t}di.builtin.Exception.apply(this,arguments)},pi.inherits(di.builtin.ImportError,di.builtin.Exception),di.builtin.ImportError.prototype.tp$name="ImportError",di.builtin.IndentationError=function(){if(!(this instanceof di.builtin.IndentationError)){var t=Object.create(di.builtin.IndentationError.prototype);return t.constructor.apply(t,arguments),t}di.builtin.Exception.apply(this,arguments)},pi.inherits(di.builtin.IndentationError,di.builtin.Exception),di.builtin.IndentationError.prototype.tp$name="IndentationError",di.builtin.IndexError=function(){if(!(this instanceof di.builtin.IndexError)){var t=Object.create(di.builtin.IndexError.prototype);return t.constructor.apply(t,arguments),t}di.builtin.Exception.apply(this,arguments)},pi.inherits(di.builtin.IndexError,di.builtin.Exception),di.builtin.IndexError.prototype.tp$name="IndexError",di.builtin.KeyError=function(){if(!(this instanceof di.builtin.KeyError)){var t=Object.create(di.builtin.KeyError.prototype);return t.constructor.apply(t,arguments),t}di.builtin.Exception.apply(this,arguments)},pi.inherits(di.builtin.KeyError,di.builtin.Exception),di.builtin.KeyError.prototype.tp$name="KeyError",di.builtin.NameError=function(){if(!(this instanceof di.builtin.NameError)){var t=Object.create(di.builtin.NameError.prototype);return t.constructor.apply(t,arguments),t}di.builtin.Exception.apply(this,arguments)},pi.inherits(di.builtin.NameError,di.builtin.Exception),di.builtin.NameError.prototype.tp$name="NameError",di.builtin.OverflowError=function(){if(!(this instanceof di.builtin.OverflowError)){var t=Object.create(di.builtin.OverflowError.prototype);return t.constructor.apply(t,arguments),t}di.builtin.Exception.apply(this,arguments)},pi.inherits(di.builtin.OverflowError,di.builtin.Exception),di.builtin.OverflowError.prototype.tp$name="OverflowError",di.builtin.ParseError=function(){if(!(this instanceof di.builtin.ParseError)){var t=Object.create(di.builtin.ParseError.prototype);return t.constructor.apply(t,arguments),t}di.builtin.Exception.apply(this,arguments)},pi.inherits(di.builtin.ParseError,di.builtin.Exception),di.builtin.ParseError.prototype.tp$name="ParseError",di.builtin.SystemExit=function(){if(!(this instanceof di.builtin.SystemExit)){var t=Object.create(di.builtin.SystemExit.prototype);return t.constructor.apply(t,arguments),t}di.builtin.Exception.apply(this,arguments)},pi.inherits(di.builtin.SystemExit,di.builtin.Exception),di.builtin.SystemExit.prototype.tp$name="SystemExit",pi.exportSymbol("Sk.builtin.SystemExit",di.builtin.SystemExit),di.builtin.SyntaxError=function(){if(!(this instanceof di.builtin.SyntaxError)){var t=Object.create(di.builtin.SyntaxError.prototype);return t.constructor.apply(t,arguments),t}di.builtin.Exception.apply(this,arguments)},pi.inherits(di.builtin.SyntaxError,di.builtin.Exception),di.builtin.SyntaxError.prototype.tp$name="SyntaxError",di.builtin.TokenError=function(){if(!(this instanceof di.builtin.TokenError)){var t=Object.create(di.builtin.TokenError.prototype);return t.constructor.apply(t,arguments),t}di.builtin.Exception.apply(this,arguments)},pi.inherits(di.builtin.TokenError,di.builtin.Exception),di.builtin.TokenError.prototype.tp$name="TokenError",di.builtin.TypeError=function(){if(!(this instanceof di.builtin.TypeError)){var t=Object.create(di.builtin.TypeError.prototype);return t.constructor.apply(t,arguments),t}di.builtin.Exception.apply(this,arguments)},pi.inherits(di.builtin.TypeError,di.builtin.Exception),di.builtin.TypeError.prototype.tp$name="TypeError",pi.exportSymbol("Sk.builtin.TypeError",di.builtin.TypeError),di.builtin.ValueError=function(){if(!(this instanceof di.builtin.ValueError)){var t=Object.create(di.builtin.ValueError.prototype);return t.constructor.apply(t,arguments),t}di.builtin.Exception.apply(this,arguments)},pi.inherits(di.builtin.ValueError,di.builtin.Exception),di.builtin.ValueError.prototype.tp$name="ValueError",pi.exportSymbol("Sk.builtin.ValueError",di.builtin.ValueError),di.builtin.ZeroDivisionError=function(){if(!(this instanceof di.builtin.ZeroDivisionError)){var t=Object.create(di.builtin.ZeroDivisionError.prototype);return t.constructor.apply(t,arguments),t}di.builtin.Exception.apply(this,arguments)},pi.inherits(di.builtin.ZeroDivisionError,di.builtin.Exception),di.builtin.ZeroDivisionError.prototype.tp$name="ZeroDivisionError",di.builtin.TimeLimitError=function(){if(!(this instanceof di.builtin.TimeLimitError)){var t=Object.create(di.builtin.TimeLimitError.prototype);return t.constructor.apply(t,arguments),t}di.builtin.Exception.apply(this,arguments)},pi.inherits(di.builtin.TimeLimitError,di.builtin.Exception),di.builtin.TimeLimitError.prototype.tp$name="TimeLimitError",pi.exportSymbol("Sk.builtin.TimeLimitError",di.builtin.TimeLimitError),di.builtin.IOError=function(){if(!(this instanceof di.builtin.IOError)){var t=Object.create(di.builtin.IOError.prototype);return t.constructor.apply(t,arguments),t}di.builtin.Exception.apply(this,arguments)},pi.inherits(di.builtin.IOError,di.builtin.Exception),di.builtin.IOError.prototype.tp$name="IOError",pi.exportSymbol("Sk.builtin.IOError",di.builtin.IOError),di.builtin.NotImplementedError=function(){if(!(this instanceof di.builtin.NotImplementedError)){var t=Object.create(di.builtin.NotImplementedError.prototype);return t.constructor.apply(t,arguments),t}di.builtin.Exception.apply(this,arguments)},pi.inherits(di.builtin.NotImplementedError,di.builtin.Exception),di.builtin.NotImplementedError.prototype.tp$name="NotImplementedError",pi.exportSymbol("Sk.builtin.NotImplementedError",di.builtin.NotImplementedError),di.builtin.NegativePowerError=function(){if(!(this instanceof di.builtin.NegativePowerError)){var t=Object.create(di.builtin.NegativePowerError.prototype);return t.constructor.apply(t,arguments),t}di.builtin.Exception.apply(this,arguments)},pi.inherits(di.builtin.NegativePowerError,di.builtin.Exception),di.builtin.NegativePowerError.prototype.tp$name="NegativePowerError",pi.exportSymbol("Sk.builtin.NegativePowerError",di.builtin.NegativePowerError),di.builtin.OperationError=function(){if(!(this instanceof di.builtin.OperationError)){var t=Object.create(di.builtin.OperationError.prototype);return t.constructor.apply(t,arguments),t}di.builtin.Exception.apply(this,arguments)},pi.inherits(di.builtin.OperationError,di.builtin.Exception),di.builtin.OperationError.prototype.tp$name="OperationError",pi.exportSymbol("Sk.builtin.OperationError",di.builtin.OperationError),di.builtin.SystemError=function(){if(!(this instanceof di.builtin.SystemError)){var t=Object.create(di.builtin.SystemError.prototype);return t.constructor.apply(t,arguments),t}di.builtin.Exception.apply(this,arguments)},pi.inherits(di.builtin.SystemError,di.builtin.Exception),di.builtin.SystemError.prototype.tp$name="SystemError",pi.exportSymbol("Sk.builtin.SystemError",di.builtin.SystemError),di.currLineNo=-1,di.currColNo=-1,di.currFilename="",pi.exportSymbol("Sk",di),pi.exportProperty(di,"currLineNo",di.currLineNo),pi.exportProperty(di,"currColNo",di.currColNo),pi.exportProperty(di,"currFilename",di.currFilename),di.builtin.type=function(t,e,n){if(void 0===e&&void 0===n)return t.constructor===di.builtin.nmber?t.skType===di.builtin.nmber.int$?di.builtin.int_.prototype.ob$type:di.builtin.float_.prototype.ob$type:t.ob$type;var i,r=function(t,e,n,i){if(!(this instanceof r))return new r(t,e,n,i);i=i||[],this.$d=new di.builtin.dict([]);var s=di.builtin.type.typeLookup(this.ob$type,"__init__");return void 0!==s&&(i.unshift(this),di.misceval.apply(s,t,e,n,i)),this};for(i in n)r.prototype[i]=n[i],r[i]=n[i];return r.__class__=r,r.sk$klass=!0,r.prototype.tp$getattr=di.builtin.object.prototype.GenericGetAttr,r.prototype.tp$setattr=di.builtin.object.prototype.GenericSetAttr,r.prototype.tp$descr_get=function(){pi.asserts.fail("in type tp$descr_get")},r.prototype.$r=function(){var e=this.tp$getattr("__repr__");if(void 0!==e)return di.misceval.apply(e,void 0,void 0,void 0,[]);var e=n.__module__,i="";return e&&(i=e.v+"."),new di.builtin.str("<"+i+t+" object>")},r.prototype.tp$str=function(){var t=this.tp$getattr("__str__");return void 0!==t?di.misceval.apply(t,void 0,void 0,void 0,[]):this.$r()},r.prototype.tp$length=function(){var t=this.tp$getattr("__len__");if(void 0!==t)return di.misceval.apply(t,void 0,void 0,void 0,[]);throw t=di.abstr.typeName(this),new di.builtin.AttributeError(t+" instance has no attribute '__len__'")},r.prototype.tp$call=function(t,e){var n=this.tp$getattr("__call__");if(n)return di.misceval.apply(n,void 0,void 0,e,t);throw new di.builtin.TypeError("'"+di.abstr.typeName(this)+"' object is not callable")},r.prototype.tp$iter=function(){var t=this.tp$getattr("__iter__"),e=di.abstr.typeName(this);if(t)return di.misceval.callsim(t);throw new di.builtin.TypeError("'"+e+"' object is not iterable")},r.prototype.tp$iternext=function(){var t=this.tp$getattr("next");return pi.asserts.assert(void 0!==t,"iter() should have caught this"),di.misceval.callsim(t)},r.prototype.tp$getitem=function(t){var e=this.tp$getattr("__getitem__");if(void 0!==e)return di.misceval.apply(e,void 0,void 0,void 0,[t]);throw new di.builtin.TypeError("'"+di.abstr.typeName(this)+"' object does not support indexing")},r.prototype.tp$setitem=function(t,e){var n=this.tp$getattr("__setitem__");if(void 0!==n)return di.misceval.apply(n,void 0,void 0,void 0,[t,e]);throw new di.builtin.TypeError("'"+di.abstr.typeName(this)+"' object does not support item assignment")},r.prototype.tp$name=t,e&&(r.$d=new di.builtin.dict([]),r.$d.mp$ass_subscript(di.builtin.type.basesStr_,new di.builtin.tuple(e)),e=di.builtin.type.buildMRO(r),r.$d.mp$ass_subscript(di.builtin.type.mroStr_,e),r.tp$mro=e),r.prototype.ob$type=r,di.builtin.type.makeIntoTypeObj(t,r),r.tp$setattr=di.builtin.type.prototype.tp$setattr,r},di.builtin.type.makeTypeObj=function(t,e){return di.builtin.type.makeIntoTypeObj(t,e),e},di.builtin.type.makeIntoTypeObj=function(t,e){return pi.asserts.assert(void 0!==t),pi.asserts.assert(void 0!==e),e.ob$type=di.builtin.type,e.tp$name=t,e.$r=function(){var t=e.__module__,n="";t&&(n=t.v+".");var i="class";return t||e.sk$klass||(i="type"),new di.builtin.str("<"+i+" '"+n+e.tp$name+"'>")},e.tp$str=void 0,e.tp$getattr=di.builtin.type.prototype.tp$getattr,e.tp$setattr=di.builtin.object.prototype.GenericSetAttr,e.tp$richcompare=di.builtin.type.prototype.tp$richcompare,e.sk$type=!0,e},di.builtin.type.ob$type=di.builtin.type,di.builtin.type.tp$name="type",di.builtin.type.$r=function(){return new di.builtin.str("<type 'type'>")},di.builtin.type.prototype.tp$getattr=function(t){var e,n=di.builtin.type.typeLookup(this,t);return void 0!==n&&null!==n&&void 0!==n.ob$type&&(e=n.ob$type.tp$descr_get),this.$d&&(t=this.$d.mp$lookup(new di.builtin.str(t)),void 0!==t)?t:e?e.call(n,null,this):void 0!==n?n:void 0},di.builtin.type.prototype.tp$setattr=function(t,e){this[t]=e},di.builtin.type.typeLookup=function(t,e){var n,i,r=t.tp$mro,s=new di.builtin.str(e);if(!r)return t.prototype[e];for(i=0;i<r.v.length;++i){if(n=r.v[i],n.hasOwnProperty(e))return n[e];if(n=n.$d.mp$lookup(s),void 0!==n)return n}},di.builtin.type.mroMerge_=function(t){for(var e=[];;){for(var n=0;n<t.length;++n){var i=t[n];if(0!==i.length)break}if(n===t.length)return e;for(var r=[],n=0;n<t.length;++n)if(i=t[n],0!==i.length){var i=i[0],s=0;t:for(;s<t.length;++s)for(var o=t[s],a=1;a<o.length;++a)if(o[a]===i)break t;s===t.length&&r.push(i)}if(0===r.length)throw new di.builtin.TypeError("Inconsistent precedences in type hierarchy");for(r=r[0],e.push(r),n=0;n<t.length;++n)i=t[n],0<i.length&&i[0]===r&&i.splice(0,1)}},di.builtin.type.buildMRO_=function(t){var e=[[t]];t=t.$d.mp$subscript(di.builtin.type.basesStr_);for(var n=0;n<t.v.length;++n)e.push(di.builtin.type.buildMRO_(t.v[n]));for(var i=[],n=0;n<t.v.length;++n)i.push(t.v[n]);return e.push(i),di.builtin.type.mroMerge_(e)},di.builtin.type.buildMRO=function(t){return new di.builtin.tuple(di.builtin.type.buildMRO_(t))},di.builtin.type.prototype.tp$richcompare=function(t,e){if(t.ob$type==di.builtin.type&&this.$r&&t.$r){var n=this.$r(),i=t.$r();return n.tp$richcompare(i,e)}},di.builtin.object=function(){return this instanceof di.builtin.object?(this.$d=new di.builtin.dict([]),this):new di.builtin.object},di.builtin.object.prototype.GenericGetAttr=function(t){pi.asserts.assert("string"==typeof t);var e=this.ob$type;pi.asserts.assert(void 0!==e,"object has no ob$type!");var n,e=di.builtin.type.typeLookup(e,t);if(void 0!==e&&null!==e&&void 0!==e.ob$type&&(n=e.ob$type.tp$descr_get),this.$d){var i;if(this.$d.mp$lookup)i=this.$d.mp$lookup(new di.builtin.str(t));else if(this.$d.mp$subscript)try{i=this.$d.mp$subscript(new di.builtin.str(t))}catch(r){i=void 0}else"object"==typeof this.$d&&(i=this.$d[t]);if(void 0!==i)return i}return n?n.call(e,this,this.ob$type):void 0!==e?e:void 0},pi.exportSymbol("Sk.builtin.object.prototype.GenericGetAttr",di.builtin.object.prototype.GenericGetAttr),di.builtin.object.prototype.GenericSetAttr=function(t,e){pi.asserts.assert("string"==typeof t),this.$d.mp$ass_subscript?this.$d.mp$ass_subscript(new di.builtin.str(t),e):"object"==typeof this.$d&&(this.$d[t]=e)},pi.exportSymbol("Sk.builtin.object.prototype.GenericSetAttr",di.builtin.object.prototype.GenericSetAttr),di.builtin.object.prototype.HashNotImplemented=function(){throw new di.builtin.TypeError("unhashable type: '"+di.abstr.typeName(this)+"'")},di.builtin.object.prototype.tp$getattr=di.builtin.object.prototype.GenericGetAttr,di.builtin.object.prototype.tp$setattr=di.builtin.object.prototype.GenericSetAttr,di.builtin.object.prototype.ob$type=di.builtin.type.makeIntoTypeObj("object",di.builtin.object),di.builtin.none=function(){},di.builtin.none.prototype.ob$type=di.builtin.type.makeIntoTypeObj("NoneType",di.builtin.none),di.builtin.none.prototype.tp$name="NoneType",di.builtin.none.none$=Object.create(di.builtin.none.prototype,{v:{value:null,enumerable:!0}}),pi.exportSymbol("Sk.builtin.none",di.builtin.none),di.builtin.bool=function(t){return di.builtin.pyCheckArgs("bool",arguments,1),di.misceval.isTrue(t)?di.builtin.bool.true$:di.builtin.bool.false$},di.builtin.bool.prototype.tp$name="bool",di.builtin.bool.prototype.ob$type=di.builtin.type.makeIntoTypeObj("bool",di.builtin.bool),di.builtin.bool.prototype.$r=function(){return this.v?new di.builtin.str("True"):new di.builtin.str("False")},di.builtin.bool.true$=Object.create(di.builtin.bool.prototype,{v:{value:!0,enumerable:!0}}),di.builtin.bool.false$=Object.create(di.builtin.bool.prototype,{v:{value:!1,enumerable:!0}}),pi.exportSymbol("Sk.builtin.bool",di.builtin.bool),di.builtin.pyCheckArgs=function(t,e,n,i,r,s){e=e.length;var o="";if(void 0===i&&(i=1/0),r&&(e-=1),s&&(e-=1),n>e||e>i)throw o=(n===i?t+"() takes exactly "+n+" arguments":n>e?t+"() takes at least "+n+" arguments":t+"() takes at most "+i+" arguments")+(" ("+e+" given)"),new di.builtin.TypeError(o)},pi.exportSymbol("Sk.builtin.pyCheckArgs",di.builtin.pyCheckArgs),di.builtin.pyCheckType=function(t,e,n){if(!n)throw new di.builtin.TypeError(t+" must be a "+e)},pi.exportSymbol("Sk.builtin.pyCheckType",di.builtin.pyCheckType),di.builtin.checkSequence=function(t){return null!==t&&void 0!==t.mp$subscript},pi.exportSymbol("Sk.builtin.checkSequence",di.builtin.checkSequence),di.builtin.checkIterable=function(t){return null!==t&&void 0!==t.tp$iter},pi.exportSymbol("Sk.builtin.checkIterable",di.builtin.checkIterable),di.builtin.checkNumber=function(t){return null!==t&&("number"==typeof t||t instanceof di.builtin.nmber||t instanceof di.builtin.lng)},pi.exportSymbol("Sk.builtin.checkNumber",di.builtin.checkNumber),di.builtin.checkInt=function(t){return null!==t&&("number"==typeof t&&t===(0|t)||t instanceof di.builtin.nmber&&t.skType===di.builtin.nmber.int$||t instanceof di.builtin.lng)},pi.exportSymbol("Sk.builtin.checkInt",di.builtin.checkInt),di.builtin.checkString=function(t){return null!==t&&t.__class__==di.builtin.str},pi.exportSymbol("Sk.builtin.checkString",di.builtin.checkString),di.builtin.checkClass=function(t){return null!==t&&t.sk$type},pi.exportSymbol("Sk.builtin.checkClass",di.builtin.checkClass),di.builtin.checkBool=function(t){return t instanceof di.builtin.bool},pi.exportSymbol("Sk.builtin.checkBool",di.builtin.checkBool),di.builtin.checkFunction=function(t){return null!==t&&void 0!==t.tp$call},pi.exportSymbol("Sk.builtin.checkFunction",di.builtin.checkFunction),di.builtin.func=function(t,e,n,i){if(this.func_code=t,this.func_globals=e||null,void 0!==i)for(var r in i)n[r]=i[r];return this.func_closure=n,this},pi.exportSymbol("Sk.builtin.func",di.builtin.func),di.builtin.func.prototype.tp$name="function",di.builtin.func.prototype.tp$descr_get=function(t,e){return pi.asserts.assert(void 0!==t&&void 0!==e),null==t?this:new di.builtin.method(this,t)},di.builtin.func.prototype.tp$call=function(t,e){var n;this.func_closure&&t.push(this.func_closure),n=this.func_code.co_kwargs;var i=[];if(this.func_code.no_kw&&e)throw n=this.func_code&&this.func_code.co_name&&this.func_code.co_name.v||"<native JS>",new di.builtin.TypeError(n+"() takes no keyword arguments");if(e)for(var r=e.length,s=this.func_code.co_varnames,o=s&&s.length,a=0;r>a;a+=2){for(var l=0;o>l&&e[a]!==s[l];++l);if(s&&l!==o)t[l]=e[a+1];else{if(!n)throw n=this.func_code&&this.func_code.co_name&&this.func_code.co_name.v||"<native JS>",new di.builtin.TypeError(n+"() got an unexpected keyword argument '"+e[a]+"'");i.push(new di.builtin.str(e[a])),i.push(e[a+1])}}return n&&t.unshift(i),this.func_code.apply(this.func_globals,t)},di.builtin.func.prototype.tp$getattr=function(t){return this[t]},di.builtin.func.prototype.tp$setattr=function(t,e){this[t]=e},di.builtin.func.prototype.ob$type=di.builtin.type.makeTypeObj("function",new di.builtin.func(null,null)),di.builtin.func.prototype.$r=function(){return new di.builtin.str("<function "+(this.func_code&&this.func_code.co_name&&this.func_code.co_name.v||"<native JS>")+">")},di.nativejs={FN_ARGS:/^function\s*[^\(]*\(\s*([^\)]*)\)/m,FN_ARG_SPLIT:/,/,FN_ARG:/^\s*(_?)(\S+?)\1\s*$/,STRIP_COMMENTS:/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,formalParameterList:function(t){var e=[];t=t.toString().replace(this.STRIP_COMMENTS,"").match(this.FN_ARGS)[1].split(this.FN_ARG_SPLIT);for(var n in t)t[n].replace(this.FN_ARG,function(t,n,i){e.push(i)});return e},func:function(t){return t.co_name=new di.builtin.str(t.name),t.co_varnames=di.nativejs.formalParameterList(t),new di.builtin.func(t)},func_nokw:function(t){return t.co_name=new di.builtin.str(t.name),t.co_varnames=di.nativejs.formalParameterList(t),t.no_kw=!0,new di.builtin.func(t)}},pi.exportSymbol("Sk.nativejs.func",di.nativejs.func),pi.exportSymbol("Sk.nativejs.func_nokw",di.nativejs.func_nokw),di.builtin.method=function(t,e){this.im_func=t,this.im_self=e},pi.exportSymbol("Sk.builtin.method",di.builtin.method),di.builtin.method.prototype.tp$call=function(t,e){if(pi.asserts.assert(this.im_self,"should just be a function, not a method since there's no self?"),pi.asserts.assert(this.im_func instanceof di.builtin.func),t.unshift(this.im_self),e)for(var n=e.length,i=0;n>i;i+=2){for(var r=this.im_func.func_code.co_varnames,s=r&&r.length,o=0;s>o&&e[i]!==r[o];++o);t[o]=e[i+1]}return this.im_func.func_code.apply(this.im_func.func_globals,t)},di.builtin.method.prototype.$r=function(){return new di.builtin.str("<bound method "+this.im_self.ob$type.tp$name+"."+(this.im_func.func_code&&this.im_func.func_code.co_name&&this.im_func.func_code.co_name.v||"<native JS>")+" of "+this.im_self.$r().v+">")},di.misceval={},di.misceval.isIndex=function(t){return null===t||t.constructor===di.builtin.lng||t.tp$index||!0===t||!1===t?!0:di.builtin.checkInt(t)},pi.exportSymbol("Sk.misceval.isIndex",di.misceval.isIndex),di.misceval.asIndex=function(t){if(di.misceval.isIndex(t)&&null!==t){if(!0===t)return 1;if(!1===t)return 0;if("number"==typeof t)return t;if(t.constructor===di.builtin.nmber)return t.v;if(t.constructor===di.builtin.lng)return t.tp$index();pi.asserts.fail("todo asIndex;")}},di.misceval.applySlice=function(t,e,n){return t.sq$slice&&di.misceval.isIndex(e)&&di.misceval.isIndex(n)?(e=di.misceval.asIndex(e),void 0===e&&(e=0),n=di.misceval.asIndex(n),void 0===n&&(n=1e100),di.abstr.sequenceGetSlice(t,e,n)):di.abstr.objectGetItem(t,new di.builtin.slice(e,n,null))},pi.exportSymbol("Sk.misceval.applySlice",di.misceval.applySlice),di.misceval.assignSlice=function(t,e,n,i){return t.sq$ass_slice&&di.misceval.isIndex(e)&&di.misceval.isIndex(n)?(e=di.misceval.asIndex(e)||0,n=di.misceval.asIndex(n)||1e100,null===i?di.abstr.sequenceDelSlice(t,e,n):di.abstr.sequenceSetSlice(t,e,n,i),void 0):(n=new di.builtin.slice(e,n),null===i?di.abstr.objectDelItem(t,n):di.abstr.objectSetItem(t,n,i))},pi.exportSymbol("Sk.misceval.assignSlice",di.misceval.assignSlice),di.misceval.arrayFromArguments=function(t){if(1!=t.length)return t;var e=t[0];if(e instanceof di.builtin.set)e=e.tp$iter().$obj;else if(e instanceof di.builtin.dict)e=di.builtin.dict.prototype.keys.func_code(e);else if(e instanceof di.builtin.str){t=[];for(var e=e.tp$iter(),n=e.tp$iternext();void 0!==n;n=e.tp$iternext())t.push(n);return t}return e instanceof di.builtin.list||e instanceof di.builtin.tuple?e.v:t},pi.exportSymbol("Sk.misceval.arrayFromArguments",di.misceval.arrayFromArguments),di.misceval.swappedOp_={Eq:"Eq",NotEq:"NotEq",Lt:"GtE",LtE:"Gt",Gt:"LtE",GtE:"Lt",Is:"IsNot",IsNot:"Is",In_:"NotIn",NotIn:"In_"},di.misceval.richCompareBool=function(t,e,n){pi.asserts.assert(null!==t&&void 0!==t,"passed null or undefined parameter to Sk.misceval.richCompareBool"),pi.asserts.assert(null!==e&&void 0!==e,"passed null or undefined parameter to Sk.misceval.richCompareBool");var i=new di.builtin.type(t),r=new di.builtin.type(e);if(i!==r&&("GtE"===n||"Gt"===n||"LtE"===n||"Lt"===n)){var s=[di.builtin.float_.prototype.ob$type,di.builtin.int_.prototype.ob$type,di.builtin.lng.prototype.ob$type,di.builtin.bool.prototype.ob$type],o=[di.builtin.dict.prototype.ob$type,di.builtin.enumerate.prototype.ob$type,di.builtin.list.prototype.ob$type,di.builtin.str.prototype.ob$type,di.builtin.tuple.prototype.ob$type],a=s.indexOf(i),l=o.indexOf(i),s=s.indexOf(r),o=o.indexOf(r);if(i===di.builtin.none.prototype.ob$type)switch(n){case"Lt":return!0;case"LtE":return!0;case"Gt":return!1;case"GtE":return!1}if(r===di.builtin.none.prototype.ob$type)switch(n){case"Lt":return!1;case"LtE":return!1;case"Gt":return!0;case"GtE":return!0}if(-1!==a&&-1!==o)switch(n){case"Lt":return!0;case"LtE":return!0;case"Gt":return!1;case"GtE":return!1}if(-1!==l&&-1!==s)switch(n){case"Lt":return!1;case"LtE":return!1;case"Gt":return!0;case"GtE":return!0}if(-1!==l&&-1!==o)switch(n){case"Lt":return o>l;case"LtE":return o>=l;case"Gt":return l>o;case"GtE":return l>=o}}if("Is"===n)return t instanceof di.builtin.nmber&&e instanceof di.builtin.nmber?0===t.numberCompare(e)&&t.skType===e.skType:t instanceof di.builtin.lng&&e instanceof di.builtin.lng?0===t.longCompare(e):t===e;if("IsNot"===n)return t instanceof di.builtin.nmber&&e instanceof di.builtin.nmber?0!==t.numberCompare(e)||t.skType!==e.skType:t instanceof di.builtin.lng&&e instanceof di.builtin.lng?0!==t.longCompare(e):t!==e;if("In"===n)return di.abstr.sequenceContains(e,t);if("NotIn"===n)return!di.abstr.sequenceContains(e,t);var u;if(t.tp$richcompare&&void 0!==(u=t.tp$richcompare(e,n))||e.tp$richcompare&&void 0!==(u=e.tp$richcompare(t,di.misceval.swappedOp_[n])))return u;if(r={Eq:"__eq__",NotEq:"__ne__",Gt:"__gt__",GtE:"__ge__",Lt:"__lt__",LtE:"__le__"},i=r[n],r=r[di.misceval.swappedOp_[n]],t[i])return di.misceval.isTrue(di.misceval.callsim(t[i],t,e));if(e[r])return di.misceval.isTrue(di.misceval.callsim(e[r],e,t));if(t.__cmp__){if(i=di.misceval.callsim(t.__cmp__,t,e),i=di.builtin.asnum$(i),"Eq"===n)return 0===i;if("NotEq"===n)return 0!==i;if("Lt"===n)return 0>i;if("Gt"===n)return i>0;if("LtE"===n)return 0>=i;if("GtE"===n)return i>=0}if(e.__cmp__){if(i=di.misceval.callsim(e.__cmp__,e,t),i=di.builtin.asnum$(i),"Eq"===n)return 0===i;if("NotEq"===n)return 0!==i;if("Lt"===n)return i>0;if("Gt"===n)return 0>i;if("LtE"===n)return i>=0;if("GtE"===n)return 0>=i}if(t instanceof di.builtin.none&&e instanceof di.builtin.none||t instanceof di.builtin.bool&&e instanceof di.builtin.bool){if("Eq"===n)return t.v===e.v;if("NotEq"===n)return t.v!==e.v;if("Gt"===n)return t.v>e.v;if("GtE"===n)return t.v>=e.v;if("Lt"===n)return t.v<e.v;if("LtE"===n)return t.v<=e.v}if("Eq"===n)return t instanceof di.builtin.str&&e instanceof di.builtin.str?t.v===e.v:t===e;if("NotEq"===n)return t instanceof di.builtin.str&&e instanceof di.builtin.str?t.v!==e.v:t!==e;throw t=di.abstr.typeName(t),e=di.abstr.typeName(e),new di.builtin.ValueError("don't know how to compare '"+t+"' and '"+e+"'")},pi.exportSymbol("Sk.misceval.richCompareBool",di.misceval.richCompareBool),di.misceval.objectRepr=function(t){return pi.asserts.assert(void 0!==t,"trying to repr undefined"),null===t||t instanceof di.builtin.none?new di.builtin.str("None"):!0===t?new di.builtin.str("True"):!1===t?new di.builtin.str("False"):"number"==typeof t?new di.builtin.str(""+t):t.$r?t.constructor===di.builtin.nmber?1/0===t.v?new di.builtin.str("inf"):-1/0===t.v?new di.builtin.str("-inf"):t.$r():t.$r():t.tp$name?new di.builtin.str("<"+t.tp$name+" object>"):new di.builtin.str("<unknown>")},pi.exportSymbol("Sk.misceval.objectRepr",di.misceval.objectRepr),di.misceval.opAllowsEquality=function(t){switch(t){case"LtE":case"Eq":case"GtE":return!0}return!1},pi.exportSymbol("Sk.misceval.opAllowsEquality",di.misceval.opAllowsEquality),di.misceval.isTrue=function(t){return!0===t?!0:!1===t||null===t||t.constructor===di.builtin.none?!1:t.constructor===di.builtin.bool?t.v:"number"==typeof t?0!==t:t instanceof di.builtin.lng?t.nb$nonzero():t.constructor===di.builtin.nmber?0!==t.v:t.mp$length?0!==t.mp$length():t.sq$length?0!==t.sq$length():!0},pi.exportSymbol("Sk.misceval.isTrue",di.misceval.isTrue),di.misceval.softspace_=!1,di.misceval.print_=function(t){di.misceval.softspace_&&("\n"!==t&&di.output(" "),di.misceval.softspace_=!1),t=new di.builtin.str(t),di.output(t.v),(0===t.v.length||"\n"!==t.v[t.v.length-1]&&"	"!==t.v[t.v.length-1]&&"\r"!==t.v[t.v.length-1]||" "===t.v[t.v.length-1])&&(di.misceval.softspace_=!0)},pi.exportSymbol("Sk.misceval.print_",di.misceval.print_),di.misceval.loadname=function(t,e){var n=e[t];if(void 0!==n)return n;if(n=di.builtins[t],void 0!==n)return n;throw t=t.replace("_$rw$",""),t=t.replace("_$rn$",""),new di.builtin.NameError("name '"+t+"' is not defined")},pi.exportSymbol("Sk.misceval.loadname",di.misceval.loadname),di.misceval.call=function(t,e,n,i,r){return r=Array.prototype.slice.call(arguments,4),di.misceval.apply(t,e,n,i,r)},pi.exportSymbol("Sk.misceval.call",di.misceval.call),di.misceval.callsim=function(t,e){return e=Array.prototype.slice.call(arguments,1),di.misceval.apply(t,void 0,void 0,void 0,e)},pi.exportSymbol("Sk.misceval.callsim",di.misceval.callsim),di.misceval.apply=function(t,e,n,i,r){if(null===t||t instanceof di.builtin.none)throw new di.builtin.TypeError("'"+di.abstr.typeName(t)+"' object is not callable");if("function"==typeof t){if(t.sk$klass)return t.apply(null,[e,n,i,r]);if(n){n=n.tp$iter();for(var s=n.tp$iternext();void 0!==s;s=n.tp$iternext())r.push(s)}return e&&pi.asserts.fail("kwdict not implemented;"),pi.asserts.assert(void 0===i||0===i.length),t.apply(null,r)}var o=t.tp$call;if(void 0!==o){if(n)for(n=n.tp$iter(),s=n.tp$iternext();void 0!==s;s=n.tp$iternext())r.push(s);return e&&pi.asserts.fail("kwdict not implemented;"),o.call(t,r,i,e)}if(o=t.__call__,void 0!==o)return r.unshift(t),di.misceval.apply(o,i,r,e,n);throw new di.builtin.TypeError("'"+di.abstr.typeName(t)+"' object is not callable")},pi.exportSymbol("Sk.misceval.apply",di.misceval.apply),di.misceval.buildClass=function(t,e,n,i){var r=di.builtin.type,s={};return e(t,s,[]),s.__module__=t.__name__,di.misceval.callsim(r,n,i,s)},pi.exportSymbol("Sk.misceval.buildClass",di.misceval.buildClass),di.abstr={},di.abstr.typeName=function(t){return t instanceof di.builtin.nmber?t.skType:void 0!==t.tp$name?t.tp$name:"<invalid type>"},di.abstr.binop_type_error=function(t,e,n){throw t=di.abstr.typeName(t),e=di.abstr.typeName(e),new di.builtin.TypeError("unsupported operand type(s) for "+n+": '"+t+"' and '"+e+"'")},di.abstr.boNameToSlotFuncLhs_=function(t,e){if(null!==t)switch(e){case"Add":return t.nb$add?t.nb$add:t.__add__;case"Sub":return t.nb$subtract?t.nb$subtract:t.__sub__;case"Mult":return t.nb$multiply?t.nb$multiply:t.__mul__;case"Div":return t.nb$divide?t.nb$divide:t.__div__;case"FloorDiv":return t.nb$floor_divide?t.nb$floor_divide:t.__floordiv__;case"Mod":return t.nb$remainder?t.nb$remainder:t.__mod__;case"Pow":return t.nb$power?t.nb$power:t.__pow__;case"LShift":return t.nb$lshift?t.nb$lshift:t.__lshift__;case"RShift":return t.nb$rshift?t.nb$rshift:t.__rshift__;case"BitAnd":return t.nb$and?t.nb$and:t.__and__;case"BitXor":return t.nb$xor?t.nb$xor:t.__xor__;case"BitOr":return t.nb$or?t.nb$or:t.__or__}},di.abstr.boNameToSlotFuncRhs_=function(t,e){if(null!==t)switch(e){case"Add":return t.nb$add?t.nb$add:t.__radd__;case"Sub":return t.nb$subtract?t.nb$subtract:t.__rsub__;case"Mult":return t.nb$multiply?t.nb$multiply:t.__rmul__;case"Div":return t.nb$divide?t.nb$divide:t.__rdiv__;case"FloorDiv":return t.nb$floor_divide?t.nb$floor_divide:t.__rfloordiv__;case"Mod":return t.nb$remainder?t.nb$remainder:t.__rmod__;case"Pow":return t.nb$power?t.nb$power:t.__rpow__;case"LShift":return t.nb$lshift?t.nb$lshift:t.__rlshift__;case"RShift":return t.nb$rshift?t.nb$rshift:t.__rrshift__;case"BitAnd":return t.nb$and?t.nb$and:t.__rand__;case"BitXor":return t.nb$xor?t.nb$xor:t.__rxor__;case"BitOr":return t.nb$or?t.nb$or:t.__ror__}},di.abstr.iboNameToSlotFunc_=function(t,e){switch(e){case"Add":return t.nb$inplace_add?t.nb$inplace_add:t.__iadd__;case"Sub":return t.nb$inplace_subtract?t.nb$inplace_subtract:t.__isub__;case"Mult":return t.nb$inplace_multiply?t.nb$inplace_multiply:t.__imul__;case"Div":return t.nb$inplace_divide?t.nb$inplace_divide:t.__idiv__;case"FloorDiv":return t.nb$inplace_floor_divide?t.nb$inplace_floor_divide:t.__ifloordiv__;case"Mod":return t.nb$inplace_remainder;case"Pow":return t.nb$inplace_power;case"LShift":return t.nb$inplace_lshift?t.nb$inplace_lshift:t.__ilshift__;case"RShift":return t.nb$inplace_rshift?t.nb$inplace_rshift:t.__irshift__;case"BitAnd":return t.nb$inplace_and;case"BitOr":return t.nb$inplace_or;case"BitXor":return t.nb$inplace_xor?t.nb$inplace_xor:t.__ixor__}},di.abstr.binary_op_=function(t,e,n){var i;return i=di.abstr.boNameToSlotFuncLhs_(t,n),void 0!==i&&(i=i.call?i.call(t,e):di.misceval.callsim(i,t,e),void 0!==i)?i:(i=di.abstr.boNameToSlotFuncRhs_(e,n),void 0!==i&&(i=i.call?i.call(e,t):di.misceval.callsim(i,e,t),void 0!==i)?i:(di.abstr.binop_type_error(t,e,n),void 0))},di.abstr.binary_iop_=function(t,e,n){var i;return i=di.abstr.iboNameToSlotFunc_(t,n),void 0!==i&&(i=i.call?i.call(t,e):di.misceval.callsim(i,t,e),void 0!==i)?i:(i=di.abstr.iboNameToSlotFunc_(e,n),void 0!==i&&(i=i.call?i.call(e,t):di.misceval.callsim(i,e,t),void 0!==i)?i:(di.abstr.binop_type_error(t,e,n),void 0))},di.abstr.numOpAndPromote=function(t,e,n){if(null!==t&&null!==e){if("number"==typeof t&&"number"==typeof e)return n=n(t,e),(n>di.builtin.lng.threshold$||n<-di.builtin.lng.threshold$)&&Math.floor(n)===n?[di.builtin.lng.fromInt$(t),di.builtin.lng.fromInt$(e)]:n;if(void 0===t||void 0===e)throw new di.builtin.NameError("Undefined variable in expression");if(t.constructor===di.builtin.lng||t.constructor===di.builtin.nmber)return[t,e];if("number"==typeof t)return[new di.builtin.nmber(t,void 0),e]}},di.abstr.boNumPromote_={Add:function(t,e){return t+e},Sub:function(t,e){return t-e},Mult:function(t,e){return t*e},Mod:function(t,e){if(0===e)throw new di.builtin.ZeroDivisionError("division or modulo by zero");var n=t%e;return 0>n*e?n+e:n},Div:function(t,e){if(0===e)throw new di.builtin.ZeroDivisionError("division or modulo by zero");return t/e},FloorDiv:function(t,e){if(0===e)throw new di.builtin.ZeroDivisionError("division or modulo by zero");return Math.floor(t/e)},Pow:Math.pow,BitAnd:function(t,e){var n=t&e;return 0>n&&(n+=4294967296),n},BitOr:function(t,e){var n=t|e;return 0>n&&(n+=4294967296),n},BitXor:function(t,e){var n=t^e;return 0>n&&(n+=4294967296),n},LShift:function(t,e){if(0>e)throw new di.builtin.ValueError("negative shift count");var n=t<<e;return n>t?n:t*Math.pow(2,e)},RShift:function(t,e){if(0>e)throw new di.builtin.ValueError("negative shift count");var n=t>>e;return t>0&&0>n&&(n&=Math.pow(2,32-e)-1),n}},di.abstr.numberBinOp=function(t,e,n){var i=di.abstr.boNumPromote_[n];if(void 0!==i){if(i=di.abstr.numOpAndPromote(t,e,i),"number"==typeof i)return i;if(void 0!==i&&i.constructor===di.builtin.nmber||void 0!==i&&i.constructor===di.builtin.lng)return i;void 0!==i&&(t=i[0],e=i[1])}return di.abstr.binary_op_(t,e,n)
},pi.exportSymbol("Sk.abstr.numberBinOp",di.abstr.numberBinOp),di.abstr.numberInplaceBinOp=function(t,e,n){var i=di.abstr.boNumPromote_[n];if(void 0!==i){if(i=di.abstr.numOpAndPromote(t,e,i),"number"==typeof i)return i;if(void 0!==i&&i.constructor===di.builtin.nmber||void 0!==i&&i.constructor===di.builtin.lng)return i;void 0!==i&&(t=i[0],e=i[1])}return di.abstr.binary_iop_(t,e,n)},pi.exportSymbol("Sk.abstr.numberInplaceBinOp",di.abstr.numberInplaceBinOp),di.abstr.numberUnaryOp=function(t,e){if("Not"===e)return di.misceval.isTrue(t)?di.builtin.bool.false$:di.builtin.bool.true$;if(t instanceof di.builtin.nmber||t instanceof di.builtin.bool){var n=di.builtin.asnum$(t);if("USub"===e)return new di.builtin.nmber(-n,n.skType);if("UAdd"===e)return new di.builtin.nmber(n,n.skType);if("Invert"===e)return new di.builtin.nmber(~n,n.skType)}else{if("USub"===e&&t.nb$negative)return t.nb$negative();if("UAdd"===e&&t.nb$positive)return t.nb$positive();if("Invert"===e&&t.nb$invert)return t.nb$invert()}throw n=di.abstr.typeName(t),new di.builtin.TypeError("unsupported operand type for "+e+" '"+n+"'")},pi.exportSymbol("Sk.abstr.numberUnaryOp",di.abstr.numberUnaryOp),di.abstr.fixSeqIndex_=function(t,e){return e=di.builtin.asnum$(e),0>e&&t.sq$length&&(e+=t.sq$length()),e},di.abstr.sequenceContains=function(t,e){if(t.sq$contains)return t.sq$contains(e);var n=di.abstr.typeName(t);if(!t.tp$iter)throw new di.builtin.TypeError("argument of type '"+n+"' is not iterable");for(var n=t.tp$iter(),i=n.tp$iternext();void 0!==i;i=n.tp$iternext())if(di.misceval.richCompareBool(i,e,"Eq"))return!0;return!1},di.abstr.sequenceGetItem=function(){pi.asserts.fail()},di.abstr.sequenceSetItem=function(){pi.asserts.fail()},di.abstr.sequenceDelItem=function(t,e){if(!t.sq$del_item){var n=di.abstr.typeName(t);throw new di.builtin.TypeError("'"+n+"' object does not support item deletion")}e=di.abstr.fixSeqIndex_(t,e),t.sq$del_item(e)},di.abstr.sequenceRepeat=function(t,e,n){if(n=di.builtin.asnum$(n),void 0===di.misceval.asIndex(n))throw t=di.abstr.typeName(n),new di.builtin.TypeError("can't multiply sequence by non-int of type '"+t+"'");return t.call(e,n)},di.abstr.sequenceGetSlice=function(t,e,n){if(t.sq$slice)return e=di.abstr.fixSeqIndex_(t,e),n=di.abstr.fixSeqIndex_(t,n),t.sq$slice(e,n);if(t.mp$subscript)return t.mp$subscript(new di.builtin.slice(e,n));throw t=di.abstr.typeName(t),new di.builtin.TypeError("'"+t+"' object is unsliceable")},di.abstr.sequenceDelSlice=function(t,e,n){if(!t.sq$del_slice)throw t=di.abstr.typeName(t),new di.builtin.TypeError("'"+t+"' doesn't support slice deletion");e=di.abstr.fixSeqIndex_(t,e),n=di.abstr.fixSeqIndex_(t,n),t.sq$del_slice(e,n)},di.abstr.sequenceSetSlice=function(t,e,n,i){if(t.sq$ass_slice)e=di.abstr.fixSeqIndex_(t,e),n=di.abstr.fixSeqIndex_(t,n),t.sq$ass_slice(e,n,i);else{if(!t.mp$ass_subscript)throw t=di.abstr.typeName(t),new di.builtin.TypeError("'"+t+"' object doesn't support slice assignment");t.mp$ass_subscript(new di.builtin.slice(e,n),i)}},di.abstr.objectDelItem=function(t,e){if(null!==t){if(t.mp$del_subscript)return t.mp$del_subscript(e),void 0;if(t.sq$ass_item){var n=di.misceval.asIndex(e);if(void 0===n)throw n=di.abstr.typeName(e),new di.builtin.TypeError("sequence index must be integer, not '"+n+"'");return di.abstr.sequenceDelItem(t,n),void 0}}throw n=di.abstr.typeName(t),new di.builtin.TypeError("'"+n+"' object does not support item deletion")},pi.exportSymbol("Sk.abstr.objectDelItem",di.abstr.objectDelItem),di.abstr.objectGetItem=function(t,e){if(null!==t){if(t.mp$subscript)return t.mp$subscript(e);if(di.misceval.isIndex(e)&&t.sq$item)return di.abstr.sequenceGetItem(t,di.misceval.asIndex(e));if(t.tp$getitem)return t.tp$getitem(e)}var n=di.abstr.typeName(t);throw new di.builtin.TypeError("'"+n+"' does not support indexing")},pi.exportSymbol("Sk.abstr.objectGetItem",di.abstr.objectGetItem),di.abstr.objectSetItem=function(t,e,n){if(null!==t){if(t.mp$ass_subscript)return t.mp$ass_subscript(e,n);if(di.misceval.isIndex(e)&&t.sq$ass_item)return di.abstr.sequenceSetItem(t,di.misceval.asIndex(e),n);if(t.tp$setitem)return t.tp$setitem(e,n)}throw t=di.abstr.typeName(t),new di.builtin.TypeError("'"+t+"' does not support item assignment")},pi.exportSymbol("Sk.abstr.objectSetItem",di.abstr.objectSetItem),di.abstr.gattr=function(t,e){var n=di.abstr.typeName(t);if(null===t)throw new di.builtin.AttributeError("'"+n+"' object has no attribute '"+e+"'");var i=void 0;if(t.__getattr__?i=di.misceval.callsim(t.__getattr__,t,e):void 0!==t.tp$getattr&&(i=t.tp$getattr(e)),void 0===i)throw new di.builtin.AttributeError("'"+n+"' object has no attribute '"+e+"'");return i},pi.exportSymbol("Sk.abstr.gattr",di.abstr.gattr),di.abstr.sattr=function(t,e,n){var i=di.abstr.typeName(t);if(null===t)throw new di.builtin.AttributeError("'"+i+"' object has no attribute '"+e+"'");if(t.__setattr__)di.misceval.callsim(t.__setattr__,t,e,n);else{if(void 0===t.tp$setattr)throw new di.builtin.AttributeError("'"+i+"' object has no attribute '"+e+"'");t.tp$setattr(e,n)}},pi.exportSymbol("Sk.abstr.sattr",di.abstr.sattr),di.abstr.iter=function(t){if(t.tp$iter)return t.tp$iter();throw new di.builtin.TypeError("'"+di.abstr.typeName(t)+"' object is not iterable")},pi.exportSymbol("Sk.abstr.iter",di.abstr.iter),di.abstr.iternext=function(t){return t.tp$iternext()},pi.exportSymbol("Sk.abstr.iternext",di.abstr.iternext),di.mergeSort=function(t,e,n,i){di.quickSort(t,e,n,i)},di.quickSort=function(t,e,n,i){pi.asserts.assert(!n,"todo;"),e||(e=di.mergeSort.stdCmp);var r=function(t,n,i,s){if(i-1>n){var o,a=n+Math.floor(Math.random()*(i-n)),l=t[a];o=t[a],t[a]=t[i-1],t[i-1]=o;var u,a=n;for(u=n;i-1>u;++u)o=s?di.misceval.callsim(e,l,t[u]):di.misceval.callsim(e,t[u],l),0>di.builtin.asnum$(o)&&(o=t[a],t[a]=t[u],t[u]=o,++a);o=t[i-1],t[i-1]=t[a],t[a]=o,r(t,n,a,s),r(t,a+1,i,s)}};return r(t,0,t.length,i),null},di.mergeSort.stdCmp=new di.builtin.func(function(t,e){return di.misceval.richCompareBool(t,e,"Lt")?-1:0}),di.builtin.list=function(t){if(!(this instanceof di.builtin.list))return new di.builtin.list(t);if(void 0===t)this.v=[];else if("[object Array]"===Object.prototype.toString.apply(t))this.v=t;else{if(!t.tp$iter)throw new di.builtin.ValueError("expecting Array or iterable");this.v=[],t=t.tp$iter();for(var e=t.tp$iternext();void 0!==e;e=t.tp$iternext())this.v.push(e)}return this.__class__=di.builtin.list,this.v=this.v,this},di.builtin.list.prototype.ob$type=di.builtin.type.makeIntoTypeObj("list",di.builtin.list),di.builtin.list.prototype.list_iter_=function(){var t={tp$iter:function(){return t},$obj:this,$index:0,tp$iternext:function(){return t.$index>=t.$obj.v.length?void 0:t.$obj.v[t.$index++]}};return t},di.builtin.list.prototype.list_concat_=function(t){if(!t.__class__||t.__class__!=di.builtin.list)throw new di.builtin.TypeError("can only concatenate list to list");for(var e=this.v.slice(),n=0;n<t.v.length;++n)e.push(t.v[n]);return new di.builtin.list(e)},di.builtin.list.prototype.list_del_item_=function(t){if(t=di.builtin.asnum$(t),0>t||t>=this.v.length)throw new di.builtin.IndexError("list assignment index out of range");this.list_del_slice_(t,t+1)},di.builtin.list.prototype.list_del_slice_=function(t,e){t=di.builtin.asnum$(t),e=di.builtin.asnum$(e);var n=[];n.unshift(e-t),n.unshift(t),this.v.splice.apply(this.v,n)},di.builtin.list.prototype.list_ass_item_=function(t,e){if(t=di.builtin.asnum$(t),0>t||t>=this.v.length)throw new di.builtin.IndexError("list assignment index out of range");this.v[t]=e},di.builtin.list.prototype.list_ass_slice_=function(t,e,n){t=di.builtin.asnum$(t),e=di.builtin.asnum$(e),n=n.v.slice(0),n.unshift(e-t),n.unshift(t),this.v.splice.apply(this.v,n)},di.builtin.list.prototype.tp$name="list",di.builtin.list.prototype.$r=function(){for(var t=[],e=this.tp$iter(),n=e.tp$iternext();void 0!==n;n=e.tp$iternext())t.push(di.misceval.objectRepr(n).v);return new di.builtin.str("["+t.join(", ")+"]")},di.builtin.list.prototype.tp$getattr=di.builtin.object.prototype.GenericGetAttr,di.builtin.list.prototype.tp$hash=di.builtin.object.prototype.HashNotImplemented,di.builtin.list.prototype.tp$richcompare=function(t,e){if(this===t&&di.misceval.opAllowsEquality(e))return!0;if(!t.__class__||t.__class__!=di.builtin.list)return"Eq"===e?!1:"NotEq"===e?!0:!1;var n=this.v;t=t.v;var i,r=n.length,s=t.length;for(i=0;r>i&&s>i&&di.misceval.richCompareBool(n[i],t[i],"Eq");++i);if(i>=r||i>=s)switch(e){case"Lt":return s>r;case"LtE":return s>=r;case"Eq":return r===s;case"NotEq":return r!==s;case"Gt":return r>s;case"GtE":return r>=s;default:pi.asserts.fail()}return"Eq"===e?!1:"NotEq"===e?!0:di.misceval.richCompareBool(n[i],t[i],e)},di.builtin.list.prototype.tp$iter=di.builtin.list.prototype.list_iter_,di.builtin.list.prototype.sq$length=function(){return this.v.length},di.builtin.list.prototype.sq$concat=di.builtin.list.prototype.list_concat_,di.builtin.list.prototype.nb$add=di.builtin.list.prototype.list_concat_,di.builtin.list.prototype.nb$inplace_add=di.builtin.list.prototype.list_concat_,di.builtin.list.prototype.sq$repeat=function(t){t=di.builtin.asnum$(t);for(var e=[],n=0;t>n;++n)for(var i=0;i<this.v.length;++i)e.push(this.v[i]);return new di.builtin.list(e)},di.builtin.list.prototype.nb$multiply=di.builtin.list.prototype.sq$repeat,di.builtin.list.prototype.nb$inplace_multiply=di.builtin.list.prototype.sq$repeat,di.builtin.list.prototype.sq$ass_item=di.builtin.list.prototype.list_ass_item_,di.builtin.list.prototype.sq$del_item=di.builtin.list.prototype.list_del_item_,di.builtin.list.prototype.sq$ass_slice=di.builtin.list.prototype.list_ass_slice_,di.builtin.list.prototype.sq$del_slice=di.builtin.list.prototype.list_del_slice_,di.builtin.list.prototype.list_subscript_=function(t){if(di.misceval.isIndex(t)){var e=di.misceval.asIndex(t);if(void 0!==e){if(0>e&&(e=this.v.length+e),0>e||e>=this.v.length)throw new di.builtin.IndexError("list index out of range");return this.v[e]}}else if(t instanceof di.builtin.slice){var n=[];return t.sssiter$(this,function(t,e){n.push(e.v[t])}),new di.builtin.list(n)}throw new di.builtin.TypeError("list indices must be integers, not "+di.abstr.typeName(t))},di.builtin.list.prototype.list_ass_subscript_=function(t,e){if(di.misceval.isIndex(t)){var n=di.misceval.asIndex(t);if(void 0!==n)return 0>n&&(n=this.v.length+n),this.list_ass_item_(n,e),void 0}else if(t instanceof di.builtin.slice){var n=di.builtin.asnum$(t.start),i=di.builtin.asnum$(t.stop),r=di.builtin.asnum$(t.step),r=null===r?1:r;if(null!==n&&!di.builtin.checkInt(n)||null!==i&&!di.builtin.checkInt(i)||null!==r&&!di.builtin.checkInt(r))throw new di.builtin.TypeError("slice indices must be integers or None");if(1===r)this.list_ass_slice_(n,i,e);else{var s=[];if(t.sssiter$(this,function(t){s.push(t)}),i=0,s.length!==e.v.length)throw new di.builtin.ValueError("attempt to assign sequence of size "+e.v.length+" to extended slice of size "+s.length);for(n=0;n<s.length;++n)this.v.splice(s[n],1,e.v[i]),i+=1}return}throw new di.builtin.TypeError("list indices must be integers, not "+di.abstr.typeName(t))},di.builtin.list.prototype.list_del_subscript_=function(t){if(di.misceval.isIndex(t)){var e=di.misceval.asIndex(t);if(void 0!==e)return 0>e&&(e=this.v.length+e),this.list_del_item_(e),void 0}else if(t instanceof di.builtin.slice){var e=di.builtin.asnum$(t.start),n=di.builtin.asnum$(t.stop),i=di.builtin.asnum$(t.step),i=null===i?1:i;if(null!==e&&!di.builtin.checkInt(e)||null!==n&&!di.builtin.checkInt(n)||null!==i&&!di.builtin.checkInt(i))throw new di.builtin.TypeError("slice indices must be integers or None");if(1===i)this.list_del_slice_(e,n);else{var r=this,s=0,o=i>0?1:0;t.sssiter$(this,function(t){r.v.splice(t-s,1),s+=o})}return}throw new di.builtin.TypeError("list indices must be integers, not "+typeof t)},di.builtin.list.prototype.mp$subscript=di.builtin.list.prototype.list_subscript_,di.builtin.list.prototype.mp$ass_subscript=di.builtin.list.prototype.list_ass_subscript_,di.builtin.list.prototype.mp$del_subscript=di.builtin.list.prototype.list_del_subscript_,di.builtin.list.prototype.__getitem__=new di.builtin.func(function(t,e){return di.builtin.list.prototype.list_subscript_.call(t,e)}),di.builtin.list.prototype.list_sort_=function(t,e,n,i){var r=void 0!==n&&null!==n,s=void 0!==e&&null!==e;void 0==i&&(i=!1);var o=new di.builtin.timSort(t);t.v=[];var a=new di.builtin.nmber(0,di.builtin.nmber.int$);if(r){o.lt=s?function(t,n){return di.misceval.richCompareBool(e.func_code(t[0],n[0]),a,"Lt")}:function(t,e){return di.misceval.richCompareBool(t[0],e[0],"Lt")};for(var l=0;l<o.listlength;l++){var s=o.list.v[l],u=n.func_code(s);o.list.v[l]=[u,s]}}else s&&(o.lt=function(t,n){return di.misceval.richCompareBool(e.func_code(t,n),a,"Lt")});if(i&&o.list.list_reverse_(o.list),o.sort(),i&&o.list.list_reverse_(o.list),r)for(n=0;n<o.listlength;n++)s=o.list.v[n][1],o.list.v[n]=s;if(n=0<t.sq$length(),t.v=o.list.v,n)throw new di.builtin.OperationError("list modified during sort");return di.builtin.none.none$},di.builtin.list.prototype.list_reverse_=function(t){di.builtin.pyCheckArgs("reverse",arguments,1,1);for(var e=t.v,n=[],i=t.v.length-1;i>-1;--i)n.push(e[i]);return t.v=n,di.builtin.none.none$},di.builtin.list.prototype.__iter__=new di.builtin.func(function(t){return di.builtin.pyCheckArgs("__iter__",arguments,1,1),t.list_iter_()}),di.builtin.list.prototype.append=new di.builtin.func(function(t,e){return di.builtin.pyCheckArgs("append",arguments,2,2),t.v.push(e),di.builtin.none.none$}),di.builtin.list.prototype.insert=new di.builtin.func(function(t,e,n){if(di.builtin.pyCheckArgs("insert",arguments,3,3),!di.builtin.checkNumber(e))throw new di.builtin.TypeError("an integer is required");return e=di.builtin.asnum$(e),0>e?e=0:e>t.v.length&&(e=t.v.length),t.v.splice(e,0,n),di.builtin.none.none$}),di.builtin.list.prototype.extend=new di.builtin.func(function(t,e){if(di.builtin.pyCheckArgs("extend",arguments,2,2),!di.builtin.checkIterable(e))throw new di.builtin.TypeError("'"+di.abstr.typeName(e)+"' object is not iterable");if(t==e){for(var n=[],i=e.tp$iter(),r=i.tp$iternext();void 0!==r;r=i.tp$iternext())n.push(r);return t.v.push.apply(t.v,n),di.builtin.none.none$}for(i=e.tp$iter(),r=i.tp$iternext();void 0!==r;r=i.tp$iternext())t.v.push(r);return di.builtin.none.none$}),di.builtin.list.prototype.pop=new di.builtin.func(function(t,e){if(di.builtin.pyCheckArgs("pop",arguments,1,2),void 0===e&&(e=t.v.length-1),!di.builtin.checkNumber(e))throw new di.builtin.TypeError("an integer is required");if(e=di.builtin.asnum$(e),0>e||e>=t.v.length)throw new di.builtin.IndexError("pop index out of range");var n=t.v[e];return t.v.splice(e,1),n}),di.builtin.list.prototype.remove=new di.builtin.func(function(t,e){di.builtin.pyCheckArgs("remove",arguments,2,2);var n=di.builtin.list.prototype.index.func_code(t,e);return t.v.splice(di.builtin.asnum$(n),1),di.builtin.none.none$}),di.builtin.list.prototype.index=new di.builtin.func(function(t,e){di.builtin.pyCheckArgs("index",arguments,2,2);for(var n=t.v.length,i=t.v,r=0;n>r;++r)if(di.misceval.richCompareBool(i[r],e,"Eq"))return di.builtin.assk$(r,di.builtin.nmber.int$);throw new di.builtin.ValueError("list.index(x): x not in list")}),di.builtin.list.prototype.count=new di.builtin.func(function(t,e){di.builtin.pyCheckArgs("count",arguments,2,2);for(var n=t.v.length,i=t.v,r=0,s=0;n>s;++s)di.misceval.richCompareBool(i[s],e,"Eq")&&(r+=1);return new di.builtin.nmber(r,di.builtin.nmber.int$)}),di.builtin.list.prototype.reverse=new di.builtin.func(di.builtin.list.prototype.list_reverse_),di.builtin.list.prototype.sort=new di.builtin.func(di.builtin.list.prototype.list_sort_),di.builtin.list.prototype.sort.func_code.co_varnames=["__self__","cmp","key","reverse"],pi.exportSymbol("Sk.builtin.list",di.builtin.list);var Mi={};di.builtin.str=function(t){if(void 0===t&&(t=""),t instanceof di.builtin.str&&t!==di.builtin.str.prototype.ob$type)return t;if(!(this instanceof di.builtin.str))return new di.builtin.str(t);if(!0===t)t="True";else if(!1===t)t="False";else if(null===t||t instanceof di.builtin.none)t="None";else if(t instanceof di.builtin.bool)t=t.v?"True":"False";else if("number"==typeof t)t=t.toString(),"Infinity"===t?t="inf":"-Infinity"===t&&(t="-inf");else if("string"!=typeof t){if(void 0!==t.tp$str){if(t=t.tp$str(),!(t instanceof di.builtin.str))throw new di.builtin.ValueError("__str__ didn't return a str");return t}return di.misceval.objectRepr(t)}return Object.prototype.hasOwnProperty.call(Mi,"1"+t)?Mi["1"+t]:(this.__class__=di.builtin.str,this.v=this.v=t,Mi["1"+t]=this,this)},pi.exportSymbol("Sk.builtin.str",di.builtin.str),di.builtin.str.$emptystr=new di.builtin.str(""),di.builtin.str.prototype.mp$subscript=function(t){if(t=di.builtin.asnum$(t),"number"==typeof t&&Math.floor(t)===t){if(0>t&&(t=this.v.length+t),0>t||t>=this.v.length)throw new di.builtin.IndexError("string index out of range");return new di.builtin.str(this.v.charAt(t))}if(t instanceof di.builtin.slice){var e="";return t.sssiter$(this,function(t,n){t>=0&&t<n.v.length&&(e+=n.v.charAt(t))}),new di.builtin.str(e)}throw new di.builtin.TypeError("string indices must be numbers, not "+typeof t)},di.builtin.str.prototype.sq$length=function(){return this.v.length},di.builtin.str.prototype.sq$concat=function(t){if(!t||!di.builtin.checkString(t))throw t=di.abstr.typeName(t),new di.builtin.TypeError("cannot concatenate 'str' and '"+t+"' objects");return new di.builtin.str(this.v+t.v)},di.builtin.str.prototype.nb$add=di.builtin.str.prototype.sq$concat,di.builtin.str.prototype.nb$inplace_add=di.builtin.str.prototype.sq$concat,di.builtin.str.prototype.sq$repeat=function(t){t=di.builtin.asnum$(t);for(var e="",n=0;t>n;++n)e+=this.v;return new di.builtin.str(e)},di.builtin.str.prototype.nb$multiply=di.builtin.str.prototype.sq$repeat,di.builtin.str.prototype.nb$inplace_multiply=di.builtin.str.prototype.sq$repeat,di.builtin.str.prototype.sq$item=function(){pi.asserts.fail()},di.builtin.str.prototype.sq$slice=function(t,e){return t=di.builtin.asnum$(t),e=di.builtin.asnum$(e),0>t&&(t=0),new di.builtin.str(this.v.substr(t,e-t))},di.builtin.str.prototype.sq$contains=function(t){if(void 0===t.v||t.v.constructor!=String)throw new di.builtin.TypeError("TypeError: 'In <string> requires string as left operand");return-1!=this.v.indexOf(t.v)?!0:!1},di.builtin.str.prototype.tp$name="str",di.builtin.str.prototype.tp$getattr=di.builtin.object.prototype.GenericGetAttr,di.builtin.str.prototype.tp$iter=function(){var t={tp$iter:function(){return t},$obj:this,$index:0,tp$iternext:function(){return t.$index>=t.$obj.v.length?void 0:new di.builtin.str(t.$obj.v.substr(t.$index++,1))}};return t},di.builtin.str.prototype.tp$richcompare=function(t,e){if(t instanceof di.builtin.str){if(this===t)switch(e){case"Eq":case"LtE":case"GtE":return!0;case"NotEq":case"Lt":case"Gt":return!1}var n=this.v.length,i=t.v.length,r=Math.min(n,i),s=0;if(r>0){for(var o=0;r>o;++o)if(this.v[o]!=t.v[o]){s=this.v[o].charCodeAt(0)-t.v[o].charCodeAt(0);break}}else s=0;switch(0==s&&(s=i>n?-1:n>i?1:0),e){case"Lt":return 0>s;case"LtE":return 0>=s;case"Eq":return 0==s;case"NotEq":return 0!=s;case"Gt":return s>0;case"GtE":return s>=0;default:pi.asserts.fail()}}},di.builtin.str.prototype.$r=function(){var t="'";-1!==this.v.indexOf("'")&&-1===this.v.indexOf('"')&&(t='"');for(var e=this.v.length,n=t,i=0;e>i;++i){var r=this.v.charAt(i);r===t||"\\"===r?n+="\\"+r:"	"===r?n+="\\t":"\n"===r?n+="\\n":"\r"===r?n+="\\r":" ">r||r>=127?(r=r.charCodeAt(0).toString(16),2>r.length&&(r="0"+r),n+="\\x"+r):n+=r}return new di.builtin.str(n+t)},di.builtin.str.re_escape_=function(t){for(var e=[],n=/^[A-Za-z0-9]+$/,i=0;i<t.length;++i){var r=t.charAt(i);n.test(r)?e.push(r):"\\000"===r?e.push("\\000"):e.push("\\"+r)}return e.join("")},di.builtin.str.prototype.lower=new di.builtin.func(function(t){return di.builtin.pyCheckArgs("lower",arguments,1,1),new di.builtin.str(t.v.toLowerCase())}),di.builtin.str.prototype.upper=new di.builtin.func(function(t){return di.builtin.pyCheckArgs("upper",arguments,1,1),new di.builtin.str(t.v.toUpperCase())}),di.builtin.str.prototype.capitalize=new di.builtin.func(function(t){di.builtin.pyCheckArgs("capitalize",arguments,1,1);var e,n,i=t.v;if(0===i.length)return new di.builtin.str("");for(e=i.charAt(0).toUpperCase(),n=1;n<i.length;n++)e+=i.charAt(n).toLowerCase();return new di.builtin.str(e)}),di.builtin.str.prototype.join=new di.builtin.func(function(t,e){di.builtin.pyCheckArgs("join",arguments,2,2),di.builtin.pyCheckType("seq","iterable",di.builtin.checkIterable(e));for(var n=[],i=e.tp$iter(),r=i.tp$iternext();void 0!==r;r=i.tp$iternext()){if(r.constructor!==di.builtin.str)throw"TypeError: sequence item "+n.length+": expected string, "+typeof r+" found";n.push(r.v)}return new di.builtin.str(n.join(t.v))}),di.builtin.str.prototype.split=new di.builtin.func(function(t,e,n){if(di.builtin.pyCheckArgs("split",arguments,1,3),(void 0===e||e instanceof di.builtin.none)&&(e=null),null!==e&&!di.builtin.checkString(e))throw new di.builtin.TypeError("expected a string");if(null!==e&&""===e.v)throw new di.builtin.ValueError("empty separator");if(void 0!==n&&!di.builtin.checkInt(n))throw new di.builtin.TypeError("an integer is required");n=di.builtin.asnum$(n);var i=/[\s]+/g,r=t.v;null===e?r=r.trimLeft():(i=e.v.replace(/([.*+?=|\\\/()\[\]\{\}^$])/g,"\\$1"),i=RegExp(i,"g"));for(var s,o=[],a=0,l=0;null!=(s=i.exec(r))&&s.index!==i.lastIndex&&(o.push(new di.builtin.str(r.substring(a,s.index))),a=i.lastIndex,l+=1,!(n&&l>=n)););return r=r.substring(a),(null!==e||0<r.length)&&o.push(new di.builtin.str(r)),new di.builtin.list(o)}),di.builtin.str.prototype.strip=new di.builtin.func(function(t,e){if(di.builtin.pyCheckArgs("strip",arguments,1,2),void 0!==e&&!di.builtin.checkString(e))throw new di.builtin.TypeError("strip arg must be None or str");var n;return void 0===e?n=/^\s+|\s+$/g:(n=di.builtin.str.re_escape_(e.v),n=RegExp("^["+n+"]+|["+n+"]+$","g")),new di.builtin.str(t.v.replace(n,""))}),di.builtin.str.prototype.lstrip=new di.builtin.func(function(t,e){if(di.builtin.pyCheckArgs("lstrip",arguments,1,2),void 0!==e&&!di.builtin.checkString(e))throw new di.builtin.TypeError("lstrip arg must be None or str");var n;return void 0===e?n=/^\s+/g:(n=di.builtin.str.re_escape_(e.v),n=RegExp("^["+n+"]+","g")),new di.builtin.str(t.v.replace(n,""))}),di.builtin.str.prototype.rstrip=new di.builtin.func(function(t,e){if(di.builtin.pyCheckArgs("rstrip",arguments,1,2),void 0!==e&&!di.builtin.checkString(e))throw new di.builtin.TypeError("rstrip arg must be None or str");var n;return void 0===e?n=/\s+$/g:(n=di.builtin.str.re_escape_(e.v),n=RegExp("["+n+"]+$","g")),new di.builtin.str(t.v.replace(n,""))}),di.builtin.str.prototype.partition=new di.builtin.func(function(t,e){di.builtin.pyCheckArgs("partition",arguments,2,2),di.builtin.pyCheckType("sep","string",di.builtin.checkString(e));var n=new di.builtin.str(e),i=t.v.indexOf(n.v);return 0>i?new di.builtin.tuple([t,di.builtin.str.$emptystr,di.builtin.str.$emptystr]):new di.builtin.tuple([new di.builtin.str(t.v.substring(0,i)),n,new di.builtin.str(t.v.substring(i+n.v.length))])}),di.builtin.str.prototype.rpartition=new di.builtin.func(function(t,e){di.builtin.pyCheckArgs("rpartition",arguments,2,2),di.builtin.pyCheckType("sep","string",di.builtin.checkString(e));var n=new di.builtin.str(e),i=t.v.lastIndexOf(n.v);return 0>i?new di.builtin.tuple([di.builtin.str.$emptystr,di.builtin.str.$emptystr,t]):new di.builtin.tuple([new di.builtin.str(t.v.substring(0,i)),n,new di.builtin.str(t.v.substring(i+n.v.length))])}),di.builtin.str.prototype.count=new di.builtin.func(function(t,e,n,i){if(di.builtin.pyCheckArgs("count",arguments,2,4),!di.builtin.checkString(e))throw new di.builtin.TypeError("expected a character buffer object");if(void 0!==n&&!di.builtin.checkInt(n))throw new di.builtin.TypeError("slice indices must be integers or None or have an __index__ method");if(void 0!==i&&!di.builtin.checkInt(i))throw new di.builtin.TypeError("slice indices must be integers or None or have an __index__ method");void 0===n?n=0:(n=di.builtin.asnum$(n),n=n>=0?n:t.v.length+n),void 0===i?i=t.v.length:(i=di.builtin.asnum$(i),i=i>=0?i:t.v.length+i);var r=RegExp(e.v,"g");return(r=t.v.slice(n,i).match(r))?new di.builtin.nmber(r.length,di.builtin.nmber.int$):new di.builtin.nmber(0,di.builtin.nmber.int$)}),di.builtin.str.prototype.ljust=new di.builtin.func(function(t,e,n){if(di.builtin.pyCheckArgs("ljust",arguments,2,3),!di.builtin.checkInt(e))throw new di.builtin.TypeError("integer argument exepcted, got "+di.abstr.typeName(e));if(void 0!==n&&(!di.builtin.checkString(n)||1!==n.v.length))throw new di.builtin.TypeError("must be char, not "+di.abstr.typeName(n));if(n=void 0===n?" ":n.v,e=di.builtin.asnum$(e),t.v.length>=e)return t;var i=Array.prototype.join.call({length:Math.floor(e-t.v.length)+1},n);return new di.builtin.str(t.v+i)}),di.builtin.str.prototype.rjust=new di.builtin.func(function(t,e,n){if(di.builtin.pyCheckArgs("rjust",arguments,2,3),!di.builtin.checkInt(e))throw new di.builtin.TypeError("integer argument exepcted, got "+di.abstr.typeName(e));if(void 0!==n&&(!di.builtin.checkString(n)||1!==n.v.length))throw new di.builtin.TypeError("must be char, not "+di.abstr.typeName(n));if(n=void 0===n?" ":n.v,e=di.builtin.asnum$(e),t.v.length>=e)return t;var i=Array.prototype.join.call({length:Math.floor(e-t.v.length)+1},n);return new di.builtin.str(i+t.v)}),di.builtin.str.prototype.center=new di.builtin.func(function(t,e,n){if(di.builtin.pyCheckArgs("center",arguments,2,3),!di.builtin.checkInt(e))throw new di.builtin.TypeError("integer argument exepcted, got "+di.abstr.typeName(e));if(void 0!==n&&(!di.builtin.checkString(n)||1!==n.v.length))throw new di.builtin.TypeError("must be char, not "+di.abstr.typeName(n));if(n=void 0===n?" ":n.v,e=di.builtin.asnum$(e),t.v.length>=e)return t;var i=Array.prototype.join.call({length:Math.floor((e-t.v.length)/2)+1},n),i=i+t.v+i;return i.length<e&&(i+=n),new di.builtin.str(i)}),di.builtin.str.prototype.find=new di.builtin.func(function(t,e,n,i){if(di.builtin.pyCheckArgs("find",arguments,2,4),!di.builtin.checkString(e))throw new di.builtin.TypeError("expected a character buffer object");if(void 0!==n&&!di.builtin.checkInt(n))throw new di.builtin.TypeError("slice indices must be integers or None or have an __index__ method");if(void 0!==i&&!di.builtin.checkInt(i))throw new di.builtin.TypeError("slice indices must be integers or None or have an __index__ method");void 0===n?n=0:(n=di.builtin.asnum$(n),n=n>=0?n:t.v.length+n),void 0===i?i=t.v.length:(i=di.builtin.asnum$(i),i=i>=0?i:t.v.length+i);var r=t.v.indexOf(e.v,n);return new di.builtin.nmber(r>=n&&i>r?r:-1,di.builtin.nmber.int$)}),di.builtin.str.prototype.index=new di.builtin.func(function(t,e,n,i){di.builtin.pyCheckArgs("index",arguments,2,4);var r=di.misceval.callsim(t.find,t,e,n,i);if(-1===di.builtin.asnum$(r))throw new di.builtin.ValueError("substring not found");return r}),di.builtin.str.prototype.rfind=new di.builtin.func(function(t,e,n,i){if(di.builtin.pyCheckArgs("rfind",arguments,2,4),!di.builtin.checkString(e))throw new di.builtin.TypeError("expected a character buffer object");if(void 0!==n&&!di.builtin.checkInt(n))throw new di.builtin.TypeError("slice indices must be integers or None or have an __index__ method");if(void 0!==i&&!di.builtin.checkInt(i))throw new di.builtin.TypeError("slice indices must be integers or None or have an __index__ method");void 0===n?n=0:(n=di.builtin.asnum$(n),n=n>=0?n:t.v.length+n),void 0===i?i=t.v.length:(i=di.builtin.asnum$(i),i=i>=0?i:t.v.length+i);var r=t.v.lastIndexOf(e.v,i),r=r!==i?r:t.v.lastIndexOf(e.v,i-1);return new di.builtin.nmber(r>=n&&i>r?r:-1,di.builtin.nmber.int$)}),di.builtin.str.prototype.rindex=new di.builtin.func(function(t,e,n,i){di.builtin.pyCheckArgs("rindex",arguments,2,4);var r=di.misceval.callsim(t.rfind,t,e,n,i);if(-1===di.builtin.asnum$(r))throw new di.builtin.ValueError("substring not found");return r}),di.builtin.str.prototype.startswith=new di.builtin.func(function(t,e){return di.builtin.pyCheckArgs("startswith",arguments,2,2),di.builtin.pyCheckType("tgt","string",di.builtin.checkString(e)),di.builtin.bool(0==t.v.indexOf(e.v))}),di.builtin.str.prototype.endswith=new di.builtin.func(function(t,e){return di.builtin.pyCheckArgs("endswith",arguments,2,2),di.builtin.pyCheckType("tgt","string",di.builtin.checkString(e)),di.builtin.bool(-1!==t.v.indexOf(e.v,t.v.length-e.v.length))}),di.builtin.str.prototype.replace=new di.builtin.func(function(t,e,n,i){if(di.builtin.pyCheckArgs("replace",arguments,3,4),di.builtin.pyCheckType("oldS","string",di.builtin.checkString(e)),di.builtin.pyCheckType("newS","string",di.builtin.checkString(n)),void 0!==i&&!di.builtin.checkInt(i))throw new di.builtin.TypeError("integer argument expected, got "+di.abstr.typeName(i));i=di.builtin.asnum$(i);var r=RegExp(di.builtin.str.re_escape_(e.v),"g");if(void 0===i||0>i)return new di.builtin.str(t.v.replace(r,n.v));var s=0;return new di.builtin.str(t.v.replace(r,function(t){return s++,i>=s?n.v:t}))}),di.builtin.str.prototype.isdigit=new di.builtin.func(function(t){if(di.builtin.pyCheckArgs("isdigit",arguments,1,1),0===t.v.length)return di.builtin.bool(!1);var e;for(e=0;e<t.v.length;e++){var n=t.v.charAt(e);if("0">n||n>"9")return di.builtin.bool(!1)}return di.builtin.bool(!0)}),di.builtin.str.prototype.ob$type=di.builtin.type.makeIntoTypeObj("str",di.builtin.str),di.builtin.str.prototype.nb$remainder=function(t){t.constructor===di.builtin.tuple||void 0!==t.mp$subscript&&t.constructor!==di.builtin.str||(t=new di.builtin.tuple([t]));var e=0,n=this.v.replace(/%(\([a-zA-Z0-9]+\))?([#0 +\-]+)?(\*|[0-9]+)?(\.(\*|[0-9]+))?[hlL]?([diouxXeEfFgGcrs%])/g,function(n,i,r,s,o,a,l){s=di.builtin.asnum$(s),o=di.builtin.asnum$(o);var u;(void 0===i||""===i)&&(u=e++);var c=!1,f=!1,h=!1,p=!1,d=!1;if(r&&(-1!==r.indexOf("-")?f=!0:-1!==r.indexOf("0")&&(c=!0),-1!==r.indexOf("+")?p=!0:-1!==r.indexOf(" ")&&(h=!0),d=-1!==r.indexOf("#")),o&&(o=parseInt(o.substr(1),10)),r=function(t,e){e=di.builtin.asnum$(e);var n,i,r=!1;"number"==typeof t?(0>t&&(t=-t,r=!0),i=t.toString(e)):t instanceof di.builtin.nmber?(i=t.str$(e,!1),2<i.length&&".0"===i.substr(-2)&&(i=i.substr(0,i.length-2)),r=t.nb$isnegative()):t instanceof di.builtin.lng&&(i=t.str$(e,!1),r=t.nb$isnegative()),pi.asserts.assert(void 0!==i,"unhandled number format");var s=!1;if(o)for(n=i.length;o>n;++n)i="0"+i,s=!0;return n="",r?n="-":p?n="+"+n:h&&(n=" "+n),d&&(16===e?n+="0x":8!==e||s||"0"===i||(n+="0")),[n,i]},n=function(t){var e=t[0];t=t[1];var n;if(s)if(s=parseInt(s,10),n=t.length+e.length,c)for(;s>n;++n)t="0"+t;else if(f)for(;s>n;++n)t+=" ";else for(;s>n;++n)e=" "+e;return e+t},t.constructor===di.builtin.tuple)i=t.v[u];else{if(void 0===t.mp$subscript)throw new di.builtin.AttributeError(t.tp$name+" instance has no attribute 'mp$subscript'");i=i.substring(1,i.length-1),i=t.mp$subscript(new di.builtin.str(i))}switch(l){case"d":case"i":return n(r(i,10));case"o":return n(r(i,8));case"x":return n(r(i,16));case"X":return n(r(i,16)).toUpperCase();case"f":case"F":case"e":case"E":case"g":case"G":return i=di.builtin.asnum$(i),"string"==typeof i&&(i=Number(i)),1/0===i?"inf":-1/0===i?"-inf":isNaN(i)?"nan":(u=["toExponential","toFixed","toPrecision"]["efg".indexOf(l.toLowerCase())],(void 0===o||""===o)&&("e"===l||"E"===l?o=6:("f"===l||"F"===l)&&(o=7)),i=i[u](o),-1!=="EFG".indexOf(l)&&(i=i.toUpperCase()),n(["",i]));case"c":if("number"==typeof i)return String.fromCharCode(i);if(i instanceof di.builtin.nmber)return String.fromCharCode(i.v);if(i instanceof di.builtin.lng)return String.fromCharCode(i.str$(10,!1)[0]);if(i.constructor===di.builtin.str)return i.v.substr(0,1);throw new di.builtin.TypeError("an integer is required");case"r":return l=di.builtin.repr(i),o?l.v.substr(0,o):l.v;case"s":return l=new di.builtin.str(i),o?l.v.substr(0,o):l.v;case"%":return"%"}});return new di.builtin.str(n)},di.builtin.tuple=function(t){if(!(this instanceof di.builtin.tuple))return new di.builtin.tuple(t);if(void 0===t&&(t=[]),"[object Array]"===Object.prototype.toString.apply(t))this.v=t;else{if(!t.tp$iter)throw new di.builtin.ValueError("expecting Array or iterable");this.v=[],t=t.tp$iter();for(var e=t.tp$iternext();void 0!==e;e=t.tp$iternext())this.v.push(e)}return this.__class__=di.builtin.tuple,this.v=this.v,this},di.builtin.tuple.prototype.tp$name="tuple",di.builtin.tuple.prototype.$r=function(){if(0===this.v.length)return new di.builtin.str("()");for(var t=[],e=0;e<this.v.length;++e)t[e]=di.misceval.objectRepr(this.v[e]).v;return t=t.join(", "),1===this.v.length&&(t+=","),new di.builtin.str("("+t+")")},di.builtin.tuple.prototype.mp$subscript=function(t){if(di.misceval.isIndex(t)){var e=di.misceval.asIndex(t);if(void 0!==e){if(0>e&&(e=this.v.length+e),0>e||e>=this.v.length)throw new di.builtin.IndexError("tuple index out of range");
return this.v[e]}}else if(t instanceof di.builtin.slice){var n=[];return t.sssiter$(this,function(t,e){n.push(e.v[t])}),new di.builtin.tuple(n)}throw new di.builtin.TypeError("tuple indices must be integers, not "+di.abstr.typeName(t))},di.builtin.tuple.prototype.tp$hash=function(){for(var t=1000003,e=3430008,n=this.v.length,i=0;n>i;++i){var r=di.builtin.hash(this.v[i]);if(-1===r)return-1;e=(e^r)*t,t+=82520+n+n}return e+=97531,-1===e&&(e=-2),e},di.builtin.tuple.prototype.sq$repeat=function(t){t=di.builtin.asnum$(t);for(var e=[],n=0;t>n;++n)for(var i=0;i<this.v.length;++i)e.push(this.v[i]);return new di.builtin.tuple(e)},di.builtin.tuple.prototype.nb$multiply=di.builtin.tuple.prototype.sq$repeat,di.builtin.tuple.prototype.nb$inplace_multiply=di.builtin.tuple.prototype.sq$repeat,di.builtin.tuple.prototype.ob$type=di.builtin.type.makeIntoTypeObj("tuple",di.builtin.tuple),di.builtin.tuple.prototype.tp$iter=function(){var t={tp$iter:function(){return t},$obj:this,$index:0,tp$iternext:function(){return t.$index>=t.$obj.v.length?void 0:t.$obj.v[t.$index++]}};return t},di.builtin.tuple.prototype.__iter__=new di.builtin.func(function(t){return di.builtin.pyCheckArgs("__iter__",arguments,1,1),t.tp$iter()}),di.builtin.tuple.prototype.tp$getattr=di.builtin.object.prototype.GenericGetAttr,di.builtin.tuple.prototype.tp$richcompare=function(t,e){if(!t.__class__||t.__class__!=di.builtin.tuple)return"Eq"===e?!1:"NotEq"===e?!0:!1;var n=this.v;t=t.v;var i,r=n.length,s=t.length;for(i=0;r>i&&s>i&&di.misceval.richCompareBool(n[i],t[i],"Eq");++i);if(i>=r||i>=s)switch(e){case"Lt":return s>r;case"LtE":return s>=r;case"Eq":return r===s;case"NotEq":return r!==s;case"Gt":return r>s;case"GtE":return r>=s;default:pi.asserts.fail()}return"Eq"===e?!1:"NotEq"===e?!0:di.misceval.richCompareBool(n[i],t[i],e)},di.builtin.tuple.prototype.sq$concat=function(t){return new di.builtin.tuple(this.v.concat(t.v))},di.builtin.tuple.prototype.nb$add=di.builtin.tuple.prototype.sq$concat,di.builtin.tuple.prototype.nb$inplace_add=di.builtin.tuple.prototype.sq$concat,di.builtin.tuple.prototype.sq$length=function(){return this.v.length},di.builtin.tuple.prototype.index=new di.builtin.func(function(t,e){for(var n=t.v.length,i=t.v,r=0;n>r;++r)if(di.misceval.richCompareBool(i[r],e,"Eq"))return di.builtin.assk$(r,di.builtin.nmber.int$);throw new di.builtin.ValueError("tuple.index(x): x not in tuple")}),di.builtin.tuple.prototype.count=new di.builtin.func(function(t,e){for(var n=t.v.length,i=t.v,r=0,s=0;n>s;++s)di.misceval.richCompareBool(i[s],e,"Eq")&&(r+=1);return new di.builtin.nmber(r,di.builtin.nmber.int$)}),pi.exportSymbol("Sk.builtin.tuple",di.builtin.tuple),di.builtin.dict=function(t){if(!(this instanceof di.builtin.dict))return new di.builtin.dict(t);if(void 0===t&&(t=[]),this.size=0,"[object Array]"===Object.prototype.toString.apply(t))for(var e=0;e<t.length;e+=2)this.mp$ass_subscript(t[e],t[e+1]);else if(t instanceof di.builtin.dict)for(var n=t.tp$iter(),e=n.tp$iternext();void 0!==e;e=n.tp$iternext()){var i=t.mp$subscript(e);void 0===i&&(i=null),this.mp$ass_subscript(e,i)}else{if(!t.tp$iter)throw new di.builtin.TypeError("object is not iterable");for(n=t.tp$iter(),e=n.tp$iternext();void 0!==e;e=n.tp$iternext()){if(!e.mp$subscript)throw new di.builtin.TypeError("element "+this.size+" is not a sequence");this.mp$ass_subscript(e.mp$subscript(0),e.mp$subscript(1))}}return this.__class__=di.builtin.dict,this},di.builtin.dict.prototype.ob$type=di.builtin.type.makeIntoTypeObj("dict",di.builtin.dict);var Ii=di.builtin.hash;di.builtin.dict.prototype.key$lookup=function(t,e){var n,i,r;for(r=0;r<t.items.length;r++)if(n=t.items[r],i=di.misceval.richCompareBool(n.lhs,e,"Eq"))return n;return null},di.builtin.dict.prototype.key$pop=function(t,e){var n,i,r;for(r=0;r<t.items.length;r++)if(n=t.items[r],i=di.misceval.richCompareBool(n.lhs,e,"Eq"))return t.items.splice(r,1),this.size-=1,n},di.builtin.dict.prototype.mp$lookup=function(t){var e=this[Ii(t)];return void 0!==e&&(t=this.key$lookup(e,t))?t.rhs:void 0},di.builtin.dict.prototype.mp$subscript=function(t){var e=this.mp$lookup(t);if(void 0!==e)return e;throw t=new di.builtin.str(t),new di.builtin.KeyError(t.v)},di.builtin.dict.prototype.sq$contains=function(t){return void 0!==this.mp$lookup(t)},di.builtin.dict.prototype.mp$ass_subscript=function(t,e){var n=Ii(t),i=this[n];void 0===i?(i={$hash:n,items:[{lhs:t,rhs:e}]},this[n]=i,this.size+=1):(n=this.key$lookup(i,t))?n.rhs=e:(i.items.push({lhs:t,rhs:e}),this.size+=1)},di.builtin.dict.prototype.mp$del_subscript=function(t){var e=this[Ii(t)];if(void 0===e||(e=this.key$pop(e,t),void 0===e))throw t=new di.builtin.str(t),new di.builtin.KeyError(t.v)},di.builtin.dict.prototype.tp$iter=function(){var t,e=[];for(t in this)if(this.hasOwnProperty(t)){var n=this[t];if(n&&void 0!==n.$hash)for(var i=0;i<n.items.length;i++)e.push(n.items[i].lhs)}var r={tp$iter:function(){return r},$obj:this,$index:0,$keys:e,tp$iternext:function(){return r.$index>=r.$keys.length?void 0:r.$keys[r.$index++]}};return r},di.builtin.dict.prototype.__iter__=new di.builtin.func(function(t){return di.builtin.pyCheckArgs("__iter__",arguments,1,1),t.tp$iter()}),di.builtin.dict.prototype.$r=function(){for(var t=[],e=this.tp$iter(),n=e.tp$iternext();void 0!==n;n=e.tp$iternext()){var i=this.mp$subscript(n);void 0===i&&(i=null),t.push(di.misceval.objectRepr(n).v+": "+di.misceval.objectRepr(i).v)}return new di.builtin.str("{"+t.join(", ")+"}")},di.builtin.dict.prototype.mp$length=function(){return this.size},di.builtin.dict.prototype.tp$getattr=di.builtin.object.prototype.GenericGetAttr,di.builtin.dict.prototype.tp$hash=di.builtin.object.prototype.HashNotImplemented,di.builtin.dict.prototype.tp$richcompare=function(t,e){if(this===t&&di.misceval.opAllowsEquality(e))return!0;switch(e){case"Lt":return;case"LtE":return;case"Eq":break;case"NotEq":break;case"Gt":return;case"GtE":return;default:pi.asserts.fail()}if(!(t instanceof di.builtin.dict)||this.size!==t.size)return"Eq"===e?!1:!0;for(var n=this.tp$iter(),i=n.tp$iternext();void 0!==i;i=n.tp$iternext()){var r=this.mp$subscript(i),i=t.mp$subscript(i);if(!di.misceval.richCompareBool(r,i,"Eq"))return"Eq"===e?!1:!0}return"Eq"===e?!0:!1},di.builtin.dict.prototype.get=new di.builtin.func(function(t,e,n){return void 0===n&&(n=null),t=t.mp$lookup(e),void 0===t&&(t=n),t}),di.builtin.dict.prototype.has_key=new di.builtin.func(function(t,e){return di.builtin.bool(t.sq$contains(e))}),di.builtin.dict.prototype.items=new di.builtin.func(function(t){for(var e=[],n=t.tp$iter(),i=n.tp$iternext();void 0!==i;i=n.tp$iternext()){var r=t.mp$subscript(i);void 0===r&&(r=null),e.push(new di.builtin.tuple([i,r]))}return new di.builtin.list(e)}),di.builtin.dict.prototype.keys=new di.builtin.func(function(t){var e=[];t=t.tp$iter();for(var n=t.tp$iternext();void 0!==n;n=t.tp$iternext())e.push(n);return new di.builtin.list(e)}),di.builtin.dict.prototype.values=new di.builtin.func(function(t){for(var e=[],n=t.tp$iter(),i=n.tp$iternext();void 0!==i;i=n.tp$iternext())i=t.mp$subscript(i),void 0===i&&(i=null),e.push(i);return new di.builtin.list(e)}),di.builtin.dict.prototype.tp$name="dict",pi.exportSymbol("Sk.builtin.dict",di.builtin.dict),di.builtin.biginteger=function(t,e,n){null!=t&&("number"==typeof t?this.fromNumber(t,e,n):null==e&&"string"!=typeof t?this.fromString(t,256):this.fromString(t,e))},di.builtin.biginteger.canary=0xdeadbeefcafe,di.builtin.biginteger.j_lm=15715070==(16777215&di.builtin.biginteger.canary),di.builtin.biginteger.nbi=function(){return new di.builtin.biginteger(null)},di.builtin.biginteger.prototype.am1=function(t,e,n,i,r,s){for(;0<=--s;){var o=e*this[t++]+n[i]+r;r=Math.floor(o/67108864),n[i++]=67108863&o}return r},di.builtin.biginteger.prototype.am2=function(t,e,n,i,r,s){var o=32767&e;for(e>>=15;0<=--s;){var a=32767&this[t],l=this[t++]>>15,u=e*a+l*o,a=o*a+((32767&u)<<15)+n[i]+(1073741823&r);r=(a>>>30)+(u>>>15)+e*l+(r>>>30),n[i++]=1073741823&a}return r},di.builtin.biginteger.prototype.am3=function(t,e,n,i,r,s){var o=16383&e;for(e>>=14;0<=--s;){var a=16383&this[t],l=this[t++]>>14,u=e*a+l*o,a=o*a+((16383&u)<<14)+n[i]+r;r=(a>>28)+(u>>14)+e*l,n[i++]=268435455&a}return r},di.builtin.biginteger.prototype.am=di.builtin.biginteger.prototype.am3,di.builtin.biginteger.dbits=28,di.builtin.biginteger.prototype.DB=di.builtin.biginteger.dbits,di.builtin.biginteger.prototype.DM=(1<<di.builtin.biginteger.dbits)-1,di.builtin.biginteger.prototype.DV=1<<di.builtin.biginteger.dbits,di.builtin.biginteger.BI_FP=52,di.builtin.biginteger.prototype.FV=Math.pow(2,di.builtin.biginteger.BI_FP),di.builtin.biginteger.prototype.F1=di.builtin.biginteger.BI_FP-di.builtin.biginteger.dbits,di.builtin.biginteger.prototype.F2=2*di.builtin.biginteger.dbits-di.builtin.biginteger.BI_FP,di.builtin.biginteger.BI_RM="0123456789abcdefghijklmnopqrstuvwxyz",di.builtin.biginteger.BI_RC=[];var Ri,Di;for(Ri=48,Di=0;9>=Di;++Di)di.builtin.biginteger.BI_RC[Ri++]=Di;for(Ri=97,Di=10;36>Di;++Di)di.builtin.biginteger.BI_RC[Ri++]=Di;for(Ri=65,Di=10;36>Di;++Di)di.builtin.biginteger.BI_RC[Ri++]=Di;di.builtin.biginteger.int2char=function(t){return di.builtin.biginteger.BI_RM.charAt(t)},di.builtin.biginteger.intAt=function(t,e){var n=di.builtin.biginteger.BI_RC[t.charCodeAt(e)];return null==n?-1:n},di.builtin.biginteger.prototype.bnpCopyTo=function(t){for(var e=this.t-1;e>=0;--e)t[e]=this[e];t.t=this.t,t.s=this.s},di.builtin.biginteger.prototype.bnpFromInt=function(t){this.t=1,this.s=0>t?-1:0,t>0?this[0]=t:-1>t?this[0]=t+this.DV:this.t=0},di.builtin.biginteger.nbv=function(t){var e=new di.builtin.biginteger(null);return e.bnpFromInt(t),e},di.builtin.biginteger.prototype.bnpFromString=function(t,e){var n;if(16==e)n=4;else if(8==e)n=3;else if(256==e)n=8;else if(2==e)n=1;else if(32==e)n=5;else{if(4!=e)return this.fromRadix(t,e),void 0;n=2}this.s=this.t=0;for(var i=t.length,r=!1,s=0;0<=--i;){var o=8==n?255&t[i]:di.builtin.biginteger.intAt(t,i);0>o?"-"==t.charAt(i)&&(r=!0):(r=!1,0==s?this[this.t++]=o:s+n>this.DB?(this[this.t-1]|=(o&(1<<this.DB-s)-1)<<s,this[this.t++]=o>>this.DB-s):this[this.t-1]|=o<<s,s+=n,s>=this.DB&&(s-=this.DB))}8==n&&0!=(128&t[0])&&(this.s=-1,s>0&&(this[this.t-1]|=(1<<this.DB-s)-1<<s)),this.clamp(),r&&di.builtin.biginteger.ZERO.subTo(this,this)},di.builtin.biginteger.prototype.bnpClamp=function(){for(var t=this.s&this.DM;0<this.t&&this[this.t-1]==t;)--this.t},di.builtin.biginteger.prototype.bnToString=function(t){if(0>this.s)return"-"+this.negate().toString(t);if(16==t)t=4;else if(8==t)t=3;else if(2==t)t=1;else if(32==t)t=5;else{if(4!=t)return this.toRadix(t);t=2}var e,n=(1<<t)-1,i=!1,r="",s=this.t,o=this.DB-s*this.DB%t;if(0<s--)for(o<this.DB&&0<(e=this[s]>>o)&&(i=!0,r=di.builtin.biginteger.int2char(e));s>=0;)t>o?(e=(this[s]&(1<<o)-1)<<t-o,e|=this[--s]>>(o+=this.DB-t)):(e=this[s]>>(o-=t)&n,0>=o&&(o+=this.DB,--s)),e>0&&(i=!0),i&&(r+=di.builtin.biginteger.int2char(e));return i?r:"0"},di.builtin.biginteger.prototype.bnNegate=function(){var t=di.builtin.biginteger.nbi();return di.builtin.biginteger.ZERO.subTo(this,t),t},di.builtin.biginteger.prototype.bnAbs=function(){return 0>this.s?this.negate():this},di.builtin.biginteger.prototype.bnCompareTo=function(t){var e=this.s-t.s;if(0!=e)return e;var n=this.t,e=n-t.t;if(0!=e)return 0>this.s?-e:e;for(;0<=--n;)if(0!=(e=this[n]-t[n]))return e;return 0},di.builtin.biginteger.nbits=function(t){var e,n=1;return 0!=(e=t>>>16)&&(t=e,n+=16),0!=(e=t>>8)&&(t=e,n+=8),0!=(e=t>>4)&&(t=e,n+=4),0!=(e=t>>2)&&(t=e,n+=2),0!=t>>1&&(n+=1),n},di.builtin.biginteger.prototype.bnBitLength=function(){return 0>=this.t?0:this.DB*(this.t-1)+di.builtin.biginteger.nbits(this[this.t-1]^this.s&this.DM)},di.builtin.biginteger.prototype.bnpDLShiftTo=function(t,e){var n;for(n=this.t-1;n>=0;--n)e[n+t]=this[n];for(n=t-1;n>=0;--n)e[n]=0;e.t=this.t+t,e.s=this.s},di.builtin.biginteger.prototype.bnpDRShiftTo=function(t,e){for(var n=t;n<this.t;++n)e[n-t]=this[n];e.t=Math.max(this.t-t,0),e.s=this.s},di.builtin.biginteger.prototype.bnpLShiftTo=function(t,e){var n,i=t%this.DB,r=this.DB-i,s=(1<<r)-1,o=Math.floor(t/this.DB),a=this.s<<i&this.DM;for(n=this.t-1;n>=0;--n)e[n+o+1]=this[n]>>r|a,a=(this[n]&s)<<i;for(n=o-1;n>=0;--n)e[n]=0;e[o]=a,e.t=this.t+o+1,e.s=this.s,e.clamp()},di.builtin.biginteger.prototype.bnpRShiftTo=function(t,e){e.s=this.s;var n=Math.floor(t/this.DB);if(n>=this.t)e.t=0;else{var i=t%this.DB,r=this.DB-i,s=(1<<i)-1;e[0]=this[n]>>i;for(var o=n+1;o<this.t;++o)e[o-n-1]|=(this[o]&s)<<r,e[o-n]=this[o]>>i;i>0&&(e[this.t-n-1]|=(this.s&s)<<r),e.t=this.t-n,e.clamp()}},di.builtin.biginteger.prototype.bnpSubTo=function(t,e){for(var n=0,i=0,r=Math.min(t.t,this.t);r>n;)i+=this[n]-t[n],e[n++]=i&this.DM,i>>=this.DB;if(t.t<this.t){for(i-=t.s;n<this.t;)i+=this[n],e[n++]=i&this.DM,i>>=this.DB;i+=this.s}else{for(i+=this.s;n<t.t;)i-=t[n],e[n++]=i&this.DM,i>>=this.DB;i-=t.s}e.s=0>i?-1:0,-1>i?e[n++]=this.DV+i:i>0&&(e[n++]=i),e.t=n,e.clamp()},di.builtin.biginteger.prototype.bnpMultiplyTo=function(t,e){var n=this.abs(),i=t.abs(),r=n.t;for(e.t=r+i.t;0<=--r;)e[r]=0;for(r=0;r<i.t;++r)e[r+n.t]=n.am(0,i[r],e,r,0,n.t);e.s=0,e.clamp(),this.s!=t.s&&di.builtin.biginteger.ZERO.subTo(e,e)},di.builtin.biginteger.prototype.bnpSquareTo=function(t){for(var e=this.abs(),n=t.t=2*e.t;0<=--n;)t[n]=0;for(n=0;n<e.t-1;++n){var i=e.am(n,e[n],t,2*n,0,1);(t[n+e.t]+=e.am(n+1,2*e[n],t,2*n+1,i,e.t-n-1))>=e.DV&&(t[n+e.t]-=e.DV,t[n+e.t+1]=1)}0<t.t&&(t[t.t-1]+=e.am(n,e[n],t,2*n,0,1)),t.s=0,t.clamp()},di.builtin.biginteger.prototype.bnpDivRemTo=function(t,e,n){var i=t.abs();if(!(0>=i.t)){var r=this.abs();if(r.t<i.t)null!=e&&e.fromInt(0),null!=n&&this.copyTo(n);else{null==n&&(n=di.builtin.biginteger.nbi());var s=di.builtin.biginteger.nbi(),o=this.s;t=t.s;var a=this.DB-di.builtin.biginteger.nbits(i[i.t-1]);if(a>0?(i.lShiftTo(a,s),r.lShiftTo(a,n)):(i.copyTo(s),r.copyTo(n)),i=s.t,r=s[i-1],0!=r){var l=r*(1<<this.F1)+(i>1?s[i-2]>>this.F2:0),u=this.FV/l,l=(1<<this.F1)/l,c=1<<this.F2,f=n.t,h=f-i,p=null==e?di.builtin.biginteger.nbi():e;for(s.dlShiftTo(h,p),0<=n.compareTo(p)&&(n[n.t++]=1,n.subTo(p,n)),di.builtin.biginteger.ONE.dlShiftTo(i,p),p.subTo(s,s);s.t<i;)s[s.t++]=0;for(;0<=--h;){var d=n[--f]==r?this.DM:Math.floor(n[f]*u+(n[f-1]+c)*l);if((n[f]+=s.am(0,d,n,h,0,i))<d)for(s.dlShiftTo(h,p),n.subTo(p,n);n[f]<--d;)n.subTo(p,n)}null!=e&&(n.drShiftTo(i,e),o!=t&&di.builtin.biginteger.ZERO.subTo(e,e)),n.t=i,n.clamp(),a>0&&n.rShiftTo(a,n),0>o&&di.builtin.biginteger.ZERO.subTo(n,n)}}}},di.builtin.biginteger.prototype.bnMod=function(t){var e=di.builtin.biginteger.nbi();return this.abs().divRemTo(t,null,e),0>this.s&&0<e.compareTo(di.builtin.biginteger.ZERO)&&t.subTo(e,e),e},di.builtin.biginteger.Classic=function(t){this.m=t},di.builtin.biginteger.prototype.cConvert=function(t){return 0>t.s||0<=t.compareTo(this.m)?t.mod(this.m):t},di.builtin.biginteger.prototype.cRevert=function(t){return t},di.builtin.biginteger.prototype.cReduce=function(t){t.divRemTo(this.m,null,t)},di.builtin.biginteger.prototype.cMulTo=function(t,e,n){t.multiplyTo(e,n),this.reduce(n)},di.builtin.biginteger.prototype.cSqrTo=function(t,e){t.squareTo(e),this.reduce(e)},di.builtin.biginteger.Classic.prototype.convert=di.builtin.biginteger.prototype.cConvert,di.builtin.biginteger.Classic.prototype.revert=di.builtin.biginteger.prototype.cRevert,di.builtin.biginteger.Classic.prototype.reduce=di.builtin.biginteger.prototype.cReduce,di.builtin.biginteger.Classic.prototype.mulTo=di.builtin.biginteger.prototype.cMulTo,di.builtin.biginteger.Classic.prototype.sqrTo=di.builtin.biginteger.prototype.cSqrTo,di.builtin.biginteger.prototype.bnpInvDigit=function(){if(1>this.t)return 0;var t=this[0];if(0==(1&t))return 0;var e=3&t,e=e*(2-(15&t)*e)&15,e=e*(2-(255&t)*e)&255,e=e*(2-((65535&t)*e&65535))&65535,e=e*(2-t*e%this.DV)%this.DV;return e>0?this.DV-e:-e},di.builtin.biginteger.Montgomery=function(t){this.m=t,this.mp=t.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<t.DB-15)-1,this.mt2=2*t.t},di.builtin.biginteger.prototype.montConvert=function(t){var e=di.builtin.biginteger.nbi();return t.abs().dlShiftTo(this.m.t,e),e.divRemTo(this.m,null,e),0>t.s&&0<e.compareTo(di.builtin.biginteger.ZERO)&&this.m.subTo(e,e),e},di.builtin.biginteger.prototype.montRevert=function(t){var e=di.builtin.biginteger.nbi();return t.copyTo(e),this.reduce(e),e},di.builtin.biginteger.prototype.montReduce=function(t){for(;t.t<=this.mt2;)t[t.t++]=0;for(var e=0;e<this.m.t;++e){var n=32767&t[e],i=n*this.mpl+((n*this.mph+(t[e]>>15)*this.mpl&this.um)<<15)&t.DM,n=e+this.m.t;for(t[n]+=this.m.am(0,i,t,e,0,this.m.t);t[n]>=t.DV;)t[n]-=t.DV,t[++n]++}t.clamp(),t.drShiftTo(this.m.t,t),0<=t.compareTo(this.m)&&t.subTo(this.m,t)},di.builtin.biginteger.prototype.montSqrTo=function(t,e){t.squareTo(e),this.reduce(e)},di.builtin.biginteger.prototype.montMulTo=function(t,e,n){t.multiplyTo(e,n),this.reduce(n)},di.builtin.biginteger.Montgomery.prototype.convert=di.builtin.biginteger.prototype.montConvert,di.builtin.biginteger.Montgomery.prototype.revert=di.builtin.biginteger.prototype.montRevert,di.builtin.biginteger.Montgomery.prototype.reduce=di.builtin.biginteger.prototype.montReduce,di.builtin.biginteger.Montgomery.prototype.mulTo=di.builtin.biginteger.prototype.montMulTo,di.builtin.biginteger.Montgomery.prototype.sqrTo=di.builtin.biginteger.prototype.montSqrTo,di.builtin.biginteger.prototype.bnpIsEven=function(){return 0==(0<this.t?1&this[0]:this.s)},di.builtin.biginteger.prototype.bnpExp=function(t,e){if(t>4294967295||1>t)return di.builtin.biginteger.ONE;var n=di.builtin.biginteger.nbi(),i=di.builtin.biginteger.nbi(),r=e.convert(this),s=di.builtin.biginteger.nbits(t)-1;for(r.copyTo(n);0<=--s;)if(e.sqrTo(n,i),(t&1<<s)>0)e.mulTo(i,r,n);else var o=n,n=i,i=o;return e.revert(n)},di.builtin.biginteger.prototype.bnModPowInt=function(t,e){var n;return n=256>t||e.isEven()?new di.builtin.biginteger.Classic(e):new di.builtin.biginteger.Montgomery(e),this.exp(t,n)},di.builtin.biginteger.prototype.copyTo=di.builtin.biginteger.prototype.bnpCopyTo,di.builtin.biginteger.prototype.fromInt=di.builtin.biginteger.prototype.bnpFromInt,di.builtin.biginteger.prototype.fromString=di.builtin.biginteger.prototype.bnpFromString,di.builtin.biginteger.prototype.clamp=di.builtin.biginteger.prototype.bnpClamp,di.builtin.biginteger.prototype.dlShiftTo=di.builtin.biginteger.prototype.bnpDLShiftTo,di.builtin.biginteger.prototype.drShiftTo=di.builtin.biginteger.prototype.bnpDRShiftTo,di.builtin.biginteger.prototype.lShiftTo=di.builtin.biginteger.prototype.bnpLShiftTo,di.builtin.biginteger.prototype.rShiftTo=di.builtin.biginteger.prototype.bnpRShiftTo,di.builtin.biginteger.prototype.subTo=di.builtin.biginteger.prototype.bnpSubTo,di.builtin.biginteger.prototype.multiplyTo=di.builtin.biginteger.prototype.bnpMultiplyTo,di.builtin.biginteger.prototype.squareTo=di.builtin.biginteger.prototype.bnpSquareTo,di.builtin.biginteger.prototype.divRemTo=di.builtin.biginteger.prototype.bnpDivRemTo,di.builtin.biginteger.prototype.invDigit=di.builtin.biginteger.prototype.bnpInvDigit,di.builtin.biginteger.prototype.isEven=di.builtin.biginteger.prototype.bnpIsEven,di.builtin.biginteger.prototype.exp=di.builtin.biginteger.prototype.bnpExp,di.builtin.biginteger.prototype.toString=di.builtin.biginteger.prototype.bnToString,di.builtin.biginteger.prototype.negate=di.builtin.biginteger.prototype.bnNegate,di.builtin.biginteger.prototype.abs=di.builtin.biginteger.prototype.bnAbs,di.builtin.biginteger.prototype.compareTo=di.builtin.biginteger.prototype.bnCompareTo,di.builtin.biginteger.prototype.bitLength=di.builtin.biginteger.prototype.bnBitLength,di.builtin.biginteger.prototype.mod=di.builtin.biginteger.prototype.bnMod,di.builtin.biginteger.prototype.modPowInt=di.builtin.biginteger.prototype.bnModPowInt,di.builtin.biginteger.ZERO=di.builtin.biginteger.nbv(0),di.builtin.biginteger.ONE=di.builtin.biginteger.nbv(1),di.builtin.biginteger.prototype.bnClone=function(){var t=di.builtin.biginteger.nbi();return this.copyTo(t),t},di.builtin.biginteger.prototype.bnIntValue=function(){if(0>this.s){if(1==this.t)return this[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this[0];if(0==this.t)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]},di.builtin.biginteger.prototype.bnByteValue=function(){return 0==this.t?this.s:this[0]<<24>>24},di.builtin.biginteger.prototype.bnShortValue=function(){return 0==this.t?this.s:this[0]<<16>>16},di.builtin.biginteger.prototype.bnpChunkSize=function(t){return Math.floor(Math.LN2*this.DB/Math.log(t))},di.builtin.biginteger.prototype.bnSigNum=function(){return 0>this.s?-1:0>=this.t||1==this.t&&0>=this[0]?0:1},di.builtin.biginteger.prototype.bnpToRadix=function(t){if(null==t&&(t=10),0==this.signum()||2>t||t>36)return"0";var e=this.chunkSize(t),e=Math.pow(t,e),n=di.builtin.biginteger.nbv(e),i=di.builtin.biginteger.nbi(),r=di.builtin.biginteger.nbi(),s="";for(this.divRemTo(n,i,r);0<i.signum();)s=(e+r.intValue()).toString(t).substr(1)+s,i.divRemTo(n,i,r);return r.intValue().toString(t)+s},di.builtin.biginteger.prototype.bnpFromRadix=function(t,e){this.fromInt(0),null==e&&(e=10);for(var n=this.chunkSize(e),i=Math.pow(e,n),r=!1,s=0,o=0,a=0;a<t.length;++a){var l=di.builtin.biginteger.intAt(t,a);if(0>l){if("-"==t.charAt(a)&&0==this.signum()&&(r=!0),"."==t.charAt(a))break}else o=e*o+l,++s>=n&&(this.dMultiply(i),this.dAddOffset(o,0),o=s=0)}s>0&&(this.dMultiply(Math.pow(e,s)),this.dAddOffset(o,0)),r&&di.builtin.biginteger.ZERO.subTo(this,this)},di.builtin.biginteger.prototype.bnpFromNumber=function(t,e,n){if("number"==typeof e)if(2>t)this.fromInt(1);else for(this.fromNumber(t,n),this.testBit(t-1)||this.bitwiseTo(di.builtin.biginteger.ONE.shiftLeft(t-1),di.builtin.biginteger.op_or,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(e);)this.dAddOffset(2,0),this.bitLength()>t&&this.subTo(di.builtin.biginteger.ONE.shiftLeft(t-1),this);this.fromString(t+"")},di.builtin.biginteger.prototype.bnToByteArray=function(){var t=this.t,e=[];e[0]=this.s;var n,i=this.DB-t*this.DB%8,r=0;if(0<t--)for(i<this.DB&&(n=this[t]>>i)!=(this.s&this.DM)>>i&&(e[r++]=n|this.s<<this.DB-i);t>=0;)8>i?(n=(this[t]&(1<<i)-1)<<8-i,n|=this[--t]>>(i+=this.DB-8)):(n=this[t]>>(i-=8)&255,0>=i&&(i+=this.DB,--t)),0!=(128&n)&&(n|=-256),0==r&&(128&this.s)!=(128&n)&&++r,(r>0||n!=this.s)&&(e[r++]=n);return e},di.builtin.biginteger.prototype.bnEquals=function(t){return 0==this.compareTo(t)},di.builtin.biginteger.prototype.bnMin=function(t){return 0>this.compareTo(t)?this:t},di.builtin.biginteger.prototype.bnMax=function(t){return 0<this.compareTo(t)?this:t},di.builtin.biginteger.prototype.bnpBitwiseTo=function(t,e,n){var i,r,s=Math.min(t.t,this.t);for(i=0;s>i;++i)n[i]=e(this[i],t[i]);if(t.t<this.t){for(r=t.s&this.DM,i=s;i<this.t;++i)n[i]=e(this[i],r);n.t=this.t}else{for(r=this.s&this.DM,i=s;i<t.t;++i)n[i]=e(r,t[i]);n.t=t.t}n.s=e(this.s,t.s),n.clamp()},di.builtin.biginteger.op_and=function(t,e){return t&e},di.builtin.biginteger.prototype.bnAnd=function(t){var e=di.builtin.biginteger.nbi();return this.bitwiseTo(t,di.builtin.biginteger.op_and,e),e},di.builtin.biginteger.op_or=function(t,e){return t|e},di.builtin.biginteger.prototype.bnOr=function(t){var e=di.builtin.biginteger.nbi();return this.bitwiseTo(t,di.builtin.biginteger.op_or,e),e},di.builtin.biginteger.op_xor=function(t,e){return t^e},di.builtin.biginteger.prototype.bnXor=function(t){var e=di.builtin.biginteger.nbi();return this.bitwiseTo(t,di.builtin.biginteger.op_xor,e),e},di.builtin.biginteger.op_andnot=function(t,e){return t&~e},di.builtin.biginteger.prototype.bnAndNot=function(t){var e=di.builtin.biginteger.nbi();return this.bitwiseTo(t,di.builtin.biginteger.op_andnot,e),e},di.builtin.biginteger.prototype.bnNot=function(){for(var t=di.builtin.biginteger.nbi(),e=0;e<this.t;++e)t[e]=this.DM&~this[e];return t.t=this.t,t.s=~this.s,t},di.builtin.biginteger.prototype.bnShiftLeft=function(t){var e=di.builtin.biginteger.nbi();return 0>t?this.rShiftTo(-t,e):this.lShiftTo(t,e),e},di.builtin.biginteger.prototype.bnShiftRight=function(t){var e=di.builtin.biginteger.nbi();return 0>t?this.lShiftTo(-t,e):this.rShiftTo(t,e),e},di.builtin.biginteger.lbit=function(t){if(0==t)return-1;var e=0;return 0==(65535&t)&&(t>>=16,e+=16),0==(255&t)&&(t>>=8,e+=8),0==(15&t)&&(t>>=4,e+=4),0==(3&t)&&(t>>=2,e+=2),0==(1&t)&&++e,e},di.builtin.biginteger.prototype.bnGetLowestSetBit=function(){for(var t=0;t<this.t;++t)if(0!=this[t])return t*this.DB+di.builtin.biginteger.lbit(this[t]);return 0>this.s?this.t*this.DB:-1},di.builtin.biginteger.cbit=function(t){for(var e=0;0!=t;)t&=t-1,++e;return e},di.builtin.biginteger.prototype.bnBitCount=function(){for(var t=0,e=this.s&this.DM,n=0;n<this.t;++n)t+=di.builtin.biginteger.cbit(this[n]^e);return t},di.builtin.biginteger.prototype.bnTestBit=function(t){var e=Math.floor(t/this.DB);return e>=this.t?0!=this.s:0!=(this[e]&1<<t%this.DB)},di.builtin.biginteger.prototype.bnpChangeBit=function(t,e){var n=di.builtin.biginteger.ONE.shiftLeft(t);return this.bitwiseTo(n,e,n),n},di.builtin.biginteger.prototype.bnSetBit=function(t){return this.changeBit(t,di.builtin.biginteger.op_or)},di.builtin.biginteger.prototype.bnClearBit=function(t){return this.changeBit(t,di.builtin.biginteger.op_andnot)},di.builtin.biginteger.prototype.bnFlipBit=function(t){return this.changeBit(t,di.builtin.biginteger.op_xor)},di.builtin.biginteger.prototype.bnpAddTo=function(t,e){for(var n=0,i=0,r=Math.min(t.t,this.t);r>n;)i+=this[n]+t[n],e[n++]=i&this.DM,i>>=this.DB;if(t.t<this.t){for(i+=t.s;n<this.t;)i+=this[n],e[n++]=i&this.DM,i>>=this.DB;i+=this.s}else{for(i+=this.s;n<t.t;)i+=t[n],e[n++]=i&this.DM,i>>=this.DB;i+=t.s}e.s=0>i?-1:0,i>0?e[n++]=i:-1>i&&(e[n++]=this.DV+i),e.t=n,e.clamp()},di.builtin.biginteger.prototype.bnAdd=function(t){var e=di.builtin.biginteger.nbi();return this.addTo(t,e),e},di.builtin.biginteger.prototype.bnSubtract=function(t){var e=di.builtin.biginteger.nbi();return this.subTo(t,e),e},di.builtin.biginteger.prototype.bnMultiply=function(t){var e=di.builtin.biginteger.nbi();return this.multiplyTo(t,e),e},di.builtin.biginteger.prototype.bnDivide=function(t){var e=di.builtin.biginteger.nbi();return this.divRemTo(t,e,null),e},di.builtin.biginteger.prototype.bnRemainder=function(t){var e=di.builtin.biginteger.nbi();return this.divRemTo(t,null,e),e},di.builtin.biginteger.prototype.bnDivideAndRemainder=function(t){var e=di.builtin.biginteger.nbi(),n=di.builtin.biginteger.nbi();return this.divRemTo(t,e,n),[e,n]},di.builtin.biginteger.prototype.bnpDMultiply=function(t){this[this.t]=this.am(0,t-1,this,0,0,this.t),++this.t,this.clamp()},di.builtin.biginteger.prototype.bnpDAddOffset=function(t,e){if(0!=t){for(;this.t<=e;)this[this.t++]=0;for(this[e]+=t;this[e]>=this.DV;)this[e]-=this.DV,++e>=this.t&&(this[this.t++]=0),++this[e]}},di.builtin.biginteger.NullExp=function(){},di.builtin.biginteger.prototype.nNop=function(t){return t},di.builtin.biginteger.prototype.nMulTo=function(t,e,n){t.multiplyTo(e,n)},di.builtin.biginteger.prototype.nSqrTo=function(t,e){t.squareTo(e)},di.builtin.biginteger.NullExp.prototype.convert=di.builtin.biginteger.prototype.nNop,di.builtin.biginteger.NullExp.prototype.revert=di.builtin.biginteger.prototype.nNop,di.builtin.biginteger.NullExp.prototype.mulTo=di.builtin.biginteger.prototype.nMulTo,di.builtin.biginteger.NullExp.prototype.sqrTo=di.builtin.biginteger.prototype.nSqrTo,di.builtin.biginteger.prototype.bnPow=function(t){return this.exp(t,new di.builtin.biginteger.NullExp)},di.builtin.biginteger.prototype.bnpMultiplyLowerTo=function(t,e,n){var i=Math.min(this.t+t.t,e);for(n.s=0,n.t=i;i>0;)n[--i]=0;var r;for(r=n.t-this.t;r>i;++i)n[i+this.t]=this.am(0,t[i],n,i,0,this.t);for(r=Math.min(t.t,e);r>i;++i)this.am(0,t[i],n,i,0,e-i);n.clamp()},di.builtin.biginteger.prototype.bnpMultiplyUpperTo=function(t,e,n){--e;var i=n.t=this.t+t.t-e;for(n.s=0;0<=--i;)n[i]=0;for(i=Math.max(e-this.t,0);i<t.t;++i)n[this.t+i-e]=this.am(e-i,t[i],n,0,0,this.t+i-e);n.clamp(),n.drShiftTo(1,n)},di.builtin.biginteger.Barrett=function(t){this.r2=di.builtin.biginteger.nbi(),this.q3=di.builtin.biginteger.nbi(),di.builtin.biginteger.ONE.dlShiftTo(2*t.t,this.r2),this.mu=this.r2.divide(t),this.m=t},di.builtin.biginteger.prototype.barrettConvert=function(t){if(0>t.s||t.t>2*this.m.t)return t.mod(this.m);if(0>t.compareTo(this.m))return t;var e=di.builtin.biginteger.nbi();return t.copyTo(e),this.reduce(e),e},di.builtin.biginteger.prototype.barrettRevert=function(t){return t},di.builtin.biginteger.prototype.barrettReduce=function(t){for(t.drShiftTo(this.m.t-1,this.r2),t.t>this.m.t+1&&(t.t=this.m.t+1,t.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);0>t.compareTo(this.r2);)t.dAddOffset(1,this.m.t+1);for(t.subTo(this.r2,t);0<=t.compareTo(this.m);)t.subTo(this.m,t)},di.builtin.biginteger.prototype.barrettSqrTo=function(t,e){t.squareTo(e),this.reduce(e)},di.builtin.biginteger.prototype.barrettMulTo=function(t,e,n){t.multiplyTo(e,n),this.reduce(n)},di.builtin.biginteger.Barrett.prototype.convert=di.builtin.biginteger.prototype.barrettConvert,di.builtin.biginteger.Barrett.prototype.revert=di.builtin.biginteger.prototype.barrettRevert,di.builtin.biginteger.Barrett.prototype.reduce=di.builtin.biginteger.prototype.barrettReduce,di.builtin.biginteger.Barrett.prototype.mulTo=di.builtin.biginteger.prototype.barrettMulTo,di.builtin.biginteger.Barrett.prototype.sqrTo=di.builtin.biginteger.prototype.barrettSqrTo,di.builtin.biginteger.prototype.bnModPow=function(t,e){var n,i,r=t.bitLength(),s=di.builtin.biginteger.nbv(1);if(0>=r)return s;n=18>r?1:48>r?3:144>r?4:768>r?5:6,i=8>r?new di.builtin.biginteger.Classic(e):e.isEven()?new di.builtin.biginteger.Barrett(e):new di.builtin.biginteger.Montgomery(e);var o=[],a=3,l=n-1,u=(1<<n)-1;if(o[1]=i.convert(this),n>1)for(r=di.builtin.biginteger.nbi(),i.sqrTo(o[1],r);u>=a;)o[a]=di.builtin.biginteger.nbi(),i.mulTo(r,o[a-2],o[a]),a+=2;for(var c,f=t.t-1,h=!0,p=di.builtin.biginteger.nbi(),r=di.builtin.biginteger.nbits(t[f])-1;f>=0;){for(r>=l?c=t[f]>>r-l&u:(c=(t[f]&(1<<r+1)-1)<<l-r,f>0&&(c|=t[f-1]>>this.DB+r-l)),a=n;0==(1&c);)c>>=1,--a;if(0>(r-=a)&&(r+=this.DB,--f),h)o[c].copyTo(s),h=!1;else{for(;a>1;)i.sqrTo(s,p),i.sqrTo(p,s),a-=2;a>0?i.sqrTo(s,p):(a=s,s=p,p=a),i.mulTo(p,o[c],s)}for(;f>=0&&0==(t[f]&1<<r);)i.sqrTo(s,p),a=s,s=p,p=a,0>--r&&(r=this.DB-1,--f)}return i.revert(s)},di.builtin.biginteger.prototype.bnGCD=function(t){var e=0>this.s?this.negate():this.clone();if(t=0>t.s?t.negate():t.clone(),0>e.compareTo(t)){var n=e,e=t;t=n}var n=e.getLowestSetBit(),i=t.getLowestSetBit();if(0>i)return e;for(i>n&&(i=n),i>0&&(e.rShiftTo(i,e),t.rShiftTo(i,t));0<e.signum();)0<(n=e.getLowestSetBit())&&e.rShiftTo(n,e),0<(n=t.getLowestSetBit())&&t.rShiftTo(n,t),0<=e.compareTo(t)?(e.subTo(t,e),e.rShiftTo(1,e)):(t.subTo(e,t),t.rShiftTo(1,t));return i>0&&t.lShiftTo(i,t),t},di.builtin.biginteger.prototype.bnpModInt=function(t){if(0>=t)return 0;var e=this.DV%t,n=0>this.s?t-1:0;if(0<this.t)if(0==e)n=this[0]%t;else for(var i=this.t-1;i>=0;--i)n=(e*n+this[i])%t;return n},di.builtin.biginteger.prototype.bnModInverse=function(t){var e=t.isEven();if(this.isEven()&&e||0==t.signum())return di.builtin.biginteger.ZERO;for(var n=t.clone(),i=this.clone(),r=di.builtin.biginteger.nbv(1),s=di.builtin.biginteger.nbv(0),o=di.builtin.biginteger.nbv(0),a=di.builtin.biginteger.nbv(1);0!=n.signum();){for(;n.isEven();)n.rShiftTo(1,n),e?(r.isEven()&&s.isEven()||(r.addTo(this,r),s.subTo(t,s)),r.rShiftTo(1,r)):s.isEven()||s.subTo(t,s),s.rShiftTo(1,s);for(;i.isEven();)i.rShiftTo(1,i),e?(o.isEven()&&a.isEven()||(o.addTo(this,o),a.subTo(t,a)),o.rShiftTo(1,o)):a.isEven()||a.subTo(t,a),a.rShiftTo(1,a);0<=n.compareTo(i)?(n.subTo(i,n),e&&r.subTo(o,r),s.subTo(a,s)):(i.subTo(n,i),e&&o.subTo(r,o),a.subTo(s,a))}return 0!=i.compareTo(di.builtin.biginteger.ONE)?di.builtin.biginteger.ZERO:0<=a.compareTo(t)?a.subtract(t):0>a.signum()?(a.addTo(t,a),0>a.signum()?a.add(t):a):a},di.builtin.biginteger.lowprimes=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509],di.builtin.biginteger.lplim=67108864/di.builtin.biginteger.lowprimes[di.builtin.biginteger.lowprimes.length-1],di.builtin.biginteger.prototype.bnIsProbablePrime=function(t){var e,n=this.abs();if(1==n.t&&n[0]<=di.builtin.biginteger.lowprimes[di.builtin.biginteger.lowprimes.length-1]){for(e=0;e<di.builtin.biginteger.lowprimes.length;++e)if(n[0]==di.builtin.biginteger.lowprimes[e])return!0;return!1}if(n.isEven())return!1;for(e=1;e<di.builtin.biginteger.lowprimes.length;){for(var i=di.builtin.biginteger.lowprimes[e],r=e+1;r<di.builtin.biginteger.lowprimes.length&&i<di.builtin.biginteger.lplim;)i*=di.builtin.biginteger.lowprimes[r++];
for(i=n.modInt(i);r>e;)if(0==i%di.builtin.biginteger.lowprimes[e++])return!1}return n.millerRabin(t)},di.builtin.biginteger.prototype.bnpMillerRabin=function(t){var e=this.subtract(di.builtin.biginteger.ONE),n=e.getLowestSetBit();if(0>=n)return!1;var i=e.shiftRight(n);t=t+1>>1,t>di.builtin.biginteger.lowprimes.length&&(t=di.builtin.biginteger.lowprimes.length);for(var r=di.builtin.biginteger.nbi(),s=0;t>s;++s){r.fromInt(di.builtin.biginteger.lowprimes[s]);var o=r.modPow(i,this);if(0!=o.compareTo(di.builtin.biginteger.ONE)&&0!=o.compareTo(e)){for(var a=1;a++<n&&0!=o.compareTo(e);)if(o=o.modPowInt(2,this),0==o.compareTo(di.builtin.biginteger.ONE))return!1;if(0!=o.compareTo(e))return!1}}return!0},di.builtin.biginteger.prototype.isnegative=function(){return 0>this.s},di.builtin.biginteger.prototype.ispositive=function(){return 0<=this.s},di.builtin.biginteger.prototype.trueCompare=function(t){return 0<=this.s&&0>t.s?1:0>this.s&&0<=t.s?-1:this.compare(t)},di.builtin.biginteger.prototype.chunkSize=di.builtin.biginteger.prototype.bnpChunkSize,di.builtin.biginteger.prototype.toRadix=di.builtin.biginteger.prototype.bnpToRadix,di.builtin.biginteger.prototype.fromRadix=di.builtin.biginteger.prototype.bnpFromRadix,di.builtin.biginteger.prototype.fromNumber=di.builtin.biginteger.prototype.bnpFromNumber,di.builtin.biginteger.prototype.bitwiseTo=di.builtin.biginteger.prototype.bnpBitwiseTo,di.builtin.biginteger.prototype.changeBit=di.builtin.biginteger.prototype.bnpChangeBit,di.builtin.biginteger.prototype.addTo=di.builtin.biginteger.prototype.bnpAddTo,di.builtin.biginteger.prototype.dMultiply=di.builtin.biginteger.prototype.bnpDMultiply,di.builtin.biginteger.prototype.dAddOffset=di.builtin.biginteger.prototype.bnpDAddOffset,di.builtin.biginteger.prototype.multiplyLowerTo=di.builtin.biginteger.prototype.bnpMultiplyLowerTo,di.builtin.biginteger.prototype.multiplyUpperTo=di.builtin.biginteger.prototype.bnpMultiplyUpperTo,di.builtin.biginteger.prototype.modInt=di.builtin.biginteger.prototype.bnpModInt,di.builtin.biginteger.prototype.millerRabin=di.builtin.biginteger.prototype.bnpMillerRabin,di.builtin.biginteger.prototype.clone=di.builtin.biginteger.prototype.bnClone,di.builtin.biginteger.prototype.intValue=di.builtin.biginteger.prototype.bnIntValue,di.builtin.biginteger.prototype.byteValue=di.builtin.biginteger.prototype.bnByteValue,di.builtin.biginteger.prototype.shortValue=di.builtin.biginteger.prototype.bnShortValue,di.builtin.biginteger.prototype.signum=di.builtin.biginteger.prototype.bnSigNum,di.builtin.biginteger.prototype.toByteArray=di.builtin.biginteger.prototype.bnToByteArray,di.builtin.biginteger.prototype.equals=di.builtin.biginteger.prototype.bnEquals,di.builtin.biginteger.prototype.compare=di.builtin.biginteger.prototype.compareTo,di.builtin.biginteger.prototype.min=di.builtin.biginteger.prototype.bnMin,di.builtin.biginteger.prototype.max=di.builtin.biginteger.prototype.bnMax,di.builtin.biginteger.prototype.and=di.builtin.biginteger.prototype.bnAnd,di.builtin.biginteger.prototype.or=di.builtin.biginteger.prototype.bnOr,di.builtin.biginteger.prototype.xor=di.builtin.biginteger.prototype.bnXor,di.builtin.biginteger.prototype.andNot=di.builtin.biginteger.prototype.bnAndNot,di.builtin.biginteger.prototype.not=di.builtin.biginteger.prototype.bnNot,di.builtin.biginteger.prototype.shiftLeft=di.builtin.biginteger.prototype.bnShiftLeft,di.builtin.biginteger.prototype.shiftRight=di.builtin.biginteger.prototype.bnShiftRight,di.builtin.biginteger.prototype.getLowestSetBit=di.builtin.biginteger.prototype.bnGetLowestSetBit,di.builtin.biginteger.prototype.bitCount=di.builtin.biginteger.prototype.bnBitCount,di.builtin.biginteger.prototype.testBit=di.builtin.biginteger.prototype.bnTestBit,di.builtin.biginteger.prototype.setBit=di.builtin.biginteger.prototype.bnSetBit,di.builtin.biginteger.prototype.clearBit=di.builtin.biginteger.prototype.bnClearBit,di.builtin.biginteger.prototype.flipBit=di.builtin.biginteger.prototype.bnFlipBit,di.builtin.biginteger.prototype.add=di.builtin.biginteger.prototype.bnAdd,di.builtin.biginteger.prototype.subtract=di.builtin.biginteger.prototype.bnSubtract,di.builtin.biginteger.prototype.multiply=di.builtin.biginteger.prototype.bnMultiply,di.builtin.biginteger.prototype.divide=di.builtin.biginteger.prototype.bnDivide,di.builtin.biginteger.prototype.remainder=di.builtin.biginteger.prototype.bnRemainder,di.builtin.biginteger.prototype.divideAndRemainder=di.builtin.biginteger.prototype.bnDivideAndRemainder,di.builtin.biginteger.prototype.modPow=di.builtin.biginteger.prototype.bnModPow,di.builtin.biginteger.prototype.modInverse=di.builtin.biginteger.prototype.bnModInverse,di.builtin.biginteger.prototype.pow=di.builtin.biginteger.prototype.bnPow,di.builtin.biginteger.prototype.gcd=di.builtin.biginteger.prototype.bnGCD,di.builtin.biginteger.prototype.isProbablePrime=di.builtin.biginteger.prototype.bnIsProbablePrime,di.builtin.nmber=function(t,e){if(!(this instanceof di.builtin.nmber))return new di.builtin.nmber(t,e);if(t instanceof di.builtin.str&&(t=t.v),t instanceof di.builtin.nmber)this.v=t.v,this.skType=t.skType;else if("number"==typeof t){if(this.v=t,void 0===e)this.skType=t>di.builtin.nmber.threshold$||t<-di.builtin.nmber.threshold$||0!=t%1?di.builtin.nmber.float$:di.builtin.nmber.int$;else if(this.skType=e,e===di.builtin.nmber.int$&&(t>di.builtin.nmber.threshold$||t<-di.builtin.nmber.threshold$))return new di.builtin.lng(t)}else{if("string"==typeof t){var n=di.numberFromStr(t);return void 0!==e&&(n.skType=e),e===di.builtin.nmber.int$&&(n.v>di.builtin.nmber.threshold$||n.v<-di.builtin.nmber.threshold$)?new di.builtin.lng(t):n}if(t instanceof di.builtin.lng)return di.numberFromStr(t.str$(10,!0));if(t instanceof di.builtin.biginteger){if(n=di.numberFromStr(t.toString()),void 0!==e&&(n.skType=e),e===di.builtin.nmber.int$&&(n.v>di.builtin.nmber.threshold$||n.v<-di.builtin.nmber.threshold$))return new di.builtin.lng(t)}else this.v=0,this.skType=void 0===e?di.builtin.nmber.int$:e}return this},di.builtin.nmber.prototype.tp$index=function(){return this.v},di.builtin.nmber.prototype.tp$hash=function(){return this.v},di.builtin.nmber.prototype.tp$name="number",di.builtin.nmber.prototype.ob$type=di.builtin.type.makeIntoTypeObj("number",di.builtin.nmber),di.builtin.nmber.threshold$=Math.pow(2,53),di.builtin.nmber.float$="float",di.builtin.nmber.int$="int",di.builtin.nmber.fromInt$=function(t){return new di.builtin.nmber(t,void 0)},di.numberFromStr=function(t){if("inf"==t)return new di.builtin.nmber(1/0,void 0);if("-inf"==t)return new di.builtin.nmber(-1/0,void 0);var e=new di.builtin.nmber(0,void 0);if(-1!==t.indexOf(".")||-1!==t.indexOf("e")||-1!==t.indexOf("E"))return e.v=parseFloat(t),e.skType=di.builtin.nmber.float$,e;var n=t;return"-"===t.charAt(0)&&(n=t.substr(1)),t="0"!==n.charAt(0)||"x"!==n.charAt(1)&&"X"!==n.charAt(1)?"0"!==n.charAt(0)||"b"!==n.charAt(1)&&"B"!==n.charAt(1)?"0"===n.charAt(0)?parseInt(t,8):parseInt(t,10):parseInt(t,2):parseInt(t,16),e.v=t,e.skType=di.builtin.nmber.int$,e},pi.exportSymbol("Sk.numberFromStr",di.numberFromStr),di.builtin.nmber.prototype.clone=function(){return new di.builtin.nmber(this,void 0)},di.builtin.nmber.prototype.toFixed=function(t){return t=di.builtin.asnum$(t),this.v.toFixed(t)},di.builtin.nmber.prototype.nb$add=function(t){var e;return"number"==typeof t&&(t=new di.builtin.nmber(t,void 0)),t instanceof di.builtin.nmber?(e=new di.builtin.nmber(this.v+t.v,void 0),this.skType===di.builtin.nmber.float$||t.skType===di.builtin.nmber.float$?e.skType=di.builtin.nmber.float$:(e.skType=di.builtin.nmber.int$,(e.v>di.builtin.nmber.threshold$||e.v<-di.builtin.nmber.threshold$)&&(e=new di.builtin.lng(this.v).nb$add(t.v))),e):t instanceof di.builtin.lng?e=this.skType===di.builtin.nmber.float$?new di.builtin.nmber(this.v+parseFloat(t.str$(10,!0)),di.builtin.nmber.float$):new di.builtin.lng(this.v).nb$add(t):void 0},di.builtin.nmber.prototype.nb$subtract=function(t){var e;return"number"==typeof t&&(t=new di.builtin.nmber(t,void 0)),t instanceof di.builtin.nmber?(e=new di.builtin.nmber(this.v-t.v,void 0),this.skType===di.builtin.nmber.float$||t.skType===di.builtin.nmber.float$?e.skType=di.builtin.nmber.float$:(e.skType=di.builtin.nmber.int$,(e.v>di.builtin.nmber.threshold$||e.v<-di.builtin.nmber.threshold$)&&(e=new di.builtin.lng(this.v).nb$subtract(t.v))),e):t instanceof di.builtin.lng?e=this.skType===di.builtin.nmber.float$?new di.builtin.nmber(this.v-parseFloat(t.str$(10,!0)),di.builtin.nmber.float$):new di.builtin.lng(this.v).nb$subtract(t):void 0},di.builtin.nmber.prototype.nb$multiply=function(t){var e;return"number"==typeof t&&(t=new di.builtin.nmber(t,void 0)),t instanceof di.builtin.nmber?(e=new di.builtin.nmber(this.v*t.v,void 0),this.skType===di.builtin.nmber.float$||t.skType===di.builtin.nmber.float$?e.skType=di.builtin.nmber.float$:(e.skType=di.builtin.nmber.int$,(e.v>di.builtin.nmber.threshold$||e.v<-di.builtin.nmber.threshold$)&&(e=new di.builtin.lng(this.v).nb$multiply(t.v))),e):t instanceof di.builtin.lng?e=this.skType===di.builtin.nmber.float$?new di.builtin.nmber(this.v*parseFloat(t.str$(10,!0)),di.builtin.nmber.float$):new di.builtin.lng(this.v).nb$multiply(t):void 0},di.builtin.nmber.prototype.nb$divide=function(t){var e;if("number"==typeof t&&(t=new di.builtin.nmber(t,void 0)),t instanceof di.builtin.nmber){if(0==t.v)throw new di.builtin.ZeroDivisionError("integer division or modulo by zero");return 1/0===this.v?1/0===t.v||-1/0===t.v?new di.builtin.nmber(0/0,di.builtin.nmber.float$):t.nb$isnegative()?new di.builtin.nmber(-1/0,di.builtin.nmber.float$):new di.builtin.nmber(1/0,di.builtin.nmber.float$):-1/0===this.v?1/0===t.v||-1/0===t.v?new di.builtin.nmber(0/0,di.builtin.nmber.float$):t.nb$isnegative()?new di.builtin.nmber(1/0,di.builtin.nmber.float$):new di.builtin.nmber(-1/0,di.builtin.nmber.float$):(e=new di.builtin.nmber(this.v/t.v,void 0),this.skType===di.builtin.nmber.float$||t.skType===di.builtin.nmber.float$||di.python3?e.skType=di.builtin.nmber.float$:(e.v=Math.floor(e.v),e.skType=di.builtin.nmber.int$,(e.v>di.builtin.nmber.threshold$||e.v<-di.builtin.nmber.threshold$)&&(e=new di.builtin.lng(this.v).nb$divide(t.v))),e)}if(t instanceof di.builtin.lng){if(0==t.longCompare(di.builtin.biginteger.ZERO))throw new di.builtin.ZeroDivisionError("integer division or modulo by zero");return 1/0===this.v?t.nb$isnegative()?new di.builtin.nmber(-1/0,di.builtin.nmber.float$):new di.builtin.nmber(1/0,di.builtin.nmber.float$):-1/0===this.v?t.nb$isnegative()?new di.builtin.nmber(1/0,di.builtin.nmber.float$):new di.builtin.nmber(-1/0,di.builtin.nmber.float$):e=this.skType===di.builtin.nmber.float$||di.python3?new di.builtin.nmber(this.v/parseFloat(t.str$(10,!0)),di.builtin.nmber.float$):new di.builtin.lng(this.v).nb$divide(t)}},di.builtin.nmber.prototype.nb$floor_divide=function(t){var e;if("number"==typeof t&&(t=new di.builtin.nmber(t,void 0)),1/0===this.v||-1/0===this.v)return new di.builtin.nmber(0/0,di.builtin.nmber.float$);if(t instanceof di.builtin.nmber){if(0==t.v)throw new di.builtin.ZeroDivisionError("integer division or modulo by zero");return 1/0===t.v?this.nb$isnegative()?new di.builtin.nmber(-1,di.builtin.nmber.float$):new di.builtin.nmber(0,di.builtin.nmber.float$):-1/0===t.v?this.nb$isnegative()||!this.nb$nonzero()?new di.builtin.nmber(0,di.builtin.nmber.float$):new di.builtin.nmber(-1,di.builtin.nmber.float$):(e=new di.builtin.nmber(Math.floor(this.v/t.v),void 0),this.skType===di.builtin.nmber.float$||t.skType===di.builtin.nmber.float$?e.skType=di.builtin.nmber.float$:(e.v=Math.floor(e.v),e.skType=di.builtin.nmber.int$,(e.v>di.builtin.nmber.threshold$||e.v<-di.builtin.nmber.threshold$)&&(e=new di.builtin.lng(this.v).nb$floor_divide(t.v))),e)}if(t instanceof di.builtin.lng){if(0==t.longCompare(di.builtin.biginteger.ZERO))throw new di.builtin.ZeroDivisionError("integer division or modulo by zero");return this.skType===di.builtin.nmber.float$?(e=Math.floor(this.v/parseFloat(t.str$(10,!0))),e=new di.builtin.nmber(e,di.builtin.nmber.float$)):e=new di.builtin.lng(this.v).nb$floor_divide(t),e}},di.builtin.nmber.prototype.nb$remainder=function(t){var e;if("number"==typeof t&&(t=new di.builtin.nmber(t,void 0)),t instanceof di.builtin.nmber){if(0==t.v)throw new di.builtin.ZeroDivisionError("integer division or modulo by zero");return 0==this.v?this.skType==di.builtin.nmber.float$||t.skType==di.builtin.nmber.float$?new di.builtin.nmber(0,di.builtin.nmber.float$):new di.builtin.nmber(0,di.builtin.nmber.int$):1/0===t.v?1/0===this.v||-1/0===this.v?new di.builtin.nmber(0/0,di.builtin.nmber.float$):this.nb$ispositive()?new di.builtin.nmber(this.v,di.builtin.nmber.float$):new di.builtin.nmber(1/0,di.builtin.nmber.float$):(e=this.v%t.v,0>this.v?0<t.v&&0>e&&(e+=t.v):0>t.v&&0!=e&&(e+=t.v),this.skType===di.builtin.nmber.float$||t.skType===di.builtin.nmber.float$?e=new di.builtin.nmber(e,di.builtin.nmber.float$):(e=new di.builtin.nmber(e,di.builtin.nmber.int$),(e.v>di.builtin.nmber.threshold$||e.v<-di.builtin.nmber.threshold$)&&(e=new di.builtin.lng(this.v).nb$remainder(t.v))),e)}if(t instanceof di.builtin.lng){if(0==t.longCompare(di.builtin.biginteger.ZERO))throw new di.builtin.ZeroDivisionError("integer division or modulo by zero");return 0==this.v?this.skType===di.builtin.nmber.int$?new di.builtin.lng(0):new di.builtin.nmber(0,this.skType):(this.skType===di.builtin.nmber.float$?(t=parseFloat(t.str$(10,!0)),e=this.v%t,0>e?t>0&&0!=e&&(e+=t):0>t&&0!=e&&(e+=t),e=new di.builtin.nmber(e,di.builtin.nmber.float$)):e=new di.builtin.lng(this.v).nb$remainder(t),e)}},di.builtin.nmber.prototype.nb$power=function(t){var e;if("number"==typeof t&&(t=new di.builtin.nmber(t,void 0)),t instanceof di.builtin.nmber){if(0>this.v&&0!=t.v%1)throw new di.builtin.NegativePowerError("cannot raise a negative number to a fractional power");if(0==this.v&&0>t.v)throw new di.builtin.NegativePowerError("cannot raise zero to a negative power");if(e=new di.builtin.nmber(Math.pow(this.v,t.v),void 0),this.skType===di.builtin.nmber.float$||t.skType===di.builtin.nmber.float$||0>t.v?e.skType=di.builtin.nmber.float$:(e.v=Math.floor(e.v),e.skType=di.builtin.nmber.int$,(e.v>di.builtin.nmber.threshold$||e.v<-di.builtin.nmber.threshold$)&&(e=new di.builtin.lng(this.v).nb$power(t.v))),1/0===Math.abs(e.v)&&1/0!==Math.abs(this.v)&&1/0!==Math.abs(t.v))throw new di.builtin.OverflowError("Numerical result out of range");return e}if(t instanceof di.builtin.lng){if(0==this.v&&0>t.longCompare(di.builtin.biginteger.ZERO))throw new di.builtin.NegativePowerError("cannot raise zero to a negative power");return e=this.skType===di.builtin.nmber.float$||t.nb$isnegative()?new di.builtin.nmber(Math.pow(this.v,parseFloat(t.str$(10,!0))),di.builtin.nmber.float$):new di.builtin.lng(this.v).nb$power(t)}},di.builtin.nmber.prototype.nb$and=function(t){return t=di.builtin.asnum$(t),t&=this.v,void 0!==t&&0>t&&(t+=4294967296),void 0!==t?new di.builtin.nmber(t,void 0):void 0},di.builtin.nmber.prototype.nb$or=function(t){return t=di.builtin.asnum$(t),t|=this.v,void 0!==t&&0>t&&(t+=4294967296),void 0!==t?new di.builtin.nmber(t,void 0):void 0},di.builtin.nmber.prototype.nb$xor=function(t){return t=di.builtin.asnum$(t),t^=this.v,void 0!==t&&0>t&&(t+=4294967296),void 0!==t?new di.builtin.nmber(t,void 0):void 0},di.builtin.nmber.prototype.nb$lshift=function(t){var e;if(t=di.builtin.asnum$(t),void 0!==t){if(0>t)throw new di.builtin.ValueError("negative shift count");if(e=this.v<<t,e<=this.v)return di.builtin.lng.fromInt$(this.v).nb$lshift(t)}return void 0!==e?new di.builtin.nmber(e,this.skType):void 0},di.builtin.nmber.prototype.nb$rshift=function(t){var e;if(t=di.builtin.asnum$(t),void 0!==t){if(0>t)throw new di.builtin.ValueError("negative shift count");e=this.v>>t,0<this.v&&0>e&&(e&=Math.pow(2,32-t)-1)}return void 0!==e?new di.builtin.nmber(e,this.skType):void 0},di.builtin.nmber.prototype.nb$inplace_add=di.builtin.nmber.prototype.nb$add,di.builtin.nmber.prototype.nb$inplace_subtract=di.builtin.nmber.prototype.nb$subtract,di.builtin.nmber.prototype.nb$inplace_multiply=di.builtin.nmber.prototype.nb$multiply,di.builtin.nmber.prototype.nb$inplace_divide=di.builtin.nmber.prototype.nb$divide,di.builtin.nmber.prototype.nb$inplace_remainder=di.builtin.nmber.prototype.nb$remainder,di.builtin.nmber.prototype.nb$inplace_floor_divide=di.builtin.nmber.prototype.nb$floor_divide,di.builtin.nmber.prototype.nb$inplace_power=di.builtin.nmber.prototype.nb$power,di.builtin.nmber.prototype.nb$inplace_and=di.builtin.nmber.prototype.nb$and,di.builtin.nmber.prototype.nb$inplace_or=di.builtin.nmber.prototype.nb$or,di.builtin.nmber.prototype.nb$inplace_xor=di.builtin.nmber.prototype.nb$xor,di.builtin.nmber.prototype.nb$inplace_lshift=di.builtin.nmber.prototype.nb$lshift,di.builtin.nmber.prototype.nb$inplace_rshift=di.builtin.nmber.prototype.nb$rshift,di.builtin.nmber.prototype.nb$negative=function(){return new di.builtin.nmber(-this.v,void 0)},di.builtin.nmber.prototype.nb$positive=function(){return this.clone()},di.builtin.nmber.prototype.nb$nonzero=function(){return 0!==this.v},di.builtin.nmber.prototype.nb$isnegative=function(){return 0>this.v},di.builtin.nmber.prototype.nb$ispositive=function(){return 0<=this.v},di.builtin.nmber.prototype.numberCompare=function(t){if(t instanceof di.builtin.bool&&(t=di.builtin.asnum$(t)),t instanceof di.builtin.none&&(t=0),"number"==typeof t)return this.v-t;if(t instanceof di.builtin.nmber)return 1/0==this.v&&1/0==t.v||-1/0==this.v&&-1/0==t.v?0:this.v-t.v;if(t instanceof di.builtin.lng){if(this.skType===di.builtin.nmber.int$||0==this.v%1)return new di.builtin.lng(this.v).longCompare(t);if(t=this.nb$subtract(t),t instanceof di.builtin.nmber)return t.v;if(t instanceof di.builtin.lng)return t.longCompare(di.builtin.biginteger.ZERO)}},di.builtin.nmber.prototype.__eq__=function(t,e){return 0==t.numberCompare(e)&&!(e instanceof di.builtin.none)},di.builtin.nmber.prototype.__ne__=function(t,e){return 0!=t.numberCompare(e)||e instanceof di.builtin.none},di.builtin.nmber.prototype.__lt__=function(t,e){return 0>t.numberCompare(e)},di.builtin.nmber.prototype.__le__=function(t,e){return 0>=t.numberCompare(e)},di.builtin.nmber.prototype.__gt__=function(t,e){return 0<t.numberCompare(e)},di.builtin.nmber.prototype.__ge__=function(t,e){return 0<=t.numberCompare(e)},di.builtin.nmber.prototype.tp$getattr=di.builtin.object.prototype.GenericGetAttr,di.builtin.nmber.prototype.$r=function(){return new di.builtin.str(this.str$(10,!0))},di.builtin.nmber.prototype.tp$str=function(){return new di.builtin.str(this.str$(10,!0))},di.builtin.nmber.prototype.str$=function(t,e){if(isNaN(this.v))return"nan";if(void 0===e&&(e=!0),1/0==this.v)return"inf";if(-1/0==this.v&&e)return"-inf";if(-1/0==this.v&&!e)return"inf";var n,i=e?this.v:Math.abs(this.v);if(void 0===t||10===t)if(this.skType==di.builtin.nmber.float$){n=i.toPrecision(12);var r=n.indexOf("."),s=i.toString().slice(0,r),r=i.toString().slice(r);for(s.match(/^-?0$/)&&r.slice(1).match(/^0{4,}/)&&(n=12>n.length?i.toExponential():i.toExponential(11));"0"==n.charAt(n.length-1)&&0>n.indexOf("e");)n=n.substring(0,n.length-1);"."==n.charAt(n.length-1)&&(n+="0"),n=n.replace(/\.0+e/,"e","i"),n=n.replace(/(e[-+])([1-9])$/,"$10$2"),n=n.replace(/0+(e.*)/,"$1")}else n=i.toString();else n=i.toString(t);return this.skType!==di.builtin.nmber.float$?n:(0>n.indexOf(".")&&0>n.indexOf("E")&&0>n.indexOf("e")&&(n+=".0"),n)},pi.exportSymbol("Sk.builtin.nmber",di.builtin.nmber),di.builtin.lng=function(t,e){if(e=di.builtin.asnum$(e),!(this instanceof di.builtin.lng))return new di.builtin.lng(t,e);if(void 0===t)this.biginteger=new di.builtin.biginteger(0);else if(t instanceof di.builtin.lng)this.biginteger=t.biginteger.clone();else if(t instanceof di.builtin.biginteger)this.biginteger=t;else{if(t instanceof String)return di.longFromStr(t,e);if(t instanceof di.builtin.str)return di.longFromStr(t.v,e);if(void 0!==t&&!di.builtin.checkString(t)&&!di.builtin.checkNumber(t))if(!0===t)t=1;else{if(!1!==t)throw new di.builtin.TypeError("long() argument must be a string or a number, not '"+di.abstr.typeName(t)+"'");t=0}t=di.builtin.asnum$nofloat(t),this.biginteger=new di.builtin.biginteger(t)}return this},di.builtin.lng.prototype.tp$index=function(){return parseInt(this.str$(10,!0),10)},di.builtin.lng.prototype.tp$hash=function(){return this.tp$index()},di.builtin.lng.prototype.tp$name="long",di.builtin.lng.prototype.ob$type=di.builtin.type.makeIntoTypeObj("long",di.builtin.lng),di.builtin.lng.threshold$=Math.pow(2,53),di.builtin.lng.MAX_INT$=new di.builtin.lng(di.builtin.lng.threshold$),di.builtin.lng.MIN_INT$=new di.builtin.lng(-di.builtin.lng.threshold$),di.builtin.lng.prototype.cantBeInt=function(){return 0<this.longCompare(di.builtin.lng.MAX_INT$)||0>this.longCompare(di.builtin.lng.MIN_INT$)},di.builtin.lng.fromInt$=function(t){return new di.builtin.lng(t)},di.longFromStr=function(t,e){var n=di.str2number(t,e,function(t,e){return 10==e?new di.builtin.biginteger(t):new di.builtin.biginteger(t,e)},function(t){return t.negate()},"long");return new di.builtin.lng(n)},pi.exportSymbol("Sk.longFromStr",di.longFromStr),di.builtin.lng.prototype.toInt$=function(){return this.biginteger.intValue()},di.builtin.lng.prototype.clone=function(){return new di.builtin.lng(this)},di.builtin.lng.prototype.nb$add=function(t){if(t instanceof di.builtin.nmber){if(t.skType===di.builtin.nmber.float$)return new di.builtin.nmber(this.str$(10,!0),di.builtin.nmber.float$).nb$add(t);t=new di.builtin.lng(t.v)}return t instanceof di.builtin.lng?new di.builtin.lng(this.biginteger.add(t.biginteger)):t instanceof di.builtin.biginteger?new di.builtin.lng(this.biginteger.add(t)):new di.builtin.lng(this.biginteger.add(new di.builtin.biginteger(t)))},di.builtin.lng.prototype.nb$inplace_add=di.builtin.lng.prototype.nb$add,di.builtin.lng.prototype.nb$subtract=function(t){if(t instanceof di.builtin.nmber){if(t.skType===di.builtin.nmber.float$)return new di.builtin.nmber(this.str$(10,!0),di.builtin.nmber.float$).nb$subtract(t);t=new di.builtin.lng(t.v)}return t instanceof di.builtin.lng?new di.builtin.lng(this.biginteger.subtract(t.biginteger)):t instanceof di.builtin.biginteger?new di.builtin.lng(this.biginteger.subtract(t)):new di.builtin.lng(this.biginteger.subtract(new di.builtin.biginteger(t)))},di.builtin.lng.prototype.nb$inplace_subtract=di.builtin.lng.prototype.nb$subtract,di.builtin.lng.prototype.nb$multiply=function(t){if(t instanceof di.builtin.nmber){if(t.skType===di.builtin.nmber.float$)return new di.builtin.nmber(this.str$(10,!0),di.builtin.nmber.float$).nb$multiply(t);t=new di.builtin.lng(t.v)}return t instanceof di.builtin.lng?new di.builtin.lng(this.biginteger.multiply(t.biginteger)):t instanceof di.builtin.biginteger?new di.builtin.lng(this.biginteger.multiply(t)):new di.builtin.lng(this.biginteger.multiply(new di.builtin.biginteger(t)))},di.builtin.lng.prototype.nb$inplace_multiply=di.builtin.lng.prototype.nb$multiply,di.builtin.lng.prototype.nb$divide=function(t){if(t instanceof di.builtin.nmber){if(t.skType===di.builtin.nmber.float$)return new di.builtin.nmber(this.str$(10,!0),di.builtin.nmber.float$).nb$divide(t);t=new di.builtin.lng(t.v)}t instanceof di.builtin.lng||(t=new di.builtin.lng(t));var e=this.nb$isnegative(),n=t.nb$isnegative();return e&&!n||n&&!e?(t=this.biginteger.divideAndRemainder(t.biginteger),0==t[1].trueCompare(di.builtin.biginteger.ZERO)?new di.builtin.lng(t[0]):(t=t[0].subtract(di.builtin.biginteger.ONE),new di.builtin.lng(t))):new di.builtin.lng(this.biginteger.divide(t.biginteger))},di.builtin.lng.prototype.nb$inplace_divide=di.builtin.lng.prototype.nb$divide,di.builtin.lng.prototype.nb$floor_divide=function(t){return t instanceof di.builtin.nmber&&t.skType===di.builtin.nmber.float$?new di.builtin.nmber(this.str$(10,!0),di.builtin.nmber.float$).nb$floor_divide(t):this.nb$divide(t)},di.builtin.lng.prototype.nb$inplace_floor_divide=di.builtin.lng.prototype.nb$floor_divide,di.builtin.lng.prototype.nb$remainder=function(t){if(0===this.biginteger.trueCompare(di.builtin.biginteger.ZERO))return t instanceof di.builtin.nmber&&t.skType===di.builtin.nmber.float$?new di.builtin.nmber(0,di.builtin.nmber.float$):new di.builtin.lng(0);if(t instanceof di.builtin.nmber){if(t.skType===di.builtin.nmber.float$)return new di.builtin.nmber(this.str$(10,!0),di.builtin.nmber.float$).nb$remainder(t);t=new di.builtin.lng(t.v)}t instanceof di.builtin.lng||(t=new di.builtin.lng(t));var e=new di.builtin.lng(this.biginteger.remainder(t.biginteger));return this.nb$isnegative()?t.nb$ispositive()&&e.nb$nonzero()&&(e=e.nb$add(t).nb$remainder(t)):t.nb$isnegative()&&e.nb$nonzero()&&(e=e.nb$add(t)),e},di.builtin.lng.prototype.nb$inplace_remainder=di.builtin.lng.prototype.nb$remainder,di.builtin.lng.prototype.nb$power=function(t,e){if(void 0!==e)return t=new di.builtin.biginteger(di.builtin.asnum$(t)),e=new di.builtin.biginteger(di.builtin.asnum$(e)),new di.builtin.lng(this.biginteger.modPowInt(t,e));if("number"==typeof t){if(0>t){var n=new di.builtin.nmber(this.str$(10,!0),di.builtin.nmber.float$);return n.nb$power(t)}return new di.builtin.lng(this.biginteger.pow(new di.builtin.biginteger(t)))}if(t instanceof di.builtin.nmber){if(t.skType===di.builtin.nmber.float$||0>t.v)return n=new di.builtin.nmber(this.str$(10,!0),di.builtin.nmber.float$),n.nb$power(t);t=new di.builtin.lng(t.v)}return t instanceof di.builtin.lng?t.nb$isnegative()?(n=new di.builtin.nmber(this.str$(10,!0),di.builtin.nmber.float$),n.nb$power(t)):new di.builtin.lng(this.biginteger.pow(t.biginteger)):t instanceof di.builtin.biginteger?t.isnegative()?(n=new di.builtin.nmber(this.str$(10,!0),di.builtin.nmber.float$),n.nb$power(t)):new di.builtin.lng(this.biginteger.pow(t)):new di.builtin.lng(this.biginteger.pow(new di.builtin.biginteger(t)))},di.builtin.lng.prototype.nb$inplace_power=di.builtin.lng.prototype.nb$power,di.builtin.lng.prototype.nb$lshift=function(t){if(t instanceof di.builtin.lng){if(0>t.biginteger.signum())throw new di.builtin.ValueError("negative shift count");return new di.builtin.lng(this.biginteger.shiftLeft(t.biginteger))}if(t instanceof di.builtin.biginteger){if(0>t.signum())throw new di.builtin.ValueError("negative shift count");return new di.builtin.lng(this.biginteger.shiftLeft(t))}if(0>t)throw new di.builtin.ValueError("negative shift count");return t=di.builtin.asnum$(t),new di.builtin.lng(this.biginteger.shiftLeft(new di.builtin.biginteger(t)))},di.builtin.lng.prototype.nb$inplace_lshift=di.builtin.lng.prototype.nb$lshift,di.builtin.lng.prototype.nb$rshift=function(t){if(t instanceof di.builtin.lng){if(0>t.biginteger.signum())throw new di.builtin.ValueError("negative shift count");return new di.builtin.lng(this.biginteger.shiftRight(t.biginteger))}if(t instanceof di.builtin.biginteger){if(0>t.signum())throw new di.builtin.ValueError("negative shift count");return new di.builtin.lng(this.biginteger.shiftRight(t))}if(0>t)throw new di.builtin.ValueError("negative shift count");return t=di.builtin.asnum$(t),new di.builtin.lng(this.biginteger.shiftRight(new di.builtin.biginteger(t)))},di.builtin.lng.prototype.nb$inplace_rshift=di.builtin.lng.prototype.nb$rshift,di.builtin.lng.prototype.nb$and=function(t){return t instanceof di.builtin.lng?new di.builtin.lng(this.biginteger.and(t.biginteger)):t instanceof di.builtin.biginteger?new di.builtin.lng(this.biginteger.and(t)):(t=di.builtin.asnum$(t),new di.builtin.lng(this.biginteger.and(new di.builtin.biginteger(t))))},di.builtin.lng.prototype.nb$inplace_and=di.builtin.lng.prototype.nb$and,di.builtin.lng.prototype.nb$or=function(t){return t instanceof di.builtin.lng?new di.builtin.lng(this.biginteger.or(t.biginteger)):t instanceof di.builtin.biginteger?new di.builtin.lng(this.biginteger.or(t)):(t=di.builtin.asnum$(t),new di.builtin.lng(this.biginteger.or(new di.builtin.biginteger(t))))},di.builtin.lng.prototype.nb$inplace_or=di.builtin.lng.prototype.nb$or,di.builtin.lng.prototype.nb$xor=function(t){return t instanceof di.builtin.lng?new di.builtin.lng(this.biginteger.xor(t.biginteger)):t instanceof di.builtin.biginteger?new di.builtin.lng(this.biginteger.xor(t)):(t=di.builtin.asnum$(t),new di.builtin.lng(this.biginteger.xor(new di.builtin.biginteger(t))))},di.builtin.lng.prototype.nb$inplace_xor=di.builtin.lng.prototype.nb$xor,di.builtin.lng.prototype.nb$negative=function(){return new di.builtin.lng(this.biginteger.negate())},di.builtin.lng.prototype.nb$positive=function(){return this.clone()},di.builtin.lng.prototype.nb$nonzero=function(){return 0!==this.biginteger.trueCompare(di.builtin.biginteger.ZERO)},di.builtin.lng.prototype.nb$isnegative=function(){return this.biginteger.isnegative()},di.builtin.lng.prototype.nb$ispositive=function(){return!this.biginteger.isnegative()},di.builtin.lng.prototype.longCompare=function(t){return"boolean"==typeof t&&(t=t?1:0),"number"==typeof t&&(t=new di.builtin.lng(t)),t instanceof di.builtin.nmber?t.skType===di.builtin.nmber.int$||0==t.v%1?(t=new di.builtin.lng(t.v),this.longCompare(t)):new di.builtin.nmber(this,di.builtin.nmber.float$).numberCompare(t):t instanceof di.builtin.lng?this.biginteger.subtract(t.biginteger):t instanceof di.builtin.biginteger?this.biginteger.subtract(t):this.biginteger.subtract(new di.builtin.biginteger(t))},di.builtin.lng.prototype.__eq__=function(t,e){return 0==t.longCompare(e)&&!(e instanceof di.builtin.none)},di.builtin.lng.prototype.__ne__=function(t,e){return 0!=t.longCompare(e)||e instanceof di.builtin.none},di.builtin.lng.prototype.__lt__=function(t,e){return 0>t.longCompare(e)},di.builtin.lng.prototype.__le__=function(t,e){return 0>=t.longCompare(e)},di.builtin.lng.prototype.__gt__=function(t,e){return 0<t.longCompare(e)},di.builtin.lng.prototype.__ge__=function(t,e){return 0<=t.longCompare(e)},di.builtin.lng.prototype.$r=function(){return new di.builtin.str(this.str$(10,!0)+"L")},di.builtin.lng.prototype.tp$str=function(){return new di.builtin.str(this.str$(10,!0))},di.builtin.lng.prototype.str$=function(t,e){void 0===e&&(e=!0);var n=e?this.biginteger:this.biginteger.abs();return void 0===t||10===t?n.toString():n.toString(t)},di.str2number=function(t,e,n,i,r){var s=t,o=!1;if(t=t.replace(/^\s+|\s+$/g,""),"-"==t.charAt(0)&&(o=!0,t=t.substring(1)),"+"==t.charAt(0)&&(t=t.substring(1)),void 0===e&&(e=10),(2>e||e>36)&&0!=e)throw new di.builtin.ValueError(r+"() base must be >= 2 and <= 36");if("0x"==t.substring(0,2).toLowerCase()){if(16!=e&&0!=e)throw new di.builtin.ValueError("invalid literal for "+r+"() with base "+e+": '"+s+"'");t=t.substring(2),e=16}else if("0b"==t.substring(0,2).toLowerCase()){if(2!=e&&0!=e)throw new di.builtin.ValueError("invalid literal for "+r+"() with base "+e+": '"+s+"'");t=t.substring(2),e=2}else if("0o"==t.substring(0,2).toLowerCase()){if(8!=e&&0!=e)throw new di.builtin.ValueError("invalid literal for "+r+"() with base "+e+": '"+s+"'");t=t.substring(2),e=8}else if("0"==t.charAt(0)){if("0"==t)return 0;(8==e||0==e)&&(e=8)}if(0==e&&(e=10),0===t.length)throw new di.builtin.ValueError("invalid literal for "+r+"() with base "+e+": '"+s+"'");var a,l,u;for(a=0;a<t.length;a++)if(l=t.charCodeAt(a),u=e,l>=48&&57>=l?u=l-48:l>=65&&90>=l?u=l-65+10:l>=97&&122>=l&&(u=l-97+10),u>=e)throw new di.builtin.ValueError("invalid literal for "+r+"() with base "+e+": '"+s+"'");return u=n(t,e),o&&(u=i(u)),u},di.builtin.int_=function(t,e){if(void 0!==t&&!di.builtin.checkString(t)&&!di.builtin.checkNumber(t)){if(!(t instanceof di.builtin.bool))throw new di.builtin.TypeError("int() argument must be a string or a number, not '"+di.abstr.typeName(t)+"'");t=di.builtin.asnum$(t)}if(t instanceof di.builtin.str){e=di.builtin.asnum$(e);var n=di.str2number(t.v,e,parseInt,function(t){return-t},"int");return n>di.builtin.lng.threshold$||n<-di.builtin.lng.threshold$?new di.builtin.lng(t,e):new di.builtin.nmber(n,di.builtin.nmber.int$)}if(void 0!==e)throw new di.builtin.TypeError("int() can't convert non-string with explicit base");return t instanceof di.builtin.lng?t.cantBeInt()?new di.builtin.lng(t):new di.builtin.nmber(t.toInt$(),di.builtin.nmber.int$):(t=di.builtin.asnum$(t),new di.builtin.nmber(0|t,di.builtin.nmber.int$))},di.builtin.int_.prototype.tp$name="int",di.builtin.int_.prototype.ob$type=di.builtin.type.makeIntoTypeObj("int",di.builtin.int_),di.builtin.float_=function(t){if(void 0===t)return new di.builtin.nmber(0,di.builtin.nmber.float$);if(t instanceof di.builtin.str){if(t.v.match(/^-inf$/i))t=-1/0;else if(t.v.match(/^[+]?inf$/i))t=1/0;else if(t.v.match(/^[-+]?nan$/i))t=0/0;else{if(isNaN(t.v))throw new di.builtin.ValueError("float: Argument: "+t.v+" is not number");t=parseFloat(t.v)}return new di.builtin.nmber(t,di.builtin.nmber.float$)}if("number"==typeof t||t instanceof di.builtin.nmber||t instanceof di.builtin.lng)return t=di.builtin.asnum$(t),new di.builtin.nmber(t,di.builtin.nmber.float$);if(t instanceof di.builtin.bool)return t=di.builtin.asnum$(t),new di.builtin.nmber(t,di.builtin.nmber.float$);
throw new di.builtin.TypeError("float() argument must be a string or a number")},di.builtin.float_.prototype.tp$name="float",di.builtin.float_.prototype.ob$type=di.builtin.type.makeIntoTypeObj("float",di.builtin.float_),di.builtin.slice=function(t,e,n){return this instanceof di.builtin.slice?(void 0===e&&void 0===n&&(e=t,t=di.builtin.none.none$),void 0===e&&(e=di.builtin.none.none$),void 0===n&&(n=di.builtin.none.none$),this.start=t,this.stop=e,this.step=n,this.__class__=di.builtin.slice,this):new di.builtin.slice(t,e,n)},di.builtin.slice.prototype.tp$name="slice",di.builtin.slice.prototype.ob$type=di.builtin.type.makeIntoTypeObj("slice",di.builtin.slice),di.builtin.slice.prototype.$r=function(){var t=di.builtin.repr(this.start).v,e=di.builtin.repr(this.stop).v,n=di.builtin.repr(this.step).v;return new di.builtin.str("slice("+t+", "+e+", "+n+")")},di.builtin.slice.prototype.tp$getattr=function(t){return this[t]},di.builtin.slice.prototype.tp$richcompare=function(t,e){if(!t.__class__||t.__class__!=di.builtin.slice)return"Eq"===e?!1:"NotEq"===e?!0:!1;var n,i;return n=new di.builtin.tuple([this.start,this.stop,this.step]),i=new di.builtin.tuple([t.start,t.stop,t.step]),n.tp$richcompare(i,e)},di.builtin.slice.prototype.indices=function(t){var e=di.builtin.asnum$(this.start),n=di.builtin.asnum$(this.stop),i=di.builtin.asnum$(this.step);if(null!==e&&!di.builtin.checkInt(e)||null!==n&&!di.builtin.checkInt(n)||null!==i&&!di.builtin.checkInt(i))throw new di.builtin.TypeError("slice indices must be integers or None");return t=di.builtin.asnum$(t),null===i&&(i=1),i>0?(null===e&&(e=0),null===n&&(n=t),n>t&&(n=t),0>e&&(e=t+e,0>e&&(e=0)),0>n&&(n=t+n)):(null===e&&(e=t-1),e>=t&&(e=t-1),null===n?n=-1:0>n&&(n=t+n,0>n&&(n=-1)),0>e&&(e=t+e)),[e,n,i]},di.builtin.slice.prototype.sssiter$=function(t,e){var n=di.builtin.asnum$(t),i=this.indices("number"==typeof n?n:t.v.length);if(0<i[2]){var r;for(r=i[0];r<i[1]&&!1!==e(r,n);r+=i[2]);}else for(r=i[0];r>i[1]&&!1!==e(r,n);r+=i[2]);},di.builtin.set=function(t){if(!(this instanceof di.builtin.set))return new di.builtin.set(t);"undefined"==typeof t&&(t=[]),this.set_reset_(),t=new di.builtin.list(t).tp$iter();for(var e=t.tp$iternext();void 0!==e;e=t.tp$iternext())di.builtin.set.prototype.add.func_code(this,e);return this.__class__=di.builtin.set,this.v=this.v,this},di.builtin.set.prototype.ob$type=di.builtin.type.makeIntoTypeObj("set",di.builtin.set),di.builtin.set.prototype.set_iter_=function(){return di.builtin.dict.prototype.keys.func_code(this.v).tp$iter()},di.builtin.set.prototype.set_reset_=function(){this.v=new di.builtin.dict([])},di.builtin.set.prototype.tp$name="set",di.builtin.set.prototype.$r=function(){for(var t=[],e=this.tp$iter(),n=e.tp$iternext();void 0!==n;n=e.tp$iternext())t.push(di.misceval.objectRepr(n).v);return new di.builtin.str("set(["+t.join(", ")+"])")},di.builtin.set.prototype.tp$getattr=di.builtin.object.prototype.GenericGetAttr,di.builtin.set.prototype.tp$hash=di.builtin.object.prototype.HashNotImplemented,di.builtin.set.prototype.tp$richcompare=function(t,e){if(this===t&&di.misceval.opAllowsEquality(e))return!0;if(!t.__class__||t.__class__!=di.builtin.set)return"Eq"===e?!1:"NotEq"===e?!0:!1;var n=this.sq$length(),i=t.sq$length();if(i!==n){if("Eq"===e)return!1;if("NotEq"===e)return!0}var r=!1,s=!1;switch(e){case"Lt":case"LtE":case"Eq":case"NotEq":r=di.builtin.set.prototype.issubset.func_code(this,t);break;case"Gt":case"GtE":s=di.builtin.set.prototype.issuperset.func_code(this,t);break;default:pi.asserts.fail()}switch(e){case"Lt":return i>n&&r;case"LtE":case"Eq":return r;case"NotEq":return!r;case"Gt":return n>i&&s;case"GtE":return s}},di.builtin.set.prototype.tp$iter=di.builtin.set.prototype.set_iter_,di.builtin.set.prototype.sq$length=function(){return this.v.mp$length()},di.builtin.set.prototype.isdisjoint=new di.builtin.func(function(t,e){for(var n=t.tp$iter(),i=n.tp$iternext();void 0!==i;i=n.tp$iternext())if(di.abstr.sequenceContains(e,i))return di.builtin.bool.false$;return di.builtin.bool.true$}),di.builtin.set.prototype.issubset=new di.builtin.func(function(t,e){var n=t.sq$length(),i=e.sq$length();if(n>i)return di.builtin.bool.false$;for(n=t.tp$iter(),i=n.tp$iternext();void 0!==i;i=n.tp$iternext())if(!di.abstr.sequenceContains(e,i))return di.builtin.bool.false$;return di.builtin.bool.true$}),di.builtin.set.prototype.issuperset=new di.builtin.func(function(t,e){return di.builtin.set.prototype.issubset.func_code(e,t)}),di.builtin.set.prototype.union=new di.builtin.func(function(t){for(var e=new di.builtin.set(t),n=1;n<arguments.length;n++)di.builtin.set.prototype.update.func_code(e,arguments[n]);return e}),di.builtin.set.prototype.intersection=new di.builtin.func(function(t){var e=di.builtin.set.prototype.copy.func_code(t);return arguments[0]=e,di.builtin.set.prototype.intersection_update.func_code.apply(null,arguments),e}),di.builtin.set.prototype.difference=new di.builtin.func(function(t){var e=di.builtin.set.prototype.copy.func_code(t);return arguments[0]=e,di.builtin.set.prototype.difference_update.func_code.apply(null,arguments),e}),di.builtin.set.prototype.symmetric_difference=new di.builtin.func(function(t,e){for(var n=di.builtin.set.prototype.union.func_code(t,e),i=n.tp$iter(),r=i.tp$iternext();void 0!==r;r=i.tp$iternext())di.abstr.sequenceContains(t,r)&&di.abstr.sequenceContains(e,r)&&di.builtin.set.prototype.discard.func_code(n,r);return n}),di.builtin.set.prototype.copy=new di.builtin.func(function(t){return new di.builtin.set(t)}),di.builtin.set.prototype.update=new di.builtin.func(function(t,e){for(var n=e.tp$iter(),i=n.tp$iternext();void 0!==i;i=n.tp$iternext())di.builtin.set.prototype.add.func_code(t,i);return di.builtin.none.none$}),di.builtin.set.prototype.intersection_update=new di.builtin.func(function(t){for(var e=t.tp$iter(),n=e.tp$iternext();void 0!==n;n=e.tp$iternext())for(var i=1;i<arguments.length;i++)if(!di.abstr.sequenceContains(arguments[i],n)){di.builtin.set.prototype.discard.func_code(t,n);break}return di.builtin.none.none$}),di.builtin.set.prototype.difference_update=new di.builtin.func(function(t){for(var e=t.tp$iter(),n=e.tp$iternext();void 0!==n;n=e.tp$iternext())for(var i=1;i<arguments.length;i++)if(di.abstr.sequenceContains(arguments[i],n)){di.builtin.set.prototype.discard.func_code(t,n);break}return di.builtin.none.none$}),di.builtin.set.prototype.symmetric_difference_update=new di.builtin.func(function(t,e){var n=di.builtin.set.prototype.symmetric_difference.func_code(t,e);return t.set_reset_(),di.builtin.set.prototype.update.func_code(t,n),di.builtin.none.none$}),di.builtin.set.prototype.add=new di.builtin.func(function(t,e){return t.v.mp$ass_subscript(e,!0),di.builtin.none.none$}),di.builtin.set.prototype.discard=new di.builtin.func(function(t,e){if(void 0!==t.v.mp$lookup(e)){var n=di.builtin.hash,n=n(e);void 0!==t.v[n]&&(t.v.size-=1,delete t.v[n])}return di.builtin.none.none$}),di.builtin.set.prototype.pop=new di.builtin.func(function(t){if(0===t.sq$length())throw new di.builtin.KeyError("pop from an empty set");var e=t.tp$iter().tp$iternext();return di.builtin.set.prototype.discard.func_code(t,e),e}),di.builtin.set.prototype.remove=new di.builtin.func(function(t,e){return t.v.mp$del_subscript(e),di.builtin.none.none$}),pi.exportSymbol("Sk.builtin.set",di.builtin.set),di.builtin.module=function(){},pi.exportSymbol("Sk.builtin.module",di.builtin.module),di.builtin.module.prototype.ob$type=di.builtin.type.makeIntoTypeObj("module",di.builtin.module),di.builtin.module.prototype.tp$getattr=di.builtin.object.prototype.GenericGetAttr,di.builtin.module.prototype.tp$setattr=di.builtin.object.prototype.GenericSetAttr,di.builtin.generator=function(t,e,n,i,r){if(t){if(this.func_code=t,this.func_globals=e||null,this.gi$running=!1,this.gi$resumeat=0,this.gi$sentvalue=void 0,this.gi$locals={},0<n.length)for(e=0;e<t.co_varnames.length;++e)this.gi$locals[t.co_varnames[e]]=n[e];if(void 0!==r)for(var s in r)i[s]=r[s];return this.func_closure=i,this}},pi.exportSymbol("Sk.builtin.generator",di.builtin.generator),di.builtin.generator.prototype.tp$getattr=di.builtin.object.prototype.GenericGetAttr,di.builtin.generator.prototype.tp$iter=function(){return this},di.builtin.generator.prototype.tp$iternext=function(t){return this.gi$running=!0,void 0===t&&(t=null),this.gi$sentvalue=t,t=[this],this.func_closure&&t.push(this.func_closure),t=this.func_code.apply(this.func_globals,t),this.gi$running=!1,pi.asserts.assert(void 0!==t),null!==t?(this.gi$resumeat=t[0],t=t[1]):void 0},di.builtin.generator.prototype.next=new di.builtin.func(function(t){return t.tp$iternext()}),di.builtin.generator.prototype.ob$type=di.builtin.type.makeIntoTypeObj("generator",di.builtin.generator),di.builtin.generator.prototype.$r=function(){return new di.builtin.str("<generator object "+this.func_code.co_name.v+">")},di.builtin.generator.prototype.send=new di.builtin.func(function(t,e){return t.tp$iternext(e)}),di.builtin.makeGenerator=function(t,e){var n=new di.builtin.generator(null,null,null);n.tp$iternext=t;for(var i in e)e.hasOwnProperty(i)&&(n[i]=e[i]);return n},pi.exportSymbol("Sk.builtin.makeGenerator",di.builtin.makeGenerator),di.builtin.file=function(t,e){if(this.mode=e,this.name=t,this.closed=!1,di.inBrowser){if(e=document.getElementById(t.v),null==e)throw new di.builtin.IOError("[Errno 2] No such file or directory: '"+t.v+"'");this.data$="textarea"==e.nodeName.toLowerCase()?e.value:e.textContent}else this.data$=di.read(t.v);this.lineList=this.data$.split("\n"),this.lineList=this.lineList.slice(0,-1);for(var n in this.lineList)this.lineList[n]+="\n";return this.pos$=this.currentLine=0,this.__class__=di.builtin.file,this},di.builtin.file.prototype.ob$type=di.builtin.type.makeIntoTypeObj("file",di.builtin.file),di.builtin.file.prototype.tp$getattr=di.builtin.object.prototype.GenericGetAttr,di.builtin.file.prototype.$r=function(){return new di.builtin.str("<"+(this.closed?"closed":"open")+"file '"+this.name+"', mode '"+this.mode+"'>")},di.builtin.file.prototype.tp$iter=function(){var t={tp$iter:function(){return t},$obj:this,$index:0,$lines:this.lineList,tp$iternext:function(){return t.$index>=t.$lines.length?void 0:new di.builtin.str(t.$lines[t.$index++])}};return t},di.builtin.file.prototype.close=new di.builtin.func(function(t){t.closed=!0}),di.builtin.file.prototype.flush=new di.builtin.func(function(){}),di.builtin.file.prototype.fileno=new di.builtin.func(function(){return 10}),di.builtin.file.prototype.isatty=new di.builtin.func(function(){return!1}),di.builtin.file.prototype.read=new di.builtin.func(function(t,e){if(t.closed)throw new di.builtin.ValueError("I/O operation on closed file");var n=t.data$.length;void 0===e&&(e=n);var i=new di.builtin.str(t.data$.substr(t.pos$,e));return t.pos$+=e,t.pos$>=n&&(t.pos$=n),i}),di.builtin.file.prototype.readline=new di.builtin.func(function(t){var e="";return t.currentLine<t.lineList.length&&(e=t.lineList[t.currentLine],t.currentLine++),new di.builtin.str(e)}),di.builtin.file.prototype.readlines=new di.builtin.func(function(t){for(var e=[],n=t.currentLine;n<t.lineList.length;n++)e.push(new di.builtin.str(t.lineList[n]));return new di.builtin.list(e)}),di.builtin.file.prototype.seek=new di.builtin.func(function(t,e,n){void 0===n&&(n=1),t.pos$=1==n?e:t.data$+e}),di.builtin.file.prototype.tell=new di.builtin.func(function(t){return t.pos$}),di.builtin.file.prototype.truncate=new di.builtin.func(function(){pi.asserts.fail()}),di.builtin.file.prototype.write=new di.builtin.func(function(){pi.asserts.fail()}),pi.exportSymbol("Sk.builtin.file",di.builtin.file),di.ffi=di.ffi||{},di.ffi.remapToPy=function(t){if("[object Array]"===Object.prototype.toString.call(t)){for(var e=[],n=0;n<t.length;++n)e.push(di.ffi.remapToPy(t[n]));return new di.builtin.list(e)}if("object"==typeof t){e=[];for(n in t)e.push(di.ffi.remapToPy(n)),e.push(di.ffi.remapToPy(t[n]));return new di.builtin.dict(e)}return"string"==typeof t?new di.builtin.str(t):"number"==typeof t?new di.builtin.nmber(t,void 0):"boolean"==typeof t?t:(pi.asserts.fail("unhandled remap type "+typeof t),void 0)},pi.exportSymbol("Sk.ffi.remapToPy",di.ffi.remapToPy),di.ffi.remapToJs=function(t){if(t instanceof di.builtin.dict){for(var e={},n=t.tp$iter(),i=n.tp$iternext();void 0!==i;i=n.tp$iternext()){var r=t.mp$subscript(i);void 0===r&&(r=null),i=di.ffi.remapToJs(i),e[i]=di.ffi.remapToJs(r)}return e}if(t instanceof di.builtin.list){for(e=[],n=0;n<t.v.length;++n)e.push(di.ffi.remapToJs(t.v[n]));return e}return t instanceof di.builtin.nmber?di.builtin.asnum$(t):t instanceof di.builtin.lng?di.builtin.asnum$(t):"number"==typeof t||"boolean"==typeof t?t:t.v},pi.exportSymbol("Sk.ffi.remapToJs",di.ffi.remapToJs),di.ffi.callback=function(t){return void 0===t?t:function(){return di.misceval.apply(t,void 0,void 0,void 0,Array.prototype.slice.call(arguments,0))}},pi.exportSymbol("Sk.ffi.callback",di.ffi.callback),di.ffi.stdwrap=function(t,e){var n=new t;return n.v=e,n},pi.exportSymbol("Sk.ffi.stdwrap",di.ffi.stdwrap),di.ffi.basicwrap=function(t){return t instanceof di.builtin.nmber?di.builtin.asnum$(t):t instanceof di.builtin.lng?di.builtin.asnum$(t):"number"==typeof t||"boolean"==typeof t?t:"string"==typeof t?new di.builtin.str(t):(pi.asserts.fail("unexpected type for basicwrap"),void 0)},pi.exportSymbol("Sk.ffi.basicwrap",di.ffi.basicwrap),di.ffi.unwrapo=function(t){return void 0===t?void 0:t.v},pi.exportSymbol("Sk.ffi.unwrapo",di.ffi.unwrapo),di.ffi.unwrapn=function(t){return null===t?null:t.v},pi.exportSymbol("Sk.ffi.unwrapn",di.ffi.unwrapn),di.builtin.enumerate=function(t,e){if(!(this instanceof di.builtin.enumerate))return new di.builtin.enumerate(t,e);if(di.builtin.pyCheckArgs("enumerate",arguments,1,2),!di.builtin.checkIterable(t))throw new di.builtin.TypeError("'"+di.abstr.typeName(t)+"' object is not iterable");if(void 0!==e){if(!di.misceval.isIndex(e))throw new di.builtin.TypeError("'"+di.abstr.typeName(e)+"' object cannot be interpreted as an index");e=di.misceval.asIndex(e)}else e=0;var n=t.tp$iter();return this.tp$iter=function(){return this},this.$index=e,this.tp$iternext=function(){var t=n.tp$iternext();return void 0===t?void 0:new di.builtin.tuple([this.$index++,t])},this.__class__=di.builtin.enumerate,this},di.builtin.enumerate.prototype.tp$name="enumerate",di.builtin.enumerate.prototype.ob$type=di.builtin.type.makeIntoTypeObj("enumerate",di.builtin.enumerate),di.builtin.enumerate.prototype.tp$getattr=di.builtin.object.prototype.GenericGetAttr,di.builtin.enumerate.prototype.__iter__=new di.builtin.func(function(t){return t.tp$iter()}),di.builtin.enumerate.prototype.next=new di.builtin.func(function(t){return t.tp$iternext()}),di.Tokenizer=function(t,e,n){this.filename=t,this.callback=n,this.parenlev=this.lnum=0,this.continued=!1,this.namechars="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ_",this.numchars="0123456789",this.contstr="",this.needcont=!1,this.contline=void 0,this.indents=[0],this.endprog=/.*/,this.strstart=[-1,-1],this.interactive=e,this.doneFunc=function(){for(var t=1;t<this.indents.length;++t)if(this.callback(di.Tokenizer.Tokens.T_DEDENT,"",[this.lnum,0],[this.lnum,0],""))return"done";return this.callback(di.Tokenizer.Tokens.T_ENDMARKER,"",[this.lnum,0],[this.lnum,0],"")?"done":"failed"}},di.Tokenizer.Tokens={T_ENDMARKER:0,T_NAME:1,T_NUMBER:2,T_STRING:3,T_NEWLINE:4,T_INDENT:5,T_DEDENT:6,T_LPAR:7,T_RPAR:8,T_LSQB:9,T_RSQB:10,T_COLON:11,T_COMMA:12,T_SEMI:13,T_PLUS:14,T_MINUS:15,T_STAR:16,T_SLASH:17,T_VBAR:18,T_AMPER:19,T_LESS:20,T_GREATER:21,T_EQUAL:22,T_DOT:23,T_PERCENT:24,T_BACKQUOTE:25,T_LBRACE:26,T_RBRACE:27,T_EQEQUAL:28,T_NOTEQUAL:29,T_LESSEQUAL:30,T_GREATEREQUAL:31,T_TILDE:32,T_CIRCUMFLEX:33,T_LEFTSHIFT:34,T_RIGHTSHIFT:35,T_DOUBLESTAR:36,T_PLUSEQUAL:37,T_MINEQUAL:38,T_STAREQUAL:39,T_SLASHEQUAL:40,T_PERCENTEQUAL:41,T_AMPEREQUAL:42,T_VBAREQUAL:43,T_CIRCUMFLEXEQUAL:44,T_LEFTSHIFTEQUAL:45,T_RIGHTSHIFTEQUAL:46,T_DOUBLESTAREQUAL:47,T_DOUBLESLASH:48,T_DOUBLESLASHEQUAL:49,T_AT:50,T_OP:51,T_COMMENT:52,T_NL:53,T_RARROW:54,T_ERRORTOKEN:55,T_N_TOKENS:56,T_NT_OFFSET:256};var Ki="#[^\\r\\n]*",Fi="[a-zA-Z_]\\w*",Bi="0[bB][01]*",Pi="0[xX][\\da-fA-F]*[lL]?",Oi="0[oO]?[0-7]*[lL]?",ji="[1-9]\\d*[lL]?",Gi=p(Bi,Pi,Oi,ji),qi="[eE][-+]?\\d+",zi=p("\\d+\\.\\d*","\\.\\d+")+d(qi),Hi="\\d+"+qi,Ui=p(zi,Hi),Wi=p("\\d+[jJ]",Ui+"[jJ]"),Vi=p(Wi,Ui,Gi),Xi="^[^'\\\\]*(?:\\\\.[^'\\\\]*)*'",Qi='^[^"\\\\]*(?:\\\\.[^"\\\\]*)*"',Yi="[^'\\\\]*(?:(?:\\\\.|'(?!''))[^'\\\\]*)*'''",Zi='[^"\\\\]*(?:(?:\\\\.|"(?!""))[^"\\\\]*)*"""',Ji=p("[ubUB]?[rR]?'''",'[ubUB]?[rR]?"""'),tr=(p("[uU]?[rR]?'[^\\n'\\\\]*(?:\\\\.[^\\n'\\\\]*)*'",'[uU]?[rR]?"[^\\n"\\\\]*(?:\\\\.[^\\n"\\\\]*)*"'),p("\\*\\*=?",">>=?","<<=?","<>","!=","//=?","->","[+\\-*/%&|^=<>]=?","~")),er="[\\][(){}]",nr=p("\\r?\\n","[:;.,`@]"),ir=p(tr,er,nr),rr=p("[uUbB]?[rR]?'[^\\n'\\\\]*(?:\\\\.[^\\n'\\\\]*)*"+p("'","\\\\\\r?\\n"),'[uUbB]?[rR]?"[^\\n"\\\\]*(?:\\\\.[^\\n"\\\\]*)*'+p('"',"\\\\\\r?\\n")),sr=p("\\\\\\r?\\n",Ki,Ji),or="^"+p(sr,Vi,ir,rr,Fi),ar={"'''":!0,'"""':!0,"r'''":!0,'r"""':!0,"R'''":!0,'R"""':!0,"u'''":!0,'u"""':!0,"U'''":!0,'U"""':!0,"b'''":!0,'b"""':!0,"B'''":!0,'B"""':!0,"ur'''":!0,'ur"""':!0,"Ur'''":!0,'Ur"""':!0,"uR'''":!0,'uR"""':!0,"UR'''":!0,'UR"""':!0,"br'''":!0,'br"""':!0,"Br'''":!0,'Br"""':!0,"bR'''":!0,'bR"""':!0,"BR'''":!0,'BR"""':!0},lr={"'":!0,'"':!0,"r'":!0,'r"':!0,"R'":!0,'R"':!0,"u'":!0,'u"':!0,"U'":!0,'U"':!0,"b'":!0,'b"':!0,"B'":!0,'B"':!0,"ur'":!0,'ur"':!0,"Ur'":!0,'Ur"':!0,"uR'":!0,'uR"':!0,"UR'":!0,'UR"':!0,"br'":!0,'br"':!0,"Br'":!0,'Br"':!0,"bR'":!0,'bR"':!0,"BR'":!0,'BR"':!0};!function(){for(var t in ar);for(t in lr);}();var ur=8;di.Tokenizer.prototype.generateTokens=function(t){var e,n,i,r,s,o=RegExp(or);n=RegExp(Yi,"g"),s=RegExp(Zi,"g");var a={"'":RegExp(Xi,"g"),'"':RegExp(Qi,"g"),"'''":n,'"""':s,"r'''":n,'r"""':s,"u'''":n,'u"""':s,"b'''":n,'b"""':s,"ur'''":n,'ur"""':s,"br'''":n,'br"""':s,"R'''":n,'R"""':s,"U'''":n,'U"""':s,"B'''":n,'B"""':s,"uR'''":n,'uR"""':s,"Ur'''":n,'Ur"""':s,"UR'''":n,'UR"""':s,"bR'''":n,'bR"""':s,"Br'''":n,'Br"""':s,"BR'''":n,'BR"""':s,r:null,R:null,u:null,U:null,b:null,B:null};if(t||(t=""),this.lnum+=1,n=0,s=t.length,0<this.contstr.length){if(!t)throw new di.builtin.TokenError("EOF in multi-line string",this.filename,this.strstart[0],this.strstart[1],this.contline);if(this.endprog.lastIndex=0,!(e=this.endprog.test(t))){if(this.needcont&&"\\\n"!==t.substring(t.length-2)&&"\\\r\n"!==t.substring(t.length-3)){if(this.callback(di.Tokenizer.Tokens.T_ERRORTOKEN,this.contstr+t,this.strstart,[this.lnum,t.length],this.contline))return"done";this.contstr="",this.contline=void 0}else this.contstr+=t,this.contline+=t;return!1}if(n=r=this.endprog.lastIndex,this.callback(di.Tokenizer.Tokens.T_STRING,this.contstr+t.substring(0,r),this.strstart,[this.lnum,r],this.contline+t))return"done";this.contstr="",this.needcont=!1,this.contline=void 0}else if(0!==this.parenlev||this.continued){if(!t)throw new di.builtin.TokenError("EOF in multi-line statement",this.filename,this.lnum,0,t);this.continued=!1}else{if(!t)return this.doneFunc();for(i=0;s>n;){if(" "===t.charAt(n))i+=1;else if("	"===t.charAt(n))i=(i/ur+1)*ur;else{if("\f"!==t.charAt(n))break;i=0}n+=1}if(n===s)return this.doneFunc();if(-1!=="#\r\n".indexOf(t.charAt(n))){if("#"===t.charAt(n))return o=m(t.substring(n),"\r\n"),s=n+o.length,this.callback(di.Tokenizer.Tokens.T_COMMENT,o,[this.lnum,n],[this.lnum,n+o.length],t)||this.callback(di.Tokenizer.Tokens.T_NL,t.substring(s),[this.lnum,s],[this.lnum,t.length],t)?"done":!1;if(this.callback(di.Tokenizer.Tokens.T_NL,t.substring(n),[this.lnum,n],[this.lnum,t.length],t))return"done";if(!this.interactive)return!1}if(i>this.indents[this.indents.length-1]&&(this.indents.push(i),this.callback(di.Tokenizer.Tokens.T_INDENT,t.substring(0,n),[this.lnum,0],[this.lnum,n],t)))return"done";for(;i<this.indents[this.indents.length-1];){if(!b(this.indents,i))throw new di.builtin.IndentationError("unindent does not match any outer indentation level",this.filename,this.lnum,n,t);if(this.indents.splice(this.indents.length-1,1),this.callback(di.Tokenizer.Tokens.T_DEDENT,"",[this.lnum,n],[this.lnum,n],t))return"done"}}for(;s>n;){for(i=t.charAt(n);" "===i||"\f"===i||"	"===i;)n+=1,i=t.charAt(n);o.lastIndex=0;var l=o.exec(t.substring(n));if(l){i=n,r=i+l[1].length,l=[this.lnum,i],e=[this.lnum,r],n=r,r=t.substring(i,r);var u=t.charAt(i);if(-1!==this.numchars.indexOf(u)||"."===u&&"."!==r){if(this.callback(di.Tokenizer.Tokens.T_NUMBER,r,l,e,t))return"done"}else if("\r"===u||"\n"===u){if(i=di.Tokenizer.Tokens.T_NEWLINE,0<this.parenlev&&(i=di.Tokenizer.Tokens.T_NL),this.callback(i,r,l,e,t))return"done"}else if("#"===u){if(this.callback(di.Tokenizer.Tokens.T_COMMENT,r,l,e,t))return"done"}else if(ar.hasOwnProperty(r)){if(this.endprog=a[r],this.endprog.lastIndex=0,!(e=this.endprog.test(t.substring(n)))){this.strstart=[this.lnum,i],this.contstr=t.substring(i),this.contline=t;break}if(n=this.endprog.lastIndex+n,r=t.substring(i,n),this.callback(di.Tokenizer.Tokens.T_STRING,r,l,[this.lnum,n],t))return"done"}else if(lr.hasOwnProperty(u)||lr.hasOwnProperty(r.substring(0,2))||lr.hasOwnProperty(r.substring(0,3))){if("\n"===r[r.length-1]){this.strstart=[this.lnum,i],this.endprog=a[u]||a[r[1]]||a[r[2]],this.contstr=t.substring(i),this.needcont=!0,this.contline=t;break}if(this.callback(di.Tokenizer.Tokens.T_STRING,r,l,e,t))return"done"}else if(-1!==this.namechars.indexOf(u)){if(this.callback(di.Tokenizer.Tokens.T_NAME,r,l,e,t))return"done"}else if("\\"===u){if(this.callback(di.Tokenizer.Tokens.T_NL,r,l,[this.lnum,n],t))return"done";this.continued=!0}else if(-1!=="([{".indexOf(u)?this.parenlev+=1:-1!==")]}".indexOf(u)&&(this.parenlev-=1),this.callback(di.Tokenizer.Tokens.T_OP,r,l,e,t))return"done"}else{if(this.callback(di.Tokenizer.Tokens.T_ERRORTOKEN,t.charAt(n),[this.lnum,n],[this.lnum,n+1],t))return"done";n+=1}}return!1},di.Tokenizer.tokenNames={0:"T_ENDMARKER",1:"T_NAME",2:"T_NUMBER",3:"T_STRING",4:"T_NEWLINE",5:"T_INDENT",6:"T_DEDENT",7:"T_LPAR",8:"T_RPAR",9:"T_LSQB",10:"T_RSQB",11:"T_COLON",12:"T_COMMA",13:"T_SEMI",14:"T_PLUS",15:"T_MINUS",16:"T_STAR",17:"T_SLASH",18:"T_VBAR",19:"T_AMPER",20:"T_LESS",21:"T_GREATER",22:"T_EQUAL",23:"T_DOT",24:"T_PERCENT",25:"T_BACKQUOTE",26:"T_LBRACE",27:"T_RBRACE",28:"T_EQEQUAL",29:"T_NOTEQUAL",30:"T_LESSEQUAL",31:"T_GREATEREQUAL",32:"T_TILDE",33:"T_CIRCUMFLEX",34:"T_LEFTSHIFT",35:"T_RIGHTSHIFT",36:"T_DOUBLESTAR",37:"T_PLUSEQUAL",38:"T_MINEQUAL",39:"T_STAREQUAL",40:"T_SLASHEQUAL",41:"T_PERCENTEQUAL",42:"T_AMPEREQUAL",43:"T_VBAREQUAL",44:"T_CIRCUMFLEXEQUAL",45:"T_LEFTSHIFTEQUAL",46:"T_RIGHTSHIFTEQUAL",47:"T_DOUBLESTAREQUAL",48:"T_DOUBLESLASH",49:"T_DOUBLESLASHEQUAL",50:"T_AT",51:"T_OP",52:"T_COMMENT",53:"T_NL",54:"T_RARROW",55:"T_ERRORTOKEN",56:"T_N_TOKENS",256:"T_NT_OFFSET"},pi.exportSymbol("Sk.Tokenizer",di.Tokenizer),pi.exportSymbol("Sk.Tokenizer.prototype.generateTokens",di.Tokenizer.prototype.generateTokens),pi.exportSymbol("Sk.Tokenizer.tokenNames",di.Tokenizer.tokenNames),di.OpMap={"(":di.Tokenizer.Tokens.T_LPAR,")":di.Tokenizer.Tokens.T_RPAR,"[":di.Tokenizer.Tokens.T_LSQB,"]":di.Tokenizer.Tokens.T_RSQB,":":di.Tokenizer.Tokens.T_COLON,",":di.Tokenizer.Tokens.T_COMMA,";":di.Tokenizer.Tokens.T_SEMI,"+":di.Tokenizer.Tokens.T_PLUS,"-":di.Tokenizer.Tokens.T_MINUS,"*":di.Tokenizer.Tokens.T_STAR,"/":di.Tokenizer.Tokens.T_SLASH,"|":di.Tokenizer.Tokens.T_VBAR,"&":di.Tokenizer.Tokens.T_AMPER,"<":di.Tokenizer.Tokens.T_LESS,">":di.Tokenizer.Tokens.T_GREATER,"=":di.Tokenizer.Tokens.T_EQUAL,".":di.Tokenizer.Tokens.T_DOT,"%":di.Tokenizer.Tokens.T_PERCENT,"`":di.Tokenizer.Tokens.T_BACKQUOTE,"{":di.Tokenizer.Tokens.T_LBRACE,"}":di.Tokenizer.Tokens.T_RBRACE,"@":di.Tokenizer.Tokens.T_AT,"==":di.Tokenizer.Tokens.T_EQEQUAL,"!=":di.Tokenizer.Tokens.T_NOTEQUAL,"<>":di.Tokenizer.Tokens.T_NOTEQUAL,"<=":di.Tokenizer.Tokens.T_LESSEQUAL,">=":di.Tokenizer.Tokens.T_GREATEREQUAL,"~":di.Tokenizer.Tokens.T_TILDE,"^":di.Tokenizer.Tokens.T_CIRCUMFLEX,"<<":di.Tokenizer.Tokens.T_LEFTSHIFT,">>":di.Tokenizer.Tokens.T_RIGHTSHIFT,"**":di.Tokenizer.Tokens.T_DOUBLESTAR,"+=":di.Tokenizer.Tokens.T_PLUSEQUAL,"-=":di.Tokenizer.Tokens.T_MINEQUAL,"*=":di.Tokenizer.Tokens.T_STAREQUAL,"/=":di.Tokenizer.Tokens.T_SLASHEQUAL,"%=":di.Tokenizer.Tokens.T_PERCENTEQUAL,"&=":di.Tokenizer.Tokens.T_AMPEREQUAL,"|=":di.Tokenizer.Tokens.T_VBAREQUAL,"^=":di.Tokenizer.Tokens.T_CIRCUMFLEXEQUAL,"<<=":di.Tokenizer.Tokens.T_LEFTSHIFTEQUAL,">>=":di.Tokenizer.Tokens.T_RIGHTSHIFTEQUAL,"**=":di.Tokenizer.Tokens.T_DOUBLESTAREQUAL,"//":di.Tokenizer.Tokens.T_DOUBLESLASH,"//=":di.Tokenizer.Tokens.T_DOUBLESLASHEQUAL,"->":di.Tokenizer.Tokens.T_RARROW},di.ParseTables={sym:{and_expr:257,and_test:258,arglist:259,argument:260,arith_expr:261,assert_stmt:262,atom:263,augassign:264,break_stmt:265,classdef:266,comp_op:267,comparison:268,compound_stmt:269,continue_stmt:270,decorated:271,decorator:272,decorators:273,del_stmt:274,dictmaker:275,dotted_as_name:276,dotted_as_names:277,dotted_name:278,encoding_decl:279,eval_input:280,except_clause:281,exec_stmt:282,expr:283,expr_stmt:284,exprlist:285,factor:286,file_input:287,flow_stmt:288,for_stmt:289,fpdef:290,fplist:291,funcdef:292,gen_for:293,gen_if:294,gen_iter:295,global_stmt:296,if_stmt:297,import_as_name:298,import_as_names:299,import_from:300,import_name:301,import_stmt:302,lambdef:303,list_for:304,list_if:305,list_iter:306,listmaker:307,not_test:308,old_lambdef:309,old_test:310,or_test:311,parameters:312,pass_stmt:313,power:314,print_stmt:315,raise_stmt:316,return_stmt:317,shift_expr:318,simple_stmt:319,single_input:256,sliceop:320,small_stmt:321,stmt:322,subscript:323,subscriptlist:324,suite:325,term:326,test:327,testlist:328,testlist1:329,testlist_gexp:330,testlist_safe:331,trailer:332,try_stmt:333,varargslist:334,while_stmt:335,with_stmt:336,with_var:337,xor_expr:338,yield_expr:339,yield_stmt:340},number2symbol:{256:"single_input",257:"and_expr",258:"and_test",259:"arglist",260:"argument",261:"arith_expr",262:"assert_stmt",263:"atom",264:"augassign",265:"break_stmt",266:"classdef",267:"comp_op",268:"comparison",269:"compound_stmt",270:"continue_stmt",271:"decorated",272:"decorator",273:"decorators",274:"del_stmt",275:"dictmaker",276:"dotted_as_name",277:"dotted_as_names",278:"dotted_name",279:"encoding_decl",280:"eval_input",281:"except_clause",282:"exec_stmt",283:"expr",284:"expr_stmt",285:"exprlist",286:"factor",287:"file_input",288:"flow_stmt",289:"for_stmt",290:"fpdef",291:"fplist",292:"funcdef",293:"gen_for",294:"gen_if",295:"gen_iter",296:"global_stmt",297:"if_stmt",298:"import_as_name",299:"import_as_names",300:"import_from",301:"import_name",302:"import_stmt",303:"lambdef",304:"list_for",305:"list_if",306:"list_iter",307:"listmaker",308:"not_test",309:"old_lambdef",310:"old_test",311:"or_test",312:"parameters",313:"pass_stmt",314:"power",315:"print_stmt",316:"raise_stmt",317:"return_stmt",318:"shift_expr",319:"simple_stmt",320:"sliceop",321:"small_stmt",322:"stmt",323:"subscript",324:"subscriptlist",325:"suite",326:"term",327:"test",328:"testlist",329:"testlist1",330:"testlist_gexp",331:"testlist_safe",332:"trailer",333:"try_stmt",334:"varargslist",335:"while_stmt",336:"with_stmt",337:"with_var",338:"xor_expr",339:"yield_expr",340:"yield_stmt"},dfas:{256:[[[[1,1],[2,1],[3,2]],[[0,1]],[[2,1]]],{2:1,4:1,5:1,6:1,7:1,8:1,9:1,10:1,11:1,12:1,13:1,14:1,15:1,16:1,17:1,18:1,19:1,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:1,28:1,29:1,30:1,31:1,32:1,33:1,34:1,35:1,36:1}],257:[[[[37,1]],[[38,0],[0,1]]],{6:1,8:1,9:1,11:1,13:1,17:1,20:1,24:1,28:1,35:1}],258:[[[[39,1]],[[40,0],[0,1]]],{6:1,7:1,8:1,9:1,11:1,13:1,17:1,20:1,24:1,28:1,35:1}],259:[[[[41,1],[42,2],[43,3]],[[44,4]],[[45,5],[0,2]],[[44,6]],[[45,7],[0,4]],[[41,1],[42,2],[43,3],[0,5]],[[0,6]],[[42,4],[43,3]]],{6:1,7:1,8:1,9:1,11:1,13:1,17:1,20:1,24:1,28:1,35:1,36:1,41:1,43:1}],260:[[[[44,1]],[[46,2],[47,3],[0,1]],[[0,2]],[[44,2]]],{6:1,7:1,8:1,9:1,11:1,13:1,17:1,20:1,24:1,28:1,35:1,36:1}],261:[[[[48,1]],[[24,0],[35,0],[0,1]]],{6:1,8:1,9:1,11:1,13:1,17:1,20:1,24:1,28:1,35:1}],262:[[[[19,1]],[[44,2]],[[45,3],[0,2]],[[44,4]],[[0,4]]],{19:1}],263:[[[[17,1],[8,2],[9,5],[28,4],[11,3],[13,6],[20,2]],[[17,1],[0,1]],[[0,2]],[[49,7],[50,2]],[[51,2],[52,8],[53,8]],[[54,9],[55,2]],[[56,10]],[[50,2]],[[51,2]],[[55,2]],[[13,2]]],{8:1,9:1,11:1,13:1,17:1,20:1,28:1}],264:[[[[57,1],[58,1],[59,1],[60,1],[61,1],[62,1],[63,1],[64,1],[65,1],[66,1],[67,1],[68,1]],[[0,1]]],{57:1,58:1,59:1,60:1,61:1,62:1,63:1,64:1,65:1,66:1,67:1,68:1}],265:[[[[31,1]],[[0,1]]],{31:1}],266:[[[[10,1]],[[20,2]],[[69,3],[28,4]],[[70,5]],[[51,6],[71,7]],[[0,5]],[[69,3]],[[51,6]]],{10:1}],267:[[[[72,1],[73,1],[7,2],[74,1],[72,1],[75,1],[76,1],[77,3],[78,1],[79,1]],[[0,1]],[[75,1]],[[7,1],[0,3]]],{7:1,72:1,73:1,74:1,75:1,76:1,77:1,78:1,79:1}],268:[[[[80,1]],[[81,0],[0,1]]],{6:1,8:1,9:1,11:1,13:1,17:1,20:1,24:1,28:1,35:1}],269:[[[[82,1],[83,1],[84,1],[85,1],[86,1],[87,1],[88,1],[89,1]],[[0,1]]],{4:1,10:1,14:1,16:1,27:1,30:1,33:1,34:1}],270:[[[[32,1]],[[0,1]]],{32:1}],271:[[[[90,1]],[[88,2],[85,2]],[[0,2]]],{33:1}],272:[[[[33,1]],[[91,2]],[[28,4],[2,3]],[[0,3]],[[51,5],[92,6]],[[2,3]],[[51,5]]],{33:1}],273:[[[[93,1]],[[93,1],[0,1]]],{33:1}],274:[[[[21,1]],[[94,2]],[[0,2]]],{21:1}],275:[[[[44,1]],[[69,2]],[[44,3]],[[45,4],[0,3]],[[44,1],[0,4]]],{6:1,7:1,8:1,9:1,11:1,13:1,17:1,20:1,24:1,28:1,35:1,36:1}],276:[[[[91,1]],[[95,2],[0,1]],[[20,3]],[[0,3]]],{20:1}],277:[[[[96,1]],[[45,0],[0,1]]],{20:1}],278:[[[[20,1]],[[97,0],[0,1]]],{20:1}],279:[[[[20,1]],[[0,1]]],{20:1}],280:[[[[71,1]],[[2,1],[98,2]],[[0,2]]],{6:1,7:1,8:1,9:1,11:1,13:1,17:1,20:1,24:1,28:1,35:1,36:1}],281:[[[[99,1]],[[44,2],[0,1]],[[95,3],[45,3],[0,2]],[[44,4]],[[0,4]]],{99:1}],282:[[[[15,1]],[[80,2]],[[75,3],[0,2]],[[44,4]],[[45,5],[0,4]],[[44,6]],[[0,6]]],{15:1}],283:[[[[100,1]],[[101,0],[0,1]]],{6:1,8:1,9:1,11:1,13:1,17:1,20:1,24:1,28:1,35:1}],284:[[[[71,1]],[[102,2],[47,3],[0,1]],[[71,4],[53,4]],[[71,5],[53,5]],[[0,4]],[[47,3],[0,5]]],{6:1,7:1,8:1,9:1,11:1,13:1,17:1,20:1,24:1,28:1,35:1,36:1}],285:[[[[80,1]],[[45,2],[0,1]],[[80,1],[0,2]]],{6:1,8:1,9:1,11:1,13:1,17:1,20:1,24:1,28:1,35:1}],286:[[[[103,2],[24,1],[6,1],[35,1]],[[104,2]],[[0,2]]],{6:1,8:1,9:1,11:1,13:1,17:1,20:1,24:1,28:1,35:1}],287:[[[[2,0],[98,1],[105,0]],[[0,1]]],{2:1,4:1,5:1,6:1,7:1,8:1,9:1,10:1,11:1,12:1,13:1,14:1,15:1,16:1,17:1,18:1,19:1,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:1,28:1,29:1,30:1,31:1,32:1,33:1,34:1,35:1,36:1,98:1}],288:[[[[106,1],[107,1],[108,1],[109,1],[110,1]],[[0,1]]],{5:1,18:1,25:1,31:1,32:1}],289:[[[[27,1]],[[94,2]],[[75,3]],[[71,4]],[[69,5]],[[70,6]],[[111,7],[0,6]],[[69,8]],[[70,9]],[[0,9]]],{27:1}],290:[[[[28,1],[20,2]],[[112,3]],[[0,2]],[[51,2]]],{20:1,28:1}],291:[[[[113,1]],[[45,2],[0,1]],[[113,1],[0,2]]],{20:1,28:1}],292:[[[[4,1]],[[20,2]],[[114,3]],[[69,4]],[[70,5]],[[0,5]]],{4:1}],293:[[[[27,1]],[[94,2]],[[75,3]],[[115,4]],[[116,5],[0,4]],[[0,5]]],{27:1}],294:[[[[30,1]],[[117,2]],[[116,3],[0,2]],[[0,3]]],{30:1}],295:[[[[46,1],[118,1]],[[0,1]]],{27:1,30:1}],296:[[[[26,1]],[[20,2]],[[45,1],[0,2]]],{26:1}],297:[[[[30,1]],[[44,2]],[[69,3]],[[70,4]],[[111,5],[119,1],[0,4]],[[69,6]],[[70,7]],[[0,7]]],{30:1}],298:[[[[20,1]],[[95,2],[0,1]],[[20,3]],[[0,3]]],{20:1}],299:[[[[120,1]],[[45,2],[0,1]],[[120,1],[0,2]]],{20:1}],300:[[[[29,1]],[[91,2],[97,3]],[[23,4]],[[91,2],[23,4],[97,3]],[[121,5],[41,5],[28,6]],[[0,5]],[[121,7]],[[51,5]]],{29:1}],301:[[[[23,1]],[[122,2]],[[0,2]]],{23:1}],302:[[[[123,1],[124,1]],[[0,1]]],{23:1,29:1}],303:[[[[36,1]],[[69,2],[125,3]],[[44,4]],[[69,2]],[[0,4]]],{36:1}],304:[[[[27,1]],[[94,2]],[[75,3]],[[126,4]],[[127,5],[0,4]],[[0,5]]],{27:1}],305:[[[[30,1]],[[117,2]],[[127,3],[0,2]],[[0,3]]],{30:1}],306:[[[[128,1],[129,1]],[[0,1]]],{27:1,30:1}],307:[[[[44,1]],[[128,2],[45,3],[0,1]],[[0,2]],[[44,4],[0,3]],[[45,3],[0,4]]],{6:1,7:1,8:1,9:1,11:1,13:1,17:1,20:1,24:1,28:1,35:1,36:1}],308:[[[[7,1],[130,2]],[[39,2]],[[0,2]]],{6:1,7:1,8:1,9:1,11:1,13:1,17:1,20:1,24:1,28:1,35:1}],309:[[[[36,1]],[[69,2],[125,3]],[[117,4]],[[69,2]],[[0,4]]],{36:1}],310:[[[[131,1],[115,1]],[[0,1]]],{6:1,7:1,8:1,9:1,11:1,13:1,17:1,20:1,24:1,28:1,35:1,36:1}],311:[[[[132,1]],[[133,0],[0,1]]],{6:1,7:1,8:1,9:1,11:1,13:1,17:1,20:1,24:1,28:1,35:1}],312:[[[[28,1]],[[51,2],[125,3]],[[0,2]],[[51,2]]],{28:1}],313:[[[[22,1]],[[0,1]]],{22:1}],314:[[[[134,1]],[[135,1],[43,2],[0,1]],[[104,3]],[[0,3]]],{8:1,9:1,11:1,13:1,17:1,20:1,28:1}],315:[[[[12,1]],[[44,2],[136,3],[0,1]],[[45,4],[0,2]],[[44,5]],[[44,2],[0,4]],[[45,6],[0,5]],[[44,7]],[[45,8],[0,7]],[[44,7],[0,8]]],{12:1}],316:[[[[5,1]],[[44,2],[0,1]],[[45,3],[0,2]],[[44,4]],[[45,5],[0,4]],[[44,6]],[[0,6]]],{5:1}],317:[[[[18,1]],[[71,2],[0,1]],[[0,2]]],{18:1}],318:[[[[137,1]],[[136,0],[138,0],[0,1]]],{6:1,8:1,9:1,11:1,13:1,17:1,20:1,24:1,28:1,35:1}],319:[[[[139,1]],[[2,2],[140,3]],[[0,2]],[[139,1],[2,2]]],{5:1,6:1,7:1,8:1,9:1,11:1,12:1,13:1,15:1,17:1,18:1,19:1,20:1,21:1,22:1,23:1,24:1,25:1,26:1,28:1,29:1,31:1,32:1,35:1,36:1}],320:[[[[69,1]],[[44,2],[0,1]],[[0,2]]],{69:1}],321:[[[[141,1],[142,1],[143,1],[144,1],[145,1],[146,1],[147,1],[148,1],[149,1]],[[0,1]]],{5:1,6:1,7:1,8:1,9:1,11:1,12:1,13:1,15:1,17:1,18:1,19:1,20:1,21:1,22:1,23:1,24:1,25:1,26:1,28:1,29:1,31:1,32:1,35:1,36:1}],322:[[[[1,1],[3,1]],[[0,1]]],{4:1,5:1,6:1,7:1,8:1,9:1,10:1,11:1,12:1,13:1,14:1,15:1,16:1,17:1,18:1,19:1,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:1,28:1,29:1,30:1,31:1,32:1,33:1,34:1,35:1,36:1}],323:[[[[44,1],[69,2],[97,3]],[[69,2],[0,1]],[[44,4],[150,5],[0,2]],[[97,6]],[[150,5],[0,4]],[[0,5]],[[97,5]]],{6:1,7:1,8:1,9:1,11:1,13:1,17:1,20:1,24:1,28:1,35:1,36:1,69:1,97:1}],324:[[[[151,1]],[[45,2],[0,1]],[[151,1],[0,2]]],{6:1,7:1,8:1,9:1,11:1,13:1,17:1,20:1,24:1,28:1,35:1,36:1,69:1,97:1}],325:[[[[1,1],[2,2]],[[0,1]],[[152,3]],[[105,4]],[[153,1],[105,4]]],{2:1,5:1,6:1,7:1,8:1,9:1,11:1,12:1,13:1,15:1,17:1,18:1,19:1,20:1,21:1,22:1,23:1,24:1,25:1,26:1,28:1,29:1,31:1,32:1,35:1,36:1}],326:[[[[104,1]],[[154,0],[41,0],[155,0],[156,0],[0,1]]],{6:1,8:1,9:1,11:1,13:1,17:1,20:1,24:1,28:1,35:1}],327:[[[[115,1],[157,2]],[[30,3],[0,1]],[[0,2]],[[115,4]],[[111,5]],[[44,2]]],{6:1,7:1,8:1,9:1,11:1,13:1,17:1,20:1,24:1,28:1,35:1,36:1}],328:[[[[44,1]],[[45,2],[0,1]],[[44,1],[0,2]]],{6:1,7:1,8:1,9:1,11:1,13:1,17:1,20:1,24:1,28:1,35:1,36:1}],329:[[[[44,1]],[[45,0],[0,1]]],{6:1,7:1,8:1,9:1,11:1,13:1,17:1,20:1,24:1,28:1,35:1,36:1}],330:[[[[44,1]],[[46,2],[45,3],[0,1]],[[0,2]],[[44,4],[0,3]],[[45,3],[0,4]]],{6:1,7:1,8:1,9:1,11:1,13:1,17:1,20:1,24:1,28:1,35:1,36:1}],331:[[[[117,1]],[[45,2],[0,1]],[[117,3]],[[45,4],[0,3]],[[117,3],[0,4]]],{6:1,7:1,8:1,9:1,11:1,13:1,17:1,20:1,24:1,28:1,35:1,36:1}],332:[[[[28,1],[97,2],[11,3]],[[51,4],[92,5]],[[20,4]],[[158,6]],[[0,4]],[[51,4]],[[50,4]]],{11:1,28:1,97:1}],333:[[[[14,1]],[[69,2]],[[70,3]],[[159,4],[160,5]],[[69,6]],[[69,7]],[[70,8]],[[70,9]],[[159,4],[111,10],[160,5],[0,8]],[[0,9]],[[69,11]],[[70,12]],[[160,5],[0,12]]],{14:1}],334:[[[[41,1],[113,2],[43,3]],[[20,4]],[[47,5],[45,6],[0,2]],[[20,7]],[[45,8],[0,4]],[[44,9]],[[41,1],[113,2],[43,3],[0,6]],[[0,7]],[[43,3]],[[45,6],[0,9]]],{20:1,28:1,41:1,43:1}],335:[[[[16,1]],[[44,2]],[[69,3]],[[70,4]],[[111,5],[0,4]],[[69,6]],[[70,7]],[[0,7]]],{16:1}],336:[[[[34,1]],[[44,2]],[[69,3],[161,4]],[[70,5]],[[69,3]],[[0,5]]],{34:1}],337:[[[[95,1]],[[80,2]],[[0,2]]],{95:1}],338:[[[[162,1]],[[163,0],[0,1]]],{6:1,8:1,9:1,11:1,13:1,17:1,20:1,24:1,28:1,35:1}],339:[[[[25,1]],[[71,2],[0,1]],[[0,2]]],{25:1}],340:[[[[53,1]],[[0,1]]],{25:1}]},states:[[[[1,1],[2,1],[3,2]],[[0,1]],[[2,1]]],[[[37,1]],[[38,0],[0,1]]],[[[39,1]],[[40,0],[0,1]]],[[[41,1],[42,2],[43,3]],[[44,4]],[[45,5],[0,2]],[[44,6]],[[45,7],[0,4]],[[41,1],[42,2],[43,3],[0,5]],[[0,6]],[[42,4],[43,3]]],[[[44,1]],[[46,2],[47,3],[0,1]],[[0,2]],[[44,2]]],[[[48,1]],[[24,0],[35,0],[0,1]]],[[[19,1]],[[44,2]],[[45,3],[0,2]],[[44,4]],[[0,4]]],[[[17,1],[8,2],[9,5],[28,4],[11,3],[13,6],[20,2]],[[17,1],[0,1]],[[0,2]],[[49,7],[50,2]],[[51,2],[52,8],[53,8]],[[54,9],[55,2]],[[56,10]],[[50,2]],[[51,2]],[[55,2]],[[13,2]]],[[[57,1],[58,1],[59,1],[60,1],[61,1],[62,1],[63,1],[64,1],[65,1],[66,1],[67,1],[68,1]],[[0,1]]],[[[31,1]],[[0,1]]],[[[10,1]],[[20,2]],[[69,3],[28,4]],[[70,5]],[[51,6],[71,7]],[[0,5]],[[69,3]],[[51,6]]],[[[72,1],[73,1],[7,2],[74,1],[72,1],[75,1],[76,1],[77,3],[78,1],[79,1]],[[0,1]],[[75,1]],[[7,1],[0,3]]],[[[80,1]],[[81,0],[0,1]]],[[[82,1],[83,1],[84,1],[85,1],[86,1],[87,1],[88,1],[89,1]],[[0,1]]],[[[32,1]],[[0,1]]],[[[90,1]],[[88,2],[85,2]],[[0,2]]],[[[33,1]],[[91,2]],[[28,4],[2,3]],[[0,3]],[[51,5],[92,6]],[[2,3]],[[51,5]]],[[[93,1]],[[93,1],[0,1]]],[[[21,1]],[[94,2]],[[0,2]]],[[[44,1]],[[69,2]],[[44,3]],[[45,4],[0,3]],[[44,1],[0,4]]],[[[91,1]],[[95,2],[0,1]],[[20,3]],[[0,3]]],[[[96,1]],[[45,0],[0,1]]],[[[20,1]],[[97,0],[0,1]]],[[[20,1]],[[0,1]]],[[[71,1]],[[2,1],[98,2]],[[0,2]]],[[[99,1]],[[44,2],[0,1]],[[95,3],[45,3],[0,2]],[[44,4]],[[0,4]]],[[[15,1]],[[80,2]],[[75,3],[0,2]],[[44,4]],[[45,5],[0,4]],[[44,6]],[[0,6]]],[[[100,1]],[[101,0],[0,1]]],[[[71,1]],[[102,2],[47,3],[0,1]],[[71,4],[53,4]],[[71,5],[53,5]],[[0,4]],[[47,3],[0,5]]],[[[80,1]],[[45,2],[0,1]],[[80,1],[0,2]]],[[[103,2],[24,1],[6,1],[35,1]],[[104,2]],[[0,2]]],[[[2,0],[98,1],[105,0]],[[0,1]]],[[[106,1],[107,1],[108,1],[109,1],[110,1]],[[0,1]]],[[[27,1]],[[94,2]],[[75,3]],[[71,4]],[[69,5]],[[70,6]],[[111,7],[0,6]],[[69,8]],[[70,9]],[[0,9]]],[[[28,1],[20,2]],[[112,3]],[[0,2]],[[51,2]]],[[[113,1]],[[45,2],[0,1]],[[113,1],[0,2]]],[[[4,1]],[[20,2]],[[114,3]],[[69,4]],[[70,5]],[[0,5]]],[[[27,1]],[[94,2]],[[75,3]],[[115,4]],[[116,5],[0,4]],[[0,5]]],[[[30,1]],[[117,2]],[[116,3],[0,2]],[[0,3]]],[[[46,1],[118,1]],[[0,1]]],[[[26,1]],[[20,2]],[[45,1],[0,2]]],[[[30,1]],[[44,2]],[[69,3]],[[70,4]],[[111,5],[119,1],[0,4]],[[69,6]],[[70,7]],[[0,7]]],[[[20,1]],[[95,2],[0,1]],[[20,3]],[[0,3]]],[[[120,1]],[[45,2],[0,1]],[[120,1],[0,2]]],[[[29,1]],[[91,2],[97,3]],[[23,4]],[[91,2],[23,4],[97,3]],[[121,5],[41,5],[28,6]],[[0,5]],[[121,7]],[[51,5]]],[[[23,1]],[[122,2]],[[0,2]]],[[[123,1],[124,1]],[[0,1]]],[[[36,1]],[[69,2],[125,3]],[[44,4]],[[69,2]],[[0,4]]],[[[27,1]],[[94,2]],[[75,3]],[[126,4]],[[127,5],[0,4]],[[0,5]]],[[[30,1]],[[117,2]],[[127,3],[0,2]],[[0,3]]],[[[128,1],[129,1]],[[0,1]]],[[[44,1]],[[128,2],[45,3],[0,1]],[[0,2]],[[44,4],[0,3]],[[45,3],[0,4]]],[[[7,1],[130,2]],[[39,2]],[[0,2]]],[[[36,1]],[[69,2],[125,3]],[[117,4]],[[69,2]],[[0,4]]],[[[131,1],[115,1]],[[0,1]]],[[[132,1]],[[133,0],[0,1]]],[[[28,1]],[[51,2],[125,3]],[[0,2]],[[51,2]]],[[[22,1]],[[0,1]]],[[[134,1]],[[135,1],[43,2],[0,1]],[[104,3]],[[0,3]]],[[[12,1]],[[44,2],[136,3],[0,1]],[[45,4],[0,2]],[[44,5]],[[44,2],[0,4]],[[45,6],[0,5]],[[44,7]],[[45,8],[0,7]],[[44,7],[0,8]]],[[[5,1]],[[44,2],[0,1]],[[45,3],[0,2]],[[44,4]],[[45,5],[0,4]],[[44,6]],[[0,6]]],[[[18,1]],[[71,2],[0,1]],[[0,2]]],[[[137,1]],[[136,0],[138,0],[0,1]]],[[[139,1]],[[2,2],[140,3]],[[0,2]],[[139,1],[2,2]]],[[[69,1]],[[44,2],[0,1]],[[0,2]]],[[[141,1],[142,1],[143,1],[144,1],[145,1],[146,1],[147,1],[148,1],[149,1]],[[0,1]]],[[[1,1],[3,1]],[[0,1]]],[[[44,1],[69,2],[97,3]],[[69,2],[0,1]],[[44,4],[150,5],[0,2]],[[97,6]],[[150,5],[0,4]],[[0,5]],[[97,5]]],[[[151,1]],[[45,2],[0,1]],[[151,1],[0,2]]],[[[1,1],[2,2]],[[0,1]],[[152,3]],[[105,4]],[[153,1],[105,4]]],[[[104,1]],[[154,0],[41,0],[155,0],[156,0],[0,1]]],[[[115,1],[157,2]],[[30,3],[0,1]],[[0,2]],[[115,4]],[[111,5]],[[44,2]]],[[[44,1]],[[45,2],[0,1]],[[44,1],[0,2]]],[[[44,1]],[[45,0],[0,1]]],[[[44,1]],[[46,2],[45,3],[0,1]],[[0,2]],[[44,4],[0,3]],[[45,3],[0,4]]],[[[117,1]],[[45,2],[0,1]],[[117,3]],[[45,4],[0,3]],[[117,3],[0,4]]],[[[28,1],[97,2],[11,3]],[[51,4],[92,5]],[[20,4]],[[158,6]],[[0,4]],[[51,4]],[[50,4]]],[[[14,1]],[[69,2]],[[70,3]],[[159,4],[160,5]],[[69,6]],[[69,7]],[[70,8]],[[70,9]],[[159,4],[111,10],[160,5],[0,8]],[[0,9]],[[69,11]],[[70,12]],[[160,5],[0,12]]],[[[41,1],[113,2],[43,3]],[[20,4]],[[47,5],[45,6],[0,2]],[[20,7]],[[45,8],[0,4]],[[44,9]],[[41,1],[113,2],[43,3],[0,6]],[[0,7]],[[43,3]],[[45,6],[0,9]]],[[[16,1]],[[44,2]],[[69,3]],[[70,4]],[[111,5],[0,4]],[[69,6]],[[70,7]],[[0,7]]],[[[34,1]],[[44,2]],[[69,3],[161,4]],[[70,5]],[[69,3]],[[0,5]]],[[[95,1]],[[80,2]],[[0,2]]],[[[162,1]],[[163,0],[0,1]]],[[[25,1]],[[71,2],[0,1]],[[0,2]]],[[[53,1]],[[0,1]]]],labels:[[0,"EMPTY"],[319,null],[4,null],[269,null],[1,"def"],[1,"raise"],[32,null],[1,"not"],[2,null],[26,null],[1,"class"],[9,null],[1,"print"],[25,null],[1,"try"],[1,"exec"],[1,"while"],[3,null],[1,"return"],[1,"assert"],[1,null],[1,"del"],[1,"pass"],[1,"import"],[15,null],[1,"yield"],[1,"global"],[1,"for"],[7,null],[1,"from"],[1,"if"],[1,"break"],[1,"continue"],[50,null],[1,"with"],[14,null],[1,"lambda"],[318,null],[19,null],[308,null],[1,"and"],[16,null],[260,null],[36,null],[327,null],[12,null],[293,null],[22,null],[326,null],[307,null],[10,null],[8,null],[330,null],[339,null],[275,null],[27,null],[329,null],[46,null],[39,null],[41,null],[47,null],[42,null],[43,null],[37,null],[44,null],[49,null],[40,null],[38,null],[45,null],[11,null],[325,null],[328,null],[29,null],[21,null],[28,null],[1,"in"],[30,null],[1,"is"],[31,null],[20,null],[283,null],[267,null],[333,null],[297,null],[289,null],[266,null],[336,null],[335,null],[292,null],[271,null],[273,null],[278,null],[259,null],[272,null],[285,null],[1,"as"],[276,null],[23,null],[0,null],[1,"except"],[338,null],[18,null],[264,null],[314,null],[286,null],[322,null],[265,null],[270,null],[316,null],[317,null],[340,null],[1,"else"],[291,null],[290,null],[312,null],[311,null],[295,null],[310,null],[294,null],[1,"elif"],[298,null],[299,null],[277,null],[301,null],[300,null],[334,null],[331,null],[306,null],[304,null],[305,null],[268,null],[309,null],[258,null],[1,"or"],[263,null],[332,null],[35,null],[261,null],[34,null],[321,null],[13,null],[288,null],[262,null],[284,null],[313,null],[315,null],[274,null],[282,null],[296,null],[302,null],[320,null],[323,null],[5,null],[6,null],[48,null],[17,null],[24,null],[303,null],[324,null],[281,null],[1,"finally"],[337,null],[257,null],[33,null]],keywords:{and:40,as:95,assert:19,"break":31,"class":10,"continue":32,def:4,del:21,elif:119,"else":111,except:99,exec:15,"finally":160,"for":27,from:29,global:26,"if":30,"import":23,"in":75,is:77,lambda:36,not:7,or:133,pass:22,print:12,raise:5,"return":18,"try":14,"while":16,"with":34,yield:25},tokens:{0:98,1:20,2:8,3:17,4:2,5:152,6:153,7:28,8:51,9:11,10:50,11:69,12:45,13:140,14:35,15:24,16:41,17:155,18:101,19:38,20:79,21:73,22:47,23:97,24:156,25:13,26:9,27:55,28:74,29:72,30:76,31:78,32:6,33:163,34:138,35:136,36:43,37:63,38:67,39:58,40:66,41:59,42:61,43:62,44:64,45:68,46:57,47:60,48:154,49:65,50:33},start:256},g.prototype.setup=function(t){t=t||this.grammar.start,this.stack=[{dfa:this.grammar.dfas[t],state:0,node:{type:t,value:null,context:null,children:[]}}],this.used_names={}
},g.prototype.addtoken=function(t,e,n){var i=this.classify(t,e,n);t:for(;;){for(var r=this.stack[this.stack.length-1],s=r.dfa[0],o=s[r.state],a=0;a<o.length;++a){var l=o[a][0],u=o[a][1],c=this.grammar.labels[l][0];if(i===l){for(pi.asserts.assert(256>c),this.shift(t,e,u,n),t=u;1===s[t].length&&0===s[t][0][0]&&s[t][0][1]===t;){if(this.pop(),0===this.stack.length)return!0;r=this.stack[this.stack.length-1],t=r.state,s=r.dfa[0]}return!1}if(c>=256&&this.grammar.dfas[c][1].hasOwnProperty(i)){this.push(c,this.grammar.dfas[c],u,n);continue t}}if(!v(o,[0,r.state]))throw new di.builtin.ParseError("bad input",this.filename,n[0][0],n);if(this.pop(),0===this.stack.length)throw new di.builtin.ParseError("too much input",this.filename)}},g.prototype.classify=function(t,e,n){if(t===di.Tokenizer.Tokens.T_NAME&&(this.used_names[e]=!0,e=this.grammar.keywords.hasOwnProperty(e)&&this.grammar.keywords[e]))return e;if(e=this.grammar.tokens.hasOwnProperty(t)&&this.grammar.tokens[t],!e)throw new di.builtin.ParseError("bad token",this.filename,n[0][0],n);return e},g.prototype.shift=function(t,e,n,i){var r=this.stack[this.stack.length-1].dfa,s=this.stack[this.stack.length-1].node;s.children.push({type:t,value:e,lineno:i[0][0],col_offset:i[0][1],children:null}),this.stack[this.stack.length-1]={dfa:r,state:n,node:s}},g.prototype.push=function(t,e,n,i){t={type:t,value:null,lineno:i[0][0],col_offset:i[0][1],children:[]},this.stack[this.stack.length-1]={dfa:this.stack[this.stack.length-1].dfa,state:n,node:this.stack[this.stack.length-1].node},this.stack.push({dfa:e,state:0,node:t})},g.prototype.pop=function(){var t=this.stack.pop().node;t&&(0!==this.stack.length?this.stack[this.stack.length-1].node.children.push(t):(this.rootnode=t,this.rootnode.used_names=this.used_names))},di.parse=function(t,e){var n=y(t);"\n"!==e.substr(e.length-1,1)&&(e+="\n");for(var i,r=e.split("\n"),s=0;s<r.length;++s)i=n(r[s]+(s===r.length-1?"":"\n"));return i},di.parseTreeDump=function(t,e){e=e||"";var n;if(n=""+e,256<=t.type){n+=di.ParseTables.number2symbol[t.type]+"\n";for(var i=0;i<t.children.length;++i)n+=di.parseTreeDump(t.children[i],e+"  ")}else n+=di.Tokenizer.tokenNames[t.type]+": "+new di.builtin.str(t.value).$r().v+"\n";return n},pi.exportSymbol("Sk.parse",di.parse),pi.exportSymbol("Sk.parseTreeDump",di.parseTreeDump),te.prototype._astname="Module",te.prototype._fields=["body",function(t){return t.body}],ee.prototype._astname="Interactive",ee.prototype._fields=["body",function(t){return t.body}],ne.prototype._astname="Expression",ne.prototype._fields=["body",function(t){return t.body}],ie.prototype._astname="Suite",ie.prototype._fields=["body",function(t){return t.body}],re.prototype._astname="FunctionDef",re.prototype._fields=["name",function(t){return t.name},"args",function(t){return t.args},"body",function(t){return t.body},"decorator_list",function(t){return t.decorator_list}],se.prototype._astname="ClassDef",se.prototype._fields=["name",function(t){return t.name},"bases",function(t){return t.bases},"body",function(t){return t.body},"decorator_list",function(t){return t.decorator_list}],oe.prototype._astname="Return",oe.prototype._fields=["value",function(t){return t.value}],ae.prototype._astname="Delete",ae.prototype._fields=["targets",function(t){return t.targets}],le.prototype._astname="Assign",le.prototype._fields=["targets",function(t){return t.targets},"value",function(t){return t.value}],ue.prototype._astname="AugAssign",ue.prototype._fields=["target",function(t){return t.target},"op",function(t){return t.op},"value",function(t){return t.value}],ce.prototype._astname="Print",ce.prototype._fields=["dest",function(t){return t.dest},"values",function(t){return t.values},"nl",function(t){return t.nl}],fe.prototype._astname="For",fe.prototype._fields=["target",function(t){return t.target},"iter",function(t){return t.iter},"body",function(t){return t.body},"orelse",function(t){return t.orelse}],he.prototype._astname="While",he.prototype._fields=["test",function(t){return t.test},"body",function(t){return t.body},"orelse",function(t){return t.orelse}],pe.prototype._astname="If",pe.prototype._fields=["test",function(t){return t.test},"body",function(t){return t.body},"orelse",function(t){return t.orelse}],de.prototype._astname="With",de.prototype._fields=["context_expr",function(t){return t.context_expr},"optional_vars",function(t){return t.optional_vars},"body",function(t){return t.body}],be.prototype._astname="Raise",be.prototype._fields=["type",function(t){return t.type},"inst",function(t){return t.inst},"tback",function(t){return t.tback}],me.prototype._astname="TryExcept",me.prototype._fields=["body",function(t){return t.body},"handlers",function(t){return t.handlers},"orelse",function(t){return t.orelse}],ge.prototype._astname="TryFinally",ge.prototype._fields=["body",function(t){return t.body},"finalbody",function(t){return t.finalbody}],ve.prototype._astname="Assert",ve.prototype._fields=["test",function(t){return t.test},"msg",function(t){return t.msg}],ye.prototype._astname="Import",ye.prototype._fields=["names",function(t){return t.names}],_e.prototype._astname="ImportFrom",_e.prototype._fields=["module",function(t){return t.module},"names",function(t){return t.names},"level",function(t){return t.level}],we.prototype._astname="Exec",we.prototype._fields=["body",function(t){return t.body},"globals",function(t){return t.globals},"locals",function(t){return t.locals}],ke.prototype._astname="Global",ke.prototype._fields=["names",function(t){return t.names}],xe.prototype._astname="Expr",xe.prototype._fields=["value",function(t){return t.value}],Se.prototype._astname="Pass",Se.prototype._fields=[],Te.prototype._astname="Break",Te.prototype._fields=[],Ce.prototype._astname="Continue",Ce.prototype._fields=[],Ee.prototype._astname="BoolOp",Ee.prototype._fields=["op",function(t){return t.op},"values",function(t){return t.values}],$e.prototype._astname="BinOp",$e.prototype._fields=["left",function(t){return t.left},"op",function(t){return t.op},"right",function(t){return t.right}],Ae.prototype._astname="UnaryOp",Ae.prototype._fields=["op",function(t){return t.op},"operand",function(t){return t.operand}],Ne.prototype._astname="Lambda",Ne.prototype._fields=["args",function(t){return t.args},"body",function(t){return t.body}],Le.prototype._astname="IfExp",Le.prototype._fields=["test",function(t){return t.test},"body",function(t){return t.body},"orelse",function(t){return t.orelse}],Me.prototype._astname="Dict",Me.prototype._fields=["keys",function(t){return t.keys},"values",function(t){return t.values}],Ie.prototype._astname="ListComp",Ie.prototype._fields=["elt",function(t){return t.elt},"generators",function(t){return t.generators}],Re.prototype._astname="GeneratorExp",Re.prototype._fields=["elt",function(t){return t.elt},"generators",function(t){return t.generators}],De.prototype._astname="Yield",De.prototype._fields=["value",function(t){return t.value}],Ke.prototype._astname="Compare",Ke.prototype._fields=["left",function(t){return t.left},"ops",function(t){return t.ops},"comparators",function(t){return t.comparators}],Fe.prototype._astname="Call",Fe.prototype._fields=["func",function(t){return t.func},"args",function(t){return t.args},"keywords",function(t){return t.keywords},"starargs",function(t){return t.starargs},"kwargs",function(t){return t.kwargs}],Be.prototype._astname="Num",Be.prototype._fields=["n",function(t){return t.n}],Pe.prototype._astname="Str",Pe.prototype._fields=["s",function(t){return t.s}],Oe.prototype._astname="Attribute",Oe.prototype._fields=["value",function(t){return t.value},"attr",function(t){return t.attr},"ctx",function(t){return t.ctx}],je.prototype._astname="Subscript",je.prototype._fields=["value",function(t){return t.value},"slice",function(t){return t.slice},"ctx",function(t){return t.ctx}],Ge.prototype._astname="Name",Ge.prototype._fields=["id",function(t){return t.id},"ctx",function(t){return t.ctx}],qe.prototype._astname="List",qe.prototype._fields=["elts",function(t){return t.elts},"ctx",function(t){return t.ctx}],ze.prototype._astname="Tuple",ze.prototype._fields=["elts",function(t){return t.elts},"ctx",function(t){return t.ctx}],_.prototype._astname="Load",_.prototype._isenum=!0,w.prototype._astname="Store",w.prototype._isenum=!0,k.prototype._astname="Del",k.prototype._isenum=!0,x.prototype._astname="AugLoad",x.prototype._isenum=!0,S.prototype._astname="AugStore",S.prototype._isenum=!0,T.prototype._astname="Param",T.prototype._isenum=!0,He.prototype._astname="Ellipsis",He.prototype._fields=[],Ue.prototype._astname="Slice",Ue.prototype._fields=["lower",function(t){return t.lower},"upper",function(t){return t.upper},"step",function(t){return t.step}],We.prototype._astname="ExtSlice",We.prototype._fields=["dims",function(t){return t.dims}],Ve.prototype._astname="Index",Ve.prototype._fields=["value",function(t){return t.value}],C.prototype._astname="And",C.prototype._isenum=!0,E.prototype._astname="Or",E.prototype._isenum=!0,$.prototype._astname="Add",$.prototype._isenum=!0,A.prototype._astname="Sub",A.prototype._isenum=!0,N.prototype._astname="Mult",N.prototype._isenum=!0,L.prototype._astname="Div",L.prototype._isenum=!0,M.prototype._astname="Mod",M.prototype._isenum=!0,I.prototype._astname="Pow",I.prototype._isenum=!0,R.prototype._astname="LShift",R.prototype._isenum=!0,D.prototype._astname="RShift",D.prototype._isenum=!0,K.prototype._astname="BitOr",K.prototype._isenum=!0,F.prototype._astname="BitXor",F.prototype._isenum=!0,B.prototype._astname="BitAnd",B.prototype._isenum=!0,P.prototype._astname="FloorDiv",P.prototype._isenum=!0,O.prototype._astname="Invert",O.prototype._isenum=!0,j.prototype._astname="Not",j.prototype._isenum=!0,G.prototype._astname="UAdd",G.prototype._isenum=!0,q.prototype._astname="USub",q.prototype._isenum=!0,z.prototype._astname="Eq",z.prototype._isenum=!0,H.prototype._astname="NotEq",H.prototype._isenum=!0,U.prototype._astname="Lt",U.prototype._isenum=!0,W.prototype._astname="LtE",W.prototype._isenum=!0,V.prototype._astname="Gt",V.prototype._isenum=!0,X.prototype._astname="GtE",X.prototype._isenum=!0,Q.prototype._astname="Is",Q.prototype._isenum=!0,Y.prototype._astname="IsNot",Y.prototype._isenum=!0,Z.prototype._astname="In",Z.prototype._isenum=!0,J.prototype._astname="NotIn",J.prototype._isenum=!0,Xe.prototype._astname="comprehension",Xe.prototype._fields=["target",function(t){return t.target},"iter",function(t){return t.iter},"ifs",function(t){return t.ifs}],Qe.prototype._astname="ExceptHandler",Qe.prototype._fields=["type",function(t){return t.type},"name",function(t){return t.name},"body",function(t){return t.body}],Ye.prototype._astname="arguments",Ye.prototype._fields=["args",function(t){return t.args},"vararg",function(t){return t.vararg},"kwarg",function(t){return t.kwarg},"defaults",function(t){return t.defaults}],Ze.prototype._astname="keyword",Ze.prototype._fields=["arg",function(t){return t.arg},"value",function(t){return t.value}],Je.prototype._astname="alias",Je.prototype._fields=["name",function(t){return t.name},"asname",function(t){return t.asname}];var cr=di.ParseTables.sym,fr=di.Tokenizer.Tokens,hr={};!function(){hr[fr.T_VBAR]=K,hr[fr.T_VBAR]=K,hr[fr.T_CIRCUMFLEX]=F,hr[fr.T_AMPER]=B,hr[fr.T_LEFTSHIFT]=R,hr[fr.T_RIGHTSHIFT]=D,hr[fr.T_PLUS]=$,hr[fr.T_MINUS]=A,hr[fr.T_STAR]=N,hr[fr.T_SLASH]=L,hr[fr.T_DOUBLESLASH]=P,hr[fr.T_PERCENT]=M}(),di.astFromParse=function(t,e){var n,i=new tn("utf-8",e),r=[],s=0;switch(t.type){case cr.file_input:for(var o=0;o<en(t)-1;++o)if(n=nn(t,o),t.type!==fr.T_NEWLINE){rn(n,cr.stmt);var a=on(n);if(1===a)r[s++]=ni(i,n);else{n=nn(n,0),rn(n,cr.simple_stmt);for(var l=0;a>l;++l)r[s++]=ni(i,nn(n,2*l))}}return new te(r);case cr.eval_input:pi.asserts.fail("todo;");case cr.single_input:pi.asserts.fail("todo;");default:pi.asserts.fail("todo;")}},di.astDump=function(t){var e=function(t){for(var e="",n=0;t>n;++n)e+=" ";return e},n=function(t,i){if(null===t)return i+"None";if(t.prototype&&void 0!==t.prototype._astname&&t.prototype._isenum)return i+t.prototype._astname+"()";if(void 0!==t._astname){for(var r=e(t._astname.length+1),s=[],o=0;o<t._fields.length;o+=2){var a=t._fields[o],l=t._fields[o+1](t),u=e(a.length+1);s.push([a,n(l,i+r+u)])}for(a=[],o=0;o<s.length;++o)l=s[o],a.push(l[0]+"="+l[1].replace(/^\s+/,""));return o=a.join(",\n"+i+r),i+t._astname+"("+o+")"}if(pi.isArrayLike(t)){for(r=[],o=0;o<t.length;++o)r.push(n(t[o],i+" "));return o=r.join(",\n"),i+"["+o.replace(/^\s+/,"")+"]"}return o=!0===t?"True":!1===t?"False":t instanceof di.builtin.lng?t.tp$str().v:t instanceof di.builtin.str?t.$r().v:""+t,i+o};return n(t,"")},pi.exportSymbol("Sk.astFromParse",di.astFromParse),pi.exportSymbol("Sk.astDump",di.astDump);var pr=1,dr=2,br=4,mr=8,gr=512,vr=1024,yr=dr|br|vr,_r=11,wr=7,kr=1,xr=2,Sr=3,Tr=4,Cr=5,Er="module",$r="function",Ar="class";ii.prototype.get_name=function(){return this.__name},ii.prototype.is_referenced=function(){return!!(this.__flags&mr)},ii.prototype.is_parameter=function(){return!!(this.__flags&br)},ii.prototype.is_global=function(){return this.__scope===Sr||this.__scope==xr},ii.prototype.is_declared_global=function(){return this.__scope==xr},ii.prototype.is_local=function(){return!!(this.__flags&yr)},ii.prototype.is_free=function(){return this.__scope==Tr},ii.prototype.is_imported=function(){return!!(this.__flags&vr)},ii.prototype.is_assigned=function(){return!!(this.__flags&dr)},ii.prototype.is_namespace=function(){return this.__namespaces&&0<this.__namespaces.length},ii.prototype.get_namespaces=function(){return this.__namespaces};var Nr=0;ri.prototype.get_type=function(){return this.blockType},ri.prototype.get_name=function(){return this.name},ri.prototype.get_lineno=function(){return this.lineno},ri.prototype.is_nested=function(){return this.isNested},ri.prototype.has_children=function(){return 0<this.children.length},ri.prototype.get_identifiers=function(){return this._identsMatching(function(){return!0})},ri.prototype.lookup=function(t){if(this.symbols.hasOwnProperty(t))t=this.symbols[t];else{var e=this.symFlags[t],n=this.__check_children(t);t=this.symbols[t]=new ii(t,e,n)}return t},ri.prototype.__check_children=function(t){for(var e=[],n=0;n<this.children.length;++n){var i=this.children[n];i.name===t&&e.push(i)}return e},ri.prototype._identsMatching=function(t){var e,n=[];for(e in this.symFlags)this.symFlags.hasOwnProperty(e)&&t(this.symFlags[e])&&n.push(e);return n.sort(),n},ri.prototype.get_parameters=function(){return pi.asserts.assert("function"==this.get_type(),"get_parameters only valid for function scopes"),this._funcParams||(this._funcParams=this._identsMatching(function(t){return t&br})),this._funcParams},ri.prototype.get_locals=function(){return pi.asserts.assert("function"==this.get_type(),"get_locals only valid for function scopes"),this._funcLocals||(this._funcLocals=this._identsMatching(function(t){return t&yr})),this._funcLocals},ri.prototype.get_globals=function(){return pi.asserts.assert("function"==this.get_type(),"get_globals only valid for function scopes"),this._funcGlobals||(this._funcGlobals=this._identsMatching(function(t){return t=t>>_r&wr,t==Sr||t==xr})),this._funcGlobals},ri.prototype.get_frees=function(){return pi.asserts.assert("function"==this.get_type(),"get_frees only valid for function scopes"),this._funcFrees||(this._funcFrees=this._identsMatching(function(t){return(t>>_r&wr)==Tr})),this._funcFrees},ri.prototype.get_methods=function(){if(pi.asserts.assert("class"==this.get_type(),"get_methods only valid for class scopes"),!this._classMethods){for(var t=[],e=0;e<this.children.length;++e)t.push(this.children[e].name);t.sort(),this._classMethods=t}return this._classMethods},ri.prototype.getScope=function(t){return t=this.symFlags[t],void 0===t?0:t>>_r&wr},si.prototype.getStsForAst=function(t){return pi.asserts.assert(void 0!==t.scopeId,"ast wasn't added to st?"),t=this.stss[t.scopeId],pi.asserts.assert(void 0!==t,"unknown sym tab entry"),t},si.prototype.SEQStmt=function(t){pi.asserts.assert(pi.isArrayLike(t),"SEQ: nodes isn't array? got %s",t);for(var e=t.length,n=0;e>n;++n){var i=t[n];i&&this.visitStmt(i)}},si.prototype.SEQExpr=function(t){pi.asserts.assert(pi.isArrayLike(t),"SEQ: nodes isn't array? got %s",t);for(var e=t.length,n=0;e>n;++n){var i=t[n];i&&this.visitExpr(i)}},si.prototype.enterBlock=function(t,e,n,i){t=ci(t);var r=null;this.cur&&(r=this.cur,this.stack.push(this.cur)),this.cur=new ri(this,t,e,n,i),"top"===t&&(this.global=this.cur.symFlags),r&&r.children.push(this.cur)},si.prototype.exitBlock=function(){this.cur=null,0<this.stack.length&&(this.cur=this.stack.pop())},si.prototype.visitParams=function(t,e){for(var n=0;n<t.length;++n){var i=t[n];if(i.constructor!==Ge)throw new di.builtin.SyntaxError("invalid expression in parameter list",this.filename);pi.asserts.assert(i.ctx===T||i.ctx===w&&!e),this.addDef(i.id,br,i.lineno)}},si.prototype.visitArguments=function(t,e){t.args&&this.visitParams(t.args,!0),t.vararg&&(this.addDef(t.vararg,br,e),this.cur.varargs=!0),t.kwarg&&(this.addDef(t.kwarg,br,e),this.cur.varkeywords=!0)},si.prototype.newTmpname=function(t){this.addDef(new di.builtin.str("_["+ ++this.tmpname+"]"),dr,t)},si.prototype.addDef=function(t,e,n){var i=fi(this.curClass,new di.builtin.str(t)).v,i=ci(i),r=this.cur.symFlags[i];if(void 0!==r){if(e&br&&r&br)throw new di.builtin.SyntaxError("duplicate argument '"+t.v+"' in function definition",this.filename,n);r|=e}else r=e;this.cur.symFlags[i]=r,e&br?this.cur.varnames.push(i):e&pr&&(r=e,t=this.global[i],void 0!==t&&(r|=t),this.global[i]=r)},si.prototype.visitSlice=function(t){switch(t.constructor){case Ue:t.lower&&this.visitExpr(t.lower),t.upper&&this.visitExpr(t.upper),t.step&&this.visitExpr(t.step);break;case We:for(var e=0;e<t.dims.length;++e)this.visitSlice(t.dims[e]);break;case Ve:this.visitExpr(t.value)}},si.prototype.visitStmt=function(t){switch(pi.asserts.assert(void 0!==t,"visitStmt called with undefined"),t.constructor){case re:this.addDef(t.name,dr,t.lineno),t.args.defaults&&this.SEQExpr(t.args.defaults),t.decorator_list&&this.SEQExpr(t.decorator_list),this.enterBlock(t.name.v,$r,t,t.lineno),this.visitArguments(t.args,t.lineno),this.SEQStmt(t.body),this.exitBlock();break;case se:this.addDef(t.name,dr,t.lineno),this.SEQExpr(t.bases),t.decorator_list&&this.SEQExpr(t.decorator_list),this.enterBlock(t.name.v,Ar,t,t.lineno);var e=this.curClass;this.curClass=t.name,this.SEQStmt(t.body),this.curCalss=e,this.exitBlock();break;case oe:if(t.value&&(this.visitExpr(t.value),this.cur.returnsValue=!0,this.cur.generator))throw new di.builtin.SyntaxError("'return' with argument inside generator",this.filename);break;case ae:this.SEQExpr(t.targets);break;case le:this.SEQExpr(t.targets),this.visitExpr(t.value);break;case ue:this.visitExpr(t.target),this.visitExpr(t.value);break;case ce:t.dest&&this.visitExpr(t.dest),this.SEQExpr(t.values);break;case fe:this.visitExpr(t.target),this.visitExpr(t.iter),this.SEQStmt(t.body),t.orelse&&this.SEQStmt(t.orelse);break;case he:this.visitExpr(t.test),this.SEQStmt(t.body),t.orelse&&this.SEQStmt(t.orelse);break;case pe:this.visitExpr(t.test),this.SEQStmt(t.body),t.orelse&&this.SEQStmt(t.orelse);break;case be:t.type&&(this.visitExpr(t.type),t.inst&&(this.visitExpr(t.inst),t.tback&&this.visitExpr(t.tback)));break;case me:this.SEQStmt(t.body),this.SEQStmt(t.orelse),this.visitExcepthandlers(t.handlers);break;case ge:this.SEQStmt(t.body),this.SEQStmt(t.finalbody);break;case ve:this.visitExpr(t.test),t.msg&&this.visitExpr(t.msg);break;case ye:case _e:this.visitAlias(t.names,t.lineno);break;case we:this.visitExpr(t.body),t.globals&&(this.visitExpr(t.globals),t.locals&&this.visitExpr(t.locals));break;case ke:for(var e=t.names.length,n=0;e>n;++n){var i=fi(this.curClass,t.names[n]).v,i=ci(i),r=this.cur.symFlags[i];if(r&(dr|mr)){if(r&dr)throw new di.builtin.SyntaxError("name '"+i+"' is assigned to before global declaration",this.filename,t.lineno);throw new di.builtin.SyntaxError("name '"+i+"' is used prior to global declaration",this.filename,t.lineno)}this.addDef(new di.builtin.str(i),pr,t.lineno)}break;case xe:this.visitExpr(t.value);break;case Se:case Te:case Ce:break;case de:this.newTmpname(t.lineno),this.visitExpr(t.context_expr),t.optional_vars&&(this.newTmpname(t.lineno),this.visitExpr(t.optional_vars)),this.SEQStmt(t.body);break;default:pi.asserts.fail("Unhandled type "+t.constructor.name+" in visitStmt")}},si.prototype.visitExpr=function(t){switch(pi.asserts.assert(void 0!==t,"visitExpr called with undefined"),t.constructor){case Ee:this.SEQExpr(t.values);break;case $e:this.visitExpr(t.left),this.visitExpr(t.right);break;case Ae:this.visitExpr(t.operand);break;case Ne:this.addDef(new di.builtin.str("lambda"),dr,t.lineno),t.args.defaults&&this.SEQExpr(t.args.defaults),this.enterBlock("lambda",$r,t,t.lineno),this.visitArguments(t.args,t.lineno),this.visitExpr(t.body),this.exitBlock();break;case Le:this.visitExpr(t.test),this.visitExpr(t.body),this.visitExpr(t.orelse);break;case Me:this.SEQExpr(t.keys),this.SEQExpr(t.values);break;case Ie:this.newTmpname(t.lineno),this.visitExpr(t.elt),this.visitComprehension(t.generators,0);break;case Re:this.visitGenexp(t);break;case De:if(t.value&&this.visitExpr(t.value),this.cur.generator=!0,this.cur.returnsValue)throw new di.builtin.SyntaxError("'return' with argument inside generator",this.filename);break;case Ke:this.visitExpr(t.left),this.SEQExpr(t.comparators);break;case Fe:this.visitExpr(t.func),this.SEQExpr(t.args);for(var e=0;e<t.keywords.length;++e)this.visitExpr(t.keywords[e].value);t.starargs&&this.visitExpr(t.starargs),t.kwargs&&this.visitExpr(t.kwargs);break;case Be:case Pe:break;case Oe:this.visitExpr(t.value);break;case je:this.visitExpr(t.value),this.visitSlice(t.slice);break;case Ge:this.addDef(t.id,t.ctx===_?mr:dr,t.lineno);break;case qe:case ze:this.SEQExpr(t.elts);break;default:pi.asserts.fail("Unhandled type "+t.constructor.name+" in visitExpr")}},si.prototype.visitComprehension=function(t,e){for(var n=t.length,i=e;n>i;++i){var r=t[i];this.visitExpr(r.target),this.visitExpr(r.iter),this.SEQExpr(r.ifs)}},si.prototype.visitAlias=function(t,e){for(var n=0;n<t.length;++n){var i=t[n],r=i=null===i.asname?i.name.v:i.asname.v,s=i.indexOf(".");if(-1!==s&&(r=i.substr(0,s)),"*"!==i)this.addDef(new di.builtin.str(r),vr,e);else if(this.cur.blockType!==Er)throw new di.builtin.SyntaxError("import * only allowed at module level",this.filename)}},si.prototype.visitGenexp=function(t){var e=t.generators[0];this.visitExpr(e.iter),this.enterBlock("genexpr",$r,t,t.lineno),this.cur.generator=!0,this.addDef(new di.builtin.str(".0"),br,t.lineno),this.visitExpr(e.target),this.SEQExpr(e.ifs),this.visitComprehension(t.generators,1),this.visitExpr(t.elt),this.exitBlock()},si.prototype.visitExcepthandlers=function(t){for(var e,n=0;e=t[n];++n)e.type&&this.visitExpr(e.type),e.name&&this.visitExpr(e.name),this.SEQStmt(e.body)},si.prototype.analyzeBlock=function(t,e,n,i){var r={},s={},o={},a={},l={};t.blockType==Ar&&(oi(o,i),e&&oi(a,e));for(var u in t.symFlags)this.analyzeName(t,s,u,t.symFlags[u],e,r,n,i);for(t.blockType!==Ar&&(t.blockType===$r&&oi(a,r),e&&oi(a,e),oi(o,i)),i={},r=t.children.length,u=0;r>u;++u){var c=t.children[u];this.analyzeChildBlock(c,a,l,o,i),(c.hasFree||c.childHasFree)&&(t.childHasFree=!0)}oi(l,i),t.blockType===$r&&this.analyzeCells(s,l),this.updateSymbols(t.symFlags,s,e,l,t.blockType===Ar),oi(n,l)},si.prototype.analyzeChildBlock=function(t,e,n,i,r){var s={};oi(s,e),e={},oi(e,n),n={},oi(n,i),this.analyzeBlock(t,s,e,n),oi(r,e)},si.prototype.analyzeCells=function(t,e){for(var n in t)t[n]===kr&&void 0!==e[n]&&(t[n]=Cr,delete e[n])},si.prototype.updateSymbols=function(t,e,n,i,r){for(var s in t){var o=t[s],o=o|e[s]<<_r;t[s]=o}e=Tr<<_r;for(s in i)i=t[s],void 0!==i?r&&i&(yr|pr)&&(t[s]=i|gr):void 0!==n[s]&&(t[s]=e)},si.prototype.analyzeName=function(t,e,n,i,r,s,o,a){if(i&pr){if(i&br)throw new di.builtin.SyntaxError("name '"+n+"' is local and global",this.filename,t.lineno);e[n]=xr,a[n]=null,r&&void 0!==r[n]&&delete r[n]}else i&yr?(e[n]=kr,s[n]=null,delete a[n]):r&&void 0!==r[n]?(e[n]=Tr,t.hasFree=!0,o[n]=null):(a&&void 0!==a[n]||!t.isNested||(t.hasFree=!0),e[n]=Sr)},si.prototype.analyze=function(){this.analyzeBlock(this.top,null,{},{})},di.symboltable=function(t,e){var n=new si(e);n.enterBlock("top",Er,t,0),n.top=n.cur;for(var i=0;i<t.body.length;++i)n.visitStmt(t.body[i]);return n.exitBlock(),n.analyze(),n},di.dumpSymtab=function(t){var e=function(t){return t?"True":"False"},n=function(t){for(var e=[],n=0;n<t.length;++n)e.push(new di.builtin.str(t[n]).$r().v);return"["+e.join(", ")+"]"},i=function(t,r){void 0===r&&(r="");var s;s=""+(r+"Sym_type: "+t.get_type()+"\n"),s+=r+"Sym_name: "+t.get_name()+"\n",s+=r+"Sym_lineno: "+t.get_lineno()+"\n",s+=r+"Sym_nested: "+e(t.is_nested())+"\n",s+=r+"Sym_haschildren: "+e(t.has_children())+"\n","class"===t.get_type()?s+=r+"Class_methods: "+n(t.get_methods())+"\n":"function"===t.get_type()&&(s+=r+"Func_params: "+n(t.get_parameters())+"\n",s+=r+"Func_locals: "+n(t.get_locals())+"\n",s+=r+"Func_globals: "+n(t.get_globals())+"\n",s+=r+"Func_frees: "+n(t.get_frees())+"\n"),s+=r+"-- Identifiers --\n";for(var o=t.get_identifiers(),a=o.length,l=0;a>l;++l){var u=t.lookup(o[l]);s+=r+"name: "+u.get_name()+"\n",s+=r+"  is_referenced: "+e(u.is_referenced())+"\n",s+=r+"  is_imported: "+e(u.is_imported())+"\n",s+=r+"  is_parameter: "+e(u.is_parameter())+"\n",s+=r+"  is_global: "+e(u.is_global())+"\n",s+=r+"  is_declared_global: "+e(u.is_declared_global())+"\n",s+=r+"  is_local: "+e(u.is_local())+"\n",s+=r+"  is_free: "+e(u.is_free())+"\n",s+=r+"  is_assigned: "+e(u.is_assigned())+"\n",s+=r+"  is_namespace: "+e(u.is_namespace())+"\n";var u=u.get_namespaces(),c=u.length;s+=r+"  namespaces: [\n";for(var f=[],h=0;c>h;++h)f.push(i(u[h],r+"    "));s+=f.join("\n"),s+=r+"  ]\n"}return s};return i(t.top,"")},pi.exportSymbol("Sk.symboltable",di.symboltable),pi.exportSymbol("Sk.dumpSymtab",di.dumpSymtab);var Lr;di.gensymcount=0,li.prototype.activateScope=function(){var t=this;Lr=function(){for(var e=t.blocks[t.curblock],n=0;n<arguments.length;++n)e.push(arguments[n])}},ai.prototype.getSourceLine=function(t){return pi.asserts.assert(this.source),this.source[t-1]},ai.prototype.annotateSource=function(t){if(this.source){var e=t.lineno;t=t.col_offset,Lr("\n//\n// line ",e,":\n// ",this.getSourceLine(e),"\n// ");for(var n=0;t>n;++n)Lr(" ");Lr("^\n//\n"),Lr("\nSk.currLineNo = ",e,";\nSk.currColNo = ",t,"\n\n"),Lr("\nSk.currFilename = '",this.filename,"';\n\n")}},ai.prototype.gensym=function(t){return t="$"+(t||""),t+=di.gensymcount++},ai.prototype.niceName=function(t){return this.gensym(t.replace("<","").replace(">","").replace(" ","_"))};var Mr={"abstract":!0,as:!0,"boolean":!0,"break":!0,"byte":!0,"case":!0,"catch":!0,"char":!0,"class":!0,"continue":!0,"const":!0,"debugger":!0,"default":!0,"delete":!0,"do":!0,"double":!0,"else":!0,"enum":!0,"export":!0,"extends":!0,"false":!0,"final":!0,"finally":!0,"float":!0,"for":!0,"function":!0,"goto":!0,"if":!0,"implements":!0,"import":!0,"in":!0,"instanceof":!0,"int":!0,"interface":!0,is:!0,"long":!0,namespace:!0,"native":!0,"new":!0,"null":!0,"package":!0,"private":!0,"protected":!0,"public":!0,"return":!0,"short":!0,"static":!0,"super":!1,"switch":!0,"synchronized":!0,"this":!0,"throw":!0,"throws":!0,"transient":!0,"true":!0,"try":!0,"typeof":!0,use:!0,"var":!0,"void":!0,"volatile":!0,"while":!0,"with":!0},Ir={__defineGetter__:!0,__defineSetter__:!0,apply:!0,call:!0,eval:!0,hasOwnProperty:!0,isPrototypeOf:!0,__lookupGetter__:!0,__lookupSetter__:!0,__noSuchMethod__:!0,propertyIsEnumerable:!0,toSource:!0,toLocaleString:!0,toString:!0,unwatch:!0,valueOf:!0,watch:!0,length:!0};ai.prototype._gr=function(t){var e=this.gensym(t);Lr("var ",e,"=");for(var n=1;n<arguments.length;++n)Lr(arguments[n]);return Lr(";"),e},ai.prototype._interruptTest=function(){Lr("if (Sk.execStart === undefined) {Sk.execStart=new Date()}"),Lr("if (Sk.execLimit != null && new Date() - Sk.execStart > Sk.execLimit) {throw new Sk.builtin.TimeLimitError(Sk.timeoutMsg())}")},ai.prototype._jumpfalse=function(t,e){var n=this._gr("jfalse","(",t,"===false||!Sk.misceval.isTrue(",t,"))");this._interruptTest(),Lr("if(",n,"){/*test failed */$blk=",e,";continue;}")},ai.prototype._jumpundef=function(t,e){this._interruptTest(),Lr("if(",t,"===undefined){$blk=",e,";continue;}")},ai.prototype._jumptrue=function(t,e){var n=this._gr("jtrue","(",t,"===true||Sk.misceval.isTrue(",t,"))");this._interruptTest(),Lr("if(",n,"){/*test passed */$blk=",e,";continue;}")},ai.prototype._jump=function(t){this._interruptTest(),Lr("$blk=",t,";/* jump */continue;")},ai.prototype.ctupleorlist=function(t,e,n){if(pi.asserts.assert("tuple"===n||"list"===n),t.ctx===w)for(var i=0;i<t.elts.length;++i)this.vexpr(t.elts[i],"Sk.abstr.objectGetItem("+e+","+i+")");else if(t.ctx===_){for(e=[],i=0;i<t.elts.length;++i)e.push(this._gr("elem",this.vexpr(t.elts[i])));return this._gr("load"+n,"new Sk.builtins['",n,"']([",e,"])")}},ai.prototype.cdict=function(t){pi.asserts.assert(t.values.length===t.keys.length);for(var e=[],n=0;n<t.values.length;++n){var i=this.vexpr(t.values[n]);e.push(this.vexpr(t.keys[n])),e.push(i)}return this._gr("loaddict","new Sk.builtins['dict']([",e,"])")},ai.prototype.clistcompgen=function(t,e,n,i){var r=this.newBlock("list gen start"),s=this.newBlock("list gen skip"),o=this.newBlock("list gen anchor"),a=e[n],l=this.vexpr(a.iter),l=this._gr("iter","Sk.abstr.iter(",l,")");this._jump(r),this.setBlock(r),l=this._gr("next","Sk.abstr.iternext(",l,")"),this._jumpundef(l,o),this.vexpr(a.target,l);for(var l=a.ifs.length,u=0;l>u;++u){var c=this.vexpr(a.ifs[u]);this._jumpfalse(c,r)}return++n<e.length&&this.clistcompgen(t,e,n,i),n>=e.length&&(e=this.vexpr(i),Lr(t,".v.push(",e,");"),this._jump(s),this.setBlock(s)),this._jump(r),this.setBlock(o),t},ai.prototype.clistcomp=function(t){pi.asserts.assert(t instanceof Ie);var e=this._gr("_compr","new Sk.builtins['list']([])");return this.clistcompgen(e,t.generators,0,t.elt)},ai.prototype.cyield=function(t){if(this.u.ste.blockType!==$r)throw new SyntaxError("'yield' outside function");var e="null";return t.value&&(e=this.vexpr(t.value)),t=this.newBlock("after yield"),Lr("return [/*resume*/",t,",/*ret*/",e,"];"),this.setBlock(t),"$gen.gi$sentvalue"},ai.prototype.ccompare=function(t){pi.asserts.assert(t.ops.length===t.comparators.length);for(var e=this.vexpr(t.left),n=t.ops.length,i=this.newBlock("done"),r=this._gr("compareres","null"),s=0;n>s;++s){var o=this.vexpr(t.comparators[s]),e=this._gr("compare","Sk.builtin.bool(Sk.misceval.richCompareBool(",e,",",o,",'",t.ops[s].prototype._astname,"'))");Lr(r,"=",e,";"),this._jumpfalse(e,i),e=o}return this._jump(i),this.setBlock(i),r},ai.prototype.ccall=function(t){var e=this.vexpr(t.func),n=this.vseqexpr(t.args);if(0<t.keywords.length||t.starargs||t.kwargs){for(var i=[],r=0;r<t.keywords.length;++r)i.push("'"+t.keywords[r].arg.v+"'"),i.push(this.vexpr(t.keywords[r].value));var i="["+i.join(",")+"]",s=r="undefined";return t.starargs&&(r=this.vexpr(t.starargs)),t.kwargs&&(s=this.vexpr(t.kwargs)),this._gr("call","Sk.misceval.call(",e,",",s,",",r,",",i,0<n.length?",":"",n,")")}return this._gr("call","Sk.misceval.callsim(",e,0<n.length?",":"",n,")")},ai.prototype.cslice=function(t){pi.asserts.assert(t instanceof Ue);var e=t.lower?this.vexpr(t.lower):t.step?"Sk.builtin.none.none$":"new Sk.builtin.nmber(0)",n=t.upper?this.vexpr(t.upper):t.step?"Sk.builtin.none.none$":"new Sk.builtin.nmber(2147483647)";return t=t.step?this.vexpr(t.step):"Sk.builtin.none.none$",this._gr("slice","new Sk.builtins['slice'](",e,",",n,",",t,")")},ai.prototype.eslice=function(t){pi.asserts.assert(t instanceof Array);for(var e=[],n=0;n<t.length;n++)e.push(this.vslicesub(t[n]));return this._gr("extslice","new Sk.builtins['tuple']([",e,"])")},ai.prototype.vslicesub=function(t){var e;switch(t.constructor){case Number:case String:e=t;break;case Ve:e=this.vexpr(t.value);break;case Ue:e=this.cslice(t);break;case He:pi.asserts.fail("todo compile.js Ellipsis;");break;case We:e=this.eslice(t.dims);break;default:pi.asserts.fail("invalid subscript kind")}return e},ai.prototype.vslice=function(t,e,n,i){return t=this.vslicesub(t),this.chandlesubscr(e,n,t,i)},ai.prototype.chandlesubscr=function(t,e,n,i){return t===_||t===x?this._gr("lsubscr","Sk.abstr.objectGetItem(",e,",",n,")"):(t===w||t===S?Lr("Sk.abstr.objectSetItem(",e,",",n,",",i,");"):t===k?Lr("Sk.abstr.objectDelItem(",e,",",n,");"):pi.asserts.fail("handlesubscr fail"),void 0)},ai.prototype.cboolop=function(t){pi.asserts.assert(t instanceof Ee);var e;e=t.op===C?this._jumpfalse:this._jumptrue;var n=this.newBlock("end of boolop");t=t.values;for(var i,r=t.length,s=0;r>s;++s){var o=this.vexpr(t[s]);0===s&&(i=this._gr("boolopsucc",o)),Lr(i,"=",o,";"),e.call(this,o,n)
}return this._jump(n),this.setBlock(n),i},ai.prototype.vexpr=function(t,e,n){switch(t.lineno>this.u.lineno&&(this.u.lineno=t.lineno,this.u.linenoSet=!1),t.constructor){case Ee:return this.cboolop(t);case $e:return this._gr("binop","Sk.abstr.numberBinOp(",this.vexpr(t.left),",",this.vexpr(t.right),",'",t.op.prototype._astname,"')");case Ae:return this._gr("unaryop","Sk.abstr.numberUnaryOp(",this.vexpr(t.operand),",'",t.op.prototype._astname,"')");case Ne:return this.clambda(t);case Le:return this.cifexp(t);case Me:return this.cdict(t);case Ie:return this.clistcomp(t);case Re:return this.cgenexp(t);case De:return this.cyield(t);case Ke:return this.ccompare(t);case Fe:return e=this.ccall(t),this.annotateSource(t),e;case Be:if("number"==typeof t.n)return t.n;if(t.n instanceof di.builtin.nmber)return"new Sk.builtin.nmber("+t.n.v+",'"+t.n.skType+"')";if(t.n instanceof di.builtin.lng)return"Sk.longFromStr('"+t.n.tp$str().v+"')";pi.asserts.fail("unhandled Num type");case Pe:return this._gr("str","new Sk.builtins['str'](",t.s.$r().v,")");case Oe:var i;t.ctx!==S&&(i=this.vexpr(t.value));var r=t.attr.$r().v,r=r.substring(1,r.length-1),r=fi(this.u.private_,new di.builtin.str(r)).v,r=ui(r),r=ci(r);switch(t.ctx){case x:case _:return this._gr("lattr","Sk.abstr.gattr(",i,",'",r,"')");case S:Lr("if(",e,"!==undefined){"),i=this.vexpr(n||null),Lr("Sk.abstr.sattr(",i,",'",r,"',",e,");"),Lr("}");break;case w:Lr("Sk.abstr.sattr(",i,",'",r,"',",e,");");break;case k:pi.asserts.fail("todo Del;");break;default:pi.asserts.fail("invalid attribute expression")}break;case je:switch(t.ctx){case x:case _:case w:case k:return this.vslice(t.slice,t.ctx,this.vexpr(t.value),e);case S:Lr("if(",e,"!==undefined){"),i=this.vexpr(n||null),this.vslice(t.slice,t.ctx,i,e),Lr("}");break;default:pi.asserts.fail("invalid subscript expression")}break;case Ge:return this.nameop(t.id,t.ctx,e);case qe:return this.ctupleorlist(t,e,"list");case ze:return this.ctupleorlist(t,e,"tuple");default:pi.asserts.fail("unhandled case in vexpr")}},ai.prototype.vseqexpr=function(t,e){pi.asserts.assert(void 0===e||t.length===e.length);for(var n=[],i=0;i<t.length;++i)n.push(this.vexpr(t[i],void 0===e?void 0:e[i]));return n},ai.prototype.caugassign=function(t){pi.asserts.assert(t instanceof ue);var e=t.target;switch(e.constructor){case Oe:var n=new Oe(e.value,e.attr,x,e.lineno,e.col_offset),i=this.vexpr(n),r=this.vexpr(t.value);return t=this._gr("inplbinopattr","Sk.abstr.numberInplaceBinOp(",i,",",r,",'",t.op.prototype._astname,"')"),n.ctx=S,this.vexpr(n,t,e.value);case je:return n=this.vslicesub(e.slice),n=new je(e.value,n,x,e.lineno,e.col_offset),i=this.vexpr(n),r=this.vexpr(t.value),t=this._gr("inplbinopsubscr","Sk.abstr.numberInplaceBinOp(",i,",",r,",'",t.op.prototype._astname,"')"),n.ctx=S,this.vexpr(n,t,e.value);case Ge:return n=this.nameop(e.id,_),r=this.vexpr(t.value),t=this._gr("inplbinop","Sk.abstr.numberInplaceBinOp(",n,",",r,",'",t.op.prototype._astname,"')"),this.nameop(e.id,w,t);default:pi.asserts.fail("unhandled case in augassign")}},ai.prototype.exprConstant=function(t){switch(t.constructor){case Be:return di.misceval.isTrue(t.n);case Pe:return di.misceval.isTrue(t.s);default:return-1}},ai.prototype.newBlock=function(t){var e=this.u.blocknum++;return this.u.blocks[e]=[],this.u.blocks[e]._name=t||"<unnamed>",e},ai.prototype.setBlock=function(t){pi.asserts.assert(t>=0&&t<this.u.blocknum),this.u.curblock=t},ai.prototype.pushBreakBlock=function(t){pi.asserts.assert(t>=0&&t<this.u.blocknum),this.u.breakBlocks.push(t)},ai.prototype.popBreakBlock=function(){this.u.breakBlocks.pop()},ai.prototype.pushContinueBlock=function(t){pi.asserts.assert(t>=0&&t<this.u.blocknum),this.u.continueBlocks.push(t)},ai.prototype.popContinueBlock=function(){this.u.continueBlocks.pop()},ai.prototype.pushExceptBlock=function(t){pi.asserts.assert(t>=0&&t<this.u.blocknum),this.u.exceptBlocks.push(t)},ai.prototype.popExceptBlock=function(){this.u.exceptBlocks.pop()},ai.prototype.pushFinallyBlock=function(t){pi.asserts.assert(t>=0&&t<this.u.blocknum),this.u.finallyBlocks.push(t)},ai.prototype.popFinallyBlock=function(){this.u.finallyBlocks.pop()},ai.prototype.setupExcept=function(t){Lr("$exc.push(",t,");")},ai.prototype.endExcept=function(){Lr("$exc.pop();")},ai.prototype.outputLocals=function(t){for(var e={},n=0;t.argnames&&n<t.argnames.length;++n)e[t.argnames[n]]=!0;t.localnames.sort();for(var i=[],n=0;n<t.localnames.length;++n){var r=t.localnames[n];void 0===e[r]&&(i.push(r),e[r]=!0)}return 0<i.length?"var "+i.join(",")+"; /* locals */":""},ai.prototype.outputAllUnits=function(){for(var t="",e=0;e<this.allUnits.length;++e){for(var n=this.allUnits[e],t=t+n.prefixCode,t=t+this.outputLocals(n),t=t+n.varDeclsCode,t=t+n.switchCode,i=n.blocks,r=0;r<i.length;++r)t+="case "+r+": /* --- "+i[r]._name+" --- */",t+=i[r].join(""),t+="throw new Sk.builtin.SystemError('internal error: unterminated block');";t+=n.suffixCode}return t},ai.prototype.cif=function(t){pi.asserts.assert(t instanceof pe);var e=this.exprConstant(t.test);if(0===e)t.orelse&&this.vseqstmt(t.orelse);else if(1===e)this.vseqstmt(t.body);else{var n=this.newBlock("end of if"),e=this.newBlock("next branch of if"),i=this.vexpr(t.test);this._jumpfalse(i,e),this.vseqstmt(t.body),this._jump(n),this.setBlock(e),t.orelse&&this.vseqstmt(t.orelse),this._jump(n)}this.setBlock(n)},ai.prototype.cwhile=function(t){if(0===this.exprConstant(t.test))t.orelse&&this.vseqstmt(t.orelse);else{var e=this.newBlock("while test");this._jump(e),this.setBlock(e);var n=this.newBlock("after while"),i=0<t.orelse.length?this.newBlock("while orelse"):null,r=this.newBlock("while body");this._jumpfalse(this.vexpr(t.test),i?i:n),this._jump(r),this.pushBreakBlock(n),this.pushContinueBlock(e),this.setBlock(r),this.vseqstmt(t.body),this._jump(e),this.popContinueBlock(),this.popBreakBlock(),0<t.orelse.length&&(this.setBlock(i),this.vseqstmt(t.orelse),this._jump(n)),this.setBlock(n)}},ai.prototype.cfor=function(t){var e=this.newBlock("for start"),n=this.newBlock("for cleanup"),i=this.newBlock("for end");this.pushBreakBlock(i),this.pushContinueBlock(e);var r,s=this.vexpr(t.iter);this.u.ste.generator?(r="$loc."+this.gensym("iter"),Lr(r,"=Sk.abstr.iter(",s,");")):r=this._gr("iter","Sk.abstr.iter(",s,")"),this._jump(e),this.setBlock(e),s=this._gr("next","Sk.abstr.iternext(",r,")"),this._jumpundef(s,n),this.vexpr(t.target,s),this.vseqstmt(t.body),this._jump(e),this.setBlock(n),this.popContinueBlock(),this.popBreakBlock(),this.vseqstmt(t.orelse),this._jump(i),this.setBlock(i)},ai.prototype.craise=function(t){if(t&&t.type&&t.type.id&&"StopIteration"===t.type.id.v)Lr("return undefined;");else{var e="";t.inst?(e=this.vexpr(t.inst),Lr("throw ",this.vexpr(t.type),"(",e,");")):t.type?t.type.func?Lr("throw ",this.vexpr(t.type),";"):Lr("throw ",this.vexpr(t.type),"('');"):Lr("throw $err;")}},ai.prototype.ctryexcept=function(t){for(var e=t.handlers.length,n=[],i=0;e>i;++i)n.push(this.newBlock("except_"+i+"_"));var r=this.newBlock("unhandled"),s=this.newBlock("orelse"),o=this.newBlock("end");for(this.setupExcept(n[0]),this.vseqstmt(t.body),this.endExcept(),this._jump(s),i=0;e>i;++i){this.setBlock(n[i]);var a=t.handlers[i];if(!a.type&&e-1>i)throw new SyntaxError("default 'except:' must be last");if(a.type){var l=this.vexpr(a.type),u=i==e-1?r:n[i+1],l=this._gr("instance","$err instanceof ",l);this._jumpfalse(l,u)}a.name&&this.vexpr(a.name,"$err"),this.vseqstmt(a.body),this._jump(o)}this.setBlock(r),Lr("throw $err;"),this.setBlock(s),this.vseqstmt(t.orelse),this._jump(o),this.setBlock(o)},ai.prototype.ctryfinally=function(t){Lr("/*todo; tryfinally*/"),this.ctryexcept(t.body[0])},ai.prototype.cassert=function(t){var e=this.vexpr(t.test),n=this.newBlock("end");this._jumptrue(e,n),Lr("throw new Sk.builtin.AssertionError(",t.msg?this.vexpr(t.msg):"",");"),this.setBlock(n)},ai.prototype.cimportas=function(t,e,n){t=t.v;var i=t.indexOf(".");if(-1!==i)for(t=t.substr(i+1);-1!==i;){var i=t.indexOf("."),r=-1!==i?t.substr(0,i):t;n=this._gr("lattr","Sk.abstr.gattr(",n,",'",r,"')"),t=t.substr(i+1)}return this.nameop(e,w,n)},ai.prototype.cimport=function(t){for(var e=t.names.length,n=0;e>n;++n){var i=t.names[n],r=this._gr("module","Sk.builtin.__import__(",i.name.$r().v,",$gbl,$loc,[])");if(i.asname)this.cimportas(i.name,i.asname,r);else{var i=i.name,s=i.v.indexOf(".");-1!==s&&(i=new di.builtin.str(i.v.substr(0,s))),this.nameop(i,w,r)}}},ai.prototype.cfromimport=function(t){for(var e=t.names.length,n=[],i=0;e>i;++i)n[i]=t.names[i].name.$r().v;for(n=this._gr("module","Sk.builtin.__import__(",t.module.$r().v,",$gbl,$loc,[",n,"])"),i=0;e>i;++i){var r=t.names[i];if(0===i&&"*"===r.name.v){pi.asserts.assert(1===e),Lr("Sk.importStar(",n,",$loc, $gbl);");break}var s=this._gr("item","Sk.abstr.gattr(",n,",",r.name.$r().v,")"),o=r.name;r.asname&&(o=r.asname),this.nameop(o,w,s)}},ai.prototype.buildcodeobj=function(t,e,n,i,r){var s=[],o=null,a=null;n&&this.vseqexpr(n),i&&i.defaults&&(s=this.vseqexpr(i.defaults)),i&&i.vararg&&(o=i.vararg),i&&i.kwarg&&(a=i.kwarg),t=this.enterScope(e,t,t.lineno),n=this.u.ste.generator;var l=this.u.ste.hasFree,u=this.u.ste.childHasFree,c=this.newBlock("codeobj entry");this.u.prefixCode="var "+t+"=(function "+this.niceName(e.v)+"$(";var f=[];if(n){if(a)throw new SyntaxError(e.v+"(): keyword arguments in generators not supported");if(o)throw new SyntaxError(e.v+"(): variable number of arguments in generators not supported");f.push("$gen")}else{a&&f.push("$kwa");for(var h=0;i&&h<i.args.length;++h)f.push(this.nameop(i.args[h].id,T))}l&&f.push("$free"),this.u.prefixCode+=f.join(","),this.u.prefixCode+="){",n&&(this.u.prefixCode+="\n// generator\n"),l&&(this.u.prefixCode+="\n// has free\n"),u&&(this.u.prefixCode+="\n// has cell\n"),h="{}",n&&(c="$gen.gi$resumeat",h="$gen.gi$locals");var p="";for(u&&(p=",$cell={}"),this.u.varDeclsCode+="var $blk="+c+",$exc=[],$loc="+h+p+",$gbl=this,$err=undefined;",h=0;i&&h<i.args.length;++h)u=i.args[h].id,this.isCell(u)&&(this.u.varDeclsCode+="$cell."+u.v+"="+u.v+";");if(n||(this.u.varDeclsCode+='Sk.builtin.pyCheckArgs("'+e.v+'", arguments, '+(i?i.args.length-s.length:0)+", "+(o?1/0:i?i.args.length:0)+", "+(a?!0:!1)+", "+l+");"),0<s.length)for(u=i.args.length-s.length,h=0;h<s.length;++h)c=this.nameop(i.args[h+u].id,T),this.u.varDeclsCode+="if("+c+"===undefined)"+c+"="+t+".$defaults["+h+"];";o&&(this.u.varDeclsCode+=o.v+"=new Sk.builtins['tuple'](Array.prototype.slice.call(arguments,"+f.length+")); /*vararg*/"),a&&(this.u.varDeclsCode+=a.v+"=new Sk.builtins['dict']($kwa);"),this.u.switchCode="while(true){try{ switch($blk){",this.u.suffixCode="} }catch(err){if ($exc.length>0) { $err = err; $blk=$exc.pop(); continue; } else { throw err; }} }});",r.call(this,t);var d;if(i&&0<i.args.length){for(r=[],h=0;h<i.args.length;++h)r.push(i.args[h].id.v);d=r.join("', '"),this.u.argnames=r}return this.exitScope(),0<s.length&&Lr(t,".$defaults=[",s.join(","),"];"),d&&Lr(t,".co_varnames=['",d,"'];"),a&&Lr(t,".co_kwargs=1;"),a="",l&&(a=",$cell",this.u.ste.hasFree&&(a+=",$free")),n?i&&0<i.args.length?this._gr("gener",'(function(){var $origargs=Array.prototype.slice.call(arguments);Sk.builtin.pyCheckArgs("',e.v,'",arguments,',i.args.length-s.length,",",i.args.length,");return new Sk.builtins['generator'](",t,",$gbl,$origargs",a,");})"):this._gr("gener",'(function(){Sk.builtin.pyCheckArgs("',e.v,"\",arguments,0,0);return new Sk.builtins['generator'](",t,",$gbl,[]",a,");})"):this._gr("funcobj","new Sk.builtins['function'](",t,",$gbl",a,")")},ai.prototype.cfunction=function(t){pi.asserts.assert(t instanceof re);var e=this.buildcodeobj(t,t.name,t.decorator_list,t.args,function(){this.vseqstmt(t.body),Lr("return Sk.builtin.none.none$;")});this.nameop(t.name,w,e)},ai.prototype.clambda=function(t){return pi.asserts.assert(t instanceof Ne),this.buildcodeobj(t,new di.builtin.str("<lambda>"),null,t.args,function(e){e=this.vexpr(t.body),Lr("return ",e,";")})},ai.prototype.cifexp=function(t){var e=this.newBlock("next of ifexp"),n=this.newBlock("end of ifexp"),i=this._gr("res","null"),r=this.vexpr(t.test);return this._jumpfalse(r,e),Lr(i,"=",this.vexpr(t.body),";"),this._jump(n),this.setBlock(e),Lr(i,"=",this.vexpr(t.orelse),";"),this._jump(n),this.setBlock(n),i},ai.prototype.cgenexpgen=function(t,e,n){var i=this.newBlock("start for "+e),r=this.newBlock("skip for "+e);this.newBlock("if cleanup for "+e);var s,o=this.newBlock("end for "+e),a=t[e];if(0===e)s="$loc.$iter0";else{var l=this.vexpr(a.iter);s="$loc."+this.gensym("iter"),Lr(s,"=","Sk.abstr.iter(",l,");")}for(this._jump(i),this.setBlock(i),s=this._gr("next","Sk.abstr.iternext(",s,")"),this._jumpundef(s,o),this.vexpr(a.target,s),s=a.ifs.length,l=0;s>l;++l){var u=this.vexpr(a.ifs[l]);this._jumpfalse(u,i)}++e<t.length&&this.cgenexpgen(t,e,n),e>=t.length&&(t=this.vexpr(n),Lr("return [",r,"/*resume*/,",t,"/*ret*/];"),this.setBlock(r)),this._jump(i),this.setBlock(o),1===e&&Lr("return Sk.builtin.none.none$;")},ai.prototype.cgenexp=function(t){var e=this.buildcodeobj(t,new di.builtin.str("<genexpr>"),null,null,function(){this.cgenexpgen(t.generators,0,t.elt)}),e=this._gr("gener",e,"()");return Lr(e,".gi$locals.$iter0=Sk.abstr.iter(",this.vexpr(t.generators[0].iter),");"),e},ai.prototype.cclass=function(t){pi.asserts.assert(t instanceof se);var e=this.vseqexpr(t.bases),n=this.enterScope(t.name,t,t.lineno),i=this.newBlock("class entry");this.u.prefixCode="var "+n+"=(function $"+t.name.v+"$class_outer($globals,$locals,$rest){var $gbl=$globals,$loc=$locals;",this.u.switchCode+="return(function "+t.name.v+"(){",this.u.switchCode+="var $blk="+i+",$exc=[];while(true){switch($blk){",this.u.suffixCode="}break;}}).apply(null,$rest);});",this.u.private_=t.name,this.cbody(t.body),Lr("break;"),this.exitScope(),e=this._gr("built","Sk.misceval.buildClass($gbl,",n,",",t.name.$r().v,",[",e,"])"),this.nameop(t.name,w,e)},ai.prototype.ccontinue=function(){if(0===this.u.continueBlocks.length)throw new SyntaxError("'continue' outside loop");this._jump(this.u.continueBlocks[this.u.continueBlocks.length-1])},ai.prototype.vstmt=function(t){switch(this.u.lineno=t.lineno,this.u.linenoSet=!1,this.annotateSource(t),t.constructor){case re:this.cfunction(t);break;case se:this.cclass(t);break;case oe:if(this.u.ste.blockType!==$r)throw new SyntaxError("'return' outside function");t.value?Lr("return ",this.vexpr(t.value),";"):Lr("return Sk.builtin.none.none$;");break;case ae:this.vseqexpr(t.targets);break;case le:for(var e=t.targets.length,n=this.vexpr(t.value),i=0;e>i;++i)this.vexpr(t.targets[i],n);break;case ue:return this.caugassign(t);case ce:this.cprint(t);break;case fe:return this.cfor(t);case he:return this.cwhile(t);case pe:return this.cif(t);case be:return this.craise(t);case me:return this.ctryexcept(t);case ge:return this.ctryfinally(t);case ve:return this.cassert(t);case ye:return this.cimport(t);case _e:return this.cfromimport(t);case ke:break;case xe:this.vexpr(t.value);break;case Se:break;case Te:if(0===this.u.breakBlocks.length)throw new SyntaxError("'break' outside loop");this._jump(this.u.breakBlocks[this.u.breakBlocks.length-1]);break;case Ce:this.ccontinue(t);break;default:pi.asserts.fail("unhandled case in vstmt")}},ai.prototype.vseqstmt=function(t){for(var e=0;e<t.length;++e)this.vstmt(t[e])};var Rr=0,Dr=1,Kr=2,Fr=3;if(ai.prototype.isCell=function(t){return t=fi(this.u.private_,t).v,this.u.ste.getScope(t)===Cr?!0:!1},ai.prototype.nameop=function(t,e,n){if((e===w||e===S||e===k)&&"__debug__"===t.v)throw new di.builtin.SyntaxError("can not assign to __debug__");if((e===w||e===S||e===k)&&"None"===t.v)throw new di.builtin.SyntaxError("can not assign to None");if("None"===t.v)return"Sk.builtin.none.none$";if("True"===t.v)return"Sk.builtin.bool.true$";if("False"===t.v)return"Sk.builtin.bool.false$";var i=fi(this.u.private_,t).v,i=ci(i),r=Fr,s=this.u.ste.getScope(i),o=null;switch(s){case Tr:o="$free",r=Kr;break;case Cr:o="$cell",r=Kr;break;case kr:this.u.ste.blockType!==$r||this.u.ste.generator||(r=Rr);break;case Sr:this.u.ste.blockType===$r&&(r=Dr);break;case xr:r=Dr}switch(i=ui(i),pi.asserts.assert(s||"_"===t.v.charAt(1)),t=i,this.u.ste.generator||this.u.ste.blockType!==$r?i="$loc."+i:r!==Rr&&r!==Fr||this.u.localnames.push(i),r){case Rr:switch(e){case _:case T:return Lr("if (",i," === undefined) { throw new Error('local variable \\'",i,"\\' referenced before assignment'); }\n"),i;case w:Lr(i,"=",n,";");break;case k:Lr("delete ",i,";");break;default:pi.asserts.fail("unhandled")}break;case Fr:switch(e){case _:return e=this.gensym("loadname"),Lr("var ",e,"=",i,"!==undefined?",i,":Sk.misceval.loadname('",t,"',$gbl);"),e;case w:Lr(i,"=",n,";");break;case k:Lr("delete ",i,";");break;case T:return i;default:pi.asserts.fail("unhandled")}break;case Dr:switch(e){case _:return this._gr("loadgbl","Sk.misceval.loadname('",t,"',$gbl)");case w:Lr("$gbl.",t,"=",n,";");break;case k:Lr("delete $gbl.",t);break;default:pi.asserts.fail("unhandled case in name op_global")}break;case Kr:switch(e){case _:return o+"."+t;case w:Lr(o,".",t,"=",n,";");break;case T:return t;default:pi.asserts.fail("unhandled case in name op_deref")}break;default:pi.asserts.fail("unhandled case")}},ai.prototype.enterScope=function(t,e,n){var i=new li;return i.ste=this.st.getStsForAst(e),i.name=t,i.firstlineno=n,this.u&&this.u.private_&&(i.private_=this.u.private_),this.stack.push(this.u),this.allUnits.push(i),t=this.gensym("scope"),i.scopename=t,this.u=i,this.u.activateScope(),this.nestlevel++,t},ai.prototype.exitScope=function(){var t=this.u;if(this.nestlevel--,(this.u=0<=this.stack.length-1?this.stack.pop():null)&&this.u.activateScope(),"<module>"!==t.name.v){var e=t.name.$r().v,e=e.substring(1,e.length-1),e=ui(e),e=ci(e);Lr(t.scopename,".co_name=new Sk.builtins['str']('",e,"');")}},ai.prototype.cbody=function(t){for(var e=0;e<t.length;++e)this.vstmt(t[e])},ai.prototype.cprint=function(t){pi.asserts.assert(t instanceof ce),t.dest&&this.vexpr(t.dest);for(var e=t.values.length,n=0;e>n;++n)Lr("Sk.misceval.print_(","new Sk.builtins['str'](",this.vexpr(t.values[n]),").v);");t.nl&&Lr("Sk.misceval.print_(",'"\\n");')},ai.prototype.cmod=function(t){var e=this.enterScope(new di.builtin.str("<module>"),t,0),n=this.newBlock("module entry");switch(this.u.prefixCode="var "+e+"=(function($modname){",this.u.varDeclsCode="var $blk="+n+",$exc=[],$gbl={},$loc=$gbl,$err=undefined;$gbl.__name__=$modname;Sk.globals=$gbl;",this.u.switchCode="try { while(true){try{ switch($blk){",this.u.suffixCode="} }catch(err){if ($exc.length>0) { $err = err; $blk=$exc.pop(); continue; } else { throw err; }} } }catch(err){ if (err instanceof Sk.builtin.SystemExit && !Sk.throwSystemExit) { Sk.misceval.print_(err.toString() + '\\n'); return $loc; } else { throw err; } } });",t.constructor){case te:this.cbody(t.body),Lr("return $loc;");break;default:pi.asserts.fail("todo; unhandled case in compilerMod")}return this.exitScope(),this.result.push(this.outputAllUnits()),e},di.compile=function(t,e,n){n=di.parse(e,t),n=di.astFromParse(n,e);var i=di.symboltable(n,e);return t=new ai(e,i,0,t),e=t.cmod(n),t=t.result.join(""),{funcname:e,code:t}},pi.exportSymbol("Sk.compile",di.compile),di.resetCompiler=function(){di.gensymcount=0},pi.exportSymbol("Sk.resetCompiler",di.resetCompiler),di.sysmodules=new di.builtin.dict([]),di.realsyspath=void 0,di.importSearchPathForName=function(t,e,n){for(var i=di.realsyspath.tp$iter(),r=i.tp$iternext();void 0!==r;r=i.tp$iternext())for(var s=t.replace(/\./g,"/"),r=[r.v+"/"+s+e,r.v+"/"+s+"/__init__"+e],s=0;s<r.length;++s){var o=r[s];try{return di.read(o),o}catch(a){}}if(!n)throw new di.builtin.ImportError("No module named "+t)},di.doOneTimeInitialization=function(){di.builtin.type.basesStr_=new di.builtin.str("__bases__"),di.builtin.type.mroStr_=new di.builtin.str("__mro__"),di.builtin.object.$d=new di.builtin.dict([]),di.builtin.object.$d.mp$ass_subscript(di.builtin.type.basesStr_,new di.builtin.tuple([])),di.builtin.object.$d.mp$ass_subscript(di.builtin.type.mroStr_,new di.builtin.tuple([di.builtin.object]))},di.importSetUpPath=function(){if(!di.realsyspath){for(var t=[new di.builtin.str("src/builtin"),new di.builtin.str("src/lib"),new di.builtin.str(".")],e=0;e<di.syspath.length;++e)t.push(new di.builtin.str(di.syspath[e]));di.realsyspath=new di.builtin.list(t),di.doOneTimeInitialization()}},hi)var Br=function(t){return t};di.importModuleInternal_=function(t,e,n,i){di.importSetUpPath(),void 0===n&&(n=t);var r,s=null,o=n.split(".");try{var a=di.sysmodules.mp$subscript(n);return 1<o.length?di.sysmodules.mp$subscript(o[0]):a}catch(l){}if(1<o.length&&(r=o.slice(0,o.length-1).join("."),s=di.importModuleInternal_(r,e)),a=new di.builtin.module,di.sysmodules.mp$ass_subscript(t,a),i?t=di.compile(i,t+".py","exec"):(i=di.importSearchPathForName(t,".js",!0))?t={funcname:"$builtinmodule",code:di.read(i)}:(t=di.importSearchPathForName(t,".py"),t=di.compile(di.read(t),t,"exec")),i=a.$js=t.code,null!=di.dateSet&&di.dateSet||(i="Sk.execStart = new Date();\n"+t.code,di.dateSet=!0),e){for(e=Br(t.code).split("\n"),i=1;i<=e.length;++i){for(var u="",c=(""+i).length;5>c;++c)u+=" ";e[i-1]="/* "+u+i+" */ "+e[i-1]}i=e.join("\n"),di.debugout(i)}return i+="\n"+t.funcname+"("+("new Sk.builtin.str('"+n+"')")+");",e=pi.global.eval(i),e.__name__||(e.__name__=new di.builtin.str(n)),a.$d=e,s?(di.sysmodules.mp$subscript(r).tp$setattr(o[o.length-1],a),s):a},di.importModule=function(t,e){return di.importModuleInternal_(t,e)},di.importMain=function(t,e){return di.dateSet=!1,di.filesLoaded=!1,di.sysmodules=new di.builtin.dict([]),di.realsyspath=void 0,di.resetCompiler(),di.importModuleInternal_(t,e,"__main__")},di.importMainWithBody=function(t,e,n){return di.dateSet=!1,di.filesLoaded=!1,di.sysmodules=new di.builtin.dict([]),di.realsyspath=void 0,di.resetCompiler(),di.importModuleInternal_(t,e,"__main__",n)},di.builtin.__import__=function(t,e,n,i){return e=di.importModuleInternal_(t),i&&0!==i.length?(e=di.sysmodules.mp$subscript(t),pi.asserts.assert(e),e):e},di.importStar=function(t,e){var n,i=Object.getOwnPropertyNames(t.$d);for(n in i)e[i[n]]=t.$d[i[n]]},pi.exportSymbol("Sk.importMain",di.importMain),pi.exportSymbol("Sk.importMainWithBody",di.importMainWithBody),pi.exportSymbol("Sk.builtin.__import__",di.builtin.__import__),pi.exportSymbol("Sk.importStar",di.importStar),di.builtin.timSort=function(t,e){this.list=new di.builtin.list(t.v),this.MIN_GALLOP=7,this.listlength=e?e:t.sq$length()},di.builtin.timSort.prototype.lt=function(t,e){return di.misceval.richCompareBool(t,e,"Lt")},di.builtin.timSort.prototype.le=function(t,e){return!this.lt(e,t)},di.builtin.timSort.prototype.setitem=function(t,e){this.list.v[t]=e},di.builtin.timSort.prototype.binary_sort=function(t,e){for(var n=t.base+e;n<t.base+t.len;n++){for(var i=t.base,r=n,s=t.getitem(r);r>i;){var o=i+(r-i>>1);this.lt(s,t.getitem(o))?r=o:i=o+1}for(pi.asserts.assert(i===r),o=n;o>i;o--)t.setitem(o,t.getitem(o-1));t.setitem(i,s)}},di.builtin.timSort.prototype.count_run=function(t){var e;if(1>=t.len){var n=t.len;e=!1}else if(n=2,this.lt(t.getitem(t.base+1),t.getitem(t.base))){e=!0;for(var i=t.base+2;i<t.base+t.len&&this.lt(t.getitem(i),t.getitem(i-1));i++)n++}else for(e=!1,i=t.base+2;i<t.base+t.len&&!this.lt(t.getitem(i),t.getitem(i-1));i++)n++;return{run:new di.builtin.listSlice(t.list,t.base,n),descending:e}},di.builtin.timSort.prototype.sort=function(){var t=new di.builtin.listSlice(this.list,0,this.listlength);if(!(2>t.len)){this.merge_init();for(var e=this.merge_compute_minrun(t.len);0<t.len;){var n=this.count_run(t);if(n.descending&&n.run.reverse(),n.run.len<e){var i=n.run.len;n.run.len=e<t.len?e:t.len,this.binary_sort(n.run,i)}t.advance(n.run.len),this.pending.push(n.run),this.merge_collapse()}pi.asserts.assert(t.base==this.listlength),this.merge_force_collapse(),pi.asserts.assert(1==this.pending.length),pi.asserts.assert(0==this.pending[0].base),pi.asserts.assert(this.pending[0].len==this.listlength)}},di.builtin.timSort.prototype.gallop=function(t,e,n,i){pi.asserts.assert(n>=0&&n<e.len);var r=this;i=i?function(t,e){return r.le(t,e)}:function(t,e){return r.lt(t,e)};var s,o=e.base+n,a=0,l=1;if(i(e.getitem(o),t)){for(s=e.len-n;s>l&&i(e.getitem(o+l),t);){a=l;try{l=(l<<1)+1}catch(u){l=s}}l>s&&(l=s),a+=n,l+=n}else{for(s=n+1;s>l&&!i(e.getitem(o-l),t);){a=l;try{l=(l<<1)+1}catch(c){l=s}}l>s&&(l=s),o=n-a,a=n-l,l=o}for(pi.asserts.assert(l>(a>=-1)<=e.len),a+=1;l>a;)n=a+(l-a>>1),i(e.getitem(e.base+n),t)?a=n+1:l=n;return pi.asserts.assert(a==l),l},di.builtin.timSort.prototype.merge_init=function(){this.min_gallop=this.MIN_GALLOP,this.pending=[]},di.builtin.timSort.prototype.merge_lo=function(t,e){pi.asserts.assert(0<t.len&&0<e.len&&t.base+t.len==e.base);var n=this.min_gallop,i=t.base;t=t.copyitems();try{if(this.setitem(i,e.popleft()),i++,1!=t.len&&0!=e.len)for(var r,s;;){for(s=r=0;;)if(this.lt(e.getitem(e.base),t.getitem(t.base))){if(this.setitem(i,e.popleft()),i++,0==e.len)return;if(s++,r=0,s>=n)break}else{if(this.setitem(i,t.popleft()),i++,1==t.len)return;if(r++,s=0,r>=n)break}for(n+=1;;){this.min_gallop=n-=n>1,r=this.gallop(e.getitem(e.base),t,0,!0);for(var o=t.base;o<t.base+r;o++)this.setitem(i,t.getitem(o)),i++;if(t.advance(r),1>=t.len)return;if(this.setitem(i,e.popleft()),i++,0==e.len)return;for(s=this.gallop(t.getitem(t.base),e,0,!1),o=e.base;o<e.base+s;o++)this.setitem(i,e.getitem(o)),i++;if(e.advance(s),0==e.len)return;if(this.setitem(i,t.popleft()),i++,1==t.len)return;if(r<this.MIN_GALLOP&&s<this.MIN_GALLOP)break;n++,this.min_gallop=n}}}finally{for(pi.asserts.assert(0<=t.len&&0<=e.len),o=e.base;o<e.base+e.len;o++)this.setitem(i,e.getitem(o)),i++;for(o=t.base;o<t.base+t.len;o++)this.setitem(i,t.getitem(o)),i++}},di.builtin.timSort.prototype.merge_hi=function(t,e){pi.asserts.assert(0<t.len&&0<e.len&&t.base+t.len==e.base);var n=this.min_gallop,i=e.base+e.len;e=e.copyitems();try{if(i--,this.setitem(i,t.popright()),0!=t.len&&1!=e.len)for(var r,s,o,a;;){for(s=r=0;;)if(o=t.getitem(t.base+t.len-1),a=e.getitem(e.base+e.len-1),this.lt(a,o)){if(i--,this.setitem(i,o),t.len--,0==t.len)return;if(r++,s=0,r>=n)break}else{if(i--,this.setitem(i,a),e.len--,1==e.len)return;if(s++,r=0,s>=n)break}for(n+=1;;){this.min_gallop=n-=n>1,a=e.getitem(e.base+e.len-1);var l=this.gallop(a,t,t.len-1,!0);r=t.len-l;for(var u=t.base+t.len-1;u>t.base+l-1;u--)i--,this.setitem(i,t.getitem(u));if(t.len-=r,0==t.len)return;if(i--,this.setitem(i,e.popright()),1==e.len)return;for(o=t.getitem(t.base+t.len-1),l=this.gallop(o,e,e.len-1,!1),s=e.len-l,u=e.base+e.len-1;u>e.base+l-1;u--)i--,this.setitem(i,e.getitem(u));if(e.len-=s,1>=e.len)return;if(i--,this.setitem(i,t.popright()),0==t.len)return;if(r<this.MIN_GALLOP&&s<this.MIN_GALLOP)break;n++,this.min_gallop=n}}}finally{for(pi.asserts.assert(0<=t.len&&0<=e.len),u=t.base+t.len-1;u>t.base-1;u--)i--,this.setitem(i,t.getitem(u));for(u=e.base+e.len-1;u>e.base-1;u--)i--,this.setitem(i,e.getitem(u))}},di.builtin.timSort.prototype.merge_at=function(t){0>t&&(t=this.pending.length+t);var e=this.pending[t],n=this.pending[t+1];pi.asserts.assert(0<e.len&&0<n.len),pi.asserts.assert(e.base+e.len==n.base),this.pending[t]=new di.builtin.listSlice(this.list,e.base,e.len+n.len),this.pending.splice(t+1,1),t=this.gallop(n.getitem(n.base),e,0,!0),e.advance(t),0!=e.len&&(n.len=this.gallop(e.getitem(e.base+e.len-1),n,n.len-1,!1),0!=n.len&&(e.len<=n.len?this.merge_lo(e,n):this.merge_hi(e,n)))},di.builtin.timSort.prototype.merge_collapse=function(){for(var t=this.pending;1<t.length;)if(3<=t.length&&t[t.length-3].len<=t[t.length-2].len+t[t.length-1].len)t[t.length-3].len<t[t.length-1].len?this.merge_at(-3):this.merge_at(-2);else{if(!(t[t.length-2].len<=t[t.length-1].len))break;this.merge_at(-2)}},di.builtin.timSort.prototype.merge_force_collapse=function(){for(var t=this.pending;1<t.length;)3<=t.length&&t[t.length-3].len<t[t.length-1].len?this.merge_at(-3):this.merge_at(-2)},di.builtin.timSort.prototype.merge_compute_minrun=function(t){for(var e=0;t>=64;)e|=1&t,t>>=1;return t+e},di.builtin.listSlice=function(t,e,n){this.list=t,this.base=e,this.len=n},di.builtin.listSlice.prototype.copyitems=function(){var t=this.base,e=this.base+this.len;return pi.asserts.assert(e>=(t>=0)),new di.builtin.listSlice(new di.builtin.list(this.list.v.slice(t,e)),0,this.len)},di.builtin.listSlice.prototype.advance=function(t){this.base+=t,this.len-=t,pi.asserts.assert(this.base<=this.list.sq$length())},di.builtin.listSlice.prototype.getitem=function(t){return this.list.v[t]},di.builtin.listSlice.prototype.setitem=function(t,e){this.list.v[t]=e},di.builtin.listSlice.prototype.popleft=function(){var t=this.list.v[this.base];return this.base++,this.len--,t},di.builtin.listSlice.prototype.popright=function(){return this.len--,this.list.v[this.base+this.len]},di.builtin.listSlice.prototype.reverse=function(){for(var t=this.list,e=this.base,n=e+this.len-1;n>e;){var i=t.v[e];t.v[e]=t.v[n],t.v[n]=i,e++,n--}},pi.exportSymbol("Sk.builtin.listSlice",di.builtin.listSlice),pi.exportSymbol("Sk.builtin.timSort",di.builtin.timSort),di.builtins={range:di.builtin.range,round:di.builtin.round,len:di.builtin.len,min:di.builtin.min,max:di.builtin.max,sum:di.builtin.sum,zip:di.builtin.zip,abs:di.builtin.abs,fabs:di.builtin.abs,ord:di.builtin.ord,chr:di.builtin.chr,hex:di.builtin.hex,oct:di.builtin.oct,bin:di.builtin.bin,dir:di.builtin.dir,repr:di.builtin.repr,open:di.builtin.open,isinstance:di.builtin.isinstance,hash:di.builtin.hash,getattr:di.builtin.getattr,float_$rw$:di.builtin.float_,int_$rw$:di.builtin.int_,hasattr:di.builtin.hasattr,map:di.builtin.map,filter:di.builtin.filter,reduce:di.builtin.reduce,sorted:di.builtin.sorted,bool:di.builtin.bool,any:di.builtin.any,all:di.builtin.all,enumerate:di.builtin.enumerate,AttributeError:di.builtin.AttributeError,ValueError:di.builtin.ValueError,Exception:di.builtin.Exception,ZeroDivisionError:di.builtin.ZeroDivisionError,AssertionError:di.builtin.AssertionError,ImportError:di.builtin.ImportError,IndentationError:di.builtin.IndentationError,IndexError:di.builtin.IndexError,KeyError:di.builtin.KeyError,TypeError:di.builtin.TypeError,NameError:di.builtin.NameError,IOError:di.builtin.IOError,NotImplementedError:di.builtin.NotImplementedError,SystemExit:di.builtin.SystemExit,OverflowError:di.builtin.OverflowError,OperationError:di.builtin.OperationError,dict:di.builtin.dict,file:di.builtin.file,"function":di.builtin.func,generator:di.builtin.generator,list:di.builtin.list,long_$rw$:di.builtin.lng,method:di.builtin.method,object:di.builtin.object,slice:di.builtin.slice,str:di.builtin.str,set:di.builtin.set,tuple:di.builtin.tuple,type:di.builtin.type,input:di.builtin.input,raw_input:di.builtin.raw_input,jseval:di.builtin.jseval,jsmillis:di.builtin.jsmillis,quit:di.builtin.quit,exit:di.builtin.quit,bytearray:di.builtin.bytearray,callable:di.builtin.callable,complex:di.builtin.complex,delattr:di.builtin.delattr,divmod:di.builtin.divmod,eval_$rn$:di.builtin.eval_,execfile:di.builtin.execfile,format:di.builtin.format,frozenset:di.builtin.frozenset,globals:di.builtin.globals,help:di.builtin.help,issubclass:di.builtin.issubclass,iter:di.builtin.iter,locals:di.builtin.locals,memoryview:di.builtin.memoryview,next:di.builtin.next_,pow:di.builtin.pow,property:di.builtin.property,reload:di.builtin.reload,reversed:di.builtin.reversed,"super":di.builtin.superbi,unichr:di.builtin.unichr,vars:di.builtin.vars,xrange:di.builtin.xrange,apply_$rn$:di.builtin.apply_,buffer:di.builtin.buffer,coerce:di.builtin.coerce,intern:di.builtin.intern},pi.exportSymbol("Sk.builtins",di.builtins),di.builtins.go=di.builtin.goFunction,di.builtins.pickup=di.builtin.pickupFunction,di.builtins.drop=di.builtin.dropFunction,di.builtins.useItem=di.builtin.useFunction,di.builtins.status=di.builtin.statusFunction,di.builtins.inspect=di.builtin.inspectFunction,di.builtins.characters=di.builtin.charactersFunction,di.builtins.tiles=di.builtin.tilesFunction,di.builtins.dig=di.builtin.digFunction,pi.exportSymbol("Sk.builtins",di.builtins)}(),Sk.builtinFiles={files:{"src/lib/pythonds/trees/binheap.py":"# Bradley N. Miller, David L. Ranum\n# Introduction to Data Structures and Algorithms in Python\n# Copyright 2005\n# \n\n# this heap takes key value pairs, we will assume that the keys are integers\nclass BinHeap:\n    def __init__(self):\n        self.heapList = [0]\n        self.currentSize = 0\n\n\n    def buildHeap(self,alist):\n        i = len(alist) // 2\n        self.currentSize = len(alist)\n        self.heapList = [0] + alist[:]\n        print(len(self.heapList), i)\n        while (i > 0):\n            print(self.heapList, i)\n            self.percDown(i)\n            i = i - 1\n        print(self.heapList,i)\n                        \n    def percDown(self,i):\n        while (i * 2) <= self.currentSize:\n            mc = self.minChild(i)\n            if self.heapList[i] > self.heapList[mc]:\n                tmp = self.heapList[i]\n                self.heapList[i] = self.heapList[mc]\n                self.heapList[mc] = tmp\n            i = mc\n                \n    def minChild(self,i):\n        if i * 2 + 1 > self.currentSize:\n            return i * 2\n        else:\n            if self.heapList[i * 2] < self.heapList[i * 2 + 1]:\n                return i * 2\n            else:\n                return i * 2 + 1\n\n    def percUp(self,i):\n        while i // 2 > 0:\n            if self.heapList[i] < self.heapList[i//2]:\n               tmp = self.heapList[i // 2]\n               self.heapList[i // 2] = self.heapList[i]\n               self.heapList[i] = tmp\n            i = i // 2\n \n    def insert(self,k):\n        self.heapList.append(k)\n        self.currentSize = self.currentSize + 1\n        self.percUp(self.currentSize)\n\n    def delMin(self):\n        retval = self.heapList[1]\n        self.heapList[1] = self.heapList[self.currentSize]\n        self.currentSize = self.currentSize - 1\n        self.heapList.pop()\n        self.percDown(1)\n        return retval\n        \n    def isEmpty(self):\n        if currentSize == 0:\n            return True\n        else:\n            return False\n","src/lib/pythonds/basic/stack.py":"# Bradley N. Miller, David L. Ranum\n# Introduction to Data Structures and Algorithms in Python\n# Copyright 2005\n# \n#stack.py\r\n\r\nclass Stack:\r\n    def __init__(self):\r\n        self.items = []\r\n\r\n    def isEmpty(self):\r\n        return self.items == []\r\n\r\n    def push(self, item):\r\n        self.items.append(item)\r\n\r\n    def pop(self):\r\n        return self.items.pop()\r\n\r\n    def peek(self):\r\n        return self.items[len(self.items)-1]\r\n\r\n    def size(self):\r\n        return len(self.items)\r\n\r\n","src/lib/pythonds/trees/bst.py":"#!/bin/env python3.1\n# Bradley N. Miller, David L. Ranum\n# Introduction to Data Structures and Algorithms in Python\n# Copyright 2005, 2010\n# \n\nclass BinarySearchTree:\n    '''\n    Author:  Brad Miller\n    Date:  1/15/2005\n    Description:  Imlement a binary search tree with the following interface\n                  functions:  \n                  __contains__(y) <==> y in x\n                  __getitem__(y) <==> x[y]\n                  __init__()\n                  __len__() <==> len(x)\n                  __setitem__(k,v) <==> x[k] = v\n                  clear()\n                  get(k)\n                  items() \n                  keys() \n                  values()\n                  put(k,v)\n                  in\n                  del <==> \n    '''\n\n    def __init__(self):\n        self.root = None\n        self.size = 0\n    \n    def put(self,key,val):\n        if self.root:\n            self._put(key,val,self.root)\n        else:\n            self.root = TreeNode(key,val)\n        self.size = self.size + 1\n\n    def _put(self,key,val,currentNode):\n        if key < currentNode.key:\n            if currentNode.hasLeftChild():\n                self._put(key,val,currentNode.leftChild)\n            else:\n                currentNode.leftChild = TreeNode(key,val,parent=currentNode)\n        else:\n            if currentNode.hasRightChild():\n                self._put(key,val,currentNode.rightChild)\n            else:\n                currentNode.rightChild = TreeNode(key,val,parent=currentNode)\n            \n    def __setitem__(self,k,v):\n        self.put(k,v)\n\n    def get(self,key):\n        if self.root:\n            res = self._get(key,self.root)\n            if res:\n                return res.payload\n            else:\n                return None\n        else:\n            return None\n        \n    def _get(self,key,currentNode):\n        if not currentNode:\n            return None\n        elif currentNode.key == key:\n            return currentNode\n        elif key < currentNode.key:\n            return self._get(key,currentNode.leftChild)\n        else:\n            return self._get(key,currentNode.rightChild)\n            \n        \n    def __getitem__(self,key):\n        res = self.get(key)\n        if res:\n            return res\n        else:\n            raise KeyError('Error, key not in tree')\n            \n\n    def __contains__(self,key):\n        if self._get(key,self.root):\n            return True\n        else:\n            return False\n        \n    def length(self):\n        return self.size\n\n    def __len__(self):\n        return self.size\n\n    def __iter__(self):\n        return self.root.__iter__()\n    \n    def delete(self,key):\n        if self.size > 1:\n            nodeToRemove = self._get(key,self.root)\n            if nodeToRemove:\n                self.remove(nodeToRemove)\n                self.size = self.size-1\n            else:\n                raise KeyError('Error, key not in tree')\n        elif self.size == 1 and self.root.key == key:\n            self.root = None\n            self.size = self.size - 1\n        else:\n            raise KeyError('Error, key not in tree')\n\n    def __delitem__(self,key):\n        self.delete(key)\n    \n    def remove(self,currentNode):\n        if currentNode.isLeaf(): #leaf\n            if currentNode == currentNode.parent.leftChild:\n                currentNode.parent.leftChild = None\n            else:\n                currentNode.parent.rightChild = None\n        elif currentNode.hasBothChildren(): #interior\n            succ = currentNode.findSuccessor()\n            succ.spliceOut()\n            currentNode.key = succ.key\n            currentNode.payload = succ.payload\n        else: # this node has one child\n            if currentNode.hasLeftChild():\n                if currentNode.isLeftChild():\n                    currentNode.leftChild.parent = currentNode.parent\n                    currentNode.parent.leftChild = currentNode.leftChild\n                elif currentNode.isRightChild():\n                    currentNode.leftChild.parent = currentNode.parent\n                    currentNode.parent.rightChild = currentNode.leftChild\n                else:\n                    currentNode.replaceNodeData(currentNode.leftChild.key,\n                                       currentNode.leftChild.payload,\n                                       currentNode.leftChild.leftChild,\n                                       currentNode.leftChild.rightChild)\n            else:\n                if currentNode.isLeftChild():\n                    currentNode.rightChild.parent = currentNode.parent\n                    currentNode.parent.leftChild = currentNode.rightChild\n                elif currentNode.isRightChild():\n                    currentNode.rightChild.parent = currentNode.parent\n                    currentNode.parent.rightChild = currentNode.rightChild\n                else:\n                    currentNode.replaceNodeData(currentNode.rightChild.key,\n                                       currentNode.rightChild.payload,\n                                       currentNode.rightChild.leftChild,\n                                       currentNode.rightChild.rightChild)\n\n    def inorder(self):\n        self._inorder(self.root)\n\n    def _inorder(self,tree):\n        if tree != None:\n            self._inorder(tree.leftChild)\n            print(tree.key)\n            self._inorder(tree.rightChild)\n\n    def postorder(self):\n        self._postorder(self.root)\n\n    def _postorder(self, tree):\n        if tree:\n            self._postorder(tree.rightChild)\n            self._postorder(tree.leftChild)\n            print(tree.key)            \n\n    def preorder(self):\n        self._preorder(self,self.root)\n\n    def _preorder(self,tree):\n        if tree:\n            print(tree.key)            \n            self._preorder(tree.leftChild)\n            self._preorder(tree.rightChild)\n\n                \nclass TreeNode:\n    def __init__(self,key,val,left=None,right=None,parent=None):\n        self.key = key\n        self.payload = val\n        self.leftChild = left\n        self.rightChild = right\n        self.parent = parent\n        self.balanceFactor = 0\n        \n    def hasLeftChild(self):\n        return self.leftChild\n\n    def hasRightChild(self):\n        return self.rightChild\n    \n    def isLeftChild(self):\n        return self.parent and self.parent.leftChild == self\n\n    def isRightChild(self):\n        return self.parent and self.parent.rightChild == self\n\n    def isRoot(self):\n        return not self.parent\n\n    def isLeaf(self):\n        return not (self.rightChild or self.leftChild)\n\n    def hasAnyChildren(self):\n        return self.rightChild or self.leftChild\n\n    def hasBothChildren(self):\n        return self.rightChild and self.leftChild\n    \n    def replaceNodeData(self,key,value,lc,rc):\n        self.key = key\n        self.payload = value\n        self.leftChild = lc\n        self.rightChild = rc\n        if self.hasLeftChild():\n            self.leftChild.parent = self\n        if self.hasRightChild():\n            self.rightChild.parent = self\n        \n    def findSuccessor(self):\n        succ = None\n        if self.hasRightChild():\n            succ = self.rightChild.findMin()\n        else:\n            if self.parent:\n                if self.isLeftChild():\n                    succ = self.parent\n                else:\n                    self.parent.rightChild = None\n                    succ = self.parent.findSuccessor()\n                    self.parent.rightChild = self\n        return succ\n\n\n    def spliceOut(self):\n        if self.isLeaf():\n            if self.isLeftChild():\n                self.parent.leftChild = None\n            else:\n                self.parent.rightChild = None\n        elif self.hasAnyChildren():\n            if self.hasLeftChild():\n                if self.isLeftChild():\n                    self.parent.leftChild = self.leftChild\n                else:\n                    self.parent.rightChild = self.leftChild\n                self.leftChild.parent = self.parent\n            else:\n                if self.isLeftChild():\n                    self.parent.leftChild = self.rightChild\n                else:\n                    self.parent.rightChild = self.rightChild\n                self.rightChild.parent = self.parent\n\n    def findMin(self):\n        current = self\n        while current.hasLeftChild():\n            current = current.leftChild\n        return current\n\n    def __iter__(self):\n        \"\"\"The standard inorder traversal of a binary tree.\"\"\"\n        if self:\n            if self.hasLeftChild():\n                for elem in self.leftChild:\n                    yield elem\n            yield self.key\n            if self.hasRightChild():\n                for elem in self.rightChild:\n                    yield elem\n\n            \n","src/lib/time/__init__.js":"\n/*\n	Barebones implementation of the Python time package.\n\n	For now, only the time() function is implemented.\n*/\n \nvar $builtinmodule = function(name)\n{\n    var mod = {};\n\n    mod.time = new Sk.builtin.func(function() {\n	  return Sk.builtin.assk$(new Date().getTime() / 1000, undefined);\n    });\n\n    return mod;\n}\n","src/lib/image/__init__.js":'var ImageMod; // the single identifier needed in the global scope\n\nif (! ImageMod) {\n    ImageMod = { };\n    ImageMod.canvasLib = [];\n}\n\n//  todo create an empty image by reading image data from a blank canvas of the appropriate size\n\nvar $builtinmodule = function(name) {\n    var mod = {};\n\n    var image = function($gbl, $loc) {\n        $loc.__init__ = new Sk.builtin.func(function(self,imageId) {\n            self.image = document.getElementById(imageId.v);\n            if (self.image == null) {\n                throw "There is no image on this page named: " + imageId.v;\n            }\n            self.width = self.image.width;\n            self.height = self.image.height;\n            self.canvas = document.createElement("canvas");\n            self.canvas.height = self.height;\n            self.canvas.width = self.width;\n            self.ctx = self.canvas.getContext("2d");\n            self.ctx.drawImage(self.image,0,0)\n            self.imagedata = self.ctx.getImageData(0,0,self.width,self.height);\n        });\n\n        $loc.getPixel = new Sk.builtin.func(function(self,x,y) {\n			x = Sk.builtin.asnum$(x);\n			y = Sk.builtin.asnum$(y);\n            var index = (y*4)*self.width+(x*4);\n            var red = self.imagedata.data[index]\n            var green = self.imagedata.data[index+1]\n            var blue = self.imagedata.data[index+2]\n            return Sk.misceval.callsim(mod.Pixel,red,green,blue);\n        });\n\n        $loc.setPixel = new Sk.builtin.func(function(self, x, y, pix) {\n			x = Sk.builtin.asnum$(x);\n			y = Sk.builtin.asnum$(y);\n            var index = (y*4)*self.width+(x*4);\n            self.imagedata.data[index] = Sk.misceval.callsim(pix.getRed,pix);\n            self.imagedata.data[index+1] = Sk.misceval.callsim(pix.getGreen,pix);\n            self.imagedata.data[index+2] = Sk.misceval.callsim(pix.getBlue,pix);\n            self.imagedata.data[index+3] = 255;\n        });\n\n        $loc.getHeight = new Sk.builtin.func(function(self) {\n            return self.image.height;\n        });\n\n        $loc.getWidth = new Sk.builtin.func(function(self,titlestring) {\n            return self.image.width;\n        });\n\n        $loc.draw = new Sk.builtin.func(function(self,win,ulx,uly) {\n			win = Sk.builtin.asnum$(win);\n			ulx = Sk.builtin.asnum$(ulx);\n			uly = Sk.builtin.asnum$(uly);\n            var can = Sk.misceval.callsim(win.getWin,win);\n            var ctx = can.getContext("2d");\n            //ctx.putImageData(self.imagedata,0,0,0,0,self.imagedata.width,self.imagedata.height);\n            if (! ulx) {\n                ulx = 0;\n                uly = 0;\n            }\n            ctx.putImageData(self.imagedata,ulx,uly);\n        });\n\n        // toList\n\n    }\n\n    mod.Image = Sk.misceval.buildClass(mod, image, \'Image\', []);\n\n    var eImage = function($gbl, $loc) {\n        $loc.__init__ = new Sk.builtin.func(function(self,width,height) {\n            self.width = Sk.builtin.asnum$(width);\n            self.height = Sk.builtin.asnum$(height);\n            self.canvas = document.createElement("canvas");\n            self.ctx = self.canvas.getContext(\'2d\');\n            self.canvas.height = self.height;\n            self.canvas.width = self.width;\n            self.imagedata = self.ctx.getImageData(0,0,self.width,self.height);\n        });\n\n    }\n\n    mod.EmptyImage = Sk.misceval.buildClass(mod, eImage, \'EmptyImage\', [mod.Image]);\n\n    // create a ListImage object\n\n    \n    var pixel = function($gbl, $loc) {\n        $loc.__init__ = new Sk.builtin.func(function(self,r,g,b) {\n            self.red = Sk.builtin.asnum$(r);\n            self.green = Sk.builtin.asnum$(g);\n            self.blue = Sk.builtin.asnum$(b);\n        });\n\n        $loc.getRed = new Sk.builtin.func(function(self) {\n           return self.red;\n        });\n\n        $loc.getGreen = new Sk.builtin.func(function(self) {\n           return self.green;\n        });\n\n        $loc.getBlue = new Sk.builtin.func(function(self) {\n           return self.blue;\n        });\n\n        $loc.setRed = new Sk.builtin.func(function(self,r) {\n           self.red = Sk.builtin.asnum$(r);\n        });\n\n        $loc.setGreen = new Sk.builtin.func(function(self,g) {\n           self.green = Sk.builtin.asnum$(g);\n        });\n\n        $loc.setBlue = new Sk.builtin.func(function(self,b) {\n           self.blue = Sk.builtin.asnum$(b);\n        });\n\n        $loc.__getitem__ = new Sk.builtin.func(function(self,k) {\n		   k = Sk.builtin.asnum$(k);\n           if(k == 0) {\n               return self.red;\n           } else if (k == 1) {\n               return self.green;\n           } else if (k == 2) {\n               return self.blue;\n           }\n        });\n\n        $loc.__str__ = new Sk.builtin.func(function(self) {\n            return "[" + self.red + "," + self.green + "," + self.blue + "]"\n        });\n        \n        //getColorTuple\n        $loc.getColorTuple = new Sk.builtin.func(function(self,x,y) {\n\n        });\n\n        //setRange -- change from 0..255 to 0.0 .. 1.0\n        $loc.setRange = new Sk.builtin.func(function(self,mx) {\n            self.max = Sk.builtin.asnum$(mx);\n        });\n\n    }\n    mod.Pixel = Sk.misceval.buildClass(mod, pixel, \'Pixel\', []);\n\n\n\n    var screen = function($gbl, $loc) {\n        $loc.__init__ = new Sk.builtin.func(function(self,width,height) {\n            var currentCanvas = ImageMod.canvasLib[Sk.canvas];\n            if (currentCanvas === undefined) {\n                self.theScreen = document.getElementById(Sk.canvas);\n                if (width !== undefined) {\n                    self.theScreen.height = height;\n                    self.theScreen.width = width;\n                }\n\n                ImageMod.canvasLib[Sk.canvas] = self.theScreen;\n            } else {\n                self.theScreen = currentCanvas;\n                self.theScreen.height = self.theScreen.height;\n            }\n            self.theScreen.style.display = "block";\n        });\n\n        $loc.getWin = new Sk.builtin.func(function(self) {\n           return self.theScreen;\n        });\n\n        // exitonclick\n        $loc.exitonclick = new Sk.builtin.func(function(self) {\n            var canvas_id = self.theScreen.id;\n            self.theScreen.onclick = function() {\n                document.getElementById(canvas_id).style.display = \'none\';\n                document.getElementById(canvas_id).onclick = null;\n                delete ImageMod.canvasLib[canvas_id];\n            }\n\n        });\n        //getMouse\n    }\n\n    mod.ImageWin = Sk.misceval.buildClass(mod, screen, \'ImageWin\', []);\n\n    return mod\n}\n',"src/lib/pythonds/basic/__init__.py":'\n#__all__ = ["stack"]\n\n\n#from .stack import Stack\n#from .queue import Queue\n\n\n\n',"src/lib/unittestgui/__init__.py":"__author__ = 'bmiller'\n\nimport document\n\n\nclass unittest:\n    def __init__(self):\n        self.numPassed = 0\n        self.numFailed = 0\n        self.divid = document.currentDiv()\n        self.mydiv = document.getElementById(self.divid)\n        res = document.getElementById(self.divid+'_unit_results')\n        if res:\n            self.resdiv = res\n            res.innerHTML = ''\n        else:\n            self.resdiv = document.createElement('div')\n            self.resdiv.setAttribute('id',self.divid+'_unit_results')\n            self.resdiv.setAttribute('class','unittest-results')\n        self.mydiv.appendChild(self.resdiv)\n\n        self.tlist = []\n        testNames = {}\n        for name in dir(self):\n            if name[:4] == 'test' and name not in testNames:\n                self.tlist.append(getattr(self,name))\n                testNames[name]=True\n\n    def setup(self):\n        pass\n\n    def tearDown(self):\n        pass\n\n    def main(self):\n        l = document.createElement('ul')\n        self.resdiv.appendChild(l)\n        self.resList = l\n\n        for func in self.tlist:\n            try:\n                self.setup()\n                func()\n                self.tearDown()\n            except:\n                self.appendResult('Error')\n                self.numFailed += 1\n        self.showSummary()\n\n    def assertEqual(self, actual, expected, feedback=\"\"):\n        res = actual==expected\n        self.appendResult(res,str(actual)+' to be equal to ',expected, feedback)\n\n    def assertNotEqual(actual, expected, feedback=\"\"):\n        res = actual != expected\n        self.appendResult(res,str(actual)+' to not equal ',expected,feedback)\n\n    def assertTrue(self,x, feedback=\"\"):\n        res = x\n        self.appendResult(res,str(x)+' to be ',True,feedback)\n\n    def assertFalse(self,x, feedback=\"\"):\n        res = not x\n        self.appendResult(res,str(x)+' to be ',False,feedback)\n\n    def assertIs(self,a,b, feedback=\"\"):\n        res = a is b\n        self.appendResult(res,str(a)+' to be the same object as ',b,feedback)\n\n    def assertIsNot(self,a,b, feedback=\"\"):\n        res = a is not b\n        self.appendResult(res,str(a)+' to not be the same object as ',b,feedback)\n\n    def assertIsNone(self,x, feedback=\"\"):\n        res = x is None\n        self.appendResult(res,x,None,feedback)\n\n    def assertIsNotNone(self,x, feedback=\"\"):\n        res = x is not None\n        self.appendResult(res,str(x)+' to not be ',None,feedback)\n\n    def assertIn(self,a,b, feedback=\"\"):\n        res = a in b\n        self.appendResult(res,str(a)+' to be in ',b,feedback)\n\n    def assertNotIn(self,a,b, feedback=\"\"):\n        res = a not in b\n        self.appendResult(res,str(a)+' to not be in ',b,feedback)\n\n    def assertIsInstance(self,a,b, feedback=\"\"):\n        res = isinstance(a,b)\n        self.appendResult(res,str(a)+' to be an instance of ',b,feedback)\n\n    def assertNotIsInstance(self,a,b, feedback=\"\"):\n        res = not isinstance(a,b)\n        self.appendResult(res,str(a)+' to not be an instance of ',b,feedback)\n\n    def assertAlmostEqual(self,a,b, feedback=\"\"):\n        res = round(a-b,7) == 0\n        self.appendResult(res,str(a)+' to equal ',b,feedback)\n\n    def assertNotAlmostEqual(self,a,b, feedback=\"\"):\n        res = round(a-b,7) != 0\n        self.appendResult(res,str(a)+' to not equal ',b,feedback)\n\n    def assertGreater(self,a,b, feedback=\"\"):\n        res = a > b\n        self.appendResult(res,str(a)+' to be greater than ',b,feedback)\n\n    def assertGreaterEqual(self,a,b, feedback=\"\"):\n        res = a >= b\n        self.appendResult(res,str(a)+' to be greater than or equal to ',b,feedback)\n\n    def assertLess(self,a,b, feedback=\"\"):\n        res = a < b\n        self.appendResult(res,str(a)+' to be less than ',b,feedback)\n\n    def assertLessEqual(self,a,b, feedback=\"\"):\n        res = a <= b\n        self.appendResult(res,str(a)+' to be less than or equal to ',b,feedback)\n\n    def appendResult(self,res,actual,expected,feedback):\n        if res == 'Error':\n            msg = 'Error'\n        elif res:\n            msg = 'Pass'\n            self.numPassed += 1\n        else:\n            msg = 'Fail: expected %s  %s ' % (str(actual),str(expected)) + feedback\n            self.numFailed += 1\n\n        pTag = document.createElement('li')\n        pTag.innerHTML = msg\n        self.resList.appendChild(pTag)\n\n    def showSummary(self):\n        pct = self.numPassed / (self.numPassed+self.numFailed) * 100\n        pTag = document.createElement('p')\n        pTag.innerHTML = \"You passed: \" + str(pct) + \"% of the tests\"\n        self.resdiv.appendChild(pTag)\n        if pct < 90:\n            self.resdiv.setCSS('background-color','#de8e96')\n        else:\n            self.resdiv.setCSS('background-color','#83d382')\n\n\n\n","src/lib/webgl/matrix4.js":"// more from 'tdl'\nvar $builtinmodule = function(name)\n{\n    var mod = {};\n\n    var temp0v3_ = new Float32Array(3);\n    var temp1v3_ = new Float32Array(3);\n    var temp2v3_ = new Float32Array(3);\n\n    var temp0v4_ = new Float32Array(4);\n    var temp1v4_ = new Float32Array(4);\n    var temp2v4_ = new Float32Array(4);\n\n    var temp0m4_ = new Float32Array(16);\n    var temp1m4_ = new Float32Array(16);\n    var temp2m4_ = new Float32Array(16);\n\n    var normalize = function(dst, a) {\n        var n = 0.0;\n        var aLength = a.length;\n        for (var i = 0; i < aLength; ++i)\n            n += a[i] * a[i];\n        n = Math.sqrt(n);\n        if (n > 0.00001) {\n            for (var i = 0; i < aLength; ++i)\n                dst[i] = a[i] / n;\n        } else {\n            for (var i = 0; i < aLength; ++i)\n                dst[i] = 0;\n        }\n        return dst;\n    };\n\n    var cross = function(dst, a, b) {\n        dst[0] = a[1] * b[2] - a[2] * b[1];\n        dst[1] = a[2] * b[0] - a[0] * b[2];\n        dst[2] = a[0] * b[1] - a[1] * b[0];\n        return dst;\n    };\n\n    var subVector = function(dst, a, b) {\n        var aLength = a.length;\n        for (var i = 0; i < aLength; ++i)\n            dst[i] = a[i] - b[i];\n        return dst;\n    };\n\n    var dot = function(a, b) {\n        return (a[0] * b[0]) + (a[1] * b[1]) + (a[2] * b[2]);\n    };\n\n    mod.lookAt = new Sk.builtin.func(function(view, eye, target, up)\n            {\n                var t0 = temp0v3_;\n                var t1 = temp1v3_;\n                var t2 = temp2v3_;\n\n                var vz = normalize(t0, subVector(t0, eye.v, target.v));\n                var vx = normalize(t1, cross(t1, up.v, vz));\n                var vy = cross(t2, vz, vx);\n\n                var dst = view.v;\n                dst[ 0] = vx[0];\n                dst[ 1] = vy[0];\n                dst[ 2] = vz[0];\n                dst[ 3] = 0;\n                dst[ 4] = vx[1];\n                dst[ 5] = vy[1];\n                dst[ 6] = vz[1];\n                dst[ 7] = 0;\n                dst[ 8] = vx[2];\n                dst[ 9] = vy[2];\n                dst[10] = vz[2];\n                dst[11] = 0;\n                dst[12] = -dot(vx, eye.v);\n                dst[13] = -dot(vy, eye.v);\n                dst[14] = -dot(vz, eye.v);\n                dst[15] = 1;\n\n                return view;\n            });\n\n    mod.perspective = new Sk.builtin.func(function(proj, angle, aspect, near, far)\n            {\n                var f = Math.tan(Math.PI * 0.5 - 0.5 * (angle * Math.PI / 180));\n                var rangeInv = 1.0 / (near - far);\n\n                var dst = proj.v;\n\n                dst[0]  = f / aspect;\n                dst[1]  = 0;\n                dst[2]  = 0;\n                dst[3]  = 0;\n\n                dst[4]  = 0;\n                dst[5]  = f;\n                dst[6]  = 0;\n                dst[7]  = 0;\n\n                dst[8]  = 0;\n                dst[9]  = 0;\n                dst[10] = (near + far) * rangeInv;\n                dst[11] = -1;\n\n                dst[12] = 0;\n                dst[13] = 0;\n                dst[14] = near * far * rangeInv * 2;\n                dst[15] = 0;\n\n                return proj;\n            });\n\n    // builds, not appending\n    mod.rotationY = new Sk.builtin.func(function(target, angle)\n            {\n                var dst = target.v;\n                var c = Math.cos(angle * Math.PI / 180);\n                var s = Math.sin(angle * Math.PI / 180);\n\n                dst[ 0] = c;\n                dst[ 1] = 0;\n                dst[ 2] = -s;\n                dst[ 3] = 0;\n                dst[ 4] = 0;\n                dst[ 5] = 1;\n                dst[ 6] = 0;\n                dst[ 7] = 0;\n                dst[ 8] = s;\n                dst[ 9] = 0;\n                dst[10] = c;\n                dst[11] = 0;\n                dst[12] = 0;\n                dst[13] = 0;\n                dst[14] = 0;\n                dst[15] = 1;\n\n                return target;\n            });\n\n    mod.identity = new Sk.builtin.func(function(target)\n            {\n                var dst = target.v;\n                dst[ 0] = 1;\n                dst[ 1] = 0;\n                dst[ 2] = 0;\n                dst[ 3] = 0;\n                dst[ 4] = 0;\n                dst[ 5] = 1;\n                dst[ 6] = 0;\n                dst[ 7] = 0;\n                dst[ 8] = 0;\n                dst[ 9] = 0;\n                dst[10] = 1;\n                dst[11] = 0;\n                dst[12] = 0;\n                dst[13] = 0;\n                dst[14] = 0;\n                dst[15] = 1;\n                return target;\n            });\n\n    // row major\n    mod.mul = new Sk.builtin.func(function(target, x, y)\n            {\n                var dst = target.v;\n                var a = x.v;\n                var b = y.v;\n                var a00 = a[0];\n                var a01 = a[1];\n                var a02 = a[2];\n                var a03 = a[3];\n                var a10 = a[ 4 + 0];\n                var a11 = a[ 4 + 1];\n                var a12 = a[ 4 + 2];\n                var a13 = a[ 4 + 3];\n                var a20 = a[ 8 + 0];\n                var a21 = a[ 8 + 1];\n                var a22 = a[ 8 + 2];\n                var a23 = a[ 8 + 3];\n                var a30 = a[12 + 0];\n                var a31 = a[12 + 1];\n                var a32 = a[12 + 2];\n                var a33 = a[12 + 3];\n                var b00 = b[0];\n                var b01 = b[1];\n                var b02 = b[2];\n                var b03 = b[3];\n                var b10 = b[ 4 + 0];\n                var b11 = b[ 4 + 1];\n                var b12 = b[ 4 + 2];\n                var b13 = b[ 4 + 3];\n                var b20 = b[ 8 + 0];\n                var b21 = b[ 8 + 1];\n                var b22 = b[ 8 + 2];\n                var b23 = b[ 8 + 3];\n                var b30 = b[12 + 0];\n                var b31 = b[12 + 1];\n                var b32 = b[12 + 2];\n                var b33 = b[12 + 3];\n                dst[ 0] = a00 * b00 + a01 * b10 + a02 * b20 + a03 * b30;\n                dst[ 1] = a00 * b01 + a01 * b11 + a02 * b21 + a03 * b31;\n                dst[ 2] = a00 * b02 + a01 * b12 + a02 * b22 + a03 * b32;\n                dst[ 3] = a00 * b03 + a01 * b13 + a02 * b23 + a03 * b33;\n                dst[ 4] = a10 * b00 + a11 * b10 + a12 * b20 + a13 * b30;\n                dst[ 5] = a10 * b01 + a11 * b11 + a12 * b21 + a13 * b31;\n                dst[ 6] = a10 * b02 + a11 * b12 + a12 * b22 + a13 * b32;\n                dst[ 7] = a10 * b03 + a11 * b13 + a12 * b23 + a13 * b33;\n                dst[ 8] = a20 * b00 + a21 * b10 + a22 * b20 + a23 * b30;\n                dst[ 9] = a20 * b01 + a21 * b11 + a22 * b21 + a23 * b31;\n                dst[10] = a20 * b02 + a21 * b12 + a22 * b22 + a23 * b32;\n                dst[11] = a20 * b03 + a21 * b13 + a22 * b23 + a23 * b33;\n                dst[12] = a30 * b00 + a31 * b10 + a32 * b20 + a33 * b30;\n                dst[13] = a30 * b01 + a31 * b11 + a32 * b21 + a33 * b31;\n                dst[14] = a30 * b02 + a31 * b12 + a32 * b22 + a33 * b32;\n                dst[15] = a30 * b03 + a31 * b13 + a32 * b23 + a33 * b33;\n                return target;\n            });\n\n    mod.invert = new Sk.builtin.func(function(target, mat)\n            {\n                var dst = target.v;\n                var m = mat.v;\n                var m00 = m[0 * 4 + 0];\n                var m01 = m[0 * 4 + 1];\n                var m02 = m[0 * 4 + 2];\n                var m03 = m[0 * 4 + 3];\n                var m10 = m[1 * 4 + 0];\n                var m11 = m[1 * 4 + 1];\n                var m12 = m[1 * 4 + 2];\n                var m13 = m[1 * 4 + 3];\n                var m20 = m[2 * 4 + 0];\n                var m21 = m[2 * 4 + 1];\n                var m22 = m[2 * 4 + 2];\n                var m23 = m[2 * 4 + 3];\n                var m30 = m[3 * 4 + 0];\n                var m31 = m[3 * 4 + 1];\n                var m32 = m[3 * 4 + 2];\n                var m33 = m[3 * 4 + 3];\n                var tmp_0  = m22 * m33;\n                var tmp_1  = m32 * m23;\n                var tmp_2  = m12 * m33;\n                var tmp_3  = m32 * m13;\n                var tmp_4  = m12 * m23;\n                var tmp_5  = m22 * m13;\n                var tmp_6  = m02 * m33;\n                var tmp_7  = m32 * m03;\n                var tmp_8  = m02 * m23;\n                var tmp_9  = m22 * m03;\n                var tmp_10 = m02 * m13;\n                var tmp_11 = m12 * m03;\n                var tmp_12 = m20 * m31;\n                var tmp_13 = m30 * m21;\n                var tmp_14 = m10 * m31;\n                var tmp_15 = m30 * m11;\n                var tmp_16 = m10 * m21;\n                var tmp_17 = m20 * m11;\n                var tmp_18 = m00 * m31;\n                var tmp_19 = m30 * m01;\n                var tmp_20 = m00 * m21;\n                var tmp_21 = m20 * m01;\n                var tmp_22 = m00 * m11;\n                var tmp_23 = m10 * m01;\n\n                var t0 = (tmp_0 * m11 + tmp_3 * m21 + tmp_4 * m31) -\n                    (tmp_1 * m11 + tmp_2 * m21 + tmp_5 * m31);\n                var t1 = (tmp_1 * m01 + tmp_6 * m21 + tmp_9 * m31) -\n                    (tmp_0 * m01 + tmp_7 * m21 + tmp_8 * m31);\n                var t2 = (tmp_2 * m01 + tmp_7 * m11 + tmp_10 * m31) -\n                    (tmp_3 * m01 + tmp_6 * m11 + tmp_11 * m31);\n                var t3 = (tmp_5 * m01 + tmp_8 * m11 + tmp_11 * m21) -\n                    (tmp_4 * m01 + tmp_9 * m11 + tmp_10 * m21);\n\n                var d = 1.0 / (m00 * t0 + m10 * t1 + m20 * t2 + m30 * t3);\n\n                dst[ 0] = d * t0;\n                dst[ 1] = d * t1;\n                dst[ 2] = d * t2;\n                dst[ 3] = d * t3;\n                dst[ 4] = d * ((tmp_1 * m10 + tmp_2 * m20 + tmp_5 * m30) -\n                        (tmp_0 * m10 + tmp_3 * m20 + tmp_4 * m30));\n                dst[ 5] = d * ((tmp_0 * m00 + tmp_7 * m20 + tmp_8 * m30) -\n                        (tmp_1 * m00 + tmp_6 * m20 + tmp_9 * m30));\n                dst[ 6] = d * ((tmp_3 * m00 + tmp_6 * m10 + tmp_11 * m30) -\n                        (tmp_2 * m00 + tmp_7 * m10 + tmp_10 * m30));\n                dst[ 7] = d * ((tmp_4 * m00 + tmp_9 * m10 + tmp_10 * m20) -\n                        (tmp_5 * m00 + tmp_8 * m10 + tmp_11 * m20));\n                dst[ 8] = d * ((tmp_12 * m13 + tmp_15 * m23 + tmp_16 * m33) -\n                        (tmp_13 * m13 + tmp_14 * m23 + tmp_17 * m33));\n                dst[ 9] = d * ((tmp_13 * m03 + tmp_18 * m23 + tmp_21 * m33) -\n                        (tmp_12 * m03 + tmp_19 * m23 + tmp_20 * m33));\n                dst[10] = d * ((tmp_14 * m03 + tmp_19 * m13 + tmp_22 * m33) -\n                        (tmp_15 * m03 + tmp_18 * m13 + tmp_23 * m33));\n                dst[11] = d * ((tmp_17 * m03 + tmp_20 * m13 + tmp_23 * m23) -\n                        (tmp_16 * m03 + tmp_21 * m13 + tmp_22 * m23));\n                dst[12] = d * ((tmp_14 * m22 + tmp_17 * m32 + tmp_13 * m12) -\n                        (tmp_16 * m32 + tmp_12 * m12 + tmp_15 * m22));\n                dst[13] = d * ((tmp_20 * m32 + tmp_12 * m02 + tmp_19 * m22) -\n                        (tmp_18 * m22 + tmp_21 * m32 + tmp_13 * m02));\n                dst[14] = d * ((tmp_18 * m12 + tmp_23 * m32 + tmp_15 * m02) -\n                        (tmp_22 * m32 + tmp_14 * m02 + tmp_19 * m12));\n                dst[15] = d * ((tmp_22 * m22 + tmp_16 * m02 + tmp_21 * m12) -\n                        (tmp_20 * m12 + tmp_23 * m22 + tmp_17 * m02));\n                return target;\n            });\n\n    mod.transpose = new Sk.builtin.func(function(target, mat)\n            {\n                var dst = target.v;\n                var m = mat.v;\n                for (var j = 0; j < 4; ++j) {\n                    for (var i = 0; i < 4; ++i)\n                    dst[j * 4 + i] = m[i * 4 + j];\n                }\n                return dst;\n            });\n\n    return mod;\n};\n","src/lib/test/__init__.py":"__author__ = 'bmiller'\n\ndef testEqual(actual, expected):\n    if type(expected) == type(1):\n        if actual == expected:\n            print('Pass')\n            return True\n    elif type(expected) == type(1.11):\n        if abs(actual-expected) < 0.00001:\n            print('Pass')\n            return True\n    else:\n        if actual == expected:\n            print('Pass')\n            return True\n    print('Test Failed: expected ' + str(expected) + ' but got ' + str(actual))\n    return False\n\ndef testNotEqual(actual, expected):\n    pass\n\n","src/builtin/sys.js":"var $builtinmodule = function(name)\n{\n    var sys = {};\n\n    var args = [];\n    var argv = Sk.getSysArgv();\n    for (var i = 0; i < argv.length; ++i)\n        args.push(new Sk.builtin.str(argv[i]));\n    sys.argv = new Sk.builtins['list'](args);\n\n    sys.copyright = Sk.builtin['str'](\"Copyright 2009-2010 Scott Graham.\\nAll Rights Reserved.\\n\");\n\n    sys.modules = Sk.sysmodules;\n\n    sys.path = Sk.realsyspath;\n\n    sys.getExecutionLimit = new Sk.builtin.func(function() {\n        return Sk.builtin.assk$(Sk.execLimit, Sk.builtin.nmber.int$);\n    });\n\n    sys.setExecutionLimit = new Sk.builtin.func(function(t) {\n        if (t !==  undefined) {\n            Sk.execLimit = Sk.builtin.asnum$(t);\n        }\n    });\n\n    sys.resetTimeout = new Sk.builtin.func(function() {\n        Sk.execStart = new Date();\n    });\n\n    sys.debug = new Sk.builtin.func(function() {\n        debugger;\n    });\n\n    return sys;\n};\n","src/lib/pythonds/trees/balance.py":"#!/bin/env python3.1\n# Bradley N. Miller, David L. Ranum\n# Introduction to Data Structures and Algorithms in Python\n# Copyright 2005, 2010\n# \n\nfrom .bst import BinarySearchTree, TreeNode\n\nclass AVLTree(BinarySearchTree):\n    '''\n    Author:  Brad Miller\n    Date:  1/15/2005\n    Description:  Imlement a binary search tree with the following interface\n                  functions:  \n                  __contains__(y) <==> y in x\n                  __getitem__(y) <==> x[y]\n                  __init__()\n                  __len__() <==> len(x)\n                  __setitem__(k,v) <==> x[k] = v\n                  clear()\n                  get(k)\n                  has_key(k)\n                  items() \n                  keys() \n                  values()\n                  put(k,v)\n    '''\n\n\n    def _put(self,key,val,currentNode):\n        if key < currentNode.key:\n            if currentNode.hasLeftChild():\n                self._put(key,val,currentNode.leftChild)\n            else:\n                currentNode.leftChild = TreeNode(key,val,parent=currentNode)\n                self.updateBalance(currentNode.leftChild)\n        else:\n            if currentNode.hasRightChild():\n                self._put(key,val,currentNode.rightChild)\n            else:\n                currentNode.rightChild = TreeNode(key,val,parent=currentNode)\n                self.updateBalance(currentNode.rightChild)                \n\n    def updateBalance(self,node):\n        if node.balanceFactor > 1 or node.balanceFactor < -1:\n            self.rebalance(node)\n            return\n        if node.parent != None:\n            if node.isLeftChild():\n                node.parent.balanceFactor += 1\n            elif node.isRightChild():\n                node.parent.balanceFactor -= 1\n\n            if node.parent.balanceFactor != 0:\n                self.updateBalance(node.parent)\n\n    def rebalance(self,node):\n        if node.balanceFactor < 0:\n            if node.rightChild.balanceFactor > 0:\n                # Do an LR Rotation\n                self.rotateRight(node.rightChild)\n                self.rotateLeft(node)\n            else:\n                # single left\n                self.rotateLeft(node)\n        elif node.balanceFactor > 0:\n            if node.leftChild.balanceFactor < 0:\n                # Do an RL Rotation\n                self.rotateLeft(node.leftChild)\n                self.rotateRight(node)\n            else:\n                # single right\n                self.rotateRight(node)\n\n    def rotateLeft(self,rotRoot):\n        newRoot = rotRoot.rightChild\n        rotRoot.rightChild = newRoot.leftChild\n        if newRoot.leftChild != None:\n            newRoot.leftChild.parent = rotRoot\n        newRoot.parent = rotRoot.parent\n        if rotRoot.isRoot():\n            self.root = newRoot\n        else:\n            if rotRoot.isLeftChild():\n                rotRoot.parent.leftChild = newRoot\n            else:\n                rotRoot.parent.rightChild = newRoot\n        newRoot.leftChild = rotRoot\n        rotRoot.parent = newRoot\n        rotRoot.balanceFactor = rotRoot.balanceFactor + 1 - min(newRoot.balanceFactor, 0)\n        newRoot.balanceFactor = newRoot.balanceFactor + 1 + max(rotRoot.balanceFactor, 0)\n\n\n    def rotateRight(self,rotRoot):\n        newRoot = rotRoot.leftChild\n        rotRoot.leftChild = newRoot.rightChild\n        if newRoot.rightChild != None:\n            newRoot.rightChild.parent = rotRoot\n        newRoot.parent = rotRoot.parent\n        if rotRoot.isRoot():\n            self.root = newRoot\n        else:\n            if rotRoot.isRightChild():\n                rotRoot.parent.rightChild = newRoot\n            else:\n                rotRoot.parent.leftChild = newRoot\n        newRoot.rightChild = rotRoot\n        rotRoot.parent = newRoot\n        rotRoot.balanceFactor = rotRoot.balanceFactor - 1 - max(newRoot.balanceFactor, 0)\n        newRoot.balanceFactor = newRoot.balanceFactor - 1 + min(rotRoot.balanceFactor, 0)\n        \n","src/lib/urllib/request/__init__.js":'var $builtinmodule = function(name)\n{\n  var request = {};\n\n\n  //~ Classes .................................................................\n\n  // Response class\n  //\n  // Response objects are returned by the request, get, post, etc.\n  // methods, allowing the user to access the response text, status\n  // code, and other information.\n\n  // ------------------------------------------------------------\n  var response = function($gbl, $loc) {\n\n    // ------------------------------------------------------------\n    $loc.__init__ = new Sk.builtin.func(function(self, xhr) {\n      self.data$ = xhr.responseText;\n      self.lineList = self.data$.split("\\n");\n      self.lineList = self.lineList.slice(0,-1);\n      for(var i =0 ; i < self.lineList.length; i++) {\n        self.lineList[i] = self.lineList[i]+\'\\n\';\n      }\n      self.currentLine = 0;\n      self.pos$ = 0;\n    });\n\n\n    // ------------------------------------------------------------\n    $loc.__str__ = new Sk.builtin.func(function(self) {\n      return Sk.ffi.remapToPy(\'<Response>\');\n    });\n\n\n    // ------------------------------------------------------------\n    $loc.__iter__ = new Sk.builtin.func(function(self) {\n      var allLines = self.lineList;\n\n      return Sk.builtin.makeGenerator(function() {\n          if (this.$index >= this.$lines.length) return undefined;\n          return new Sk.builtin.str(this.$lines[this.$index++]);\n        }, {\n          $obj: self,\n          $index: 0,\n          $lines: allLines\n        });\n    });\n\n\n    // ------------------------------------------------------------\n    $loc.read = new Sk.builtin.func(function(self, size) {\n      if (self.closed) throw new Sk.builtin.ValueError("I/O operation on closed file");\n      var len = self.data$.length;\n      if (size === undefined) size = len;\n      var ret = new Sk.builtin.str(self.data$.substr(self.pos$, size));\n      self.pos$ += size;\n      if (self.pos$ >= len) self.pos$ = len;\n      return ret;\n    });\n\n\n    // ------------------------------------------------------------\n    $loc.readline = new Sk.builtin.func(function(self, size) {\n      var line = "";\n      if (self.currentLine < self.lineList.length) {\n        line = self.lineList[self.currentLine];\n        self.currentLine++;\n      }\n      return new Sk.builtin.str(line);\n    });\n\n\n    // ------------------------------------------------------------\n    $loc.readlines = new Sk.builtin.func(function(self, sizehint) {\n      var arr = [];\n      for(var i = self.currentLine; i < self.lineList.length; i++) {\n        arr.push(new Sk.builtin.str(self.lineList[i]));\n      }\n      return new Sk.builtin.list(arr);\n    });\n\n  };\n\n  request.Response =\n    Sk.misceval.buildClass(request, response, \'Response\', []);\n\n\n  //~ Module functions ........................................................\n\n  // ------------------------------------------------------------\n  /**\n   * Constructs and sends a Request. Returns Response object.\n   *\n   * http://docs.python-requests.org/en/latest/api/#requests.request\n   *\n   * For now, this implementation doesn\'t actually construct a Request\n   * object; it just makes the request through jQuery.ajax and then\n   * constructs a Response.\n   */\n  request.urlopen = new Sk.builtin.func(function(url, data, timeout) {\n    var xmlhttp = new XMLHttpRequest();\n    xmlhttp.open("GET",url.v,false);\n    xmlhttp.send(null);\n\n    return Sk.misceval.callsim(request.Response,xmlhttp)\n  });\n\n\n  return request;\n};\n',"src/lib/pythonds/basic/queue.py":"# Bradley N. Miller, David L. Ranum\n# Introduction to Data Structures and Algorithms in Python\n# Copyright 2005\n# \n#queue.py\r\n\r\nclass Queue:\r\n    def __init__(self):\r\n        self.items = []\r\n\r\n    def isEmpty(self):\r\n        return self.items == []\r\n\r\n    def enqueue(self, item):\r\n        self.items.insert(0,item)\r\n\r\n    def dequeue(self):\r\n        return self.items.pop()\r\n\r\n    def size(self):\r\n        return len(self.items)\r\n","src/lib/pythonds/graphs/adjGraph.py":'#\n#  adjGraph\n#\n#  Created by Brad Miller on 2005-02-24.\n#  Copyright (c) 2005 Brad Miller, David Ranum, Luther College. All rights reserved.\n#\n\nimport sys\nimport os\nimport unittest\n\nclass Graph:\n    def __init__(self):\n        self.vertices = {}\n        self.numVertices = 0\n        \n    def addVertex(self,key):\n        self.numVertices = self.numVertices + 1\n        newVertex = Vertex(key)\n        self.vertices[key] = newVertex\n        return newVertex\n    \n    def getVertex(self,n):\n        if n in self.vertices:\n            return self.vertices[n]\n        else:\n            return None\n\n    def __contains__(self,n):\n        return n in self.vertices\n    \n    def addEdge(self,f,t,cost=0):\n            if f not in self.vertices:\n                nv = self.addVertex(f)\n            if t not in self.vertices:\n                nv = self.addVertex(t)\n            self.vertices[f].addNeighbor(self.vertices[t],cost)\n    \n    def getVertices(self):\n        return list(self.vertices.keys())\n        \n    def __iter__(self):\n        return iter(self.vertices.values())\n                \nclass Vertex:\n    def __init__(self,num):\n        self.id = num\n        self.connectedTo = {}\n        self.color = \'white\'\n        self.dist = sys.maxsize\n        self.pred = None\n        self.disc = 0\n        self.fin = 0\n\n    # def __lt__(self,o):\n    #     return self.id < o.id\n    \n    def addNeighbor(self,nbr,weight=0):\n        self.connectedTo[nbr] = weight\n        \n    def setColor(self,color):\n        self.color = color\n        \n    def setDistance(self,d):\n        self.dist = d\n\n    def setPred(self,p):\n        self.pred = p\n\n    def setDiscovery(self,dtime):\n        self.disc = dtime\n        \n    def setFinish(self,ftime):\n        self.fin = ftime\n        \n    def getFinish(self):\n        return self.fin\n        \n    def getDiscovery(self):\n        return self.disc\n        \n    def getPred(self):\n        return self.pred\n        \n    def getDistance(self):\n        return self.dist\n        \n    def getColor(self):\n        return self.color\n    \n    def getConnections(self):\n        return self.connectedTo.keys()\n        \n    def getWeight(self,nbr):\n        return self.connectedTo[nbr]\n                \n    def __str__(self):\n        return str(self.id) + ":color " + self.color + ":disc " + str(self.disc) + ":fin " + str(self.fin) + ":dist " + str(self.dist) + ":pred \\n\\t[" + str(self.pred)+ "]\\n"\n    \n    def getId(self):\n        return self.id\n\nclass adjGraphTests(unittest.TestCase):\n    def setUp(self):\n        self.tGraph = Graph()\n        \n    def testMakeGraph(self):\n        gFile = open("test.dat")\n        for line in gFile:\n            fVertex, tVertex = line.split(\'|\')\n            fVertex = int(fVertex)\n            tVertex = int(tVertex)\n            self.tGraph.addEdge(fVertex,tVertex)\n        for i in self.tGraph:\n            adj = i.getAdj()\n            for k in adj:\n                print(i, k)\n\n        \nif __name__ == \'__main__\':\n    unittest.main()\n              \n',"src/lib/turtle/__init__.js":'//\n//\n// Turtle Graphics Module for Skulpt\n//\n// Brad Miller\n//\n//\n//\n\n\nvar TurtleGraphics; // the single identifier needed in the global scope\n\nif (! TurtleGraphics) {\n    TurtleGraphics = { };\n}\n\n\n(function () {\n\n    // Define private constants\n\n    var Degree2Rad = Math.PI / 180.0; // conversion factor for degrees to radians\n    var Rad2Degree = 180.0 / Math.PI\n\n    //\n    // Define TurtleCanvas\n    // \n\n    function TurtleCanvas(options) {\n        this.canvasID = TurtleGraphics.defaults.canvasID;\n        if (options.canvasID) {\n            this.canvasID = options.canvasID;\n        }\n\n        this.canvas = document.getElementById(this.canvasID);\n        this.context = this.canvas.getContext(\'2d\');\n        //this.canvas.style.display = \'block\';\n        $(this.canvas).fadeIn();\n\n        this.lineScale = 1.0;\n        this.xptscale = 1.0;\n        this.yptscale = 1.0\n\n        this.llx = -this.canvas.width / 2;\n        this.lly = -this.canvas.height / 2;\n        this.urx = this.canvas.width / 2;\n        this.ury = this.canvas.height / 2;\n        this.setup(this.canvas.width,this.canvas.height);\n        TurtleGraphics.canvasInit = true;\n        this.tlist = []\n\n		this.timeFactor = 5;\n        if (TurtleGraphics.defaults.animate) {\n            this.delay = 5 * this.timeFactor;\n        } else {\n            this.delay = 0;\n        }\n        this.segmentLength = 10;\n        this.renderCounter = 1;\n        this.clearPoint = 0;\n        TurtleGraphics.canvasLib[this.canvasID] = this;\n		Sk.tg.fadeOnExit = true;	//	This can be set to false AFTER the program completes to turn off the fade out on the canvas as a result of exitonclick\n    }\n\n    TurtleCanvas.prototype.setup = function(width, height) {\n        this.canvas.width = width;\n        this.canvas.height = height;\n        this.lineScale = 1.0;\n        this.xptscale = 1.0;\n        this.yptscale = 1.0;\n\n        this.llx = -this.canvas.width / 2;\n        this.lly = -this.canvas.height / 2;\n        this.urx = this.canvas.width / 2;\n        this.ury = this.canvas.height / 2;\n        this.renderCounter = 1;\n        this.clearPoint = 0;\n		this.timeFactor = 5;\n        if (TurtleGraphics.defaults.animate ) {\n            this.delay = 5 * this.timeFactor;\n        } else {\n            this.delay = 0;\n        }\n\n        if (TurtleGraphics.canvasInit == false) {\n            this.context.save();\n            this.context.translate(this.canvas.width / 2, this.canvas.height / 2); // move 0,0 to center.\n            this.context.scale(1, -1); // scaling like this flips the y axis the right way.\n            TurtleGraphics.canvasInit = true;\n            TurtleGraphics.eventCount = 0;\n            TurtleGraphics.renderClock = 0;\n            TurtleGraphics.renderTime = 0;	// RNL\n        } else {\n            this.context.restore();\n            this.context.translate(this.canvas.width / 2, this.canvas.height / 2); // move 0,0 to center.\n            this.context.scale(1, -1); // scaling like this flips the y axis the right way.\n            this.context.clearRect(-this.canvas.width / 2, -this.canvas.height / 2,\n                                    this.canvas.width, this.canvas.height);\n        }\n    }\n    TurtleCanvas.prototype.addToCanvas = function(t) {\n	        this.tlist.push(t);\n    }\n\n    TurtleCanvas.prototype.onCanvas = function(t) {\n        return (this.tlist.indexOf(t) >= 0);\n    }\n\n    TurtleCanvas.prototype.isAnimating = function() {\n        return (this.tlist.length > 0)\n    }\n\n    TurtleCanvas.prototype.startAnimating = function(t) {\n		if (! this.isAnimating()) {\n        	this.intervalId = setTimeout(render, this.delay);	//	setInterval(render, this.delay);\n		}\n    	if (!this.onCanvas(t))	//	Added by RNL in case startAnimating is called after it\'s already been added\n       		this.addToCanvas(t);\n        Sk.isTurtleProgram = true;\n    }\n\n    TurtleCanvas.prototype.doneAnimating = function(t) {\n        this.tlist.splice(0,this.tlist.length)\n        clearTimeout(this.intervalId)   \n        $(Sk.runButton).removeAttr(\'disabled\');\n    }\n\n    TurtleCanvas.prototype.cancelAnimation = function() {\n        if (this.intervalId) {\n            clearTimeout(this.intervalId)	//	clearInterval(this.intervalId);\n        }\n\n        for (var t in this.tlist) {\n            this.tlist[t].aCount = this.tlist[t].drawingEvents.length - 1;\n        }\n        render();\n    }\n\n    TurtleCanvas.prototype.setSpeedDelay = function(s) {	// RNL\n        var df = 10 - (s % 11) + 1;\n        this.delay = df * this.timeFactor;	//	RNL was 10;\n    }\n\n    TurtleCanvas.prototype.setDelay = function(d) {\n        this.delay = d;\n    }\n\n    TurtleCanvas.prototype.getDelay = function(s) { // RNL\n        return this.delay;\n    }\n\n    TurtleCanvas.prototype.setCounter = function(s) {\n		if (!s || s <= 0)	//	Don\'t let this be less than 1\n			s = 1;\n        this.renderCounter = s;\n    }\n\n    TurtleCanvas.prototype.getCounter = function() {\n        return this.renderCounter;\n    }\n\n    TurtleCanvas.prototype.setworldcoordinates = function(llx, lly, urx, ury) {\n        this.context.restore();\n        this.context.scale(this.canvas.width / (urx - llx), -this.canvas.height / (ury - lly));\n        if (lly == 0)\n            this.context.translate(-llx, lly - (ury - lly));\n        else if (lly > 0)\n            this.context.translate(-llx, -lly * 2);\n        else\n            this.context.translate(-llx, -ury);\n\n        var xlinescale = (urx - llx) / this.canvas.width;\n        var ylinescale = (ury - lly) / this.canvas.height;\n        this.xptscale = xlinescale;\n        this.yptscale = ylinescale;\n        this.lineScale = Math.min(xlinescale,ylinescale)\n        this.context.save();\n\n        this.llx = llx;\n        this.lly = lly;\n        this.urx = urx;\n        this.ury = ury;\n\n    }\n\n    TurtleCanvas.prototype.window_width = function() {\n        return this.canvas.width;\n    }\n\n    TurtleCanvas.prototype.window_height = function() {\n        return this.canvas.height;\n    }\n\n    TurtleCanvas.prototype.bgcolor = function(c) {\n        this.background_color = c;\n        //this.canvas.style.setProperty("background-color", c.v);\n        $(this.canvas).css("background-color",c.v);\n    }\n\n    TurtleCanvas.prototype.setSegmentLength = function(s) {\n        this.segmentLength = s;\n    }\n\n    TurtleCanvas.prototype.getSegmentLength = function() {\n        return this.segmentLength;\n    }\n    \n    // todo: if animating, this should be deferred until the proper time\n    TurtleCanvas.prototype.exitonclick = function () {\n        var canvas_id = this.canvasID;\n        var theCanvas = this;\n        $(this.canvas).click(function() {\n            if (! theCanvas.isAnimating()) {\n				if (Sk.tg.fadeOnExit)	//	Let\'s this be configurable\n                	$("#"+canvas_id).hide();\n                $("#"+canvas_id).unbind(\'click\');\n                Sk.tg.canvasInit = false;\n                delete Sk.tg.canvasLib[canvas_id];\n            }\n        });\n    }\n\n    TurtleCanvas.prototype.turtles = function() {\n        return TurtleGraphics.turtleList;\n    }\n\n	TurtleCanvas.prototype.tracer = function(t, d) {	//	New version NOT attached to a turtle (as per real turtle)\n        this.setCounter(t);\n		if (t == 0) {\n			for (var i in this.turtleList)\n				this.turtleList[i].animate = false;\n			this.cancelAnimation();\n		}\n		if (d !== undefined)\n			this.setDelay(d);\n	}\n\n    // check if all turtles are done\n    allDone = function() {\n        var allDone = true;\n        for (var tix in TurtleGraphics.turtleList) {\n            var theT = TurtleGraphics.turtleList[tix];\n            allDone = allDone && (theT.aCount >= theT.drawingEvents.length);\n        }\n        return allDone;\n    }\n    //\n    //  This is the function that provides the animation\n    //\n    render = function () {\n        var context = document.getElementById(TurtleGraphics.defaults.canvasID).getContext(\'2d\');\n        with (context) {\n            with (TurtleGraphics.canvasLib[TurtleGraphics.defaults.canvasID]) {\n                clearRect(llx, lly, (urx - llx), (ury - lly));\n                //canvas.style.setProperty("background-color",TurtleGraphics.turtleCanvas.bgcolor.v);\n            }\n            var incr = TurtleGraphics.canvasLib[TurtleGraphics.defaults.canvasID].getCounter();\n            var lastCanvas = null\n\n            TurtleGraphics.renderClock += incr;\n\n            for (var tix in TurtleGraphics.turtleList) {\n                var t = TurtleGraphics.turtleList[tix]\n                lastCanvas = t.turtleCanvas \n                if (t.aCount >= t.drawingEvents.length)\n                    t.aCount = t.drawingEvents.length - 1;\n                moveTo(0, 0);\n                var currentPos = new Vector(0,0,0);\n                var currentHead = new Vector(1,0,0);\n                lineWidth = t.get_pen_width();\n                lineCap = \'round\';\n                lineJoin = \'round\';\n                strokeStyle = \'black\';\n                var filling = false;\n                if (isNaN(t.turtleCanvas.delay))\n                	t.turtleCanvas.delay = 0\n//				console.log(tix + " : " + t.clearPoint + " to " + t.aCount)\n                for (var i = t.clearPoint; (i <= t.aCount || t.turtleCanvas.delay == 0) && i < t.drawingEvents.length; i++) {\n                	if (i > t.aCount)	//	If se jump past aCount, jump it ahead\n                		t.aCount = i\n                    var oper = t.drawingEvents[i];\n                    var ts = oper[oper.length-1];\n//					console.log(i + "/" + ts + oper [0] + "{" + oper [1] + "}" + t.turtleCanvas.delay)\n                    if (ts <= TurtleGraphics.renderClock || t.turtleCanvas.delay == 0) {\n                    	if (ts > TurtleGraphics.renderClock)	//	If we go past the render clock, jump it ahead\n                    		TurtleGraphics.renderClock = ts\n//						console.log("<==")\n                        if (oper[0] == "LT") {  //  line to\n                            if (! filling) {\n                                beginPath();\n                                moveTo(oper[1], oper[2]);\n                            }\n                            lineTo(oper[3], oper[4]);\n                            strokeStyle = oper[5];\n                            stroke();\n                            currentPos = new Vector(oper[3],oper[4],0);\n                            if (! filling)\n                                closePath();\n                        }\n                        else if (oper[0] == "MT") {  // move to\n                            moveTo(oper[3], oper[4]);\n                            currentPos = new Vector(oper[3],oper[4],0);\n                        }\n                        else if (oper[0] == "BF") {  // begin fill\n                            beginPath();\n                            moveTo(oper[1], oper[2]);\n                            filling = true;\n                        }\n                        else if (oper[0] == "EF") {  // end fill\n                            fillStyle = oper[3];\n                            stroke();\n                            fill();\n                            closePath();\n                            filling = false;\n                        }\n                        else if (oper[0] == "FC") {  // fill color\n                            fillStyle = oper[1];\n                        }\n                        else if (oper[0] == "TC") {  // turtle color\n                            strokeStyle = oper[1];\n                        }\n                        else if (oper[0] == "PW") {  // Pen width\n                            lineWidth = oper[1];\n                        }\n                        else if (oper[0] == "DT") {  // Dot\n                            var col = fillStyle;\n                            fillStyle = oper[2];\n                            var size = oper[1];\n                            fillRect(oper[3] - size / 2, oper[4] - size / 2, size, size);\n                            fillStyle = col;\n                        }\n                        else if (oper[0] == "CI") {  // Circle\n                            if (!filling)\n								beginPath();\n                            arc(oper[1], oper[2], oper[3], oper[4], oper[5], oper[6]);\n                            currentPos = new Vector(oper[1]+Math.cos(oper[5])*oper[3],\n                                oper[2]+Math.sin(oper[5])*oper[3],0);\n                            stroke();\n                            if (! filling) {\n                                closePath();\n                            }\n                        }\n                        else if (oper[0] == "WT") { // write\n                            if (font)\n                                font = oper[2];\n                            scale(1, -1);\n                            fillText(oper[1], oper[3], -oper[4]);\n                            scale(1, -1);\n                        } else if (oper[0] == "ST") {  // stamp\n                            t.drawturtle(oper[3], new Vector(oper[1], oper[2], 0));\n                        } else if (oper[0] == "HT") { // hide turtle\n                            t.visible = false;\n                        } else if (oper[0] == "SH") { // show turtle\n                            t.visible = true;\n                        } else if (oper[0] == "TT") {\n                            currentHead = oper[1];\n                        } else if (oper[0] == "CL") { // RNL clear\n                        	clear_canvas(t.canvasID);\n                        	t.clearPoint = i;	// Different from reset that calls clear because it leaves the turtles where they are\n                        } else if (oper[0] == "DL") { // RNL delay\n                        	var df = oper[1]\n//                      	console.log("animated delay set " + df)\n                        	t.turtleCanvas.delay = df\n                        } else if (oper[0] == "SC") { // RNL speed change\n                        	var s = oper[1]\n                        	if (s < 0)\n                        		s = 0\n                        	if (s > 10)\n                        		s = 10\n       						var df = (10 - (s % 11) + 1) * t.turtleCanvas.timeFactor	//	10\n       						if (s == 0) {\n       							df = 0\n       						}\n	                        //	t.turtleCanvas.intervalId = clearInterval(t.turtleCanvas.intervalId);\n	       					t.turtleCanvas.delay = df;\n	       					//	t.turtleCanvas.intervalId = setInterval(render, t.turtleCanvas.delay)\n       						if (oper[2]) {\n       							t.turtleCanvas.setSegmentLength(oper[2]);\n       						}\n       					} else if (oper[0] == "NO") { // RNL no op                	\n                        } else {\n							console.log("unknown op: " + oper[0]);\n                        } // end of oper[0] test\n                    } // end of if ts < render clock\n                } // end of for\n//				console.log(TurtleGraphics.renderClock + " / " + t.aCount)\n//				console.log("------------------------------")\n                t.aCount += incr;\n                if (t.visible) {\n                    // draw the turtle\n                    t.drawturtle(currentHead.toAngle(), currentPos); // just use currentHead\n                }\n            }\n            //if (t.aCount >= t.drawingEvents.length) {\n            if (TurtleGraphics.renderClock > TurtleGraphics.eventCount ){ // && allDone() ){\n//              t.turtleCanvas.doneAnimating(t);\n//				console.log("done animating")\n                if (lastCanvas) lastCanvas.doneAnimating(t);\n            } else {\n//    			t.turtleCanvas.intervalId = setTimeout(render, t.turtleCanvas.delay)\n    			if (lastCanvas) {\n    				lastCanvas.intervalId = setTimeout(render, lastCanvas.delay)\n    			}\n            }\n        }\n    }\n\n\n\n    // Constructor for Turtle objects\n    function Turtle() {\n        if (arguments.length >= 1) {\n            this.initialize(arguments[0]);\n        }\n        else {\n            this.initialize();\n        }\n        TurtleGraphics.turtleList.push(this);\n    }\n\n\n    Turtle.prototype.go_home = function () {\n        // Put turtle in initial state\n        // turtle is headed to the right\n        // with location 0,0,0 in the middle of the canvas.\n        // x grows to the right\n        // y grows towards the top of the canvas\n        with (this) {\n            position = home;\n            context.moveTo(home[0], home[1]);\n            heading = new Vector([1.0, 0.0, 0.0]); // to the right; in turtle space x+ direction\n            normal = new Vector([0.0, 0.0, -1.0]); // in z- direction\n        }\n    };\n\n    Turtle.prototype.initialize = function () {\n        // Initialize the turtle.\n        var options = { };\n\n        if (arguments.length >= 1) {\n            options = arguments[0];\n        }\n\n        this.canvasID = TurtleGraphics.defaults.canvasID;\n        if (options.canvasID) {\n            this.canvasID = options.canvasID;\n        }\n        this.context = document.getElementById(this.canvasID).getContext(\'2d\');\n\n        this.animate = TurtleGraphics.defaults.animate;\n\n        with (this.context) {\n            if (TurtleGraphics.canvasInit == false) {   // This is a workaround until I understand skulpt re-running better\n                // the downside is that this limits us to a single turtle...\n                save();\n                translate(canvas.width / 2, canvas.height / 2); // move 0,0 to center.\n                scale(1, -1); // scaling like this flips the y axis the right way.\n                if (! TurtleGraphics.canvasLib[this.canvasID]) {\n                    TurtleGraphics.canvasLib[this.canvasID] = new TurtleCanvas(options);\n                }\n                TurtleGraphics.canvasInit = true;\n            } else {\n                clear_canvas(this.canvasID);\n            }\n\n            this.turtleCanvas = TurtleGraphics.canvasLib[this.canvasID];\n            this.home = new Vector([0.0, 0.0, 0.0]);\n            this.visible = true;\n            this.shapeStore = {};\n            this.shapeStore[\'turtle\'] = turtleShapePoints();\n            this.shapeStore[\'arrow\'] = defaultShapePoints();\n            this.shapeStore[\'circle\'] = circleShapePoints();\n            this.shapeStore[\'square\'] = squareShapePoints();\n            this.shapeStore[\'triangle\'] = triangleShapePoints();\n            this.shapeStore[\'blank\'] = [new Vector(0,0)];\n            this.shapeStore[\'classic\'] = classicShapePoints();\n            this.currentShape = \'classic\';\n            this.drawingEvents = [];\n\n            this.filling = false;\n            this.pen = true;\n            this.penStyle = \'black\';\n            this.penWidth = 2;\n            this.fillStyle = \'black\';\n            this.position = [ ];\n            this.heading = [ ];\n            this.normal = [ ];\n            this.go_home();\n            this.aCount = 0;\n            this.clearPoint = 0;	// RNL for clear/clearScreen\n        }\n    }\n    function turtleShapePoints() {\n        var pl = [\n            [0,16],\n            [-2,14],\n            [-1,10],\n            [-4,7],\n            [-7,9],\n            [-9,8],\n            [-6,5],\n            [-7,1],\n            [-5,-3],\n            [-8,-6],\n            [-6,-8],\n            [-4,-5],\n            [0,-7],\n            [4,-5],\n            [6,-8],\n            [8,-6],\n            [5,-3],\n            [7,1],\n            [6,5],\n            [9,8],\n            [7,9],\n            [4,7],\n            [1,10],\n            [2,14]\n        ];\n        res = [];\n        for (p in pl) {\n            res.push(new Vector(pl[p]));\n        }\n        return res;\n    }\n\n    function defaultShapePoints() {\n        var pl = [\n            [-10,0],\n            [10,0],\n            [0,10]\n        ];\n        res = [];\n        for (p in pl) {\n            res.push(new Vector(pl[p]));\n        }\n        return res;\n    }\n\n    function circleShapePoints() {\n        var pl = [\n            [10,0],\n            [9.51,3.09],\n            [8.09,5.88],\n            [5.88,8.09],\n            [3.09,9.51],\n            [0,10],\n            [-3.09,9.51],\n            [-5.88,8.09],\n            [-8.09,5.88],\n            [-9.51,3.09],\n            [-10,0],\n            [-9.51,-3.09],\n            [-8.09,-5.88],\n            [-5.88,-8.09],\n            [-3.09,-9.51],\n            [-0.00,-10.00],\n            [3.09,-9.51],\n            [5.88,-8.09],\n            [8.09,-5.88],\n            [9.51,-3.09]\n        ];\n        res = [];\n        for (p in pl) {\n            res.push(new Vector(pl[p]));\n        }\n        return res;\n    }\n\n    function triangleShapePoints() {\n        var pl = [\n            [10,-5.77],\n            [0,11.55],\n            [-10,-5.77]\n        ];\n\n        res = [];\n        for (p in pl) {\n            res.push(new Vector(pl[p]));\n        }\n        return res;\n\n    }\n\n    function squareShapePoints() {\n        var pl = [\n            [10,-10],\n            [10,10],\n            [-10,10],\n            [-10,-10]\n        ];\n\n        res = [];\n        for (p in pl) {\n            res.push(new Vector(pl[p]));\n        }\n        return res;\n\n    }\n\n    function classicShapePoints() {\n        var pl = [\n            [0,0],\n            [-5,-9],\n            [0,-7],\n            [5,-9]\n        ];\n\n        res = [];\n        for (p in pl) {\n            res.push(new Vector(pl[p]));\n        }\n        return res;\n\n    }\n\n    Turtle.prototype.clean = function () {\n        // Clean the canvas\n        // Optional second argument is color\n        with (this) {\n            if (arguments.length >= 1) {\n                clear_canvas(canvasID, arguments[0]);\n            }\n            else {\n                clear_canvas(canvasID);\n            }\n            initialize();\n        }\n    }\n\n    Turtle.prototype.addDrawingEvent = function(eventList) {\n        TurtleGraphics.eventCount += 1;\n        eventList.push(TurtleGraphics.eventCount);\n        this.drawingEvents.push(eventList);\n    }\n//  \n//  Drawing Functions\n//\n\n    // break a line into segments\n    // sp:  Vector of starting position\n    // ep:  Vector of ending position\n    // sl:  int length of segments\n    segmentLine = function(sp, ep, sL, pen) {\n        var head = ep.sub(sp).normalize();\n        var numSegs = Math.floor(ep.sub(sp).len() / sL);\n        var res = [];\n        var oldp = sp;\n        var newp;\n        var op = ""\n        if (pen)\n            op = "LT"\n        else\n            op = "MT"\n        for (var i = 0; i < numSegs; i++) {\n            newp = oldp.linear(1, sL, head);\n            res.push([op,oldp[0],oldp[1],newp[0],newp[1]]);\n            oldp = newp;\n        }\n        if (! ((oldp[0] == ep[0]) && (oldp[1] == ep[1])))\n            res.push([op, oldp[0], oldp[1], ep[0], ep[1]]);\n        return res;\n    }\n\n    Turtle.prototype.draw_line = function(newposition) {\n        with (this) {\n            with (context) {\n                if (! animate) {\n                    if (! filling) {\n                        beginPath();\n                        moveTo(position[0], position[1]);\n                    }\n                    lineCap = \'round\';\n                    lineJoin = \'round\';\n                    lineWidth = get_pen_width();\n                    strokeStyle = penStyle;\n                    lineTo(newposition[0], newposition[1]);\n                    stroke();\n                    if (! filling)\n                        closePath();\n                } else {\n                    var r = segmentLine(position, newposition, turtleCanvas.getSegmentLength(), pen);\n                    for (var s in r) {\n                        r[s].push(penStyle);\n                        addDrawingEvent(r[s]);\n                    }\n                    if (! turtleCanvas.isAnimating()) {\n                        turtleCanvas.startAnimating(this);\n                    } else {\n                        if (! turtleCanvas.onCanvas(this))\n                            turtleCanvas.addToCanvas(this);\n                    }\n                }\n            }\n        }\n\n    }\n\n\n    Turtle.prototype.forward = function (d) {\n        with (this) {\n            var newposition = position.linear(1, d, heading);\n            goto(newposition);\n        }\n    }\n\n    Turtle.prototype.backward = function(d) {\n        this.forward(-d);\n    }\n\n//	This is an internal function that sets the position without doing any drawing\n    Turtle.prototype.teleport_to = function(nx, ny) {\n        if (nx instanceof Vector)\n            var newposition = nx;\n        else\n            var newposition = new Vector([nx,ny,0]);\n        this.context.moveTo(newposition[0], newposition[1]);\n		this.position = newposition;\n	}\n\n    Turtle.prototype.goto = function(nx, ny) {\n        if (nx instanceof Vector)\n            var newposition = nx;\n        else\n            var newposition = new Vector([nx,ny,0]);\n        with (this) {\n            if (pen) {\n                draw_line(newposition);\n            } else {\n                if (! animate) {\n                    context.moveTo(newposition[0], newposition[1]);\n                } else {\n                    var r = segmentLine(position, newposition, turtleCanvas.getSegmentLength(), pen);\n                    for (var s in r)\n                        addDrawingEvent(r[s]);\n                    if (! turtleCanvas.isAnimating()) {\n                        turtleCanvas.startAnimating(this);\n                    } else {\n                        if (! turtleCanvas.onCanvas(this))\n                            turtleCanvas.addToCanvas(this);\n                    }\n                }\n            }\n            position = newposition;\n\n        }\n    }\n\n    Turtle.prototype.delay = function(d) {	// RNL\n    	if (d != null) {\n    		if (d < 0)\n    			d = -d\n    		if (!this.animate) \n    			this.turtleCanvas.setDelay(d)\n    		else {\n    			this.turtleCanvas.setDelay(d)\n	    		this.addDrawingEvent(["DL", d])\n	    		this.addDrawingEvent(["NO"])\n    		}\n    	}\n        return this.turtleCanvas.getDelay();\n    }\n\n    Turtle.prototype.speed = function(s,t) {\n        if (s > 0 && !this.animate) {\n            this.animate = true;\n            this.turtleCanvas.setSpeedDelay(s)\n        } else if (s == 0 && !this.animate) {\n        	this.turtleCanvas.setSpeedDelay(s)\n        } else {\n//          this.animate = false;\n//          this.turtleCanvas.cancelAnimation();\n			this.addDrawingEvent(["SC", s, t])\n			this.addDrawingEvent(["NO"])\n        }\n        if (t) {\n            this.turtleCanvas.setSegmentLength(t);\n            // set the number of units to divide a segment into\n        } else {\n            this.turtleCanvas.setSegmentLength(10);\n        }\n    }\n\n    Turtle.prototype.tracer = function(t, d) {\n        this.turtleCanvas.setCounter(t);\n		if (t == 0) {\n			this.animate=false;\n			this.turtleCanvas.cancelAnimation();\n		}\n		if (d !== undefined)\n			this.turtleCanvas.setDelay(d);\n    }\n\n    Turtle.prototype.getRenderCounter = function() {\n        return this.turtleCanvas.getCounter();\n    }\n\n    Turtle.prototype.turn = function (phi) {\n        with (this) {\n            var alpha = phi * Degree2Rad;\n            var left = normal.cross(heading);\n            var newheading = heading.rotateNormal(left, normal, alpha);\n            heading = newheading;\n\n            if (animate) {\n                addDrawingEvent(["TT",heading]);\n            }\n        }\n    }\n\n    Turtle.prototype.right = Turtle.prototype.turn;\n\n    Turtle.prototype.left = function(phi) {\n        this.turn(-phi);\n    }\n\n    Turtle.prototype.get_heading = function () {\n        if (TurtleGraphics.defaults.degrees)\n            return this.heading.toAngle()\n        else\n            return this.heading\n    }\n\n    Turtle.prototype.get_position = function () {\n        return this.position;\n    }\n\n    Turtle.prototype.getx = function () {\n        return this.position[0];\n    }\n\n    Turtle.prototype.gety = function () {\n        return this.position[1];\n    }\n\n    Turtle.prototype.set_heading = function(newhead) {\n        if ((typeof(newhead)).toLowerCase() === \'number\') {\n            this.heading = Vector.angle2vec(newhead);\n        } else {\n            this.heading = newhead;\n        }\n    }\n\n    Turtle.prototype.towards = function(to, y) {\n        // set heading vector to point towards another point.\n        if ((typeof(to)).toLowerCase() === \'number\')\n            to = new Vector(to, y, 0);\n        else if (! (to instanceof Vector)) {\n            to = new Vector(to);\n        }\n        var res = to.sub(this.position);\n        res = res.normalize();\n        if (TurtleGraphics.defaults.degrees) {\n            return res.toAngle();\n        }\n        else {\n            return res;\n        }\n    }\n\n    Turtle.prototype.distance = function(to, y) {\n        if ((typeof(to)).toLowerCase() === \'number\')\n            to = new Vector(to, y, 0);\n        return this.position.sub(new Vector(to)).len();\n    }\n\n    Turtle.prototype.dot = function() {\n        var size = 2;\n        if (arguments.length >= 1) size = arguments[0];\n        size = size * this.turtleCanvas.lineScale;\n        with (this) {\n            with (context) {\n                var color = penStyle;\n                var nc = arguments[1] || color;\n                if (! animate) {\n                    fillStyle = nc;\n                    fillRect(position[0] - size / 2, position[1] - size / 2, size, size);\n                    fillStyle = color;\n                } else {\n                    addDrawingEvent(["DT", size, nc, position[0], position[1]]);\n                }\n            }\n        }\n\n    }\n\n    Turtle.prototype.circle = function(radius, extent) {\n        if (extent === undefined) {\n            extent = 360\n        }\n		if (this.animate) {\n			var arcLen = Math.abs(radius * Math.PI * 2.0  * extent / 360);\n			var segLen = this.turtleCanvas.getSegmentLength();\n			if (arcLen <= segLen)\n				this.arc(radius,extent);\n			else {\n				//	Break the arc into segments for animation\n				var extentPart = (segLen / arcLen) * extent;\n				var extentLeft = extent;\n				while (Math.abs(extentLeft) > Math.abs(extentPart)) {\n					this.arc(radius, extentPart);\n					extentLeft = extentLeft - extentPart;\n				}\n				if (Math.abs(extentLeft) > 0.01)\n					this.arc(radius, extentLeft);\n			}\n		} else {\n			this.arc(radius,extent);\n		}\n	}\n	\n    Turtle.prototype.arc = function(radius, extent) {\n		//	Figure out where the turtle is and which way it\'s facing\n		var turtleHeading = this.get_heading()\n		var tx = this.position[0]\n		var ty = this.position[1]\n\n		//	Figure out the circle center\n		var cx = tx + (radius * Math.cos((turtleHeading + 90) * Degree2Rad));\n		var cy = ty + (radius * Math.sin((turtleHeading + 90) * Degree2Rad));\n\n		//	Canvas arc angles go CLOCKWISE, not COUNTERCLOCKWISE like Turtle\n\n		//	Figure out our arc angles\n		var startAngleDeg;\n		if (radius >= 0)\n			startAngleDeg = turtleHeading - 90;\n		else\n			startAngleDeg = turtleHeading + 90;\n\n		var endAngleDeg;\n        if (extent) {\n			if (radius >= 0)\n	            endAngleDeg = startAngleDeg + extent;\n			else\n	            endAngleDeg = startAngleDeg - extent;\n        } else {\n			if (radius >= 0)\n	            endAngleDeg = startAngleDeg + 360;\n			else\n				endAngleDeg = startAngleDeg - 360;\n		}\n\n		//	Canvas angles are opposite\n		startAngleDeg = 360 - startAngleDeg\n		endAngleDeg   = 360 - endAngleDeg\n\n		//	Becuase the y axis has been flipped in HTML5 Canvas with a tanslation, we need to adjust the angles\n		startAngleDeg = -startAngleDeg\n		endAngleDeg   = -endAngleDeg\n\n		//	Convert to radians\n		var startAngle = startAngleDeg * Degree2Rad;\n		var endAngle   = endAngleDeg   * Degree2Rad;\n\n\n		//	Do the drawing\n        if (! this.animate) {\n			if (!this.filling)\n				this.context.beginPath();\n            this.context.arc(cx, cy, Math.abs(radius), startAngle, endAngle, (radius * extent <= 0));\n            this.context.stroke();\n			if (!this.filling)\n				this.context.closePath();\n        } else {\n            this.addDrawingEvent(["CI", cx, cy, Math.abs(radius), startAngle, endAngle, (radius * extent <= 0)]);\n        }\n\n		//	Move the turtle only if we have to\n		if (extent && (extent % 360) != 0) {\n			var turtleArc;\n			if (radius >= 0)\n				turtleArc = extent;\n			else \n				turtleArc = -extent;\n			var newTurtleHeading = (turtleHeading + turtleArc) % 360;\n			if (newTurtleHeading < 0)\n				newTurtleHeading = newTurtleHeading + 360;\n\n			var nx = cx + (radius * Math.cos((newTurtleHeading - 90) * Degree2Rad));\n			var ny = cy + (radius * Math.sin((newTurtleHeading - 90) * Degree2Rad));	//	y coord is inverted in turtle\n\n			//	Move it internally\n			this.set_heading(newTurtleHeading);\n			this.teleport_to(nx,ny);\n\n			//	If we\'re animating the turtle, move it on the screen\n			if (this.animate) {\n				this.addDrawingEvent(["TT", this.heading]);\n			}\n		}\n\n    }\n\n    Turtle.prototype.write = function(theText, move, align, font) {\n        if (! this.animate) {\n            if (font)\n                this.context.font = font.v;\n            this.context.scale(1, -1);\n            this.context.fillText(theText, this.position[0], -this.position[1]);\n            this.context.scale(1, -1);\n        } else {\n            var fontspec;\n            if (font)\n                fontspec = font.v\n            this.addDrawingEvent(["WT", theText, fontspec, this.position[0], this.position[1]]);\n        }\n    }\n\n    Turtle.prototype.setworldcoordinates = function(llx, lly, urx, ury) {\n        this.turtleCanvas.setworldcoordinates(llx, lly, urx, ury);\n    }\n\n//\n// Pen and Style functions\n//\n    Turtle.prototype.pen_down = function () {\n        this.pen = true;\n    }\n\n    Turtle.prototype.down = Turtle.prototype.pen_down;\n\n    Turtle.prototype.pen_up = function () {\n        this.pen = false;\n    }\n\n    Turtle.prototype.up = Turtle.prototype.pen_up;\n\n    Turtle.prototype.get_pen = function () {\n        return this.pen;\n    }\n\n    Turtle.prototype.set_pen_width = function (w) {\n        if (this.animate)\n            this.addDrawingEvent(["PW", w * this.turtleCanvas.lineScale]);\n        else\n            this.penWidth = w;\n    }\n\n    Turtle.prototype.get_pen_width = function() {\n        return this.penWidth * this.turtleCanvas.lineScale;\n    }\n\n    Turtle.prototype.set_pen_color = function (c, g, b) {\n        if (typeof(c) == "string") {\n            this.penStyle = c;\n        } else {\n        	var rs\n        	var gs\n        	var bs\n        	if (typeof( c) == "object" && c.length == 3) {\n				var c0 = Sk.builtin.asnum$(c[0]);\n				var c1 = Sk.builtin.asnum$(c[1]);\n				var c2 = Sk.builtin.asnum$(c[2]);\n        	} else {\n                var c0 = Sk.builtin.asnum$(c);\n                var c1 = Sk.builtin.asnum$(g);\n                var c2 = Sk.builtin.asnum$(b);\n        	}\n            rs = c0.toString(16);\n            gs = c1.toString(16);\n            bs = c2.toString(16);\n            while (rs.length < 2) rs = "0" + rs;\n            while (gs.length < 2) gs = "0" + gs;\n            while (bs.length < 2) bs = "0" + bs;\n            c = "#" + rs + gs + bs;\n            this.penStyle = c;\n        }\n\n        this.context.strokeStyle = c;\n        if (this.animate)\n            this.addDrawingEvent(["TC", c]);\n    }\n\n    Turtle.prototype.set_fill_color = function (c, g, b) {\n        if (typeof(c) == "string") {\n            this.fillStyle = c;\n        } else {\n        	var rs\n        	var gs\n        	var bs\n        	if (typeof( c) == "object" && c.length == 3) {\n				var c0 = Sk.builtin.asnum$(c[0]);\n				var c1 = Sk.builtin.asnum$(c[1]);\n				var c2 = Sk.builtin.asnum$(c[2]);\n        	} else {\n                var c0 = Sk.builtin.asnum$(c);\n                var c1 = Sk.builtin.asnum$(g);\n                var c2 = Sk.builtin.asnum$(b);\n        	}\n            rs = c0.toString(16)\n            gs = c1.toString(16)\n            bs = c2.toString(16)\n            while (rs.length < 2) rs = "0" + rs;\n            while (gs.length < 2) gs = "0" + gs;\n            while (bs.length < 2) bs = "0" + bs;\n            c = "#" + rs + gs + bs;\n            this.fillStyle = c;\n        }\n\n        this.context.fillStyle = c;\n        if (this.animate)\n            this.addDrawingEvent(["FC", c]);\n    }\n\n    Turtle.prototype.begin_fill = function () {\n        if (! this.animate) {\n            this.filling = true;\n            this.context.beginPath();\n            this.context.moveTo(this.position[0], this.position[1]);\n        } else\n            this.addDrawingEvent(["BF", this.position[0], this.position[1]]);\n\n    }\n\n    Turtle.prototype.end_fill = function () {\n        if (! this.animate) {\n            this.context.stroke();\n            this.context.fill();\n            this.context.closePath();\n            this.filling = false;\n        } else\n            this.addDrawingEvent(["EF", this.position[0], this.position[1], this.fillStyle]);\n    }\n\n\n    Turtle.prototype.showturtle = function() {\n        if (this.animate) {\n            this.addDrawingEvent(["SH"]);\n        }\n        this.visible = true;\n    }\n\n    Turtle.prototype.hideturtle = function() {\n        if (this.animate) {\n            this.addDrawingEvent(["HT"]);\n        }\n        this.visible = false;\n    }\n\n    Turtle.prototype.isvisible = function() {\n        return this.visible;\n    }\n\n    // \n    // Appearance\n    //\n\n    Turtle.prototype.shape = function(s) {\n        if (this.shapeStore[s])\n            this.currentShape = s;\n        else {\n        }\n    }\n\n    Turtle.prototype.drawturtle = function(heading, position) {\n        var rtPoints = [];\n        var plist = this.shapeStore[this.currentShape];\n        var head;\n        if (! (heading === undefined))\n            head = heading - 90.0;\n        else\n            head = this.heading.toAngle() - 90.0;\n        if (! position)\n            position = this.position\n        for (p in plist) {\n            rtPoints.push(plist[p].scale(this.turtleCanvas.xptscale,this.turtleCanvas.yptscale).rotate(head).add(position));\n        }\n        this.context.beginPath();\n        this.context.moveTo(rtPoints[0][0], rtPoints[0][1]);\n        for (var i = 1; i < rtPoints.length; i++) {\n            this.context.lineTo(rtPoints[i][0], rtPoints[i][1]);\n        }\n        this.context.closePath();\n        this.context.stroke();\n        if (this.fillStyle) {\n            this.context.fill();\n        }\n    }\n\n    Turtle.prototype.stamp = function() {\n        // either call drawTurtle or just add a DT with current position and heading to the drawingEvents list.\n        if (this.animate) {\n            this.addDrawingEvent(["ST",this.position[0],this.position[1],this.heading.toAngle()]);\n        } else\n            this.drawturtle();\n    }\n    \n    Turtle.prototype.clear = function () {\n    	if (this.animate) {\n    		this.addDrawingEvent(["CL"])\n    	} else {\n    		clear_canvas(this.canvasID);\n    	}\n    }\n\n    function clear_canvas(canId) {\n        with (document.getElementById(canId).getContext(\'2d\')) {\n            if (arguments.length >= 2) {\n//		fillStyle = arguments[1];\n//		fillRect(0, 0, canvas.width, canvas.height);\n            }\n            clearRect(-canvas.width / 2, -canvas.height / 2, canvas.width, canvas.height);\n        }\n    }\n\n\n    // Create a 3d Vector class for manipulating turtle heading, and position.\n\n    function Vector(x, y, z) {\n        if ((typeof(x)).toLowerCase() === \'number\') {\n            Array.prototype.push.call(this, x);\n            Array.prototype.push.call(this, y);\n            Array.prototype.push.call(this, z);\n        }\n        else {\n            for (var i in x) {\n                Array.prototype.push.call(this, x[i]);\n            }\n        }\n    }\n\n\n    // Create a vector object given a direction as an angle.\n    Vector.angle2vec = function(phi) {\n        var res = new Vector([0.0,0.0,0.0]);\n        phi = phi * Degree2Rad;\n        res[0] = Math.cos(phi);\n        res[1] = Math.sin(phi);\n        return res.normalize();\n    }\n\n    // This trick allows you to access a Vector object like an array\n    // myVec[0] == x\n    // myVec[1] == y\n    // myVec[2] == z\n    // we really only need the z for the convenience of rotating\n    Vector.prototype.addItem = function(item) {\n        Array.prototype.push.call(this, item);\n    }\n\n    Vector.prototype.linear = function(a, b, v) {\n        var result = [ ];\n        for (var c = 0; c <= 2; ++c) {\n            result[c] = a * this[c] + b * v[c];\n        }\n        return new Vector(result);\n    }\n\n    Vector.prototype.cross = function(v) {\n        // Return cross product of this and v\n        var result = [ ];\n        for (var c = 0; c <= 2; ++c) {\n            result[c] = this[(c + 1) % 3] * v[(c + 2) % 3] - this[(c + 2) % 3] * v[(c + 1) % 3];\n        }\n        return new Vector(result);\n    }\n\n    Vector.prototype.rotate = function(angle) {\n        // Rotate this counter clockwise by angle.\n        var perp = new Vector(-this[1], this[0], 0);\n        angle = angle * Degree2Rad;\n        var c = Math.cos(angle);\n        var s = Math.sin(angle);\n        return new Vector(this[0] * c + perp[0] * s, this[1] * c + perp[1] * s, 0);\n    }\n\n    Vector.prototype.rotateNormal = function(v, w, alpha) {\n        // Return rotation of this in direction of v about w over alpha\n        // Requires: v, w are vectors; alpha is angle in radians\n        //   this, v, w are orthonormal\n        return this.linear(Math.cos(alpha), Math.sin(alpha), v);\n    }\n\n    Vector.prototype.normalize = function() {\n        var n = this.len();\n        var res = this.div(n);\n        return res;\n    }\n\n    Vector.prototype.toAngle = function() {\n        // workaround for values getting set to +/i xxx e -16 fooling the +/- checks below\n        if (Math.abs(this[1]) < 0.00001) this[1] = 0.0;\n        if (Math.abs(this[0]) < 0.00001) this[0] = 0.0;\n        var rads = Math.atan(Math.abs(this[1]) / Math.abs(this[0]));\n        var deg = rads * Rad2Degree;\n        if (this[0] < 0 && this[1] > 0) deg = 180 - deg;\n        else if (this[0] < 0 && this[1] <= 0) deg = 180.0 + deg;\n        else if (this[0] >= 0 && this[1] < 0) deg = 360 - deg;\n        return deg;\n    }\n\n    // divide all vector components by the same value\n    Vector.prototype.div = function(n) {\n        res = []\n        res[0] = this[0] / n;\n        res[1] = this[1] / n;\n        res[2] = this[2] / n;\n        return new Vector(res);\n    }\n\n    // subtract one vector from another\n    Vector.prototype.sub = function(v) {\n        res = new Vector(0, 0, 0);\n        res[0] = this[0] - v[0];\n        res[1] = this[1] - v[1];\n        res[2] = this[2] - v[2];\n        return res;\n    }\n\n    Vector.prototype.add = function(v) {\n        res = new Vector(0, 0, 0);\n        res[0] = this[0] + v[0];\n        res[1] = this[1] + v[1];\n        res[2] = this[2] + v[2];\n        return res;\n    }\n\n    Vector.prototype.smul = function(k) {  // scalar multiplication\n        res = new Vector(0, 0, 0);\n        res[0] = this[0] * k;\n        res[1] = this[1] * k;\n        res[2] = this[2] * k;\n        return res;\n    }\n\n    Vector.prototype.scale = function(xs,ys) {\n        res = new Vector(0,0,0);\n        res[0] =  this[0] * ys;\n        res[1] =  this[1] * xs;\n        res[2] = 1.0;\n        return res;\n    }\n\n    Vector.prototype.len = function() {\n        return Math.sqrt(this[0] * this[0] + this[1] * this[1] + this[2] * this[2]);\n    }\n\n\n    TurtleGraphics.defaults = { canvasID: \'mycanvas\', degrees: true, animate: true }\n    TurtleGraphics.turtleList = [];\n    TurtleGraphics.Turtle = Turtle;\n    TurtleGraphics.TurtleCanvas = TurtleCanvas;\n    TurtleGraphics.canvasLib = {}\n    TurtleGraphics.clear_canvas = clear_canvas;\n    TurtleGraphics.Vector = Vector;\n    TurtleGraphics.canvasInit = false;\n    TurtleGraphics.eventCount = 0;\n    TurtleGraphics.renderClock = 0;\n    TurtleGraphics.renderTime  = 0; // RNL\n\n})();\n\n\n//\n// Wrapper around the Turtle Module starts here.\n//\n//\nvar $builtinmodule = function(name) {\n    var mod = {};\n    // First we create an object, this will end up being the class\n    // class\n    Sk.tg = TurtleGraphics;\n\n    var checkArgs = function(expected, actual, func) {\n        if (actual != expected ) {\n            throw new Sk.builtin.TypeError(func + " takes exactly " + expected +\n                    " positional argument (" + actual + " given)")\n        }\n    }\n\n    var turtle = function($gbl, $loc) {\n        $loc.__init__ = new Sk.builtin.func(function(self) {\n            TurtleGraphics.defaults = {canvasID: Sk.canvas, animate: true, degrees: true};\n            self.theTurtle = new TurtleGraphics.Turtle();\n        });\n\n//\n// Turtle Motion\n//\n        //\n        // Move and Draw\n        //\n        $loc.forward = new Sk.builtin.func(function(self, dist) {\n			dist = Sk.builtin.asnum$(dist);\n            checkArgs(2,arguments.length,"forward()");\n            self.theTurtle.forward(dist);\n        });\n\n        $loc.fd = $loc.forward;\n\n        $loc.backward = new Sk.builtin.func(function(self, dist) {\n			dist = Sk.builtin.asnum$(dist);\n            checkArgs(2,arguments.length,"backward()");\n            self.theTurtle.forward(-dist);\n        });\n\n        $loc.back = $loc.backward;\n        $loc.bk = $loc.backward;\n\n        $loc.right = new Sk.builtin.func(function(self, angle) {\n			angle = Sk.builtin.asnum$(angle);\n            checkArgs(2,arguments.length,"right()");\n            self.theTurtle.turn(angle);\n        });\n\n        $loc.rt = $loc.right;\n\n        $loc.left = new Sk.builtin.func(function(self, angle) {\n			angle = Sk.builtin.asnum$(angle);\n            checkArgs(2,arguments.length,"left()");\n            self.theTurtle.turn(-angle);\n        });\n\n        $loc.lt = $loc.left;\n\n        $loc.goto_$rw$ = new Sk.builtin.func(function(self, nx, ny) {\n			nx = Sk.builtin.asnum$(nx);\n			ny = Sk.builtin.asnum$(ny);\n            checkArgs(3,arguments.length,"goto()");\n            self.theTurtle.goto(nx, ny);\n        });\n\n        $loc.setposition = new Sk.builtin.func(function(self,nx,ny) {\n			nx = Sk.builtin.asnum$(nx);\n			ny = Sk.builtin.asnum$(ny);\n            checkArgs(3,arguments.length,"setposition()");\n            self.theTurtle.up();\n            self.theTurtle.goto(nx,ny);\n            self.theTurtle.down();\n        });\n        $loc.setpos = $loc.setposition;\n\n        $loc.setx = new Sk.builtin.func(function(self, nx) {\n			nx = Sk.builtin.asnum$(nx);\n            checkArgs(2,arguments.length,"setx()");\n            self.theTurtle.goto(nx, self.theTurtle.GetY());\n        });\n\n        $loc.sety = new Sk.builtin.func(function(self, ny) {\n			ny = Sk.builtin.asnum$(ny);\n            checkArgs(2,arguments.length,"sety()");\n            self.theTurtle.goto(self.theTurtle.GetX(), ny);\n        });\n\n        $loc.setheading = new Sk.builtin.func(function(self, newhead) {\n			newhead = Sk.builtin.asnum$(newhead);\n            checkArgs(2,arguments.length,"setheading()");\n            return self.theTurtle.set_heading(newhead);\n        });\n\n        $loc.seth = $loc.setheading;\n\n        $loc.home = new Sk.builtin.func(function(self) {\n            self.theTurtle.go_home();\n        });\n\n        $loc.dot = new Sk.builtin.func(function(self, /*opt*/ size, color) {\n			size = Sk.builtin.asnum$(size);\n            size = size || 1;\n            if (color) {\n                color = color.v || self.theTurtle.penStyle;\n            }\n            self.theTurtle.dot(size, color);\n        });\n\n        $loc.circle = new Sk.builtin.func(function(self, radius, extent) {\n			radius = Sk.builtin.asnum$(radius);\n			extent = Sk.builtin.asnum$(extent);\n            self.theTurtle.circle(radius, extent);\n        });\n\n        $loc.delay = new Sk.builtin.func(function(self, d) {\n			d = Sk.builtin.asnum$(d);\n            return self.theTurtle.delay(d);\n        });\n\n        $loc.speed = new Sk.builtin.func(function(self, s, t) {\n			s = Sk.builtin.asnum$(s);\n			t = Sk.builtin.asnum$(t);\n            self.theTurtle.speed(s,t);\n        });\n\n        $loc.tracer = new Sk.builtin.func(function(self, t, d) {\n			t = Sk.builtin.asnum$(t);\n			d = Sk.builtin.asnum$(d);\n            self.theTurtle.tracer(t, d);\n        });\n\n		$loc.update = new Sk.builtin.func(function(self) {\n			//	Dummy function to emulate update... when not animating, we don\'t save the drawing operations, so this is pointless for us\n		});\n\n        // todo:  stamp, clearstamp, clearstamps, undo, speed\n\n        //\n        // Tell Turtle\'s state\n        //\n        $loc.heading = new Sk.builtin.func(function(self) {\n            checkArgs(1,arguments.length,"heading()");\n            return Sk.builtin.assk$(self.theTurtle.get_heading(),Sk.builtin.nmber.float$);\n        });\n\n        $loc.position = new Sk.builtin.func(function(self) {\n            checkArgs(1,arguments.length,"position()");\n            var res = self.theTurtle.get_position();\n            var x = new Sk.builtin.tuple([Sk.builtin.assk$(res[0],Sk.builtin.nmber.float$),\n                                          Sk.builtin.assk$(res[1],Sk.builtin.nmber.float$) ]);\n            return x;\n        });\n\n        $loc.pos = $loc.position;\n\n        $loc.xcor = new Sk.builtin.func(function(self) {\n            checkArgs(1,arguments.length,"xcor()");\n            var res = self.theTurtle.getx();\n            return Sk.builtin.assk$(res,Sk.builtin.nmber.float$);\n        });\n\n        $loc.ycor = new Sk.builtin.func(function(self) {\n            checkArgs(1,arguments.length,"ycor()");\n            var res = self.theTurtle.gety();\n            return Sk.builtin.assk$(res,Sk.builtin.nmber.float$);\n        });\n\n        $loc.towards = new Sk.builtin.func(function(self, tx, ty) {\n			tx = Sk.builtin.asnum$(tx);\n			ty = Sk.builtin.asnum$(ty);\n            if ((typeof(tx)).toLowerCase() === \'number\') {\n                tx = [tx, ty, 0];\n            } else {\n                tx = [Sk.builtin.asnum$(tx.theTurtle.getx()),Sk.builtin.asnum$(tx.theTurtle.gety()),Sk.builtin.asnum$(0)]\n            }\n            return Sk.builtin.assk$(self.theTurtle.towards(tx),Sk.builtin.nmber.float$);\n        });\n\n        // tx can be either a number or a vector position.\n        // tx can not be a turtle at this time as multiple turtles have not been implemented yet.\n        $loc.distance = new Sk.builtin.func(function(self, tx, ty) {\n			tx = Sk.builtin.asnum$(tx);\n			ty = Sk.builtin.asnum$(ty);\n            if ((typeof(tx)).toLowerCase() === \'number\') {\n                tx = [tx, ty, 0];\n            } else {\n                tx = [tx.theTurtle.getx(), tx.theTurtle.gety(), 0];\n            }\n            return Sk.builtin.assk$(self.theTurtle.distance(tx),Sk.builtin.nmber.float$);\n        });\n\n        //\n        // Setting and Measurement\n        //\n\n        // todo:  degrees and radians...\n\n//\n// Pen Control\n//\n\n        //\n        // Drawing State\n        //\n\n        $loc.up = new Sk.builtin.func(function(self) {\n            checkArgs(1,arguments.length,"up()");\n            self.theTurtle.pen_up();\n        });\n\n        $loc.penup = $loc.up;\n        $loc.pu = $loc.up;\n\n        $loc.down = new Sk.builtin.func(function(self) {\n            checkArgs(1,arguments.length,"down()");\n            self.theTurtle.pen_down();\n        });\n\n        $loc.pendown = $loc.down;\n        $loc.pd = $loc.down;\n\n        $loc.width = new Sk.builtin.func(function(self, w) {\n			w = Sk.builtin.asnum$(w);\n            checkArgs(2,arguments.length,"width()");\n            self.theTurtle.set_pen_width(w);\n        });\n\n        $loc.pensize = $loc.width;\n\n        $loc.isdown = new Sk.builtin.func(function(self) {\n            checkArgs(1,arguments.length,"isdown()");\n            return self.theTurtle.get_pen();\n        });\n\n        // todo:  pen  -- return a dictionary full of pen stuff\n\n        //\n        // Color Control\n        //\n\n        $loc.fillcolor = new Sk.builtin.func(function(self, color, green, blue) {\n            if (color) {\n                if (blue) {\n                    self.theTurtle.set_fill_color(color, green, blue);\n                } else {\n                    color = color.v || self.theTurtle.context.fillStyle;\n                    self.theTurtle.set_fill_color(color);\n                }\n            } else\n                return self.theTurtle.fillStyle;\n        });\n\n        $loc.pencolor = new Sk.builtin.func(function(self, color, green, blue) {\n            if (color) {\n                if (blue) {\n					color = Sk.builtin.asnum$(color);\n					green = Sk.builtin.asnum$(green);\n					blue = Sk.builtin.asnum$(blue);\n                    self.theTurtle.set_pen_color(color, green, blue);\n                } else {\n                    color = color.v || self.theTurtle.context.fillStyle;\n                    self.theTurtle.set_pen_color(color);\n                }\n            } else\n                return self.theTurtle.penStyle;\n        });\n\n        $loc.color = new Sk.builtin.func(function(self, color, green, blue) {\n            if(color) {\n                if (blue) {\n                    self.theTurtle.set_pen_color(color, green, blue);\n                    self.theTurtle.set_fill_color(color, green, blue);\n                } else {\n                    color = color.v || self.theTurtle.context.fillStyle;\n                    self.theTurtle.set_pen_color(color);\n                    self.theTurtle.set_fill_color(color);\n                }\n            } else \n                return [self.theTurtle.penStyle, self.theTurtle.fillStyle];            \n        });\n\n        //\n        //  Filling\n        //\n\n        $loc.begin_fill = new Sk.builtin.func(function(self) {\n            checkArgs(1,arguments.length,"begin_fill()");\n            self.theTurtle.begin_fill();\n        });\n\n        $loc.end_fill = new Sk.builtin.func(function(self) {\n            checkArgs(1,arguments.length,"end_fill()");\n            self.theTurtle.end_fill();\n        });\n\n        $loc.fill = new Sk.builtin.func(function(self, fillt) {\n			if (fillt === undefined)\n				return self.theTurtle.filling;\n            if (fillt)\n                self.theTurtle.begin_fill();\n            else\n                self.theTurtle.end_fill();\n        });\n\n        //\n        // More drawing control\n        //\n\n        $loc.reset = new Sk.builtin.func(function(self) {\n            self.theTurtle.clean();\n        });\n\n        $loc.showturtle = new Sk.builtin.func(function(self) {\n            checkArgs(1,arguments.length,"showturtle()");\n            self.theTurtle.showturtle();\n        });\n        $loc.st = $loc.showturtle;\n\n        $loc.hideturtle = new Sk.builtin.func(function(self) {\n            checkArgs(1,arguments.length,"hideturtle()");\n            self.theTurtle.hideturtle();\n        });\n        $loc.ht = $loc.hideturtle;\n\n        $loc.isvisible = new Sk.builtin.func(function(self) {\n            checkArgs(1,arguments.length,"isvisible()");\n            self.theTurtle.isvisible()\n        });\n\n        $loc.stamp = new Sk.builtin.func(function(self) {\n            checkArgs(1,arguments.length,"stamp()");\n            self.theTurtle.stamp();\n        });\n\n        $loc.shape = new Sk.builtin.func(function(self, s) {\n            checkArgs(2,arguments.length,"shape()");\n            self.theTurtle.shape(s.v);\n        });\n\n\n        // todo the move, align, and font parameters should be kwargs...\n        $loc.write = new Sk.builtin.func(function(self, mystr, move, align, font) {\n            self.theTurtle.write(mystr.v, move, align, font);\n        });\n\n        // todo clean  -- again multiple turtles\n\n        $loc.setworldcoordinates = new Sk.builtin.func(function(self, llx, lly, urx, ury) {\n			llx = Sk.builtin.asnum$(llx);\n			lly = Sk.builtin.asnum$(lly);\n			urx = Sk.builtin.asnum$(urx);\n			ury = Sk.builtin.asnum$(ury);\n            self.theTurtle.setworldcoordinates(llx, lly, urx, ury);\n        });\n\n		//	Added by RNL\n\n		$loc.clear = new Sk.builtin.func(function(self) {\n			self.theTurtle.clear()\n		});\n\n    }\n\n    mod.Turtle = Sk.misceval.buildClass(mod, turtle, \'Turtle\', []);\n\n    var screen = function($gbl, $loc) {\n        $loc.__init__ = new Sk.builtin.func(function(self) {\n            TurtleGraphics.defaults = {canvasID: Sk.canvas, animate: true, degrees: true};\n            var currentCanvas = TurtleGraphics.canvasLib[TurtleGraphics.defaults.canvasID];\n            if (currentCanvas === undefined) {\n                self.theScreen = new TurtleGraphics.TurtleCanvas(TurtleGraphics.defaults);\n            } else {\n                self.theScreen = currentCanvas;\n            }\n        });\n\n        $loc.bgcolor = new Sk.builtin.func(function(self, c) {\n            self.theScreen.bgcolor(c);\n        });\n\n        $loc.setworldcoordinates = new Sk.builtin.func(function(self, llx,lly,urx,ury) {\n			llx = Sk.builtin.asnum$(llx);\n			lly = Sk.builtin.asnum$(lly);\n			urx = Sk.builtin.asnum$(urx);\n			ury = Sk.builtin.asnum$(ury);\n            self.theScreen.setworldcoordinates(llx,lly,urx,ury);\n        });\n\n        $loc.exitonclick = new Sk.builtin.func(function(self) {\n            self.theScreen.exitonclick();\n        });\n\n        $loc.title = new Sk.builtin.func(function(self,titlestring) {\n            // no op....\n        });\n\n        $loc.window_width = new Sk.builtin.func(function(self) {\n                \n            return Sk.builtin.assk$(self.theScreen.window_width(), Sk.builtin.nmber.int$);\n        });\n\n        $loc.window_height = new Sk.builtin.func(function(self) {\n            return Sk.builtin.assk$(self.theScreen.window_height(), Sk.builtin.nmber.int$);\n        });\n\n        $loc.turtles = new Sk.builtin.func(function(self) {\n            return self.theScreen.turtles();\n        });\n\n		$loc.colormode = new Sk.builtin.func(function(self) {\n			//	Empty function to emulate compatibility\n		});\n        \n//        $loc.clear = new Sk.builtin.func(function(self) {\n//        	\n//        });\n\n        var myfunc = function(self, width, height, startx, starty) {\n			width = Sk.builtin.asnum$(width);\n			height = Sk.builtin.asnum$(height);\n            self.theScreen.setup(width,height);\n        }\n        // this should allow for named parameters\n        myfunc.co_varnames = [\'self\',\'width\',\'height\',\'startx\',\'starty\'];\n        myfunc.$defaults = [null,500,500,0,0];\n        $loc.setup = new Sk.builtin.func(myfunc);\n    }\n\n    mod.Screen = Sk.misceval.buildClass(mod, screen, \'Screen\', []);\n\n    mod.tracer = new Sk.builtin.func(function(t, d) {\n		t = Sk.builtin.asnum$(t);\n		d = Sk.builtin.asnum$(d);\n		for (var i in Sk.tg.canvasLib)\n			Sk.tg.canvasLib[i].tracer(t, d);\n    });\n\n	mod.update = new Sk.builtin.func(function(self) {\n		//	Dummy function to emulate update... when not animating, we don\'t save the drawing operations, so this is pointless for us\n	});\n\n\n    return mod\n}\n',"src/lib/webgl/math.js":"var $builtinmodule = function(name)\n{\n    var mod = {};\n\n    // todo; should probably put this in a math package\n    mod.Mat44 = Sk.misceval.buildClass(mod, function($gbl, $loc)\n            {\n                $loc.__init__ = new Sk.builtin.func(function(self)\n                    {\n                        Sk.misceval.callsim($loc.loadIdentity, self);\n                        self.stack = [];\n                    });\n\n                $loc.push = new Sk.builtin.func(function(self)\n                    {\n                        self.stack.push(self.elements.slice(0));\n                    });\n\n                $loc.pop = new Sk.builtin.func(function(self)\n                    {\n                        self.elements = self.stack.pop();\n                    });\n\n                $loc.loadIdentity = new Sk.builtin.func(function(self)\n                    {\n                        self.elements = [1.0, 0.0, 0.0, 0.0,\n                                         0.0, 1.0, 0.0, 0.0,\n                                         0.0, 0.0, 1.0, 0.0,\n                                         0.0, 0.0, 0.0, 1.0];\n                    });\n\n                $loc.transform3 = new Sk.builtin.func(function(self, v)\n                    {\n                        var e = self.elements;\n                        return Sk.misceval.callsim(mod.Vec3,\n                            e[0] * v.x + e[4] * v.y + e[8] * v.z,\n                            e[1] * v.x + e[5] * v.y + e[9] * v.z,\n                            e[2] * v.x + e[6] * v.y + e[10] * v.z);\n                    });\n\n                $loc.scale = new Sk.builtin.func(function(self, sx, sy, sz)\n                        {\n                            self.elements[0*4+0] *= sx;\n                            self.elements[0*4+1] *= sx;\n                            self.elements[0*4+2] *= sx;\n                            self.elements[0*4+3] *= sx;\n\n                            self.elements[1*4+0] *= sy;\n                            self.elements[1*4+1] *= sy;\n                            self.elements[1*4+2] *= sy;\n                            self.elements[1*4+3] *= sy;\n\n                            self.elements[2*4+0] *= sz;\n                            self.elements[2*4+1] *= sz;\n                            self.elements[2*4+2] *= sz;\n                            self.elements[2*4+3] *= sz;\n\n                            return self;\n                        });\n\n                $loc.translate = new Sk.builtin.func(function(self, tx, ty, tz)\n                        {\n                            self.elements[3*4+0] += self.elements[0*4+0] * tx + self.elements[1*4+0] * ty + self.elements[2*4+0] * tz;\n                            self.elements[3*4+1] += self.elements[0*4+1] * tx + self.elements[1*4+1] * ty + self.elements[2*4+1] * tz;\n                            self.elements[3*4+2] += self.elements[0*4+2] * tx + self.elements[1*4+2] * ty + self.elements[2*4+2] * tz;\n                            self.elements[3*4+3] += self.elements[0*4+3] * tx + self.elements[1*4+3] * ty + self.elements[2*4+3] * tz;\n                            return self;\n                        });\n\n                $loc.rotate = new Sk.builtin.func(function(self, angle, x, y, z)\n                        {\n                            var mag = Math.sqrt(x*x + y*y + z*z);\n                            var sinAngle = Math.sin(angle * Math.PI / 180.0);\n                            var cosAngle = Math.cos(angle * Math.PI / 180.0);\n\n                            if (mag > 0)\n                            {\n                                var xx, yy, zz, xy, yz, zx, xs, ys, zs;\n                                var oneMinusCos;\n                                var rotMat;\n\n                                x /= mag;\n                                y /= mag;\n                                z /= mag;\n\n                                xx = x * x;\n                                yy = y * y;\n                                zz = z * z;\n                                xy = x * y;\n                                yz = y * z;\n                                zx = z * x;\n                                xs = x * sinAngle;\n                                ys = y * sinAngle;\n                                zs = z * sinAngle;\n                                oneMinusCos = 1.0 - cosAngle;\n\n                                rotMat = Sk.misceval.callsim(mod.Mat44);\n\n                                rotMat.elements[0*4+0] = (oneMinusCos * xx) + cosAngle;\n                                rotMat.elements[0*4+1] = (oneMinusCos * xy) - zs;\n                                rotMat.elements[0*4+2] = (oneMinusCos * zx) + ys;\n                                rotMat.elements[0*4+3] = 0.0;\n\n                                rotMat.elements[1*4+0] = (oneMinusCos * xy) + zs;\n                                rotMat.elements[1*4+1] = (oneMinusCos * yy) + cosAngle;\n                                rotMat.elements[1*4+2] = (oneMinusCos * yz) - xs;\n                                rotMat.elements[1*4+3] = 0.0;\n\n                                rotMat.elements[2*4+0] = (oneMinusCos * zx) - ys;\n                                rotMat.elements[2*4+1] = (oneMinusCos * yz) + xs;\n                                rotMat.elements[2*4+2] = (oneMinusCos * zz) + cosAngle;\n                                rotMat.elements[2*4+3] = 0.0;\n\n                                rotMat.elements[3*4+0] = 0.0;\n                                rotMat.elements[3*4+1] = 0.0;\n                                rotMat.elements[3*4+2] = 0.0;\n                                rotMat.elements[3*4+3] = 1.0;\n\n                                rotMat = rotMat.multiply(self);\n                                self.elements = rotMat.elements;\n                            }\n                            return self;\n                        });\n\n                $loc.multiply = new Sk.builtin.func(function(self, right)\n                        {\n                            var tmp = Sk.misceval.callsim(mod.Mat44);\n\n                            for (var i = 0; i < 4; i++)\n                            {\n                                tmp.elements[i*4+0] =\n                                (self.elements[i*4+0] * right.elements[0*4+0]) +\n                                (self.elements[i*4+1] * right.elements[1*4+0]) +\n                                (self.elements[i*4+2] * right.elements[2*4+0]) +\n                                (self.elements[i*4+3] * right.elements[3*4+0]) ;\n\n                                tmp.elements[i*4+1] =\n                                (self.elements[i*4+0] * right.elements[0*4+1]) +\n                                (self.elements[i*4+1] * right.elements[1*4+1]) +\n                                (self.elements[i*4+2] * right.elements[2*4+1]) +\n                                (self.elements[i*4+3] * right.elements[3*4+1]) ;\n\n                                tmp.elements[i*4+2] =\n                                (self.elements[i*4+0] * right.elements[0*4+2]) +\n                                (self.elements[i*4+1] * right.elements[1*4+2]) +\n                                (self.elements[i*4+2] * right.elements[2*4+2]) +\n                                (self.elements[i*4+3] * right.elements[3*4+2]) ;\n\n                                tmp.elements[i*4+3] =\n                                (self.elements[i*4+0] * right.elements[0*4+3]) +\n                                (self.elements[i*4+1] * right.elements[1*4+3]) +\n                                (self.elements[i*4+2] * right.elements[2*4+3]) +\n                                (self.elements[i*4+3] * right.elements[3*4+3]) ;\n                            }\n\n                            self.elements = tmp.elements;\n                            return self;\n                        });\n\n                /* Following gluLookAt implementation is adapted from\n                 * the Mesa 3D Graphics library. http://www.mesa3d.org\n                 */\n                // todo; rewrite this with proper vec/mat ops\n                $loc.lookAt = new Sk.builtin.func(function(self, eyeX, eyeY, eyeZ,\n                                                                 centerX, centerY, centerZ,\n                                                                 upX, upY, upZ)\n                        {\n                            /* Z vector */\n                            var z = [\n                                eyeX - centerX,\n                                eyeY - centerY,\n                                eyeZ - centerZ\n                            ];\n                            var mag = Math.sqrt(z[0] * z[0] + z[1] * z[1] + z[2] * z[2]);\n                            if (mag)\n                            {\n                                z[0] /= mag;\n                                z[1] /= mag;\n                                z[2] /= mag;\n                            }\n\n                            /* Y vector */\n                            var y = [ upX, upY, upZ ];\n\n                            /* X vector = Y cross Z */\n                            var x = [];\n                            x[0] = y[1] * z[2] - y[2] * z[1];\n                            x[1] = -y[0] * z[2] + y[2] * z[0];\n                            x[2] = y[0] * z[1] - y[1] * z[0];\n\n                            /* Recompute Y = Z cross X */\n                            y[0] = z[1] * x[2] - z[2] * x[1];\n                            y[1] = -z[0] * x[2] + z[2] * x[0];\n                            y[2] = z[0] * x[1] - z[1] * x[0];\n\n                            /* mpichler, 19950515 */\n                            /* cross product gives area of parallelogram, which is < 1.0 for\n                            * non-perpendicular unit-length vectors; so normalize x, y here\n                            */\n\n                            mag = Math.sqrt(x[0] * x[0] + x[1] * x[1] + x[2] * x[2]);\n                            if (mag) {\n                                x[0] /= mag;\n                                x[1] /= mag;\n                                x[2] /= mag;\n                            }\n\n                            mag = Math.sqrt(y[0] * y[0] + y[1] * y[1] + y[2] * y[2]);\n                            if (mag) {\n                                y[0] /= mag;\n                                y[1] /= mag;\n                                y[2] /= mag;\n                            }\n\n                            var lookAt = Sk.misceval.callsim(mod.Mat44);\n                            lookAt.elements[0 * 4 + 0] = x[0];\n                            lookAt.elements[1 * 4 + 0] = x[1];\n                            lookAt.elements[2 * 4 + 0] = x[2];\n                            lookAt.elements[3 * 4 + 0] = 0.;\n                            lookAt.elements[0 * 4 + 1] = y[0];\n                            lookAt.elements[1 * 4 + 1] = y[1];\n                            lookAt.elements[2 * 4 + 1] = y[2];\n                            lookAt.elements[3 * 4 + 1] = 0.;\n                            lookAt.elements[0 * 4 + 2] = z[0];\n                            lookAt.elements[1 * 4 + 2] = z[1];\n                            lookAt.elements[2 * 4 + 2] = z[2];\n                            lookAt.elements[3 * 4 + 2] = 0.;\n                            lookAt.elements[0 * 4 + 3] = 0.;\n                            lookAt.elements[1 * 4 + 3] = 0.;\n                            lookAt.elements[2 * 4 + 3] = 0.;\n                            lookAt.elements[3 * 4 + 3] = 1.;\n\n                            // log(lookAt.elements);\n\n                            lookAt = lookAt.multiply(self);\n                            self.elements = lookAt.elements;\n                            self.translate(-eyeX, -eyeY, -eyeZ);\n\n                            // log(this.elements);\n\n                            return self;\n                        });\n            },\n            'Mat44', []);\n\n    // todo; should probably put this in a math package\n    mod.Mat33 = Sk.misceval.buildClass(mod, function($gbl, $loc)\n            {\n                $loc.__init__ = new Sk.builtin.func(function(self)\n                    {\n                        Sk.misceval.callsim($loc.loadIdentity, self);\n                    });\n\n                $loc.loadIdentity = new Sk.builtin.func(function(self)\n                    {\n                        self.elements = [1.0, 0.0, 0.0,\n                                         0.0, 1.0, 0.0,\n                                         0.0, 0.0, 1.0];\n                    });\n            },\n            'Mat33', []);\n\n    mod.Vec3 = Sk.misceval.buildClass(mod, function($gbl, $loc)\n            {\n                $loc.__init__ = new Sk.builtin.func(function(self, x, y, z)\n                    {\n                        self.x = x;\n                        self.y = y;\n                        self.z = z;\n                    });\n                $loc.__sub__ = new Sk.builtin.func(function(self, other)\n                    {\n                        return Sk.misceval.callsim(mod.Vec3, self.x - other.x, self.y - other.y, self.z - other.z);\n                    });\n            },\n            'Vec3', []);\n    \n    mod.cross = new Sk.builtin.func(function(v1, v2)\n            {\n                goog.asserts.assert(v1 instanceof mod.Vec3 && v2 instanceof mod.Vec3);\n                return Sk.misceval.callsim(mod.Vec3,\n                    v1.y * v2.z - v1.z * v2.y,\n                    v1.z * v2.x - v1.x * v2.z,\n                    v1.x * v2.y - v1.y * v2.x);\n            });\n\n    return mod;\n};\n","src/builtin/unittest.py":'#!/usr/bin/env python\n\'\'\'\nPython unit testing framework, based on Erich Gamma\'s JUnit and Kent Beck\'s\nSmalltalk testing framework.\n\nThis module contains the core framework classes that form the basis of\nspecific test cases and suites (TestCase, TestSuite etc.), and also a\ntext-based utility class for running the tests and reporting the results\n (TextTestRunner).\n\nSimple usage:\n\n    import unittest\n\n    class IntegerArithmenticTestCase(unittest.TestCase):\n        def testAdd(self):  ## test method names begin \'test*\'\n            self.assertEquals((1 + 2), 3)\n            self.assertEquals(0 + 1, 1)\n        def testMultiply(self):\n            self.assertEquals((0 * 10), 0)\n            self.assertEquals((5 * 8), 40)\n\n    if __name__ == \'__main__\':\n        unittest.main()\n\nFurther information is available in the bundled documentation, and from\n\n  http://docs.python.org/lib/module-unittest.html\n\nCopyright (c) 1999-2003 Steve Purcell\nThis module is free software, and you may redistribute it and/or modify\nit under the same terms as Python itself, so long as this copyright message\nand disclaimer are retained in their original form.\n\nIN NO EVENT SHALL THE AUTHOR BE LIABLE TO ANY PARTY FOR DIRECT, INDIRECT,\nSPECIAL, INCIDENTAL, OR CONSEQUENTIAL DAMAGES ARISING OUT OF THE USE OF\nTHIS CODE, EVEN IF THE AUTHOR HAS BEEN ADVISED OF THE POSSIBILITY OF SUCH\nDAMAGE.\n\nTHE AUTHOR SPECIFICALLY DISCLAIMS ANY WARRANTIES, INCLUDING, BUT NOT\nLIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A\nPARTICULAR PURPOSE.  THE CODE PROVIDED HEREUNDER IS ON AN "AS IS" BASIS,\nAND THERE IS NO OBLIGATION WHATSOEVER TO PROVIDE MAINTENANCE,\nSUPPORT, UPDATES, ENHANCEMENTS, OR MODIFICATIONS.\n\'\'\'\n\n__author__ = "Steve Purcell"\n__email__ = "stephen_purcell at yahoo dot com"\n__version__ = "#Revision: 1.63 $"[11:-2]\n\nimport time\nimport sys\nimport traceback\nimport os\nimport types\n\n##############################################################################\n# Exported classes and functions\n##############################################################################\n__all__ = [\'TestResult\', \'TestCase\', \'TestSuite\', \'TextTestRunner\',\n           \'TestLoader\', \'FunctionTestCase\', \'main\', \'defaultTestLoader\']\n\n# Expose obsolete functions for backwards compatibility\n__all__.extend([\'getTestCaseNames\', \'makeSuite\', \'findTestCases\'])\n\n\n##############################################################################\n# Backward compatibility\n##############################################################################\nif sys.version_info[:2] < (2, 2):\n    def isinstance(obj, clsinfo):\n        import __builtin__\n        if type(clsinfo) in (tuple, list):\n            for cls in clsinfo:\n                if cls is type: cls = types.ClassType\n                if __builtin__.isinstance(obj, cls):\n                    return 1\n            return 0\n        else: return __builtin__.isinstance(obj, clsinfo)\n\ndef _CmpToKey(mycmp):\n    \'Convert a cmp= function into a key= function\'\n    class K(object):\n        def __init__(self, obj):\n            self.obj = obj\n        def __lt__(self, other):\n            return mycmp(self.obj, other.obj) == -1\n    return K\n\n##############################################################################\n# Test framework core\n##############################################################################\n\n# All classes defined herein are \'new-style\' classes, allowing use of \'super()\'\n__metaclass__ = type\n\ndef _strclass(cls):\n    return "%s.%s" % (cls.__module__, cls.__name__)\n\n__unittest = 1\n\nclass TestResult:\n    """Holder for test result information.\n\n    Test results are automatically managed by the TestCase and TestSuite\n    classes, and do not need to be explicitly manipulated by writers of tests.\n\n    Each instance holds the total number of tests run, and collections of\n    failures and errors that occurred among those test runs. The collections\n    contain tuples of (testcase, exceptioninfo), where exceptioninfo is the\n    formatted traceback of the error that occurred.\n    """\n    def __init__(self):\n        self.failures = []\n        self.errors = []\n        self.testsRun = 0\n        self.shouldStop = False\n\n    def startTest(self, test):\n        "Called when the given test is about to be run"\n        self.testsRun = self.testsRun + 1\n\n    def stopTest(self, test):\n        "Called when the given test has been run"\n        pass\n\n    def addError(self, test, err):\n        """Called when an error has occurred. \'err\' is a tuple of values as\n        returned by sys.exc_info().\n        """\n        self.errors.append((test, self._exc_info_to_string(err, test)))\n\n    def addFailure(self, test, err):\n        """Called when an error has occurred. \'err\' is a tuple of values as\n        returned by sys.exc_info()."""\n        self.failures.append((test, self._exc_info_to_string(err, test)))\n\n    def addSuccess(self, test):\n        "Called when a test has completed successfully"\n        pass\n\n    def wasSuccessful(self):\n        "Tells whether or not this result was a success"\n        return len(self.failures) == len(self.errors) == 0\n\n    def stop(self):\n        "Indicates that the tests should be aborted"\n        self.shouldStop = True\n\n    def _exc_info_to_string(self, err, test):\n        """Converts a sys.exc_info()-style tuple of values into a string."""\n        exctype, value, tb = err\n        # Skip test runner traceback levels\n        while tb and self._is_relevant_tb_level(tb):\n            tb = tb.tb_next\n        if exctype is test.failureException:\n            # Skip assert*() traceback levels\n            length = self._count_relevant_tb_levels(tb)\n            return \'\'.join(traceback.format_exception(exctype, value, tb, length))\n        return \'\'.join(traceback.format_exception(exctype, value, tb))\n\n    def _is_relevant_tb_level(self, tb):\n        return \'__unittest\' in tb.tb_frame.f_globals\n\n    def _count_relevant_tb_levels(self, tb):\n        length = 0\n        while tb and not self._is_relevant_tb_level(tb):\n            length += 1\n            tb = tb.tb_next\n        return length\n\n    def __repr__(self):\n        return "<%s run=%i errors=%i failures=%i>" % \\\n               (_strclass(self.__class__), self.testsRun, len(self.errors),\n                len(self.failures))\n\nclass TestCase:\n    """A class whose instances are single test cases.\n\n    By default, the test code itself should be placed in a method named\n    \'runTest\'.\n\n    If the fixture may be used for many test cases, create as\n    many test methods as are needed. When instantiating such a TestCase\n    subclass, specify in the constructor arguments the name of the test method\n    that the instance is to execute.\n\n    Test authors should subclass TestCase for their own tests. Construction\n    and deconstruction of the test\'s environment (\'fixture\') can be\n    implemented by overriding the \'setUp\' and \'tearDown\' methods respectively.\n\n    If it is necessary to override the __init__ method, the base class\n    __init__ method must always be called. It is important that subclasses\n    should not change the signature of their __init__ method, since instances\n    of the classes are instantiated automatically by parts of the framework\n    in order to be run.\n    """\n\n    # This attribute determines which exception will be raised when\n    # the instance\'s assertion methods fail; test methods raising this\n    # exception will be deemed to have \'failed\' rather than \'errored\'\n\n    failureException = AssertionError\n\n    def __init__(self, methodName=\'runTest\'):\n        """Create an instance of the class that will use the named test\n           method when executed. Raises a ValueError if the instance does\n           not have a method with the specified name.\n        """\n        try:\n            self._testMethodName = methodName\n            testMethod = getattr(self, methodName)\n            self._testMethodDoc = testMethod.__doc__\n        except AttributeError:\n            raise ValueError, "no such test method in %s: %s" % \\\n                  (self.__class__, methodName)\n\n    def setUp(self):\n        "Hook method for setting up the test fixture before exercising it."\n        pass\n\n    def tearDown(self):\n        "Hook method for deconstructing the test fixture after testing it."\n        pass\n\n    def countTestCases(self):\n        return 1\n\n    def defaultTestResult(self):\n        return TestResult()\n\n    def shortDescription(self):\n        """Returns a one-line description of the test, or None if no\n        description has been provided.\n\n        The default implementation of this method returns the first line of\n        the specified test method\'s docstring.\n        """\n        doc = self._testMethodDoc\n        return doc and doc.split("\\n")[0].strip() or None\n\n    def id(self):\n        return "%s.%s" % (_strclass(self.__class__), self._testMethodName)\n\n    def __eq__(self, other):\n        if type(self) is not type(other):\n            return False\n\n        return self._testMethodName == other._testMethodName\n\n    def __ne__(self, other):\n        return not self == other\n\n    def __hash__(self):\n        return hash((type(self), self._testMethodName))\n\n    def __str__(self):\n        return "%s (%s)" % (self._testMethodName, _strclass(self.__class__))\n\n    def __repr__(self):\n        return "<%s testMethod=%s>" % \\\n               (_strclass(self.__class__), self._testMethodName)\n\n    def run(self, result=None):\n        if result is None: result = self.defaultTestResult()\n        result.startTest(self)\n        testMethod = getattr(self, self._testMethodName)\n        try:\n            try:\n                self.setUp()\n            except KeyboardInterrupt:\n                raise\n            except:\n                result.addError(self, self._exc_info())\n                return\n\n            ok = False\n            try:\n                testMethod()\n                ok = True\n            except self.failureException:\n                result.addFailure(self, self._exc_info())\n            except KeyboardInterrupt:\n                raise\n            except:\n                result.addError(self, self._exc_info())\n\n            try:\n                self.tearDown()\n            except KeyboardInterrupt:\n                raise\n            except:\n                result.addError(self, self._exc_info())\n                ok = False\n            if ok: result.addSuccess(self)\n        finally:\n            result.stopTest(self)\n\n    def __call__(self, *args, **kwds):\n        return self.run(*args, **kwds)\n\n    def debug(self):\n        """Run the test without collecting errors in a TestResult"""\n        self.setUp()\n        getattr(self, self._testMethodName)()\n        self.tearDown()\n\n    def _exc_info(self):\n        """Return a version of sys.exc_info() with the traceback frame\n           minimised; usually the top level of the traceback frame is not\n           needed.\n        """\n        return sys.exc_info()\n\n    def fail(self, msg=None):\n        """Fail immediately, with the given message."""\n        raise self.failureException, msg\n\n    def failIf(self, expr, msg=None):\n        "Fail the test if the expression is true."\n        if expr: raise self.failureException, msg\n\n    def failUnless(self, expr, msg=None):\n        """Fail the test unless the expression is true."""\n        if not expr: raise self.failureException, msg\n\n    def failUnlessRaises(self, excClass, callableObj, *args, **kwargs):\n        """Fail unless an exception of class excClass is thrown\n           by callableObj when invoked with arguments args and keyword\n           arguments kwargs. If a different type of exception is\n           thrown, it will not be caught, and the test case will be\n           deemed to have suffered an error, exactly as for an\n           unexpected exception.\n        """\n        try:\n            callableObj(*args, **kwargs)\n        except excClass:\n            return\n        else:\n            if hasattr(excClass,\'__name__\'): excName = excClass.__name__\n            else: excName = str(excClass)\n            raise self.failureException, "%s not raised" % excName\n\n    def failUnlessEqual(self, first, second, msg=None):\n        """Fail if the two objects are unequal as determined by the \'==\'\n           operator.\n        """\n        if not first == second:\n            raise self.failureException, \\\n                  (msg or \'%r != %r\' % (first, second))\n\n    def failIfEqual(self, first, second, msg=None):\n        """Fail if the two objects are equal as determined by the \'==\'\n           operator.\n        """\n        if first == second:\n            raise self.failureException, \\\n                  (msg or \'%r == %r\' % (first, second))\n\n    def failUnlessAlmostEqual(self, first, second, places=7, msg=None):\n        """Fail if the two objects are unequal as determined by their\n           difference rounded to the given number of decimal places\n           (default 7) and comparing to zero.\n\n           Note that decimal places (from zero) are usually not the same\n           as significant digits (measured from the most signficant digit).\n        """\n        if round(abs(second-first), places) != 0:\n            raise self.failureException, \\\n                  (msg or \'%r != %r within %r places\' % (first, second, places))\n\n    def failIfAlmostEqual(self, first, second, places=7, msg=None):\n        """Fail if the two objects are equal as determined by their\n           difference rounded to the given number of decimal places\n           (default 7) and comparing to zero.\n\n           Note that decimal places (from zero) are usually not the same\n           as significant digits (measured from the most signficant digit).\n        """\n        if round(abs(second-first), places) == 0:\n            raise self.failureException, \\\n                  (msg or \'%r == %r within %r places\' % (first, second, places))\n\n    # Synonyms for assertion methods\n\n    assertEqual = assertEquals = failUnlessEqual\n\n    assertNotEqual = assertNotEquals = failIfEqual\n\n    assertAlmostEqual = assertAlmostEquals = failUnlessAlmostEqual\n\n    assertNotAlmostEqual = assertNotAlmostEquals = failIfAlmostEqual\n\n    assertRaises = failUnlessRaises\n\n    assert_ = assertTrue = failUnless\n\n    assertFalse = failIf\n\n\n\nclass TestSuite:\n    """A test suite is a composite test consisting of a number of TestCases.\n\n    For use, create an instance of TestSuite, then add test case instances.\n    When all tests have been added, the suite can be passed to a test\n    runner, such as TextTestRunner. It will run the individual test cases\n    in the order in which they were added, aggregating the results. When\n    subclassing, do not forget to call the base class constructor.\n    """\n    def __init__(self, tests=()):\n        self._tests = []\n        self.addTests(tests)\n\n    def __repr__(self):\n        return "<%s tests=%s>" % (_strclass(self.__class__), self._tests)\n\n    __str__ = __repr__\n\n    def __eq__(self, other):\n        if type(self) is not type(other):\n            return False\n        return self._tests == other._tests\n\n    def __ne__(self, other):\n        return not self == other\n\n    # Can\'t guarantee hash invariant, so flag as unhashable\n    __hash__ = None\n\n    def __iter__(self):\n        return iter(self._tests)\n\n    def countTestCases(self):\n        cases = 0\n        for test in self._tests:\n            cases += test.countTestCases()\n        return cases\n\n    def addTest(self, test):\n        # sanity checks\n        if not hasattr(test, \'__call__\'):\n            raise TypeError("the test to add must be callable")\n        if (isinstance(test, (type, types.ClassType)) and\n            issubclass(test, (TestCase, TestSuite))):\n            raise TypeError("TestCases and TestSuites must be instantiated "\n                            "before passing them to addTest()")\n        self._tests.append(test)\n\n    def addTests(self, tests):\n        if isinstance(tests, basestring):\n            raise TypeError("tests must be an iterable of tests, not a string")\n        for test in tests:\n            self.addTest(test)\n\n    def run(self, result):\n        for test in self._tests:\n            if result.shouldStop:\n                break\n            test(result)\n        return result\n\n    def __call__(self, *args, **kwds):\n        return self.run(*args, **kwds)\n\n    def debug(self):\n        """Run the tests without collecting errors in a TestResult"""\n        for test in self._tests: test.debug()\n\n\nclass FunctionTestCase(TestCase):\n    """A test case that wraps a test function.\n\n    This is useful for slipping pre-existing test functions into the\n    unittest framework. Optionally, set-up and tidy-up functions can be\n    supplied. As with TestCase, the tidy-up (\'tearDown\') function will\n    always be called if the set-up (\'setUp\') function ran successfully.\n    """\n\n    def __init__(self, testFunc, setUp=None, tearDown=None,\n                 description=None):\n        TestCase.__init__(self)\n        self.__setUpFunc = setUp\n        self.__tearDownFunc = tearDown\n        self.__testFunc = testFunc\n        self.__description = description\n\n    def setUp(self):\n        if self.__setUpFunc is not None:\n            self.__setUpFunc()\n\n    def tearDown(self):\n        if self.__tearDownFunc is not None:\n            self.__tearDownFunc()\n\n    def runTest(self):\n        self.__testFunc()\n\n    def id(self):\n        return self.__testFunc.__name__\n\n    def __eq__(self, other):\n        if type(self) is not type(other):\n            return False\n\n        return self.__setUpFunc == other.__setUpFunc and \\\n               self.__tearDownFunc == other.__tearDownFunc and \\\n               self.__testFunc == other.__testFunc and \\\n               self.__description == other.__description\n\n    def __ne__(self, other):\n        return not self == other\n\n    def __hash__(self):\n        return hash((type(self), self.__setUpFunc, self.__tearDownFunc,\n                                           self.__testFunc, self.__description))\n\n    def __str__(self):\n        return "%s (%s)" % (_strclass(self.__class__), self.__testFunc.__name__)\n\n    def __repr__(self):\n        return "<%s testFunc=%s>" % (_strclass(self.__class__), self.__testFunc)\n\n    def shortDescription(self):\n        if self.__description is not None: return self.__description\n        doc = self.__testFunc.__doc__\n        return doc and doc.split("\\n")[0].strip() or None\n\n\n\n##############################################################################\n# Locating and loading tests\n##############################################################################\n\nclass TestLoader:\n    """This class is responsible for loading tests according to various\n    criteria and returning them wrapped in a TestSuite\n    """\n    testMethodPrefix = \'test\'\n    sortTestMethodsUsing = cmp\n    suiteClass = TestSuite\n\n    def loadTestsFromTestCase(self, testCaseClass):\n        """Return a suite of all tests cases contained in testCaseClass"""\n        if issubclass(testCaseClass, TestSuite):\n            raise TypeError("Test cases should not be derived from TestSuite. Maybe you meant to derive from TestCase?")\n        testCaseNames = self.getTestCaseNames(testCaseClass)\n        if not testCaseNames and hasattr(testCaseClass, \'runTest\'):\n            testCaseNames = [\'runTest\']\n        return self.suiteClass(map(testCaseClass, testCaseNames))\n\n    def loadTestsFromModule(self, module):\n        """Return a suite of all tests cases contained in the given module"""\n        tests = []\n        for name in dir(module):\n            obj = getattr(module, name)\n            if (isinstance(obj, (type, types.ClassType)) and\n                issubclass(obj, TestCase)):\n                tests.append(self.loadTestsFromTestCase(obj))\n        return self.suiteClass(tests)\n\n    def loadTestsFromName(self, name, module=None):\n        """Return a suite of all tests cases given a string specifier.\n\n        The name may resolve either to a module, a test case class, a\n        test method within a test case class, or a callable object which\n        returns a TestCase or TestSuite instance.\n\n        The method optionally resolves the names relative to a given module.\n        """\n        parts = name.split(\'.\')\n        if module is None:\n            parts_copy = parts[:]\n            while parts_copy:\n                try:\n                    module = __import__(\'.\'.join(parts_copy))\n                    break\n                except ImportError:\n                    del parts_copy[-1]\n                    if not parts_copy: raise\n            parts = parts[1:]\n        obj = module\n        for part in parts:\n            parent, obj = obj, getattr(obj, part)\n\n        if type(obj) == types.ModuleType:\n            return self.loadTestsFromModule(obj)\n        elif (isinstance(obj, (type, types.ClassType)) and\n              issubclass(obj, TestCase)):\n            return self.loadTestsFromTestCase(obj)\n        elif (type(obj) == types.UnboundMethodType and\n              isinstance(parent, (type, types.ClassType)) and\n              issubclass(parent, TestCase)):\n            return TestSuite([parent(obj.__name__)])\n        elif isinstance(obj, TestSuite):\n            return obj\n        elif hasattr(obj, \'__call__\'):\n            test = obj()\n            if isinstance(test, TestSuite):\n                return test\n            elif isinstance(test, TestCase):\n                return TestSuite([test])\n            else:\n                raise TypeError("calling %s returned %s, not a test" %\n                                (obj, test))\n        else:\n            raise TypeError("don\'t know how to make test from: %s" % obj)\n\n    def loadTestsFromNames(self, names, module=None):\n        """Return a suite of all tests cases found using the given sequence\n        of string specifiers. See \'loadTestsFromName()\'.\n        """\n        suites = [self.loadTestsFromName(name, module) for name in names]\n        return self.suiteClass(suites)\n\n    def getTestCaseNames(self, testCaseClass):\n        """Return a sorted sequence of method names found within testCaseClass\n        """\n        def isTestMethod(attrname, testCaseClass=testCaseClass, prefix=self.testMethodPrefix):\n            return attrname.startswith(prefix) and hasattr(getattr(testCaseClass, attrname), \'__call__\')\n        testFnNames = filter(isTestMethod, dir(testCaseClass))\n        if self.sortTestMethodsUsing:\n            testFnNames.sort(key=_CmpToKey(self.sortTestMethodsUsing))\n        return testFnNames\n\n\n\ndefaultTestLoader = TestLoader()\n\n\n##############################################################################\n# Patches for old functions: these functions should be considered obsolete\n##############################################################################\n\ndef _makeLoader(prefix, sortUsing, suiteClass=None):\n    loader = TestLoader()\n    loader.sortTestMethodsUsing = sortUsing\n    loader.testMethodPrefix = prefix\n    if suiteClass: loader.suiteClass = suiteClass\n    return loader\n\ndef getTestCaseNames(testCaseClass, prefix, sortUsing=cmp):\n    return _makeLoader(prefix, sortUsing).getTestCaseNames(testCaseClass)\n\ndef makeSuite(testCaseClass, prefix=\'test\', sortUsing=cmp, suiteClass=TestSuite):\n    return _makeLoader(prefix, sortUsing, suiteClass).loadTestsFromTestCase(testCaseClass)\n\ndef findTestCases(module, prefix=\'test\', sortUsing=cmp, suiteClass=TestSuite):\n    return _makeLoader(prefix, sortUsing, suiteClass).loadTestsFromModule(module)\n\n\n##############################################################################\n# Text UI\n##############################################################################\n\nclass _WritelnDecorator:\n    """Used to decorate file-like objects with a handy \'writeln\' method"""\n    def __init__(self,stream):\n        self.stream = stream\n\n    def __getattr__(self, attr):\n        return getattr(self.stream,attr)\n\n    def writeln(self, arg=None):\n        if arg: self.write(arg)\n        self.write(\'\\n\') # text-mode streams translate to \\r\\n if needed\n\n\nclass _TextTestResult(TestResult):\n    """A test result class that can print formatted text results to a stream.\n\n    Used by TextTestRunner.\n    """\n    separator1 = \'=\' * 70\n    separator2 = \'-\' * 70\n\n    def __init__(self, stream, descriptions, verbosity):\n        TestResult.__init__(self)\n        self.stream = stream\n        self.showAll = verbosity > 1\n        self.dots = verbosity == 1\n        self.descriptions = descriptions\n\n    def getDescription(self, test):\n        if self.descriptions:\n            return test.shortDescription() or str(test)\n        else:\n            return str(test)\n\n    def startTest(self, test):\n        TestResult.startTest(self, test)\n        if self.showAll:\n            self.stream.write(self.getDescription(test))\n            self.stream.write(" ... ")\n            self.stream.flush()\n\n    def addSuccess(self, test):\n        TestResult.addSuccess(self, test)\n        if self.showAll:\n            self.stream.writeln("ok")\n        elif self.dots:\n            self.stream.write(\'.\')\n            self.stream.flush()\n\n    def addError(self, test, err):\n        TestResult.addError(self, test, err)\n        if self.showAll:\n            self.stream.writeln("ERROR")\n        elif self.dots:\n            self.stream.write(\'E\')\n            self.stream.flush()\n\n    def addFailure(self, test, err):\n        TestResult.addFailure(self, test, err)\n        if self.showAll:\n            self.stream.writeln("FAIL")\n        elif self.dots:\n            self.stream.write(\'F\')\n            self.stream.flush()\n\n    def printErrors(self):\n        if self.dots or self.showAll:\n            self.stream.writeln()\n        self.printErrorList(\'ERROR\', self.errors)\n        self.printErrorList(\'FAIL\', self.failures)\n\n    def printErrorList(self, flavour, errors):\n        for test, err in errors:\n            self.stream.writeln(self.separator1)\n            self.stream.writeln("%s: %s" % (flavour,self.getDescription(test)))\n            self.stream.writeln(self.separator2)\n            self.stream.writeln("%s" % err)\n\n\nclass TextTestRunner:\n    """A test runner class that displays results in textual form.\n\n    It prints out the names of tests as they are run, errors as they\n    occur, and a summary of the results at the end of the test run.\n    """\n    def __init__(self, stream=sys.stderr, descriptions=1, verbosity=1):\n        self.stream = _WritelnDecorator(stream)\n        self.descriptions = descriptions\n        self.verbosity = verbosity\n\n    def _makeResult(self):\n        return _TextTestResult(self.stream, self.descriptions, self.verbosity)\n\n    def run(self, test):\n        "Run the given test case or test suite."\n        result = self._makeResult()\n        startTime = time.time()\n        test(result)\n        stopTime = time.time()\n        timeTaken = stopTime - startTime\n        result.printErrors()\n        self.stream.writeln(result.separator2)\n        run = result.testsRun\n        self.stream.writeln("Ran %d test%s in %.3fs" %\n                            (run, run != 1 and "s" or "", timeTaken))\n        self.stream.writeln()\n        if not result.wasSuccessful():\n            self.stream.write("FAILED (")\n            failed, errored = map(len, (result.failures, result.errors))\n            if failed:\n                self.stream.write("failures=%d" % failed)\n            if errored:\n                if failed: self.stream.write(", ")\n                self.stream.write("errors=%d" % errored)\n            self.stream.writeln(")")\n        else:\n            self.stream.writeln("OK")\n        return result\n\n\n\n##############################################################################\n# Facilities for running tests from the command line\n##############################################################################\n\nclass TestProgram:\n    """A command-line program that runs a set of tests; this is primarily\n       for making test modules conveniently executable.\n    """\n    USAGE = """\\\nUsage: %(progName)s [options] [test] [...]\n\nOptions:\n  -h, --help       Show this message\n  -v, --verbose    Verbose output\n  -q, --quiet      Minimal output\n\nExamples:\n  %(progName)s                               - run default set of tests\n  %(progName)s MyTestSuite                   - run suite \'MyTestSuite\'\n  %(progName)s MyTestCase.testSomething      - run MyTestCase.testSomething\n  %(progName)s MyTestCase                    - run all \'test*\' test methods\n                                               in MyTestCase\n"""\n    def __init__(self, module=\'__main__\', defaultTest=None,\n                 argv=None, testRunner=None,\n                 testLoader=defaultTestLoader):\n        if type(module) == type(\'\'):\n            self.module = __import__(module)\n            for part in module.split(\'.\')[1:]:\n                self.module = getattr(self.module, part)\n        else:\n            self.module = module\n        if argv is None:\n            argv = sys.argv\n        self.verbosity = 1\n        self.defaultTest = defaultTest\n        self.testRunner = testRunner\n        self.testLoader = testLoader\n        self.progName = os.path.basename(argv[0])\n        self.parseArgs(argv)\n        self.runTests()\n\n    def usageExit(self, msg=None):\n        if msg: print msg\n        print self.USAGE % self.__dict__\n        sys.exit(2)\n\n    def parseArgs(self, argv):\n        import getopt\n        try:\n            options, args = getopt.getopt(argv[1:], \'hHvq\',\n                                          [\'help\',\'verbose\',\'quiet\'])\n            for opt, value in options:\n                if opt in (\'-h\',\'-H\',\'--help\'):\n                    self.usageExit()\n                if opt in (\'-q\',\'--quiet\'):\n                    self.verbosity = 0\n                if opt in (\'-v\',\'--verbose\'):\n                    self.verbosity = 2\n            if len(args) == 0 and self.defaultTest is None:\n                self.test = self.testLoader.loadTestsFromModule(self.module)\n                return\n            if len(args) > 0:\n                self.testNames = args\n            else:\n                self.testNames = (self.defaultTest,)\n            self.createTests()\n        except getopt.error, msg:\n            self.usageExit(msg)\n\n    def createTests(self):\n        self.test = self.testLoader.loadTestsFromNames(self.testNames,\n                                                       self.module)\n\n    def runTests(self):\n        if self.testRunner is None:\n            self.testRunner = TextTestRunner\n\n        if isinstance(self.testRunner, (type, types.ClassType)):\n            try:\n                testRunner = self.testRunner(verbosity=self.verbosity)\n            except TypeError:\n                # didn\'t accept the verbosity argument\n                testRunner = self.testRunner()\n        else:\n            # it is assumed to be a TestRunner instance\n            testRunner = self.testRunner\n        result = testRunner.run(self.test)\n        sys.exit(not result.wasSuccessful())\n\nmain = TestProgram\n\n\n##############################################################################\n# Executing this module from the command line\n##############################################################################\n\nif __name__ == "__main__":\n    main(module=None)\n',"src/lib/pythonds/graphs/__init__.py":"\n\nfrom .adjGraph import Graph\nfrom .adjGraph import Vertex\nfrom .priorityQueue import PriorityQueue\n","src/lib/pythonds/graphs/priorityQueue.py":"# Bradley N. Miller, David L. Ranum\n# Introduction to Data Structures and Algorithms in Python\n# Copyright 2005\n# \nimport unittest\n\n# this implementation of binary heap takes key value pairs,\n# we will assume that the keys are all comparable\n\nclass PriorityQueue:\n    def __init__(self):\n        self.heapArray = [(0,0)]\n        self.currentSize = 0\n\n    def buildHeap(self,alist):\n        self.currentSize = len(alist)\n        self.heapArray = [(0,0)]\n        for i in alist:\n            self.heapArray.append(i)\n        i = len(alist) // 2            \n        while (i > 0):\n            self.percDown(i)\n            i = i - 1\n                        \n    def percDown(self,i):\n        while (i * 2) <= self.currentSize:\n            mc = self.minChild(i)\n            if self.heapArray[i][0] > self.heapArray[mc][0]:\n                tmp = self.heapArray[i]\n                self.heapArray[i] = self.heapArray[mc]\n                self.heapArray[mc] = tmp\n            i = mc\n                \n    def minChild(self,i):\n        if i*2 > self.currentSize:\n            return -1\n        else:\n            if i*2 + 1 > self.currentSize:\n                return i*2\n            else:\n                if self.heapArray[i*2][0] < self.heapArray[i*2+1][0]:\n                    return i*2\n                else:\n                    return i*2+1\n\n    def percUp(self,i):\n        while i // 2 > 0:\n            if self.heapArray[i][0] < self.heapArray[i//2][0]:\n               tmp = self.heapArray[i//2]\n               self.heapArray[i//2] = self.heapArray[i]\n               self.heapArray[i] = tmp\n            i = i//2\n \n    def add(self,k):\n        self.heapArray.append(k)\n        self.currentSize = self.currentSize + 1\n        self.percUp(self.currentSize)\n\n    def delMin(self):\n        retval = self.heapArray[1][1]\n        self.heapArray[1] = self.heapArray[self.currentSize]\n        self.currentSize = self.currentSize - 1\n        self.heapArray.pop()\n        self.percDown(1)\n        return retval\n        \n    def isEmpty(self):\n        if self.currentSize == 0:\n            return True\n        else:\n            return False\n\n    def decreaseKey(self,val,amt):\n        # this is a little wierd, but we need to find the heap thing to decrease by\n        # looking at its value\n        done = False\n        i = 1\n        myKey = 0\n        while not done and i <= self.currentSize:\n            if self.heapArray[i][1] == val:\n                done = True\n                myKey = i\n            else:\n                i = i + 1\n        if myKey > 0:\n            self.heapArray[myKey] = (amt,self.heapArray[myKey][1])\n            self.percUp(myKey)\n            \n    def __contains__(self,vtx):\n        for pair in self.heapArray:\n            if pair[1] == vtx:\n                return True\n        return False\n        \nclass TestBinHeap(unittest.TestCase):\n    def setUp(self):\n        self.theHeap = PriorityQueue()\n        self.theHeap.add((2,'x'))\n        self.theHeap.add((3,'y'))\n        self.theHeap.add((5,'z'))\n        self.theHeap.add((6,'a'))\n        self.theHeap.add((4,'d'))\n\n\n    def testInsert(self):\n        assert self.theHeap.currentSize == 5\n\n    def testDelmin(self):\n        assert self.theHeap.delMin() == 'x'\n        assert self.theHeap.delMin() == 'y'\n    \n    def testDecKey(self):\n        self.theHeap.decreaseKey('d',1)\n        assert self.theHeap.delMin() == 'd'\n        \nif __name__ == '__main__':\n    unittest.main()\n","src/lib/pythonds/__init__.py":"","src/lib/pythonds/basic/deque.py":"# Bradley N. Miller, David L. Ranum\n# Introduction to Data Structures and Algorithms in Python\n# Copyright 2005\n# \n#deque.py\r\n\r\n\r\nclass Deque:\r\n    def __init__(self):\r\n        self.items = []\r\n\r\n    def isEmpty(self):\r\n        return self.items == []\r\n\r\n    def addFront(self, item):\r\n        self.items.append(item)\r\n\r\n    def addRear(self, item):\r\n        self.items.insert(0,item)\r\n\r\n    def removeFront(self):\r\n        return self.items.pop()\r\n\r\n    def removeRear(self):\r\n        return self.items.pop(0)\r\n\r\n    def size(self):\r\n        return len(self.items)\r\n","src/lib/processing/__init__.js":"var $builtinmodule = function(name)\n{\n    var mod = {};\n    var imList = [];\n    var looping = true;\n\n    // We need this to store a reference to the actual processing object which is not created\n    // until the run function is called.  Even then the processing object is passed by the\n    // processing-js sytem as a parameter to the sketchProc function.  Why not set it to None here\n    //\n\n    // See:  http://processingjs.org/reference/\n\n    mod.processing = null\n    mod.p = null\n\n    mod.CENTER = Sk.builtin.assk$(3, Sk.builtin.nmber.int$);\n    mod.RADIUS = Sk.builtin.assk$(2, Sk.builtin.nmber.int$);\n    mod.CORNERS = Sk.builtin.assk$(1, Sk.builtin.nmber.int$);\n    mod.CORNER = Sk.builtin.assk$(0, Sk.builtin.nmber.int$);\n    mod.RGB = Sk.builtin.assk$(1, Sk.builtin.nmber.int$);\n    mod.HSB = Sk.builtin.assk$(3, Sk.builtin.nmber.int$);\n    mod.CMYK = Sk.builtin.assk$(5, Sk.builtin.nmber.int$);\n    mod.MITER = new Sk.builtin.str('miter');\n    mod.BEVEL = new Sk.builtin.str('bevel');\n    mod.ROUND = new Sk.builtin.str('round');\n    mod.SQUARE = new Sk.builtin.str('butt');\n    mod.PROJECT = new Sk.builtin.str('square');\n\n// 2D - Primitives\n    mod.line = new Sk.builtin.func(function(x1, y1, x2, y2) {\n        mod.processing.line(x1.v, y1.v, x2.v, y2.v);\n    });\n    \n    mod.ellipse = new Sk.builtin.func(function(x,y,r1,r2) {\n        mod.processing.ellipse(x.v,y.v,r1.v,r2.v)\n        \n    });\n\n    mod.point = new Sk.builtin.func(function(x1,y1) {\n        mod.processing.point(x1.v,y1.v)\n    });\n        \n    mod.arc = new Sk.builtin.func(function(x, y, width, height, start, stop) {\n        mod.processing.arc(x.v, y.v, width.v, height.v, start.v, stop.v)\n    });\n\n    mod.quad = new Sk.builtin.func(function(x1, y1, x2, y2, x3, y3, x4, y4) {\n        mod.processing.quad(x1.v, y1.v, x2.v, y2.v, x3.v, y3.v, x4.v, y4.v)\n    });\n            \n    mod.rect = new Sk.builtin.func(function(x, y, width, height, radius) {\n        if (typeof(radius) == 'undefined') {\n            var rad = 0\n        } else {\n            var rad = radius.v\n        }\n        mod.processing.rect(x.v, y.v, width.v, height.v, rad)\n    });\n    \n    mod.triangle = new Sk.builtin.func(function(x1, y1, x2, y2, x3, y3) {\n            mod.processing.triangle(x1.v, y1.v, x2.v, y2.v, x3.v, y3.v)\n        });\n            \n\n    // 3D Primitives\n\n    // todo:  box, sphere, sphereDetail\n\n    // Color\n    mod.background = new Sk.builtin.func(function(r,g,b) {\n\n        if (typeof(g) !== 'undefined')\n            g = g.v\n        if (typeof(b) !== 'undefined')\n            b = b.v\n\n        mod.processing.background(r.v,g,b)\n        \n    });\n\n    mod.fill = new Sk.builtin.func(function(r,g,b) {\n        // r will be either:\n        //      a number in which case the fill will be grayscale\n        //      a color object\n        // g, and b may be undefined.  If they hold values it will\n        // be assumed that we have an r,g,b color tuple\n        if (typeof(g) !== 'undefined')\n            g = g.v\n        if (typeof(b) !== 'undefined')\n            b = b.v\n    \n        mod.processing.fill(r.v,g,b)\n        \n    });\n\n\n    mod.stroke = new Sk.builtin.func(function(r,g,b) {\n\n        if (typeof(g) !== 'undefined')\n            g = g.v\n        if (typeof(b) !== 'undefined')\n            b = b.v\n\n        mod.processing.stroke(r.v,g,b)\n        \n    });\n\n    mod.noStroke = new Sk.builtin.func(function() {\n        mod.processing.noStroke()\n    });\n    \n\n    mod.colorMode = new Sk.builtin.func(function(model, maxV) {\n        if (typeof(maxV) === 'undefined')\n            maxV = 255\n        else\n            maxV = maxV.v\n        mod.processing.colorMode(model.v, maxV)\n    });\n\n    mod.noFill = new Sk.builtin.func(function() {\n            mod.processing.noFill()\n        });\n            \n\n    // Environment\n\n    mod.loop = new Sk.builtin.func(function() {\n            if (mod.processing === null) {\n                throw new Sk.builtin.Exception(\"Loop should be called in setup\")\n            }\n            looping = true;\n            mod.processing.loop()\n        });\n            \n    mod.noLoop = new Sk.builtin.func(function() {\n        if (mod.processing === null) {\n            throw new Sk.builtin.Exception(\"noLoop should be called in setup\")\n        }\n        looping = false;\n        mod.processing.noLoop()\n    });\n    \n    mod.frameRate = new Sk.builtin.func(function(fr) {\n        mod.processing.frameRate(fr.v)\n        \n    });\n\n    mod.size = new Sk.builtin.func(function(h,w) {\n        mod.processing.size(h.v,w.v)\n        \n    });\n\n    mod.exitp = new Sk.builtin.func(function(h,w) {\n        mod.processing.exit()\n    });\n\n\n    mod.mouseX = new Sk.builtin.func(function() {\n        return Sk.builtin.assk$(mod.processing.mouseX, Sk.builtin.nmber.int$);\n        \n    });\n\n    mod.mouseY = new Sk.builtin.func(function() {\n        return Sk.builtin.assk$(mod.processing.mouseY, Sk.builtin.nmber.int$);\n        \n    });\n\n    // Attributes\n    mod.rectMode = new Sk.builtin.func(function(mode) {\n        mod.processing.rectMode(mode.v)\n    });\n\n    mod.strokeWeight = new Sk.builtin.func(function(wt) {\n        mod.processing.strokeWeight(wt.v)\n        \n    });\n\n    mod.smooth = new Sk.builtin.func(function() {\n        mod.processing.smooth()\n    });\n\n    mod.noSmooth = new Sk.builtin.func(function() {\n        mod.processing.noSmooth()\n        });\n            \n    mod.ellipseMode = new Sk.builtin.func(function(mode) {\n        mod.processing.ellipseMode(mode.v)\n        });\n\n    mod.strokeCap = new Sk.builtin.func(function(mode) {\n        mod.processing.strokeCap(mode.v)\n        });\n\n    mod.strokeJoin = new Sk.builtin.func(function(mode) {\n        mod.processing.strokeJoin(mode.v)\n    });\n    \n\n\n    // Transforms\n\n    mod.rotate = new Sk.builtin.func(function(rads) {\n        // rotation in radians\n        mod.processing.rotate(rads.v)\n        \n    });\n\n    mod.scale = new Sk.builtin.func(function(sx, sy, sz) {\n        if (typeof(sy) == 'undefined') {\n            sy = 1.0\n        } else \n            sy = sy.v\n        if (typeof(sz) == 'undefined') {\n            sz = 1.0\n        } else\n            sz = sz.v\n        mod.processing.scale(sx.v, sy, sz)\n    });\n\n    mod.translate = new Sk.builtin.func(function(sx, sy, sz) {\n        if (typeof(sy) == 'undefined') {\n            sy = 1.0\n        } else \n            sy = sy.v\n        if (typeof(sz) == 'undefined') {\n            sz = 1.0\n        } else\n            sz = sz.v\n        mod.processing.translate(sx.v, sy, sz)\n    });\n\n    // todo:  applyMatrix, popMatrix, printMatrix??, pushMatrix, resetMatrix, rotate{X,Y,Z}\n    \n\n    //  //////////////////////////////////////////////////////////////////////\n    //  Run\n    // \n    //  Create the processing context and setup of calls to setup, draw etc.\n    //\n    //\n    //  //////////////////////////////////////////////////////////////////////    \n    mod.run = new Sk.builtin.func(function() {\n        function sketchProc(processing) {\n            mod.processing = processing\n\n            // processing.setup = function() {\n            //     if Sk.globals['setup']\n            //         Sk.misceval.callsim(Sk.globals['setup'])\n            // }\n\n            \n            processing.draw = function() {\n                // if there are pending image loads then just use the natural looping calls to \n                // retry until all the images are loaded.  If noLoop was called in setup then make\n                // sure to revert to that after all the images in hand.\n                var wait = false\n                for (var i in imList) {\n                    if (imList[i].width == 0) {\n                        wait = true\n                    }\n                }\n                if (wait == true) {\n                    if (looping == true) \n                        return\n                    else {\n                        processing.loop()\n                        return\n                    }\n\n                } else {\n                    if (looping == false)\n                        processing.noLoop()\n                }\n\n                mod.frameCount = processing.frameCount  \n                if (Sk.globals['draw'])\n                    Sk.misceval.callsim(Sk.globals['draw'])\n            }\n            \n            var callBacks = ['setup', 'mouseMoved','mouseClicked', 'mouseDragged', 'mouseMoved', 'mouseOut',\n             'mouseOver', 'mousePressed', 'mouseReleased', 'keyPressed', 'keyReleased', 'keyTyped'\n             ];\n\n             for(var cb in callBacks) {\n                if (Sk.globals[callBacks[cb]]) {\n                    console.log('defining ' + callBacks[cb])                    \n                    processing[callBacks[cb]] = new Function(\"Sk.misceval.callsim(Sk.globals['\"+callBacks[cb]+\"']);\")\n                }\n            }\n        }\n        \n        var canvas = document.getElementById(Sk.canvas)\n        $(canvas).show()\n        mod.p = new Processing(canvas, sketchProc)\n\n        \n    });\n\n    var mouseClass = function($gbl, $loc) {\n\n        $loc.__getattr__ = new Sk.builtin.func(function(self,key) {\n            if (key == 'x') \n                return mod.processing.mouseX;\n            else if (key == 'y') \n                return mod.processing.mouseY;\n            else if (key == 'px')\n                return mod.processing.pmouseX;\n            else if (key == 'py')\n                return mod.processing.pmouseY;\n            else if (key == 'pressed')\n                return mod.processing.mousePressed;\n            else if (key == 'button')\n                return mod.processing.mouseButton\n        });\n\n\n    }\n\n\n    mod.Mouse = Sk.misceval.buildClass(mod, mouseClass, 'Mouse', []);\n\n    mod.mouse = Sk.misceval.callsim(mod.Mouse)\n\n    var keyboardClass = function($gbl, $loc) {\n\n        $loc.__getattr__ = new Sk.builtin.func(function(self,key) {\n            if (key == 'key') {\n                console.log(mod.processing.key)\n                return new Sk.builtin.str(mod.processing.key.toString())\n            }\n            else if (key == 'keyCode') \n                return mod.processing.keyCode\n            else if (key == 'keyPressed')\n                return new Sk.builtin.str(mod.processing.keyPressed) // todo bool\n        });\n\n\n    }\n\n    mod.Keyboard = Sk.misceval.buildClass(mod,keyboardClass,'Keyboard', [])\n\n    mod.keyboard = Sk.misceval.callsim(mod.Keyboard)\n\n\n\n    var environmentClass = function($gbl, $loc) {\n\n        $loc.__getattr__ = new Sk.builtin.func(function(self,key) {\n            if (key == 'frameCount') \n                return mod.processing.frameCount\n            else if (key == 'frameRate') \n                return mod.processing.frameRate\n            else if (key == 'height')\n                return mod.processing.height\n            else if (key == 'width')\n                return mod.processing.width\n            else if (key == 'online')\n                return mod.processing.online\n            else if (key == 'focused')\n                return mod.processing.focused\n        });\n\n\n    }\n\n    mod.Environment = Sk.misceval.buildClass(mod,environmentClass,'Environment', [])\n\n    mod.environment = Sk.misceval.callsim(mod.Environment)\n\n    var screenClass = function($gbl, $loc) {\n\n        $loc.__init__ = new Sk.builtin.func(function(self) {\n            self.pixels = null;\n        });\n\n        $loc.__getattr__ = new Sk.builtin.func(function(self,key) {\n            if (key == 'height')\n                return mod.processing.height\n            else if (key == 'width')\n                return mod.processing.width\n            else if (key == 'pixels')\n                if (self.pixels == null) {\n                    self.pixels = new Sk.builtin.list(mod.processing.pixels.toArray())\n                }\n                return self.pixels\n        });\n\n    }\n\n    mod.Screen = Sk.misceval.buildClass(mod,screenClass,'Screen', [])\n\n    mod.screen = Sk.misceval.callsim(mod.Screen)\n\n    mod.loadPixels = new Sk.builtin.func(function() {\n        mod.processing.loadPixels()\n        console.log(mod.processing.pixels)\n    });\n    \n\n    var colorClass = function($gbl, $loc) {\n        /* images are loaded async.. so its best to preload them */\n        $loc.__init__ = new Sk.builtin.func(function(self, val1, val2, val3, alpha) {\n            if (typeof(val2) !== 'undefined')\n                val2 = val2.v\n            if (typeof(val3) !== 'undefined')\n                val3 = val3.v\n            if (typeof(alpha) !== 'undefined')\n                alpha = alpha.v\n            self.v = mod.processing.color(val1.v, val2, val3, alpha)\n        })\n    \n    }\n\n    mod.color = Sk.misceval.buildClass(mod,colorClass,'color', [])\n\n    mod.red = new Sk.builtin.func(function(clr) {\n        return Sk.builtin.assk$(mod.processing.red(clr.v), Sk.builtin.nmber.int$);\n    });\n    \n    mod.green = new Sk.builtin.func(function(clr) {\n        return Sk.builtin.assk$(mod.processing.green(clr.v), Sk.builtin.nmber.int$);\n    });\n\n    mod.blue = new Sk.builtin.func(function(clr) {\n        return Sk.builtin.assk$(mod.processing.blue(clr.v), Sk.builtin.nmber.int$);\n    });\n\n    // Image class and functions\n    //\n    var imageClass = function($gbl, $loc) {\n        /* images are loaded async.. so its best to preload them */\n        $loc.__init__ = new Sk.builtin.func(function(self,im) {\n            self.v = im\n            self.width = Sk.builtin.assk$(im.width, Sk.builtin.nmber.int$);\n            self.height = Sk.builtin.assk$(im.height, Sk.builtin.nmber.int$);\n        })\n\n        $loc.__getattr__ = new Sk.builtin.func(function(self,key) {\n            if (key == 'width') return self.v.width;\n            if (key == 'height') return self.v.height;\n        });\n    \n    }\n\n    mod.PImage = Sk.misceval.buildClass(mod,imageClass,'PImage', [])\n\n    mod.loadImage = new Sk.builtin.func(function(imfile) {\n        var i = mod.processing.loadImage(imfile.v);\n        imList.push(i);\n        return Sk.misceval.callsim(mod.PImage,i);\n    });\n    \n\n    mod.image = new Sk.builtin.func(function(im,x,y) {\n        if (im.v.width > 0)\n            mod.processing.image(im.v,x.v,y.v,im.v.width,im.v.height)\n    });\n\n    mod.get = new Sk.builtin.func(function(x,y) {\n        var clr = mod.processing.get(x.v,y.v)\n        return Sk.misceval.callsim(mod.color,\n            Sk.builtin.assk$(mod.processing.red(clr), Sk.builtin.nmber.int$),\n            Sk.builtin.assk$(mod.processing.green(clr), Sk.builtin.nmber.int$),\n            Sk.builtin.assk$(mod.processing.blue(clr), Sk.builtin.nmber.int$));\n    });\n\n    mod.set = new Sk.builtin.func(function(x, y, color) {\n        mod.processing.set(x.v, y.v, color.v)\n    });\n    \n// todo  -- add a color class for creating color objects.\n\n\n    return mod;\n}\n","src/lib/webgl/models.js":"// most of this file is from/based on 'tdl'\n\nvar $builtinmodule = function(name)\n{\n    var mod = {};\n\n    var Buffer = function(array, opt_target) {\n        var target = opt_target || gl.ARRAY_BUFFER;\n        var buf = gl.createBuffer();\n        this.target = target;\n        this.buf = buf;\n        this.set(array);\n        this.numComponents_ = array.numComponents;\n        this.numElements_ = array.numElements;\n        this.totalComponents_ = this.numComponents_ * this.numElements_;\n        if (array.buffer instanceof Float32Array) {\n            this.type_ = gl.FLOAT;\n        } else if (array.buffer instanceof Uint8Array) {\n            this.type_ = gl.UNSIGNED_BYTE;\n        } else if (array.buffer instanceof Int8Array) {\n            this.type_ = gl._BYTE;\n        } else if (array.buffer instanceof Uint16Array) {\n            this.type_ = gl.UNSIGNED_SHORT;\n        } else if (array.buffer instanceof Int16Array) {\n            this.type_ = gl.SHORT;\n        } else {\n            throw(\"unhandled type:\" + (typeof array.buffer));\n        }\n    };\n\n    Buffer.prototype.set = function(array) {\n        gl.bindBuffer(this.target, this.buf);\n        gl.bufferData(this.target, array.buffer, gl.STATIC_DRAW);\n    }\n\n    Buffer.prototype.type = function() {\n        return this.type_;\n    };\n\n    Buffer.prototype.numComponents = function() {\n        return this.numComponents_;\n    };\n\n    Buffer.prototype.numElements = function() {\n        return this.numElements_;\n    };\n\n    Buffer.prototype.totalComponents = function() {\n        return this.totalComponents_;\n    };\n\n    Buffer.prototype.buffer = function() {\n        return this.buf;\n    };\n\n    Buffer.prototype.stride = function() {\n        return 0;\n    };\n\n    Buffer.prototype.offset = function() {\n        return 0;\n    };\n\n\n\n    mod.Model = Sk.misceval.buildClass(mod, function($gbl, $loc)\n            {\n                $loc.__init__ = new Sk.builtin.func(function(self, shader, arrays, textures)\n                    {\n                        self.buffers = {};\n                        var setBuffer = function(name, array)\n                        {\n                            var target = (name == 'indices') ? gl.ELEMENT_ARRAY_BUFFER : gl.ARRAY_BUFFER;\n                            b = self.buffers[name];\n                            if (!b)\n                                b = new Buffer(array, target);\n                            else\n                                b.set(array);\n                            self.buffers[name] = b;\n                        };\n                        for (name in arrays)\n                            setBuffer(name, arrays[name]);\n\n                        var textureUnits = {};\n                        var unit = 0;\n                        for (var texture in textures)\n                        {\n                            textureUnits[texture] = unit++;\n                        }\n\n                        self.mode = gl.TRIANGLES;\n                        self.textures = textures.v;\n                        self.textureUnits = textureUnits;\n                        self.shader = shader;\n                    });\n\n                /**\n                * Sets up the shared parts of drawing this model. Uses the\n                * program, binds the buffers, sets the textures.\n                *\n                * @param {!Object.<string, *>} uniforms An object of names to\n                *     values to set on this models uniforms.\n                */\n                $loc.drawPrep = new Sk.builtin.func(function(self, uniforms)\n                    {\n                        var shader = self.shader;\n                        var buffers = self.buffers;\n                        var textures = self.textures;\n\n                        uniforms = Sk.ffi.remapToJs(uniforms);\n\n                        Sk.misceval.callsim(shader.use, shader);\n\n                        for (var buffer in buffers) {\n                            var b = buffers[buffer];\n                            if (buffer == 'indices') {\n                                gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, b.buffer());\n                            } else {\n                                var attrib = shader.attrib[buffer];\n                                if (attrib) {\n                                    attrib(b);\n                                }\n                            }\n                        }\n\n                        for (var texture in textures) {\n                            var unit = self.textureUnits[texture];\n                            shader.setUniform$impl(shader, textuer, unit);\n                            textures[texture].bindToUnit(unit);\n                        }\n\n                        for (var uniform in uniforms) {\n                            shader.setUniform$impl(shader, uniform, uniforms[uniform]);\n                        }\n                    });\n\n                /**\n                * Draws this model.\n                *\n                * After calling tdl.models.Model.drawPrep you can call this\n                * function multiple times to draw this model.\n                *\n                * @param {!Object.<string, *>} uniforms An object of names to\n                *     values to set on this models uniforms.\n                */\n                $loc.draw = new Sk.builtin.func(function(self, uniforms, opt_textures)\n                    {\n                        var shader = self.shader;\n                        uniforms = Sk.ffi.remapToJs(uniforms);\n                        for (uniform in uniforms) {\n                            shader.setUniform$impl(shader, uniform, uniforms[uniform]);\n                        }\n\n                        if (opt_textures) {\n                            for (var texture in opt_textures) {\n                                var unit = self.textureUnits[texture];\n                                shader.setUniform$impl(shader, texture, unit);\n                                opt_textures[texture].bindToUnit(unit);\n                            }\n                        }\n\n                        var buffers = self.buffers;\n                        gl.drawElements(self.mode, buffers.indices.totalComponents(), gl.UNSIGNED_SHORT, 0);\n                    });\n            },\n            'Model', []);\n\n    return mod;\n};\n","src/lib/pythonds/trees/__init__.py":"\n# from .binaryTree import BinaryTree\n# from .balance import AVLTree\n# from .bst import BinarySearchTree\n# from .binheap import BinHeap\n\n\n","src/lib/pythonds/trees/binaryTree.py":"# Bradley N. Miller, David L. Ranum\n# Introduction to Data Structures and Algorithms in Python\n# Copyright 2005\n# \n\nclass BinaryTree:\n    \"\"\"\n    A recursive implementation of Binary Tree\n    Using links and Nodes approach.\n    \"\"\"    \n    def __init__(self,rootObj):\n        self.key = rootObj\n        self.leftChild = None\n        self.rightChild = None\n\n    def insertLeft(self,newNode):\n        if self.leftChild == None:\n            self.leftChild = BinaryTree(newNode)\n        else:\n            t = BinaryTree(newNode)\n            t.left = self.leftChild\n            self.leftChild = t\n    \n    def insertRight(self,newNode):\n        if self.rightChild == None:\n            self.rightChild = BinaryTree(newNode)\n        else:\n            t = BinaryTree(newNode)\n            t.right = self.rightChild\n            self.rightChild = t\n\n    def isLeaf(self):\n        return ((not self.leftChild) and (not self.rightChild))\n\n    def getRightChild(self):\n        return self.rightChild\n\n    def getLeftChild(self):\n        return self.leftChild\n\n    def setRootVal(self,obj):\n        self.key = obj\n\n    def getRootVal(self,):\n        return self.key\n\n    def inorder(self):\n        if self.leftChild:\n            self.leftChild.inorder()\n        print(self.key)\n        if self.rightChild:\n            self.rightChild.inorder()\n\n    def postorder(self):\n        if self.leftChild:\n            self.leftChild.postorder()\n        if self.rightChild:\n            self.rightChild.postorder()\n        print(self.key)\n\n\n    def preorder(self):\n        print(self.key)\n        if self.leftChild:\n            self.leftChild.preorder()\n        if self.rightChild:\n            self.rightChild.preorder()\n\n    def printexp(self):\n        if self.leftChild:\n            print('(')\n            self.leftChild.printexp()\n        print(self.key)\n        if self.rightChild:\n            self.rightChild.printexp()\n            print(')')\n\n    def postordereval(self):\n        opers = {'+':operator.add, '-':operator.sub, '*':operator.mul, '/':operator.truediv}\n        res1 = None\n        res2 = None\n        if self.leftChild:\n            res1 = self.leftChild.postordereval()  #// \\label{peleft}\n        if self.rightChild:\n            res2 = self.rightChild.postordereval() #// \\label{peright}\n        if res1 and res2:\n            return opers[self.key](res1,res2) #// \\label{peeval}\n        else:\n            return self.key\n\ndef inorder(tree):\n    if tree != None:\n        inorder(tree.getLeftChild())\n        print(tree.getRootVal())\n        inorder(tree.getRightChild())\n\ndef printexp(tree):\n    if tree.leftChild:\n        print('(')\n        printexp(tree.getLeftChild())\n    print(tree.getRootVal())\n    if tree.rightChild:\n        printexp(tree.getRightChild())\n        print(')') \n\ndef printexp(tree):\n    sVal = \"\"\n    if tree:\n        sVal = '(' + printexp(tree.getLeftChild())\n        sVal = sVal + str(tree.getRootVal())\n        sVal = sVal + printexp(tree.getRightChild()) + ')'\n    return sVal\n\ndef postordereval(tree):\n    opers = {'+':operator.add, '-':operator.sub, '*':operator.mul, '/':operator.truediv}\n    res1 = None\n    res2 = None\n    if tree:\n        res1 = postordereval(tree.getLeftChild())  #// \\label{peleft}\n        res2 = postordereval(tree.getRightChild()) #// \\label{peright}\n        if res1 and res2:\n            return opers[tree.getRootVal()](res1,res2) #// \\label{peeval}\n        else:\n            return tree.getRootVal()\n\ndef height(tree):\n    if tree == None:\n        return -1\n    else:\n        return 1 + max(height(tree.leftChild),height(tree.rightChild))\n\n# t = BinaryTree(7)\n# t.insertLeft(3)\n# t.insertRight(9)\n# inorder(t)\n# import operator\n# x = BinaryTree('*')\n# x.insertLeft('+')\n# l = x.getLeftChild()\n# l.insertLeft(4)\n# l.insertRight(5)\n# x.insertRight(7)\n# print(printexp(x))\n# print(postordereval(x))\n# print(height(x))\n","src/builtin/this.py":'s = """Gur Mra bs Clguba, ol Gvz Crgref\n\nOrnhgvshy vf orggre guna htyl.\nRkcyvpvg vf orggre guna vzcyvpvg.\nFvzcyr vf orggre guna pbzcyrk.\nPbzcyrk vf orggre guna pbzcyvpngrq.\nSyng vf orggre guna arfgrq.\nFcnefr vf orggre guna qrafr.\nErnqnovyvgl pbhagf.\nFcrpvny pnfrf nera\'g fcrpvny rabhtu gb oernx gur ehyrf.\nNygubhtu cenpgvpnyvgl orngf chevgl.\nReebef fubhyq arire cnff fvyragyl.\nHayrff rkcyvpvgyl fvyraprq.\nVa gur snpr bs nzovthvgl, ershfr gur grzcgngvba gb thrff.\nGurer fubhyq or bar-- naq cersrenoyl bayl bar --boivbhf jnl gb qb vg.\nNygubhtu gung jnl znl abg or boivbhf ng svefg hayrff lbh\'er Qhgpu.\nAbj vf orggre guna arire.\nNygubhtu arire vf bsgra orggre guna *evtug* abj.\nVs gur vzcyrzragngvba vf uneq gb rkcynva, vg\'f n onq vqrn.\nVs gur vzcyrzragngvba vf rnfl gb rkcynva, vg znl or n tbbq vqrn.\nAnzrfcnprf ner bar ubaxvat terng vqrn -- yrg\'f qb zber bs gubfr!"""\n\nd = {}\nfor c in (65, 97):\n    for i in range(26):\n        d[chr(i+c)] = chr((i+13) % 26 + c)\n\nprint "".join([d.get(c, c) for c in s])\n',"src/lib/webgl/primitives.js":"// most of this file is from 'tdl'\n\nvar $builtinmodule = function(name)\n{\n    var mod = {};\n\n\n\n    /**\n     * AttribBuffer manages a TypedArray as an array of vectors.\n     *\n     * @param {number} numComponents Number of components per\n     *     vector.\n     * @param {number|!Array.<number>} numElements Number of vectors or the data.\n     * @param {string} opt_type The type of the TypedArray to\n     *     create. Default = 'Float32Array'.\n     * @param {!Array.<number>} opt_data The data for the array.\n     */\n    var AttribBuffer = function(\n            numComponents, numElements, opt_type) {\n        opt_type = opt_type || 'Float32Array';\n        var type = window[opt_type];\n        if (numElements.length) {\n            this.buffer = new type(numElements);\n            numElements = this.buffer.length / numComponents;\n            this.cursor = numElements;\n        } else {\n            this.buffer = new type(numComponents * numElements);\n            this.cursor = 0;\n        }\n        this.numComponents = numComponents;\n        this.numElements = numElements;\n        this.type = opt_type;\n    };\n\n    AttribBuffer.prototype.stride = function() {\n        return 0;\n    };\n\n    AttribBuffer.prototype.offset = function() {\n        return 0;\n    };\n\n    AttribBuffer.prototype.getElement = function(index) {\n        var offset = index * this.numComponents;\n        var value = [];\n        for (var ii = 0; ii < this.numComponents; ++ii) {\n            value.push(this.buffer[offset + ii]);\n        }\n        return value;\n    };\n\n    AttribBuffer.prototype.setElement = function(index, value) {\n        var offset = index * this.numComponents;\n        for (var ii = 0; ii < this.numComponents; ++ii) {\n            this.buffer[offset + ii] = value[ii];\n        }\n    };\n\n    AttribBuffer.prototype.clone = function() {\n        var copy = new AttribBuffer(\n                this.numComponents, this.numElements, this.type);\n        copy.pushArray(this);\n        return copy;\n    }\n\n    AttribBuffer.prototype.push = function(value) {\n        this.setElement(this.cursor++, value);\n    };\n\n    AttribBuffer.prototype.pushArray = function(array) {\n        //  this.buffer.set(array, this.cursor * this.numComponents);\n        //  this.cursor += array.numElements;\n        for (var ii = 0; ii < array.numElements; ++ii) {\n            this.push(array.getElement(ii));\n        }\n    };\n\n    AttribBuffer.prototype.pushArrayWithOffset =\n    function(array, offset) {\n        for (var ii = 0; ii < array.numElements; ++ii) {\n            var elem = array.getElement(ii);\n            for (var jj = 0; jj < offset.length; ++jj) {\n                elem[jj] += offset[jj];\n            }\n            this.push(elem);\n        }\n    };\n\n    /**\n    * Computes the extents\n    * @param {!AttribBuffer} positions The positions\n    * @return {!{min: !tdl.math.Vector3, max:!tdl.math.Vector3}}\n    *     The min and max extents.\n    */\n    AttribBuffer.prototype.computeExtents = function() {\n        var numElements = this.numElements;\n        var numComponents = this.numComponents;\n        var minExtent = this.getElement(0);\n        var maxExtent = this.getElement(0);\n        for (var ii = 1; ii < numElements; ++ii) {\n            var element = this.getElement(ii);\n            for (var jj = 0; jj < numComponents; ++jj) {\n                minExtent[jj] = Math.min(minExtent[jj], element[jj]);\n                maxExtent[jj] = Math.max(maxExtent[jj], element[jj]);\n            }\n        }\n        return {min: minExtent, max: maxExtent};\n    };\n\n\n    /**\n     * Creates the vertices and indices for a cube. The\n     * cube will be created around the origin. (-size / 2, size / 2)\n     *\n     * @param {number} size Width, height and depth of the cube.\n     * @return {!Object.<string, !tdl.primitives.AttribBuffer>} The\n     *         created plane vertices.\n     */\n    mod.createCube = new Sk.builtin.func(function(size)\n            {\n                var CUBE_FACE_INDICES_ = [\n                    [3, 7, 5, 1],\n                    [0, 4, 6, 2],\n                    [6, 7, 3, 2],\n                    [0, 1, 5, 4],\n                    [5, 7, 6, 4],\n                    [2, 3, 1, 0]\n                ];\n\n                var k = size / 2;\n\n                var cornerVertices = [\n                        [-k, -k, -k],\n                        [+k, -k, -k],\n                        [-k, +k, -k],\n                        [+k, +k, -k],\n                        [-k, -k, +k],\n                        [+k, -k, +k],\n                        [-k, +k, +k],\n                        [+k, +k, +k]\n                    ];\n\n                var faceNormals = [\n                        [+1, +0, +0],\n                        [-1, +0, +0],\n                        [+0, +1, +0],\n                        [+0, -1, +0],\n                        [+0, +0, +1],\n                        [+0, +0, -1]\n                    ];\n\n                var uvCoords = [\n                        [0, 0],\n                        [1, 0],\n                        [1, 1],\n                        [0, 1]\n                    ];\n\n                var numVertices = 6 * 4;\n                var positions = new AttribBuffer(3, numVertices);\n                var normals = new AttribBuffer(3, numVertices);\n                var texCoords = new AttribBuffer(2, numVertices);\n                var indices = new AttribBuffer(3, 6 * 2, 'Uint16Array');\n\n                for (var f = 0; f < 6; ++f) {\n                    var faceIndices = CUBE_FACE_INDICES_[f];\n                    for (var v = 0; v < 4; ++v) {\n                        var position = cornerVertices[faceIndices[v]];\n                        var normal = faceNormals[f];\n                        var uv = uvCoords[v];\n\n                        // Each face needs all four vertices because the normals and texture\n                        // coordinates are not all the same.\n                        positions.push(position);\n                        normals.push(normal);\n                        texCoords.push(uv);\n\n                    }\n                    // Two triangles make a square face.\n                    var offset = 4 * f;\n                    indices.push([offset + 0, offset + 1, offset + 2]);\n                    indices.push([offset + 0, offset + 2, offset + 3]);\n                }\n\n                return {\n                        position: positions,\n                        normal: normals,\n                        texCoord: texCoords,\n                        indices: indices\n                };\n            });\n\n    return mod;\n};\n","src/lib/document/__init__.js":"var $builtinmodule = function(name) {\n    var mod = {};\n\n    mod.getElementById = new Sk.builtin.func(function(id) {\n        var result = document.getElementById(id.v);\n        if (result) {\n            return Sk.misceval.callsim(mod.Element,result);\n        }\n        return Sk.builtin.none.none$;\n    });\n\n    mod.createElement = new Sk.builtin.func(function(eName) {\n            var r = document.createElement(eName.v);\n            if (r) {\n                return Sk.misceval.callsim(mod.Element,r);\n            }\n        });\n\n\n    mod.getElementsByTagName = new Sk.builtin.func(function(tag) {\n        var r = document.getElementsByTagName(tag.v)\n        var reslist = [];\n        for (var i = r.length - 1; i >= 0; i--) {\n            reslist.push(Sk.misceval.callsim(mod.Element,r[i]))\n        }\n        return new Sk.builtin.list(reslist)\n    });\n\n    mod.getElementsByClassName = new Sk.builtin.func(function(cname) {\n        var r = document.getElementsByClassName(cname.v);\n        var reslist = [];\n        for (var i = 0; i < r.length; i++) {\n            reslist.push(Sk.misceval.callsim(mod.Element,r[i]));\n        };\n        return new Sk.builtin.list(reslist);\n    });\n    \n    mod.getElementsByName = new Sk.builtin.func(function(cname) {\n        var r = document.getElementsByName(cname.v);\n        var reslist = [];\n        for (var i = 0; i < r.length; i++) {\n            reslist.push(Sk.misceval.callsim(mod.Element,r[i]));\n        };\n        return new Sk.builtin.list(reslist);\n    });\n        \n    mod.currentDiv = new Sk.builtin.func(function() {\n        if (Sk.divid !== undefined) {\n            return new Sk.builtin.str(Sk.divid)\n        }\n        else {\n            throw new Sk.builtin.AttributeError(\"There is no value set for divid\");\n        }\n    })\n    var elementClass = function($gbl, $loc) {\n        /*\n            Notes:  self['$d'] is the dictionary used by the GenericGetAttr mechanism for an object.\n                    for various reasons  if you create a class in Javascript and have self.xxxx instance\n                    variables, you cannot say instance.xxx and get the value of the instance variable unless \n                    it is stored in the self['$d'] object.  This seems like a duplication of storage to me\n                    but that is how it works right now  (5/2013)\n\n                    Writing your own __getattr__ is also an option but this gets very tricky when an attr is \n                    a method...\n        */\n        $loc.__init__ = new Sk.builtin.func(function(self,elem) {\n            self.v = elem\n            self.innerHTML = elem.innerHTML\n            self.innerText = elem.innerText\n            if (elem.value !== undefined) {\n                self.value = elem.value\n                Sk.abstr.objectSetItem(self['$d'], new Sk.builtin.str('value'), new Sk.builtin.str(self.value))                \n            }\n\n            if (elem.checked !== undefined) {\n                self.checked = elem.checked\n                Sk.abstr.objectSetItem(self['$d'], new Sk.builtin.str('checked'), new Sk.builtin.str(self.checked))                \n            }\n\n            Sk.abstr.objectSetItem(self['$d'], new Sk.builtin.str('innerHTML'), new Sk.builtin.str(self.innerHTML))\n            Sk.abstr.objectSetItem(self['$d'], new Sk.builtin.str('innerText'), new Sk.builtin.str(self.innerText))            \n\n        })\n\n        $loc.tp$getattr = Sk.builtin.object.prototype.GenericGetAttr;\n\n        $loc.__setattr__ = new Sk.builtin.func(function(self,key,value) {\n            if (key === 'innerHTML') {\n                self.innerHTML = value\n                self.v.innerHTML = value.v\n                Sk.abstr.objectSetItem(self['$d'], new Sk.builtin.str('innerHTML'), value)                \n            }\n            if (key === 'innerText') {\n                self.innerText = value\n                self.v.innerText = value.v\n                Sk.abstr.objectSetItem(self['$d'], new Sk.builtin.str('innerText'), value)            \n            }\n        });\n\n\n        $loc.appendChild = new Sk.builtin.func(function(self,ch) {\n            self.v.appendChild(ch.v);\n        });\n\n        $loc.removeChild = new Sk.builtin.func(function(self,node) {\n            self.v.removeChild(node.v)\n        })\n\n        // getCSS\n                    \n        $loc.getCSS = new Sk.builtin.func(function(self,key) {\n            return new Sk.builtin.str(self.v.style[key.v]);\n        });\n    \n\n        $loc.setCSS = new Sk.builtin.func(function(self,attr,value) {\n            self.v.style[attr.v] = value.v\n\n        })\n\n        $loc.getAttribute = new Sk.builtin.func(function(self,key) {\n            var res = self.v.getAttribute(key.v)\n            if (res) {\n                return new Sk.builtin.str(res)\n            } else {\n                return Sk.builtin.none.none$;\n            }\n        });\n\n        $loc.setAttribute = new Sk.builtin.func(function(self,attr,value) {\n                self.v.setAttribute(attr.v,value.v)\n        });\n            \n\n        $loc.__str__ = new Sk.builtin.func(function(self) {\n            console.log(self.v.tagName);\n            return new Sk.builtin.str(self.v.tagName)\n        })\n\n        $loc.__repr__ = new Sk.builtin.func(function(self) {\n            return new Sk.builtin.str('[DOM Element]')\n        })\n\n    \n    };\n\n    mod.Element = Sk.misceval.buildClass(mod,elementClass,'Element', []);\n\n    return mod;\n\n}   ","src/lib/re/__init__.js":'var $builtinmodule = function(name)\n{\n    var mod = {};\n\n    // Constants (mostly unsupported)\n    mod.I = 2;\n    mod.IGNORECASE = 2;\n    // mod.L = 4;\n    // mod.LOCALE = 4;\n    mod.M = 8;\n    mod.MULTILINE = 8;\n    // mod.S = 16;\n    // mod.DOTALL = 16;\n    // mod.U = 32;\n    // mod.UNICODE = 32;\n    // mod.X = 64;\n    // mod.VERBOSE = 64;\n\n    var validGroups = ["(?:", "(?=", "(?!"];\n\n    var convert = function(pattern) {\n        var newpattern;\n        var match;\n        var i;\n\n        // Look for disallowed constructs\n        match = pattern.match(/\\(\\?./g);\n        if (match) {\n            for (i=0; i<match.length; i++) {\n                if (validGroups.indexOf(match[i]) == -1) {\n                    throw new Sk.builtin.ValueError("Disallowed group in pattern: \'"\n                                                    + match[i] + "\'");\n                };\n            };\n        };\n\n        newpattern = pattern.replace(\'/\\\\/g\', \'\\\\\\\\\');\n        newpattern = pattern.replace(/([^\\\\]){,(?![^\\[]*\\])/g, \'$1{0,\');\n\n        return newpattern;\n    };\n\n    var getFlags = function(flags) {\n        var jsflags = "g";\n        if ((flags & mod.IGNORECASE) == mod.IGNORECASE) {\n            jsflags += "i";\n        };\n        if ((flags & mod.MULTILINE) == mod.MULTILINE) {\n            jsflags += "m";\n        }; \n        return jsflags;\n    };\n\n    mod.split = Sk.nativejs.func(function split(pattern, string, maxsplit, flags) {\n        Sk.builtin.pyCheckArgs("split", arguments, 2, 4);\n        if (!Sk.builtin.checkString(pattern)) {\n            throw new Sk.builtin.TypeError("pattern must be a string");\n        };\n        if (!Sk.builtin.checkString(string)) {\n            throw new Sk.builtin.TypeError("string must be a string");\n        };\n        if (maxsplit === undefined) {\n            maxsplit = 0;\n        };\n        if (!Sk.builtin.checkNumber(maxsplit)) {\n            throw new Sk.builtin.TypeError("maxsplit must be a number");\n        };\n        if (flags === undefined) {\n            flags = 0;\n        };\n        if (!Sk.builtin.checkNumber(flags)) {\n            throw new Sk.builtin.TypeError("flags must be a number");\n        };\n\n	maxsplit = Sk.builtin.asnum$(maxsplit);\n        var pat = Sk.ffi.unwrapo(pattern);\n        var str = Sk.ffi.unwrapo(string);\n        \n        // Convert pat from Python to Javascript regex syntax\n        pat = convert(pat);\n        //print("Pat: " + pat);\n        //print("Str: " + str);\n\n        var captured = !(pat.match(/^\\(.*\\)$/) === null);\n        //print("Captured: ", captured);\n\n        var jsflags = getFlags(flags);\n        //print("Flags: ", jsflags);\n\n        var regex = new RegExp(pat, jsflags);\n\n        var result = [];\n        var match;\n        var index = 0;\n        var splits = 0;\n        while ((match = regex.exec(str)) != null) {\n            //print("Matched \'" + match[0] + "\' at position " + match.index + \n            //      "; next search at " + regex.lastIndex);\n            if (match.index === regex.lastIndex) {\n                // empty match\n                break;\n            };\n            result.push(new Sk.builtin.str(str.substring(index, match.index)));\n            if (captured) {\n                // Add matching pattern, too\n                result.push(new Sk.builtin.str(match[0]));\n            };\n            index = regex.lastIndex;\n            splits += 1;\n            if (maxsplit && (splits >= maxsplit)) {\n                break;\n            };\n        };\n        result.push(new Sk.builtin.str(str.substring(index)));\n\n        return new Sk.builtin.list(result);\n    });\n\n    mod.findall = Sk.nativejs.func(function findall(pattern, string, flags) {\n        Sk.builtin.pyCheckArgs("findall", arguments, 2, 3);\n        if (!Sk.builtin.checkString(pattern)) {\n            throw new Sk.builtin.TypeError("pattern must be a string");\n        };\n        if (!Sk.builtin.checkString(string)) {\n            throw new Sk.builtin.TypeError("string must be a string");\n        };\n        if (flags === undefined) {\n            flags = 0;\n        };\n        if (!Sk.builtin.checkNumber(flags)) {\n            throw new Sk.builtin.TypeError("flags must be a number");\n        };\n\n        var pat = Sk.ffi.unwrapo(pattern);\n        var str = Sk.ffi.unwrapo(string);\n        \n        // Convert pat from Python to Javascript regex syntax\n        pat = convert(pat);\n        //print("Pat: " + pat);\n        //print("Str: " + str);\n\n        var jsflags = getFlags(flags);\n        //print("Flags: ", jsflags);\n\n        var regex = new RegExp(pat, jsflags);\n\n	var newline_at_end = new RegExp(/\\n$/);\n	if (str.match(newline_at_end)) {\n	    str = str.slice(0,-1);\n	}\n\n        var result = [];\n        var match;\n        while ((match = regex.exec(str)) != null) {\n            //print("Matched \'" + match[0] + "\' at position " + match.index + \n            //      "; next search at " + regex.lastIndex);\n            // print("match: " + JSON.stringify(match));\n            if (match.length < 2) {\n                result.push(new Sk.builtin.str(match[0]));\n            } else if (match.length == 2) {\n                result.push(new Sk.builtin.str(match[1]));\n            } else {\n                var groups = [];\n                for (var i=1; i<match.length; i++) {\n                    groups.push(new Sk.builtin.str(match[i]));  \n                };\n                result.push(new Sk.builtin.tuple(groups));\n            };\n            if (match.index === regex.lastIndex) {\n                regex.lastIndex += 1;\n            };\n        };\n\n        return new Sk.builtin.list(result);\n    });\n\n\n    var matchobj = function($gbl, $loc) {\n        $loc.__init__ = new Sk.builtin.func(function(self,thematch, pattern, string) {\n            self.thematch = thematch;\n	    self.re = pattern;\n	    self.string = string;\n        });\n\n	$loc.groups = new Sk.builtin.func(function(self) {\n	    return new Sk.builtin.tuple(self.thematch.v.slice(1))\n	});\n\n	$loc.group = new Sk.builtin.func(function(self,grpnum) {\n	    if (grpnum === undefined) {\n                grpnum = 0;\n            }\n            else {\n                grpnum = Sk.builtin.asnum$(grpnum);\n            }\n	    if(grpnum >= self.thematch.v.length) {\n		throw new Sk.builtin.IndexError("Index out of range: " + grpnum);\n		}\n	    return self.thematch.v[grpnum]\n	});\n\n    }\n\n    mod.MatchObject = Sk.misceval.buildClass(mod, matchobj, \'MatchObject\', []);\n\n    // Internal function to return a Python list of strings \n    // From a JS regular expression string\n    mod._findre = function(res, string) {\n	res = res.replace(/([^\\\\]){,(?![^\\[]*\\])/g, \'$1{0,\');\n        var re = eval(res);\n	var patt = new RegExp(\'\\n$\');\n	if (string.v.match(patt))\n	    var matches = string.v.slice(0,-1).match(re);\n	else\n            var matches = string.v.match(re);\n        retval = new Sk.builtin.list();\n        if ( matches == null ) return retval;\n        for (var i = 0; i < matches.length; ++i) {\n            var sitem = new Sk.builtin.str(matches[i]);\n            retval.v.push(sitem);\n        }\n        return retval;\n    }\n\n    mod.search = new Sk.builtin.func(function(pattern, string, flags) {\n	Sk.builtin.pyCheckArgs(\'search\', arguments, 2, 3);\n        if (!Sk.builtin.checkString(pattern)) {\n            throw new Sk.builtin.TypeError("pattern must be a string");\n        };\n        if (!Sk.builtin.checkString(string)) {\n            throw new Sk.builtin.TypeError("string must be a string");\n        };\n	if (flags === undefined) {\n            flags = 0;\n        };\n        if (!Sk.builtin.checkNumber(flags)) {\n            throw new Sk.builtin.TypeError("flags must be a number");\n        };\n        var res = "/"+pattern.v.replace(/\\//g,"\\\\/")+"/";\n        lst = mod._findre(res,string);\n        if ( lst.v.length < 1 ) return Sk.builtin.none.none$;\n        var mob = Sk.misceval.callsim(mod.MatchObject, lst, pattern, string);\n        return mob;\n    });\n\n    mod.match = new Sk.builtin.func(function(pattern, string, flags) {\n	Sk.builtin.pyCheckArgs(\'match\', arguments, 2, 3);\n        if (!Sk.builtin.checkString(pattern)) {\n            throw new Sk.builtin.TypeError("pattern must be a string");\n        };\n        if (!Sk.builtin.checkString(string)) {\n            throw new Sk.builtin.TypeError("string must be a string");\n        };\n	if (flags === undefined) {\n            flags = 0;\n        };\n        if (!Sk.builtin.checkNumber(flags)) {\n            throw new Sk.builtin.TypeError("flags must be a number");\n        };\n        var res = "/^"+pattern.v.replace(/\\//g,"\\\\/")+"/";\n        lst = mod._findre(res,string);\n        if ( lst.v.length < 1 ) return Sk.builtin.none.none$;\n        var mob = Sk.misceval.callsim(mod.MatchObject, lst, pattern, string);\n        return mob;\n    });\n\n    return mod;\n}\n',"src/lib/urllib/__init__.js":"var $builtinmodule = function(name)\n{\n  var urllib = {};\n\n  return urllib;\n};\n","src/lib/random/__init__.js":'\n/*\n  I\'ve wrapped Makoto Matsumoto and Takuji Nishimura\'s code in a namespace\n  so it\'s better encapsulated. Now you can have multiple random number generators\n  and they won\'t stomp all over eachother\'s state.\n  \n  If you want to use this as a substitute for Math.random(), use the random()\n  method like so:\n  \n  var m = new MersenneTwister();\n  var randomNumber = m.random();\n  \n  You can also call the other genrand_{foo}() methods on the instance.\n\n  If you want to use a specific seed in order to get a repeatable random\n  sequence, pass an integer into the constructor:\n\n  var m = new MersenneTwister(123);\n\n  and that will always produce the same random sequence.\n\n  Sean McCullough (banksean@gmail.com)\n*/\n\n/* \n   A C-program for MT19937, with initialization improved 2002/1/26.\n   Coded by Takuji Nishimura and Makoto Matsumoto.\n \n   Before using, initialize the state by using init_genrand(seed)  \n   or init_by_array(init_key, key_length).\n \n   Copyright (C) 1997 - 2002, Makoto Matsumoto and Takuji Nishimura,\n   All rights reserved.                          \n \n   Redistribution and use in source and binary forms, with or without\n   modification, are permitted provided that the following conditions\n   are met:\n \n     1. Redistributions of source code must retain the above copyright\n        notice, this list of conditions and the following disclaimer.\n \n     2. Redistributions in binary form must reproduce the above copyright\n        notice, this list of conditions and the following disclaimer in the\n        documentation and/or other materials provided with the distribution.\n \n     3. The names of its contributors may not be used to endorse or promote \n        products derived from this software without specific prior written \n        permission.\n \n   THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n   "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n   LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n   A PARTICULAR PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL THE COPYRIGHT OWNER OR\n   CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,\n   EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,\n   PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR\n   PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF\n   LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n   NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n   SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n \n \n   Any feedback is very welcome.\n   http://www.math.sci.hiroshima-u.ac.jp/~m-mat/MT/emt.html\n   email: m-mat @ math.sci.hiroshima-u.ac.jp (remove space)\n*/\n\nvar MersenneTwister = function(seed) {\n  if (seed == undefined) {\n    seed = new Date().getTime();\n  } \n  /* Period parameters */  \n  this.N = 624;\n  this.M = 397;\n  this.MATRIX_A = 0x9908b0df;   /* constant vector a */\n  this.UPPER_MASK = 0x80000000; /* most significant w-r bits */\n  this.LOWER_MASK = 0x7fffffff; /* least significant r bits */\n \n  this.mt = new Array(this.N); /* the array for the state vector */\n  this.mti=this.N+1; /* mti==N+1 means mt[N] is not initialized */\n\n  this.init_genrand(seed);\n}  \n \n/* initializes mt[N] with a seed */\nMersenneTwister.prototype.init_genrand = function(s) {\n  this.mt[0] = s >>> 0;\n  for (this.mti=1; this.mti<this.N; this.mti++) {\n      var s = this.mt[this.mti-1] ^ (this.mt[this.mti-1] >>> 30);\n   this.mt[this.mti] = (((((s & 0xffff0000) >>> 16) * 1812433253) << 16) + (s & 0x0000ffff) * 1812433253)\n  + this.mti;\n      /* See Knuth TAOCP Vol2. 3rd Ed. P.106 for multiplier. */\n      /* In the previous versions, MSBs of the seed affect   */\n      /* only MSBs of the array mt[].                        */\n      /* 2002/01/09 modified by Makoto Matsumoto             */\n      this.mt[this.mti] >>>= 0;\n      /* for >32 bit machines */\n  }\n}\n \n/* initialize by an array with array-length */\n/* init_key is the array for initializing keys */\n/* key_length is its length */\n/* slight change for C++, 2004/2/26 */\nMersenneTwister.prototype.init_by_array = function(init_key, key_length) {\n  var i, j, k;\n  this.init_genrand(19650218);\n  i=1; j=0;\n  k = (this.N>key_length ? this.N : key_length);\n  for (; k; k--) {\n    var s = this.mt[i-1] ^ (this.mt[i-1] >>> 30)\n    this.mt[i] = (this.mt[i] ^ (((((s & 0xffff0000) >>> 16) * 1664525) << 16) + ((s & 0x0000ffff) * 1664525)))\n      + init_key[j] + j; /* non linear */\n    this.mt[i] >>>= 0; /* for WORDSIZE > 32 machines */\n    i++; j++;\n    if (i>=this.N) { this.mt[0] = this.mt[this.N-1]; i=1; }\n    if (j>=key_length) j=0;\n  }\n  for (k=this.N-1; k; k--) {\n    var s = this.mt[i-1] ^ (this.mt[i-1] >>> 30);\n    this.mt[i] = (this.mt[i] ^ (((((s & 0xffff0000) >>> 16) * 1566083941) << 16) + (s & 0x0000ffff) * 1566083941))\n      - i; /* non linear */\n    this.mt[i] >>>= 0; /* for WORDSIZE > 32 machines */\n    i++;\n    if (i>=this.N) { this.mt[0] = this.mt[this.N-1]; i=1; }\n  }\n\n  this.mt[0] = 0x80000000; /* MSB is 1; assuring non-zero initial array */ \n}\n \n/* generates a random number on [0,0xffffffff]-interval */\nMersenneTwister.prototype.genrand_int32 = function() {\n  var y;\n  var mag01 = new Array(0x0, this.MATRIX_A);\n  /* mag01[x] = x * MATRIX_A  for x=0,1 */\n\n  if (this.mti >= this.N) { /* generate N words at one time */\n    var kk;\n\n    if (this.mti == this.N+1)   /* if init_genrand() has not been called, */\n      this.init_genrand(5489); /* a default initial seed is used */\n\n    for (kk=0;kk<this.N-this.M;kk++) {\n      y = (this.mt[kk]&this.UPPER_MASK)|(this.mt[kk+1]&this.LOWER_MASK);\n      this.mt[kk] = this.mt[kk+this.M] ^ (y >>> 1) ^ mag01[y & 0x1];\n    }\n    for (;kk<this.N-1;kk++) {\n      y = (this.mt[kk]&this.UPPER_MASK)|(this.mt[kk+1]&this.LOWER_MASK);\n      this.mt[kk] = this.mt[kk+(this.M-this.N)] ^ (y >>> 1) ^ mag01[y & 0x1];\n    }\n    y = (this.mt[this.N-1]&this.UPPER_MASK)|(this.mt[0]&this.LOWER_MASK);\n    this.mt[this.N-1] = this.mt[this.M-1] ^ (y >>> 1) ^ mag01[y & 0x1];\n\n    this.mti = 0;\n  }\n\n  y = this.mt[this.mti++];\n\n  /* Tempering */\n  y ^= (y >>> 11);\n  y ^= (y << 7) & 0x9d2c5680;\n  y ^= (y << 15) & 0xefc60000;\n  y ^= (y >>> 18);\n\n  return y >>> 0;\n}\n \n/* generates a random number on [0,0x7fffffff]-interval */\nMersenneTwister.prototype.genrand_int31 = function() {\n  return (this.genrand_int32()>>>1);\n}\n \n/* generates a random number on [0,1]-real-interval */\nMersenneTwister.prototype.genrand_real1 = function() {\n  return this.genrand_int32()*(1.0/4294967295.0); \n  /* divided by 2^32-1 */ \n}\n\n/* generates a random number on [0,1)-real-interval */\nMersenneTwister.prototype.random = function() {\n  return this.genrand_int32()*(1.0/4294967296.0); \n  /* divided by 2^32 */\n}\n \n/* generates a random number on (0,1)-real-interval */\nMersenneTwister.prototype.genrand_real3 = function() {\n  return (this.genrand_int32() + 0.5)*(1.0/4294967296.0); \n  /* divided by 2^32 */\n}\n \n/* generates a random number on [0,1) with 53-bit resolution*/\nMersenneTwister.prototype.genrand_res53 = function() { \n  var a=this.genrand_int32()>>>5, b=this.genrand_int32()>>>6; \n  return(a*67108864.0+b)*(1.0/9007199254740992.0); \n} \n\n/* These real versions are due to Isaku Wada, 2002/01/09 added */\n\n\n\nvar $builtinmodule = function(name)\n{\n\n    var mod = {};\n\n    var myGenerator = new MersenneTwister();\n\n    mod.seed = new Sk.builtin.func(function(x) {\n        Sk.builtin.pyCheckArgs("seed", arguments, 0, 1);\n	x = Sk.builtin.asnum$(x);\n\n        if (arguments.length > 0)\n            myGenerator = new MersenneTwister(x);\n        else\n            myGenerator = new MersenneTwister();\n\n	return Sk.builtin.none.none$;\n    });\n\n    mod.random = new Sk.builtin.func(function() {\n        Sk.builtin.pyCheckArgs("random", arguments, 0, 0);\n\n	return new Sk.builtin.nmber(myGenerator.genrand_res53(), Sk.builtin.nmber.float$);\n    });\n\n    var toInt = function(num) {\n        return num | 0;\n    };\n\n    var randrange = function(start, stop, step) {\n        // Ported from CPython 2.7\n        var width, n, ret;\n\n        if (!Sk.builtin.checkInt(start)) {\n            throw new Sk.builtin.ValueError("non-integer first argument for randrange()");\n        };\n\n        if (stop === undefined) {\n            // Random in [0, start)\n            ret = toInt(myGenerator.genrand_res53() * start);\n	    return new Sk.builtin.nmber(ret, Sk.builtin.nmber.int$);\n        };\n\n        if (!Sk.builtin.checkInt(stop)) {\n            throw new Sk.builtin.ValueError("non-integer stop for randrange()");\n        };\n\n        if (step === undefined) {\n            step = 1;\n        };\n\n        width = stop - start;\n\n        if ((step == 1) && (width > 0)) {\n            // Random in [start, stop), must use toInt on product for correct results with negative ranges\n            ret = start + toInt(myGenerator.genrand_res53() * width);\n	    return new Sk.builtin.nmber(ret, Sk.builtin.nmber.int$);\n        };\n\n        if (step == 1) {\n            throw new Sk.builtin.ValueError("empty range for randrange() (" + start + ", " + stop + ", " + width + ")");\n        };\n\n        if (!Sk.builtin.checkInt(step)) {\n            throw new Sk.builtin.ValueError("non-integer step for randrange()");\n        };\n\n        if (step > 0) {\n            n = toInt((width + step - 1) / step);\n        } else if (step < 0) {\n            n = toInt((width + step + 1) / step);\n        } else {\n            throw new Sk.builtin.ValueError("zero step for randrange()");\n        };\n\n        if (n <= 0) {\n            throw new Sk.builtin.ValueError("empty range for randrange()");\n        };\n\n        // Random in range(start, stop, step)\n        ret = start + (step * toInt(myGenerator.genrand_res53() * n));\n	return new Sk.builtin.nmber(ret, Sk.builtin.nmber.int$);\n    };\n\n    mod.randint = new Sk.builtin.func(function(a, b) {\n        Sk.builtin.pyCheckArgs("randint", arguments, 2, 2);\n\n	a = Sk.builtin.asnum$(a);\n	b = Sk.builtin.asnum$(b);\n        return randrange(a, b+1);\n    });\n\n    mod.randrange = new Sk.builtin.func(function(start, stop, step) {\n        Sk.builtin.pyCheckArgs("randrange", arguments, 1, 3);\n\n	start = Sk.builtin.asnum$(start);\n	stop = Sk.builtin.asnum$(stop);\n	step = Sk.builtin.asnum$(step);\n        return randrange(start, stop, step);\n    });\n\n    mod.choice = new Sk.builtin.func(function(seq) {\n        Sk.builtin.pyCheckArgs("choice", arguments, 1, 1);\n        Sk.builtin.pyCheckType("seq", "sequence", Sk.builtin.checkSequence(seq));\n\n        if (seq.sq$length !== undefined) {\n            var r = toInt(myGenerator.genrand_res53() * seq.sq$length());\n            return seq.mp$subscript(r);\n        } else {\n            throw new Sk.builtin.TypeError("object has no length");\n        }\n    });\n\n    mod.shuffle = new Sk.builtin.func(function(x) {\n        Sk.builtin.pyCheckArgs("shuffle", arguments, 1, 1);\n        Sk.builtin.pyCheckType("x", "sequence", Sk.builtin.checkSequence(x));\n\n        if (x.sq$length !== undefined) {\n            if (x.mp$ass_subscript !== undefined) {\n                for (var i = x.sq$length() - 1; i > 0; i -= 1) {\n                    var r = toInt(myGenerator.genrand_res53() * (i + 1));\n                    var tmp = x.mp$subscript(r);\n                    x.mp$ass_subscript(r, x.mp$subscript(i));\n                    x.mp$ass_subscript(i, tmp);\n                };\n            } else {\n                throw new Sk.builtin.TypeError("object is immutable");\n            };\n        } else {\n            throw new Sk.builtin.TypeError("object has no length");\n        };        \n\n	return Sk.builtin.none.none$;\n    });\n\n    return mod;\n}\n',"src/lib/webgl/__init__.js":"var $builtinmodule = function(name)\n{\n  var mod = {};\n\n  var makeFailHTML = function(msg) {\n    return '' +\n      '<table style=\"background-color: #8CE; width: 100%; height: 100%;\"><tr>' +\n      '<td align=\"center\">' +\n      '<div style=\"display: table-cell; vertical-align: middle;\">' +\n      '<div style=\"\">' + msg + '</div>' +\n      '</div>' +\n      '</td></tr></table>';\n  };\n\n  var GET_A_WEBGL_BROWSER = '' +\n    'This page requires a browser that supports WebGL.<br/>' +\n    '<a href=\"http://get.webgl.org\">Click here to upgrade your browser.</a>';\n\n  var NEED_HARDWARE = '' +\n    \"It doesn't appear your computer can support WebGL.<br/>\" +\n    '<a href=\"http://get.webgl.org\">Click here for more information.</a>';\n  \n  var create3DContext = function(canvas) {\n    var names = [\"webgl\", \"experimental-webgl\", \"webkit-3d\", \"moz-webgl\"];\n    var gl = null;\n    for (var ii = 0; ii < names.length; ++ii) {\n      try {\n        gl = canvas.getContext(names[ii]);\n      }\n      catch(e) {\n      }\n      if (gl) {\n          break;\n      }\n    }\n    if (gl) {\n      // Disallow selection by default. This keeps the cursor from changing to an\n      // I-beam when the user clicks and drags. It's easier on the eyes.\n      function returnFalse() {\n        return false;\n      }\n\n      canvas.onselectstart = returnFalse;\n      canvas.onmousedown = returnFalse;\n    }\n    return gl;\n  };\n\n  var setupWebGL = function(canvasContainerId, opt_canvas) {\n    var container = document.getElementById(canvasContainerId);\n    var context;\n    if (!opt_canvas) {\n      opt_canvas = container.getElementsByTagName(\"canvas\")[0];\n    }\n    if (!opt_canvas) {\n        // this browser doesn't support the canvas tag at all. Not even 2d.\n      container.innerHTML = makeFailHTML(GET_A_WEBGL_BROWSER);\n      return;\n    }\n\n    var gl = create3DContext(opt_canvas);\n    if (!gl) {\n      // TODO(gman): fix to official way to detect that it's the user's machine, not the browser.\n      var browserStrings = navigator.userAgent.match(/(\\w+\\/.*? )/g);\n      var browsers = {};\n      try {\n        for (var b = 0; b < browserStrings.length; ++b) {\n          var parts = browserStrings[b].match(/(\\w+)/g);\n          var bb = [];\n          for (var ii = 1; ii < parts.length; ++ii) {\n            bb.push(parseInt(parts[ii]));\n          }\n          browsers[parts[0]] = bb;\n        }\n      }\n      catch (e) {\n      }\n      if (browsers.Chrome &&\n           (browsers.Chrome[0] > 7 ||\n                 (browsers.Chrome[0] == 7 && browsers.Chrome[1] > 0) ||\n                 (browsers.Chrome[0] == 7 && browsers.Chrome[1] == 0 && browsers.Chrome[2] >= 521))) {\n        container.innerHTML = makeFailHTML(NEED_HARDWARE);\n      }\n      else {\n        container.innerHTML = makeFailHTML(GET_A_WEBGL_BROWSER);\n      }\n    }\n    return gl;\n  };\n\n  /**\n   * The Context encapsulates the underlying WebGL native JavaScript API.\n   */\n  mod.Context = Sk.misceval.buildClass(mod, function($gbl, $loc) {\n    $loc.__init__ = new Sk.builtin.func(\n      function(self, canvasid) {\n        var canvas = document.getElementById(canvasid.v);\n        var gl = setupWebGL(canvasid.v, canvas)\n        if (!gl) {\n          throw new Error(\"Your browser does not appear to support WebGL.\");\n        }\n\n        self.gl = gl;\n\n        // Copy symbolic constants and functions from native WebGL, encapsulating where necessary.       \n        for (var k in gl.__proto__) {\n          if (typeof gl.__proto__[k] === 'number') {\n            Sk.abstr.objectSetItem(self['$d'], new Sk.builtin.str(k), gl.__proto__[k]);\n          }\n          else if (typeof gl.__proto__[k] === \"function\") {\n            switch(k) {\n              case 'bufferData': {\n              }\n              break;\n              case 'clearColor': {\n              }\n              break;\n              case 'drawArrays': {\n              }\n              break;\n              case 'getAttribLocation': {\n              }\n              break;\n              case 'getUniformLocation': {\n              }\n              break;\n              case 'shaderSource': {\n              }\n              break;\n              case 'uniformMatrix4fv': {\n              }\n              break;\n              case 'vertexAttribPointer': {\n              }\n              break;\n              case 'viewport': {\n              }\n              break;\n              default: {\n                (function(key) {\n                  Sk.abstr.objectSetItem(self['$d'], new Sk.builtin.str(k), new Sk.builtin.func(function() {\n                    var f = gl.__proto__[key];\n                    return f.apply(gl, arguments);\n                  }));\n                 }(k));\n              }\n            }\n          }\n        }\n\n        gl.clearColor(100.0/255.0, 149.0/255.0, 237.0/255.0, 1.0);\n        gl.clear(gl.COLOR_BUFFER_BIT);\n      }\n    );\n\n    $loc.tp$getattr = Sk.builtin.object.prototype.GenericGetAttr;\n\n    $loc.bufferData = new Sk.builtin.func(\n      function(self, target, data, usage) {\n        self.gl.bufferData(target, data.v, usage);\n      }\n    );\n\n    $loc.clearColor = new Sk.builtin.func(\n      function(self, red, green, blue, alpha) {\n        self.gl.clearColor(Sk.builtin.asnum$(red), Sk.builtin.asnum$(green), Sk.builtin.asnum$(blue), Sk.builtin.asnum$(alpha));\n      }\n    );\n\n    $loc.getAttribLocation = new Sk.builtin.func(\n      function(self, program, name) {\n        return self.gl.getAttribLocation(program, name.v);\n      }\n    );\n\n    $loc.getUniformLocation = new Sk.builtin.func(\n      function(self, program, name) {\n        return self.gl.getUniformLocation(program, name.v);\n      }\n    );\n\n    $loc.shaderSource = new Sk.builtin.func(\n      function(self, shader, src) {\n        self.gl.shaderSource(shader, src.v);\n      }\n    );\n\n    $loc.drawArrays = new Sk.builtin.func(\n      function(self, mode, first, count) {\n        self.gl.drawArrays(Sk.builtin.asnum$(mode), Sk.builtin.asnum$(first), Sk.builtin.asnum$(count));\n      }\n    );\n\n    $loc.vertexAttribPointer = new Sk.builtin.func(\n      function(self, index, size, type, normalized, stride, dunno) {\n        self.gl.vertexAttribPointer(index, Sk.builtin.asnum$(size), Sk.builtin.asnum$(type), normalized, Sk.builtin.asnum$(stride), Sk.builtin.asnum$(dunno));\n      }\n    );\n\n    $loc.viewport = new Sk.builtin.func(\n      function(self, x, y, width, height) {\n        self.gl.viewport(Sk.builtin.asnum$(x), Sk.builtin.asnum$(y), Sk.builtin.asnum$(width), Sk.builtin.asnum$(height));\n      }\n    );\n\n    $loc.uniformMatrix4fv = new Sk.builtin.func(\n      function(self, location, transpose, values) {\n//        console.log(\"location  \" + (typeof location));\n//        console.log(\"transpose \" + (typeof transpose));\n//        console.log(\"values.v  \" + (typeof values.v));\n        self.gl.uniformMatrix4fv(Sk.builtin.asnum$(location), transpose, values.v);\n      }\n    );\n\n    $loc.setDrawFunc = new Sk.builtin.func(function(self, func) {\n      var startTime = (new Date()).getTime();\n      var intervalId = setInterval(\n        function() {\n          Sk.misceval.callsim(func, self, (new Date()).getTime() - startTime);\n        }, 1000.0 / 60.0); // 60 fps\n    });\n\n  }, 'Context', []);\n\n  mod.Float32Array = Sk.misceval.buildClass(mod, function($gbl, $loc) {\n    $loc.__init__ = new Sk.builtin.func(function(self, data) {\n      if (typeof data === \"number\") {\n        self.v = new Float32Array(data);\n      }\n      else {\n        self.v = new Float32Array(Sk.ffi.remapToJs(data));\n      }\n    });\n\n    $loc.__repr__ = new Sk.builtin.func(function(self) {\n      var copy = [];\n      for (var i = 0; i < self.v.length; ++i) {\n        copy.push(self.v[i]);\n      }\n      return new Sk.builtin.str(\"[\" + copy.join(', ') + \"]\");\n     });\n  }, 'Float32Array', []);\n\n  /**\n   * A 4x4 (mutable) matrix suitable for OpenGL.\n   *\n   * Mutability is chosen for performance.\n   * The inderlying implementation is Float32Array.\n   * The indexing of the elements is\n   * 0 4  8 12\n   * 1 5  9 13\n   * 2 6 10 14\n   * 3 7 11 15\n   */\n  mod.Matrix4x4 = Sk.misceval.buildClass(mod, function($gbl, $loc) {\n    $loc.__init__ = new Sk.builtin.func(function(self, data) {\n      self.v = new Float32Array(Sk.ffi.remapToJs(data));\n    });\n\n    $loc.identity = new Sk.builtin.func(\n      function(self) {\n\n        var m = self.v;\n\n        m[0]  = 1;\n        m[1]  = 0;\n        m[2]  = 0;\n        m[3]  = 0;\n\n        m[4]  = 0;\n        m[5]  = 1;\n        m[6]  = 0;\n        m[7]  = 0;\n\n        m[8]  = 0;\n        m[9]  = 0;\n        m[10] = 1;\n        m[11] = 0;\n\n        m[12] = 0;\n        m[13] = 0;\n        m[14] = 0;\n        m[15] = 1;\n      }\n    );\n\n    $loc.perspective = new Sk.builtin.func(\n      function(self, fov, aspect, near, far) {\n        \n        var t = Math.tan(Math.PI * 0.5 - 0.5 * (Sk.builtin.asnum$(fov) * Math.PI / 180));\n        var a = Sk.builtin.asnum$(aspect)\n        var n = Sk.builtin.asnum$(near)\n        var f = Sk.builtin.asnum$(far)\n        var k = 1.0 / (n - f);\n\n        var m = self.v;\n\n        m[0]  = t / a;\n        m[1]  = 0;\n        m[2]  = 0;\n        m[3]  = 0;\n\n        m[4]  = 0;\n        m[5]  = t;\n        m[6]  = 0;\n        m[7]  = 0;\n\n        m[8]  = 0;\n        m[9]  = 0;\n        m[10] = (n + f) * k;\n        m[11] = -1;\n\n        m[12] = 0;\n        m[13] = 0;\n        m[14] = n * f * k * 2;\n        m[15] = 0;\n      }\n    );\n\n    $loc.translate = new Sk.builtin.func(\n      function(self, translation) {\n\n        var m = self.v;\n        var t = Sk.ffi.remapToJs(translation);\n\n        m[0]  = 1;\n        m[1]  = 0;\n        m[2]  = 0;\n        m[3]  = 0;\n\n        m[4]  = 0;\n        m[5]  = 1;\n        m[6]  = 0;\n        m[7]  = 0;\n\n        m[8]  = 0;\n        m[9]  = 0;\n        m[10] = 1;\n        m[11] = 0;\n\n        m[12] = t[0];\n        m[13] = t[1];\n        m[14] = t[2];\n        m[15] = 1;\n      }\n    );\n\n    $loc.__repr__ = new Sk.builtin.func(function(self) {\n      var copy = [];\n      for (var i = 0; i < self.v.length; ++i) {\n        copy.push(self.v[i]);\n      }\n      return new Sk.builtin.str(\"[\" + copy.join(', ') + \"]\");\n     });\n  }, 'Matrix4x4', []);\n\n  return mod;\n};","src/lib/math/__init__.js":'var $builtinmodule = function(name)\n{\n    var mod = {};\n    mod.pi = Sk.builtin.assk$(Math.PI, Sk.builtin.nmber.float$);\n    mod.e =  Sk.builtin.assk$(Math.E, Sk.builtin.nmber.float$);\n\n//	RNL	added\n    mod.fabs = new Sk.builtin.func(function(x) {\n        Sk.builtin.pyCheckArgs("fabs", arguments, 1, 1);\n        Sk.builtin.pyCheckType("x", "number", Sk.builtin.checkNumber(x));\n\n	return new Sk.builtin.nmber(Math.abs(Sk.builtin.asnum$(x)), Sk.builtin.nmber.float$);\n    });\n\n    mod.asin = new Sk.builtin.func(function(rad) {\n        Sk.builtin.pyCheckArgs("asin", arguments, 1, 1);\n        Sk.builtin.pyCheckType("rad", "number", Sk.builtin.checkNumber(rad));\n\n	return new Sk.builtin.nmber(Math.asin(Sk.builtin.asnum$(rad)), Sk.builtin.nmber.float$);\n    });\n\n    mod.acos = new Sk.builtin.func(function(rad) {\n        Sk.builtin.pyCheckArgs("acos", arguments, 1, 1);\n        Sk.builtin.pyCheckType("rad", "number", Sk.builtin.checkNumber(rad));\n\n	return new Sk.builtin.nmber(Math.acos(Sk.builtin.asnum$(rad)), Sk.builtin.nmber.float$);\n    });\n\n    mod.atan = new Sk.builtin.func(function(rad) {\n        Sk.builtin.pyCheckArgs("atan", arguments, 1, 1);\n        Sk.builtin.pyCheckType("rad", "number", Sk.builtin.checkNumber(rad));\n\n	return new Sk.builtin.nmber(Math.atan(Sk.builtin.asnum$(rad)), Sk.builtin.nmber.float$);\n    });\n\n    mod.atan2 = new Sk.builtin.func(function(y, x) {\n        Sk.builtin.pyCheckArgs("atan2", arguments, 2, 2);\n        Sk.builtin.pyCheckType("y", "number", Sk.builtin.checkNumber(y));\n        Sk.builtin.pyCheckType("x", "number", Sk.builtin.checkNumber(x));\n\n	return new Sk.builtin.nmber(Math.atan2(Sk.builtin.asnum$(y), Sk.builtin.asnum$(x)), Sk.builtin.nmber.float$);\n    });\n\n    mod.sin = new Sk.builtin.func(function(rad) {\n        Sk.builtin.pyCheckArgs("sin", arguments, 1, 1);\n        Sk.builtin.pyCheckType("rad", "number", Sk.builtin.checkNumber(rad));\n\n	return new Sk.builtin.nmber(Math.sin(Sk.builtin.asnum$(rad)), Sk.builtin.nmber.float$);\n    });\n\n    mod.cos = new Sk.builtin.func(function(rad) {\n        Sk.builtin.pyCheckArgs("cos", arguments, 1, 1);\n        Sk.builtin.pyCheckType("rad", "number", Sk.builtin.checkNumber(rad));\n\n	return new Sk.builtin.nmber(Math.cos(Sk.builtin.asnum$(rad)), Sk.builtin.nmber.float$);\n    });\n\n    mod.tan = new Sk.builtin.func(function(rad) {\n        Sk.builtin.pyCheckArgs("tan", arguments, 1, 1);\n        Sk.builtin.pyCheckType("rad", "number", Sk.builtin.checkNumber(rad));\n\n	return new Sk.builtin.nmber(Math.tan(Sk.builtin.asnum$(rad)), Sk.builtin.nmber.float$);\n    });\n\n    mod.asinh = new Sk.builtin.func(function(x) {\n	Sk.builtin.pyCheckArgs("asinh", arguments, 1, 1);\n	Sk.builtin.pyCheckType("x", "number", Sk.builtin.checkNumber(x));\n\n	x = Sk.builtin.asnum$(x);\n\n	var L = x + Math.sqrt(x*x+1);\n\n	return new Sk.builtin.nmber(Math.log(L), Sk.builtin.nmber.float$);\n    });\n\n    mod.acosh = new Sk.builtin.func(function(x) {\n	Sk.builtin.pyCheckArgs("acosh", arguments, 1, 1);\n	Sk.builtin.pyCheckType("x", "number", Sk.builtin.checkNumber(x));\n\n	x = Sk.builtin.asnum$(x);\n\n	var L = x + Math.sqrt(x*x-1);\n\n	return new Sk.builtin.nmber(Math.log(L), Sk.builtin.nmber.float$);\n    });\n\n    mod.atanh = new Sk.builtin.func(function(x) {\n	Sk.builtin.pyCheckArgs("atanh", arguments, 1, 1);\n	Sk.builtin.pyCheckType("x", "number", Sk.builtin.checkNumber(x));\n\n	x = Sk.builtin.asnum$(x);\n\n	var L = (1+x)/(1-x);\n\n	return new Sk.builtin.nmber(Math.log(L)/2, Sk.builtin.nmber.float$);\n    });\n\n    mod.sinh = new Sk.builtin.func(function(x) {\n	Sk.builtin.pyCheckArgs("sinh", arguments, 1, 1);\n	Sk.builtin.pyCheckType("x", "number", Sk.builtin.checkNumber(x));\n\n	x = Sk.builtin.asnum$(x);\n\n	var e = Math.E;\n	var p = Math.pow(e, x);\n	var n = 1/p;\n	var result = (p-n)/2;\n\n	return new Sk.builtin.nmber(result, Sk.builtin.nmber.float$);\n    });\n\n    mod.cosh = new Sk.builtin.func(function(x) {\n	Sk.builtin.pyCheckArgs("cosh", arguments, 1, 1);\n	Sk.builtin.pyCheckType("x", "number", Sk.builtin.checkNumber(x));\n\n	x = Sk.builtin.asnum$(x);\n\n	var e = Math.E;\n	var p = Math.pow(e, x);\n	var n = 1/p;\n	var result = (p+n)/2;\n\n	return new Sk.builtin.nmber(result, Sk.builtin.nmber.float$);\n    });\n\n    mod.tanh = new Sk.builtin.func(function(x) {\n	Sk.builtin.pyCheckArgs("tanh", arguments, 1, 1);\n	Sk.builtin.pyCheckType("x", "number", Sk.builtin.checkNumber(x));\n\n	x = Sk.builtin.asnum$(x);\n\n	var e = Math.E;\n	var p = Math.pow(e, x);\n	var n = 1/p;\n	var result = ((p-n)/2)/((p+n)/2);\n\n	return new Sk.builtin.nmber(result, Sk.builtin.nmber.float$);\n    });\n\n    mod.ceil = new Sk.builtin.func(function(x) {\n        Sk.builtin.pyCheckArgs("ceil", arguments, 1, 1);\n        Sk.builtin.pyCheckType("x", "number", Sk.builtin.checkNumber(x));\n\n	return new Sk.builtin.nmber(Math.ceil(Sk.builtin.asnum$(x)), Sk.builtin.nmber.float$);\n    });\n\n    mod.floor = new Sk.builtin.func(function(x) {\n        Sk.builtin.pyCheckArgs("floor", arguments, 1, 1);\n        Sk.builtin.pyCheckType("x", "number", Sk.builtin.checkNumber(x));\n\n	return new Sk.builtin.nmber(Math.floor(Sk.builtin.asnum$(x)), Sk.builtin.nmber.float$);\n    });\n\n    mod.sqrt = new Sk.builtin.func(function(x) {\n        Sk.builtin.pyCheckArgs("sqrt", arguments, 1, 1);\n        Sk.builtin.pyCheckType("x", "number", Sk.builtin.checkNumber(x));\n\n	return new Sk.builtin.nmber(Math.sqrt(Sk.builtin.asnum$(x)), Sk.builtin.nmber.float$);\n    });\n\n    mod.trunc = new Sk.builtin.func(function(x) {\n        Sk.builtin.pyCheckArgs("trunc", arguments, 1, 1);\n        Sk.builtin.pyCheckType("x", "number", Sk.builtin.checkNumber(x));\n\n        return new Sk.builtin.nmber(Sk.builtin.asnum$(x)|0, Sk.builtin.nmber.float$);\n    });\n\n    mod.log = new Sk.builtin.func(function(x, base) {\n        Sk.builtin.pyCheckArgs("log", arguments, 1, 2);\n        Sk.builtin.pyCheckType("x", "number", Sk.builtin.checkNumber(x));\n\n        if (base === undefined) {\n	    return new Sk.builtin.nmber(Math.log(Sk.builtin.asnum$(x)), Sk.builtin.nmber.float$);\n        } else {\n            Sk.builtin.pyCheckType("base", "number", Sk.builtin.checkNumber(base));\n            var ret = Math.log(Sk.builtin.asnum$(x)) / Math.log(Sk.builtin.asnum$(base));\n	    return new Sk.builtin.nmber(ret, Sk.builtin.nmber.float$);\n        }\n    });\n\n    mod.log10 = new Sk.builtin.func(function(x) {\n        Sk.builtin.pyCheckArgs("log10", arguments, 1, 1);\n        Sk.builtin.pyCheckType("x", "number", Sk.builtin.checkNumber(x));\n\n        var ret = Math.log(Sk.builtin.asnum$(x)) / Math.log(10);\n	return new Sk.builtin.nmber(ret, Sk.builtin.nmber.float$);\n    });\n\n    mod.exp = new Sk.builtin.func(function(x) {\n        Sk.builtin.pyCheckArgs("exp", arguments, 1, 1);\n        Sk.builtin.pyCheckType("x", "number", Sk.builtin.checkNumber(x));\n\n	return new Sk.builtin.nmber(Math.exp(Sk.builtin.asnum$(x)), Sk.builtin.nmber.float$);\n    });\n\n    mod.pow = new Sk.builtin.func(function(x,y) {\n        Sk.builtin.pyCheckArgs("pow", arguments, 2, 2);\n        Sk.builtin.pyCheckType("x", "number", Sk.builtin.checkNumber(x));\n        Sk.builtin.pyCheckType("y", "number", Sk.builtin.checkNumber(y));\n\n	return new Sk.builtin.nmber(Math.pow(Sk.builtin.asnum$(x), Sk.builtin.asnum$(y)), Sk.builtin.nmber.float$);\n    });\n\n    mod.radians = new Sk.builtin.func(function(deg) {\n        Sk.builtin.pyCheckArgs("radians", arguments, 1, 1);\n        Sk.builtin.pyCheckType("deg", "number", Sk.builtin.checkNumber(deg));\n\n	var ret = Math.PI / 180.0 * Sk.builtin.asnum$(deg);\n	return new Sk.builtin.nmber(ret, Sk.builtin.nmber.float$);\n    });\n\n    mod.degrees = new Sk.builtin.func(function(rad) {\n        Sk.builtin.pyCheckArgs("degrees", arguments, 1, 1);\n        Sk.builtin.pyCheckType("rad", "number", Sk.builtin.checkNumber(rad));\n\n	var ret = 180.0 / Math.PI * Sk.builtin.asnum$(rad);\n	return new Sk.builtin.nmber(ret, Sk.builtin.nmber.float$);\n    });\n\n    mod.hypot = new Sk.builtin.func(function(x, y) {\n	Sk.builtin.pyCheckArgs("hypot", arguments, 2, 2);\n        Sk.builtin.pyCheckType("x", "number", Sk.builtin.checkNumber(x));\n	Sk.builtin.pyCheckType("y", "number", Sk.builtin.checkNumber(y));\n\n		x = Sk.builtin.asnum$(x);\n		y = Sk.builtin.asnum$(y);\n	return new Sk.builtin.nmber(Math.sqrt((x*x)+(y*y)), Sk.builtin.nmber.float$);\n    });\n\n	mod.factorial = new Sk.builtin.func(function(x) {\n	    Sk.builtin.pyCheckArgs("factorial", arguments, 1, 1);\n            Sk.builtin.pyCheckType("x", "number", Sk.builtin.checkNumber(x));\n\n		x = Math.floor(Sk.builtin.asnum$(x));\n		var r = 1;\n		for (var i = 2; i <= x; i++)\n			r *= i;\n		return new Sk.builtin.nmber(r, Sk.builtin.nmber.int$);\n	});\n\n    return mod;\n}'}};
var Kinetic={};!function(t){var e=Math.PI/180;Kinetic={version:"5.1.0",stages:[],idCounter:0,ids:{},names:{},shapes:{},listenClickTap:!1,inDblClickWindow:!1,enableTrace:!1,traceArrMax:100,dblClickWindow:400,pixelRatio:void 0,dragDistance:0,angleDeg:!0,UA:function(){var e=t.navigator&&t.navigator.userAgent||"",n=e.toLowerCase(),i=/(chrome)[ \/]([\w.]+)/.exec(n)||/(webkit)[ \/]([\w.]+)/.exec(n)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(n)||/(msie) ([\w.]+)/.exec(n)||n.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(n)||[],r=!!e.match(/Android|BlackBerry|iPhone|iPad|iPod|Opera Mini|IEMobile/i);return{browser:i[1]||"",version:i[2]||"0",mobile:r}}(),Filters:{},Node:function(t){this._init(t)},Shape:function(t){this.__init(t)},Container:function(t){this.__init(t)},Stage:function(t){this.___init(t)},BaseLayer:function(t){this.___init(t)},Layer:function(t){this.____init(t)},FastLayer:function(t){this.____init(t)},Group:function(t){this.___init(t)},isDragging:function(){var t=Kinetic.DD;return t?t.isDragging:!1},isDragReady:function(){var t=Kinetic.DD;return t?!!t.node:!1},_addId:function(t,e){void 0!==e&&(this.ids[e]=t)},_removeId:function(t){void 0!==t&&delete this.ids[t]},_addName:function(t,e){void 0!==e&&(void 0===this.names[e]&&(this.names[e]=[]),this.names[e].push(t))},_removeName:function(t,e){if(void 0!==t){var n=this.names[t];if(void 0!==n){for(var i=0;i<n.length;i++){var r=n[i];r._id===e&&n.splice(i,1)}0===n.length&&delete this.names[t]}}},getAngle:function(t){return this.angleDeg?t*e:t}}}(this),function(t,e){if("object"==typeof exports){var n=require("canvas"),i=require("jsdom").jsdom,r=i("<!DOCTYPE html><html><head></head><body></body></html>"),s=e();return Kinetic.document=r,Kinetic.window=Kinetic.document.createWindow(),Kinetic.window.Image=n.Image,Kinetic.root=t,Kinetic._nodeCanvas=n,void(module.exports=s)}"function"==typeof define&&define.amd&&define(e),Kinetic.document=document,Kinetic.window=window,Kinetic.root=t}((1,eval)("this"),function(){return Kinetic}),function(){Kinetic.Collection=function(){var t=[].slice.call(arguments),e=t.length,n=0;for(this.length=e;e>n;n++)this[n]=t[n];return this},Kinetic.Collection.prototype=[],Kinetic.Collection.prototype.each=function(t){for(var e=0;e<this.length;e++)t(this[e],e)},Kinetic.Collection.prototype.toArray=function(){var t,e=[],n=this.length;for(t=0;n>t;t++)e.push(this[t]);return e},Kinetic.Collection.toCollection=function(t){var e,n=new Kinetic.Collection,i=t.length;for(e=0;i>e;e++)n.push(t[e]);return n},Kinetic.Collection._mapMethod=function(t){Kinetic.Collection.prototype[t]=function(){var e,n=this.length,i=[].slice.call(arguments);for(e=0;n>e;e++)this[e][t].apply(this[e],i);return this}},Kinetic.Collection.mapMethods=function(t){var e=t.prototype;for(var n in e)Kinetic.Collection._mapMethod(n)},Kinetic.Transform=function(t){this.m=t&&t.slice()||[1,0,0,1,0,0]},Kinetic.Transform.prototype={copy:function(){return new Kinetic.Transform(this.m)},point:function(t){var e=this.m;return{x:e[0]*t.x+e[2]*t.y+e[4],y:e[1]*t.x+e[3]*t.y+e[5]}},translate:function(t,e){return this.m[4]+=this.m[0]*t+this.m[2]*e,this.m[5]+=this.m[1]*t+this.m[3]*e,this},scale:function(t,e){return this.m[0]*=t,this.m[1]*=t,this.m[2]*=e,this.m[3]*=e,this},rotate:function(t){var e=Math.cos(t),n=Math.sin(t),i=this.m[0]*e+this.m[2]*n,r=this.m[1]*e+this.m[3]*n,s=this.m[0]*-n+this.m[2]*e,o=this.m[1]*-n+this.m[3]*e;return this.m[0]=i,this.m[1]=r,this.m[2]=s,this.m[3]=o,this},getTranslation:function(){return{x:this.m[4],y:this.m[5]}},skew:function(t,e){var n=this.m[0]+this.m[2]*e,i=this.m[1]+this.m[3]*e,r=this.m[2]+this.m[0]*t,s=this.m[3]+this.m[1]*t;return this.m[0]=n,this.m[1]=i,this.m[2]=r,this.m[3]=s,this},multiply:function(t){var e=this.m[0]*t.m[0]+this.m[2]*t.m[1],n=this.m[1]*t.m[0]+this.m[3]*t.m[1],i=this.m[0]*t.m[2]+this.m[2]*t.m[3],r=this.m[1]*t.m[2]+this.m[3]*t.m[3],s=this.m[0]*t.m[4]+this.m[2]*t.m[5]+this.m[4],o=this.m[1]*t.m[4]+this.m[3]*t.m[5]+this.m[5];return this.m[0]=e,this.m[1]=n,this.m[2]=i,this.m[3]=r,this.m[4]=s,this.m[5]=o,this},invert:function(){var t=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),e=this.m[3]*t,n=-this.m[1]*t,i=-this.m[2]*t,r=this.m[0]*t,s=t*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),o=t*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=e,this.m[1]=n,this.m[2]=i,this.m[3]=r,this.m[4]=s,this.m[5]=o,this},getMatrix:function(){return this.m},setAbsolutePosition:function(t,e){var n=this.m[0],i=this.m[1],r=this.m[2],s=this.m[3],o=this.m[4],a=this.m[5],l=(n*(e-a)-i*(t-o))/(n*s-i*r),u=(t-o-r*l)/n;return this.translate(u,l)}};var t="2d",e="[object Array]",n="[object Number]",i="[object String]",r=Math.PI/180,s=180/Math.PI,o="#",a="",l="0",u="Kinetic warning: ",c="Kinetic error: ",f="rgb(",h={aqua:[0,255,255],lime:[0,255,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,255],navy:[0,0,128],white:[255,255,255],fuchsia:[255,0,255],olive:[128,128,0],yellow:[255,255,0],orange:[255,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[255,0,0],pink:[255,192,203],cyan:[0,255,255],transparent:[255,255,255,0]},p=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/;Kinetic.Util={_isElement:function(t){return!(!t||1!=t.nodeType)},_isFunction:function(t){return!!(t&&t.constructor&&t.call&&t.apply)},_isObject:function(t){return!!t&&t.constructor==Object},_isArray:function(t){return Object.prototype.toString.call(t)==e},_isNumber:function(t){return Object.prototype.toString.call(t)==n},_isString:function(t){return Object.prototype.toString.call(t)==i},_throttle:function(t,e,n){var i,r,s,o=null,a=0;n||(n={});var l=function(){a=n.leading===!1?0:(new Date).getTime(),o=null,s=t.apply(i,r),i=r=null};return function(){var u=(new Date).getTime();a||n.leading!==!1||(a=u);var c=e-(u-a);return i=this,r=arguments,0>=c?(clearTimeout(o),o=null,a=u,s=t.apply(i,r),i=r=null):o||n.trailing===!1||(o=setTimeout(l,c)),s}},_hasMethods:function(t){var e,n=[];for(e in t)this._isFunction(t[e])&&n.push(e);return n.length>0},createCanvasElement:function(){var t=Kinetic.document.createElement("canvas");return t.style=t.style||{},t},isBrowser:function(){return"object"!=typeof exports},_isInDocument:function(t){for(;t=t.parentNode;)if(t==Kinetic.document)return!0;return!1},_simplifyArray:function(t){var e,n,i=[],r=t.length,s=Kinetic.Util;for(e=0;r>e;e++)n=t[e],s._isNumber(n)?n=Math.round(1e3*n)/1e3:s._isString(n)||(n=n.toString()),i.push(n);return i},_getImage:function(e,n){var i,r;if(e)if(this._isElement(e))n(e);else if(this._isString(e))i=new Kinetic.window.Image,i.onload=function(){n(i)},i.src=e;else if(e.data){r=Kinetic.Util.createCanvasElement(),r.width=e.width,r.height=e.height;var s=r.getContext(t);s.putImageData(e,0,0),this._getImage(r.toDataURL(),n)}else n(null);else n(null)},_getRGBAString:function(t){var e=t.red||0,n=t.green||0,i=t.blue||0,r=t.alpha||1;return["rgba(",e,",",n,",",i,",",r,")"].join(a)},_rgbToHex:function(t,e,n){return((1<<24)+(t<<16)+(e<<8)+n).toString(16).slice(1)},_hexToRgb:function(t){t=t.replace(o,a);var e=parseInt(t,16);return{r:e>>16&255,g:e>>8&255,b:255&e}},getRandomColor:function(){for(var t=(16777215*Math.random()<<0).toString(16);t.length<6;)t=l+t;return o+t},get:function(t,e){return void 0===t?e:t},getRGB:function(t){var e;return t in h?(e=h[t],{r:e[0],g:e[1],b:e[2]}):t[0]===o?this._hexToRgb(t.substring(1)):t.substr(0,4)===f?(e=p.exec(t.replace(/ /g,"")),{r:parseInt(e[1],10),g:parseInt(e[2],10),b:parseInt(e[3],10)}):{r:0,g:0,b:0}},_merge:function(t,e){var n=this._clone(e);for(var i in t)n[i]=this._isObject(t[i])?this._merge(t[i],n[i]):t[i];return n},cloneObject:function(t){var e={};for(var n in t)e[n]=this._isObject(t[n])?this.cloneObject(t[n]):this._isArray(t[n])?this.cloneArray(t[n]):t[n];return e},cloneArray:function(t){return t.slice(0)},_degToRad:function(t){return t*r},_radToDeg:function(t){return t*s},_capitalize:function(t){return t.charAt(0).toUpperCase()+t.slice(1)},error:function(t){throw new Error(c+t)},warn:function(t){Kinetic.root.console&&console.warn&&console.warn(u+t)},extend:function(t,e){for(var n in e.prototype)n in t.prototype||(t.prototype[n]=e.prototype[n])},addMethods:function(t,e){var n;for(n in e)t.prototype[n]=e[n]},_getControlPoints:function(t,e,n,i,r,s,o){var a=Math.sqrt(Math.pow(n-t,2)+Math.pow(i-e,2)),l=Math.sqrt(Math.pow(r-n,2)+Math.pow(s-i,2)),u=o*a/(a+l),c=o*l/(a+l),f=n-u*(r-t),h=i-u*(s-e),p=n+c*(r-t),d=i+c*(s-e);return[f,h,p,d]},_expandPoints:function(t,e){var n,i,r=t.length,s=[];for(n=2;r-2>n;n+=2)i=Kinetic.Util._getControlPoints(t[n-2],t[n-1],t[n],t[n+1],t[n+2],t[n+3],e),s.push(i[0]),s.push(i[1]),s.push(t[n]),s.push(t[n+1]),s.push(i[2]),s.push(i[3]);return s},_removeLastLetter:function(t){return t.substring(0,t.length-1)}}}(),function(){var t=Kinetic.Util.createCanvasElement(),e=t.getContext("2d"),n=Kinetic.UA.mobile?function(){var t=window.devicePixelRatio||1,n=e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1;return t/n}():1;Kinetic.Canvas=function(t){this.init(t)},Kinetic.Canvas.prototype={init:function(t){t=t||{};var e=t.pixelRatio||Kinetic.pixelRatio||n;this.pixelRatio=e,this._canvas=Kinetic.Util.createCanvasElement(),this._canvas.style.padding=0,this._canvas.style.margin=0,this._canvas.style.border=0,this._canvas.style.background="transparent",this._canvas.style.position="absolute",this._canvas.style.top=0,this._canvas.style.left=0},getContext:function(){return this.context},getPixelRatio:function(){return this.pixelRatio},setPixelRatio:function(t){this.pixelRatio=t,this.setSize(this.getWidth(),this.getHeight())},setWidth:function(t){this.width=this._canvas.width=t*this.pixelRatio,this._canvas.style.width=t+"px"},setHeight:function(t){this.height=this._canvas.height=t*this.pixelRatio,this._canvas.style.height=t+"px"},getWidth:function(){return this.width},getHeight:function(){return this.height},setSize:function(t,e){this.setWidth(t),this.setHeight(e)},toDataURL:function(t,e){try{return this._canvas.toDataURL(t,e)}catch(n){try{return this._canvas.toDataURL()}catch(i){return Kinetic.Util.warn("Unable to get data URL. "+i.message),""}}}},Kinetic.SceneCanvas=function(t){t=t||{};var e=t.width||0,n=t.height||0;Kinetic.Canvas.call(this,t),this.context=new Kinetic.SceneContext(this),this.setSize(e,n)},Kinetic.SceneCanvas.prototype={setWidth:function(t){var e=this.pixelRatio,n=this.getContext()._context;Kinetic.Canvas.prototype.setWidth.call(this,t),n.scale(e,e)},setHeight:function(t){var e=this.pixelRatio,n=this.getContext()._context;Kinetic.Canvas.prototype.setHeight.call(this,t),n.scale(e,e)}},Kinetic.Util.extend(Kinetic.SceneCanvas,Kinetic.Canvas),Kinetic.HitCanvas=function(t){t=t||{};var e=t.width||0,n=t.height||0;Kinetic.Canvas.call(this,t),this.context=new Kinetic.HitContext(this),this.setSize(e,n)},Kinetic.Util.extend(Kinetic.HitCanvas,Kinetic.Canvas)}(),function(){var t=",",e="(",n=")",i="([",r="])",s=";",o="()",a="=",l=["arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","createLinearGradient","createPattern","createRadialGradient","drawImage","fill","fillText","getImageData","createImageData","lineTo","moveTo","putImageData","quadraticCurveTo","rect","restore","rotate","save","scale","setLineDash","setTransform","stroke","strokeText","transform","translate"];Kinetic.Context=function(t){this.init(t)},Kinetic.Context.prototype={init:function(t){this.canvas=t,this._context=t._canvas.getContext("2d"),Kinetic.enableTrace&&(this.traceArr=[],this._enableTrace())},fillShape:function(t){t.getFillEnabled()&&this._fill(t)},strokeShape:function(t){t.getStrokeEnabled()&&this._stroke(t)},fillStrokeShape:function(t){var e=t.getFillEnabled();e&&this._fill(t),t.getStrokeEnabled()&&this._stroke(t)},getTrace:function(l){var u,c,f,h,p=this.traceArr,d=p.length,b="";for(u=0;d>u;u++)c=p[u],f=c.method,f?(h=c.args,b+=f,b+=l?o:Kinetic.Util._isArray(h[0])?i+h.join(t)+r:e+h.join(t)+n):(b+=c.property,l||(b+=a+c.val)),b+=s;return b},clearTrace:function(){this.traceArr=[]},_trace:function(t){var e,n=this.traceArr;n.push(t),e=n.length,e>=Kinetic.traceArrMax&&n.shift()},reset:function(){var t=this.getCanvas().getPixelRatio();this.setTransform(1*t,0,0,1*t,0,0)},getCanvas:function(){return this.canvas},clear:function(t){var e=this.getCanvas();t?this.clearRect(t.x||0,t.y||0,t.width||0,t.height||0):this.clearRect(0,0,e.getWidth(),e.getHeight())},_applyLineCap:function(t){var e=t.getLineCap();e&&this.setAttr("lineCap",e)},_applyOpacity:function(t){var e=t.getAbsoluteOpacity();1!==e&&this.setAttr("globalAlpha",e)},_applyLineJoin:function(t){var e=t.getLineJoin();e&&this.setAttr("lineJoin",e)},setAttr:function(t,e){this._context[t]=e},arc:function(){var t=arguments;this._context.arc(t[0],t[1],t[2],t[3],t[4],t[5])},beginPath:function(){this._context.beginPath()},bezierCurveTo:function(){var t=arguments;this._context.bezierCurveTo(t[0],t[1],t[2],t[3],t[4],t[5])},clearRect:function(){var t=arguments;this._context.clearRect(t[0],t[1],t[2],t[3])},clip:function(){this._context.clip()},closePath:function(){this._context.closePath()},createImageData:function(){var t=arguments;return 2===t.length?this._context.createImageData(t[0],t[1]):1===t.length?this._context.createImageData(t[0]):void 0},createLinearGradient:function(){var t=arguments;return this._context.createLinearGradient(t[0],t[1],t[2],t[3])},createPattern:function(){var t=arguments;return this._context.createPattern(t[0],t[1])},createRadialGradient:function(){var t=arguments;return this._context.createRadialGradient(t[0],t[1],t[2],t[3],t[4],t[5])},drawImage:function(){var t=arguments,e=this._context;3===t.length?e.drawImage(t[0],t[1],t[2]):5===t.length?e.drawImage(t[0],t[1],t[2],t[3],t[4]):9===t.length&&e.drawImage(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8])},fill:function(){this._context.fill()},fillText:function(){var t=arguments;this._context.fillText(t[0],t[1],t[2])},getImageData:function(){var t=arguments;return this._context.getImageData(t[0],t[1],t[2],t[3])},lineTo:function(){var t=arguments;this._context.lineTo(t[0],t[1])},moveTo:function(){var t=arguments;this._context.moveTo(t[0],t[1])},rect:function(){var t=arguments;this._context.rect(t[0],t[1],t[2],t[3])},putImageData:function(){var t=arguments;this._context.putImageData(t[0],t[1],t[2])},quadraticCurveTo:function(){var t=arguments;this._context.quadraticCurveTo(t[0],t[1],t[2],t[3])},restore:function(){this._context.restore()},rotate:function(){var t=arguments;this._context.rotate(t[0])},save:function(){this._context.save()},scale:function(){var t=arguments;this._context.scale(t[0],t[1])},setLineDash:function(){var t=arguments,e=this._context;this._context.setLineDash?e.setLineDash(t[0]):"mozDash"in e?e.mozDash=t[0]:"webkitLineDash"in e&&(e.webkitLineDash=t[0])},setTransform:function(){var t=arguments;this._context.setTransform(t[0],t[1],t[2],t[3],t[4],t[5])},stroke:function(){this._context.stroke()},strokeText:function(){var t=arguments;this._context.strokeText(t[0],t[1],t[2])},transform:function(){var t=arguments;this._context.transform(t[0],t[1],t[2],t[3],t[4],t[5])},translate:function(){var t=arguments;this._context.translate(t[0],t[1])},_enableTrace:function(){var t,e,n=this,i=l.length,r=Kinetic.Util._simplifyArray,s=this.setAttr,o=function(t){var i,s=n[t];n[t]=function(){return e=r(Array.prototype.slice.call(arguments,0)),i=s.apply(n,arguments),n._trace({method:t,args:e}),i}};for(t=0;i>t;t++)o(l[t]);n.setAttr=function(){s.apply(n,arguments),n._trace({property:arguments[0],val:arguments[1]})}}},Kinetic.SceneContext=function(t){Kinetic.Context.call(this,t)},Kinetic.SceneContext.prototype={_fillColor:function(t){var e=t.fill()||Kinetic.Util._getRGBAString({red:t.fillRed(),green:t.fillGreen(),blue:t.fillBlue(),alpha:t.fillAlpha()});this.setAttr("fillStyle",e),t._fillFunc(this)},_fillPattern:function(t){var e=t.getFillPatternImage(),n=t.getFillPatternX(),i=t.getFillPatternY(),r=t.getFillPatternScale(),s=Kinetic.getAngle(t.getFillPatternRotation()),o=t.getFillPatternOffset(),a=t.getFillPatternRepeat();(n||i)&&this.translate(n||0,i||0),s&&this.rotate(s),r&&this.scale(r.x,r.y),o&&this.translate(-1*o.x,-1*o.y),this.setAttr("fillStyle",this.createPattern(e,a||"repeat")),this.fill()},_fillLinearGradient:function(t){var e=t.getFillLinearGradientStartPoint(),n=t.getFillLinearGradientEndPoint(),i=t.getFillLinearGradientColorStops(),r=this.createLinearGradient(e.x,e.y,n.x,n.y);if(i){for(var s=0;s<i.length;s+=2)r.addColorStop(i[s],i[s+1]);this.setAttr("fillStyle",r),this.fill()}},_fillRadialGradient:function(t){for(var e=t.getFillRadialGradientStartPoint(),n=t.getFillRadialGradientEndPoint(),i=t.getFillRadialGradientStartRadius(),r=t.getFillRadialGradientEndRadius(),s=t.getFillRadialGradientColorStops(),o=this.createRadialGradient(e.x,e.y,i,n.x,n.y,r),a=0;a<s.length;a+=2)o.addColorStop(s[a],s[a+1]);this.setAttr("fillStyle",o),this.fill()},_fill:function(t){var e=t.fill()||t.fillRed()||t.fillGreen()||t.fillBlue(),n=t.getFillPatternImage(),i=t.getFillLinearGradientColorStops(),r=t.getFillRadialGradientColorStops(),s=t.getFillPriority();e&&"color"===s?this._fillColor(t):n&&"pattern"===s?this._fillPattern(t):i&&"linear-gradient"===s?this._fillLinearGradient(t):r&&"radial-gradient"===s?this._fillRadialGradient(t):e?this._fillColor(t):n?this._fillPattern(t):i?this._fillLinearGradient(t):r&&this._fillRadialGradient(t)},_stroke:function(t){var e=t.dash(),n=t.getStrokeScaleEnabled();t.hasStroke()&&(n||(this.save(),this.setTransform(1,0,0,1,0,0)),this._applyLineCap(t),e&&t.dashEnabled()&&this.setLineDash(e),this.setAttr("lineWidth",t.strokeWidth()),this.setAttr("strokeStyle",t.stroke()||Kinetic.Util._getRGBAString({red:t.strokeRed(),green:t.strokeGreen(),blue:t.strokeBlue(),alpha:t.strokeAlpha()})),t._strokeFunc(this),n||this.restore())},_applyShadow:function(t){var e=Kinetic.Util,n=t.getAbsoluteOpacity(),i=e.get(t.getShadowColor(),"black"),r=e.get(t.getShadowBlur(),5),s=e.get(t.getShadowOpacity(),1),o=e.get(t.getShadowOffset(),{x:0,y:0});s&&this.setAttr("globalAlpha",s*n),this.setAttr("shadowColor",i),this.setAttr("shadowBlur",r),this.setAttr("shadowOffsetX",o.x),this.setAttr("shadowOffsetY",o.y)}},Kinetic.Util.extend(Kinetic.SceneContext,Kinetic.Context),Kinetic.HitContext=function(t){Kinetic.Context.call(this,t)},Kinetic.HitContext.prototype={_fill:function(t){this.save(),this.setAttr("fillStyle",t.colorKey),t._fillFuncHit(this),this.restore()},_stroke:function(t){t.hasStroke()&&(this._applyLineCap(t),this.setAttr("lineWidth",t.strokeWidth()),this.setAttr("strokeStyle",t.colorKey),t._strokeFuncHit(this))}},Kinetic.Util.extend(Kinetic.HitContext,Kinetic.Context)}(),function(){var t="get",e="set";Kinetic.Factory={addGetterSetter:function(t,e,n,i,r){this.addGetter(t,e,n),this.addSetter(t,e,i,r),this.addOverloadedGetterSetter(t,e)},addGetter:function(e,n,i){var r=t+Kinetic.Util._capitalize(n);e.prototype[r]=function(){var t=this.attrs[n];return void 0===t?i:t}},addSetter:function(t,n,i,r){var s=e+Kinetic.Util._capitalize(n);t.prototype[s]=function(t){return i&&(t=i.call(this,t)),this._setAttr(n,t),r&&r.call(this),this}},addComponentsGetterSetter:function(n,i,r,s,o){var a,l,u=r.length,c=Kinetic.Util._capitalize,f=t+c(i),h=e+c(i);n.prototype[f]=function(){var t={};for(a=0;u>a;a++)l=r[a],t[l]=this.getAttr(i+c(l));return t},n.prototype[h]=function(t){var e,n=this.attrs[i];s&&(t=s.call(this,t));for(e in t)this._setAttr(i+c(e),t[e]);return this._fireChangeEvent(i,n,t),o&&o.call(this),this},this.addOverloadedGetterSetter(n,i)},addOverloadedGetterSetter:function(n,i){var r=Kinetic.Util._capitalize(i),s=e+r,o=t+r;n.prototype[i]=function(){return arguments.length?(this[s](arguments[0]),this):this[o]()}},backCompat:function(t,e){var n;for(n in e)t.prototype[n]=t.prototype[e[n]]},afterSetFilter:function(){this._filterUpToDate=!1}},Kinetic.Validators={RGBComponent:function(t){return t>255?255:0>t?0:Math.round(t)},alphaComponent:function(t){return t>1?1:1e-4>t?1e-4:t}}}(),function(){var t="absoluteOpacity",e="absoluteTransform",n="Change",i="children",r=".",s="",o="get",a="id",l="kinetic",u="listening",c="mouseenter",f="mouseleave",h="name",p="set",d="Shape",b=" ",m="stage",g="transform",v="Stage",y="visible",_=["id"],w=["xChange.kinetic","yChange.kinetic","scaleXChange.kinetic","scaleYChange.kinetic","skewXChange.kinetic","skewYChange.kinetic","rotationChange.kinetic","offsetXChange.kinetic","offsetYChange.kinetic","transformsEnabledChange.kinetic"].join(b);Kinetic.Util.addMethods(Kinetic.Node,{_init:function(n){var i=this;this._id=Kinetic.idCounter++,this.eventListeners={},this.attrs={},this._cache={},this._filterUpToDate=!1,this.setAttrs(n),this.on(w,function(){this._clearCache(g),i._clearSelfAndDescendantCache(e)}),this.on("visibleChange.kinetic",function(){i._clearSelfAndDescendantCache(y)}),this.on("listeningChange.kinetic",function(){i._clearSelfAndDescendantCache(u)}),this.on("opacityChange.kinetic",function(){i._clearSelfAndDescendantCache(t)})},_clearCache:function(t){t?delete this._cache[t]:this._cache={}},_getCache:function(t,e){var n=this._cache[t];return void 0===n&&(this._cache[t]=e.call(this)),this._cache[t]},_clearSelfAndDescendantCache:function(t){this._clearCache(t),this.children&&this.getChildren().each(function(e){e._clearSelfAndDescendantCache(t)})},clearCache:function(){return delete this._cache.canvas,this._filterUpToDate=!1,this},cache:function(t){var e=t||{},n=e.x||0,i=e.y||0,r=e.width||this.width(),s=e.height||this.height(),o=e.drawBorder||!1;if(this.getLayer(),0===r||0===s)return void Kinetic.Util.warn("Width or height of caching configuration equals 0. Cache is ignored.");var a=new Kinetic.SceneCanvas({pixelRatio:1,width:r,height:s}),l=new Kinetic.SceneCanvas({pixelRatio:1,width:r,height:s}),u=new Kinetic.HitCanvas({width:r,height:s}),c=(this.transformsEnabled(),this.x(),this.y(),a.getContext()),f=u.getContext();return this.clearCache(),c.save(),f.save(),o&&(c.save(),c.beginPath(),c.rect(0,0,r,s),c.closePath(),c.setAttr("strokeStyle","red"),c.setAttr("lineWidth",5),c.stroke(),c.restore()),c.translate(-1*n,-1*i),f.translate(-1*n,-1*i),"Shape"===this.nodeType&&(c.translate(-1*this.x(),-1*this.y()),f.translate(-1*this.x(),-1*this.y())),this.drawScene(a,this),this.drawHit(u,this),c.restore(),f.restore(),this._cache.canvas={scene:a,filter:l,hit:u},this},_drawCachedSceneCanvas:function(t){t.save(),this.getLayer()._applyTransform(this,t),t.drawImage(this._getCachedSceneCanvas()._canvas,0,0),t.restore()},_getCachedSceneCanvas:function(){var t,e,n,i,r=this.filters(),s=this._cache.canvas,o=s.scene,a=s.filter,l=a.getContext();if(r){if(!this._filterUpToDate){try{for(t=r.length,l.clear(),l.drawImage(o._canvas,0,0),e=l.getImageData(0,0,a.getWidth(),a.getHeight()),n=0;t>n;n++)i=r[n],i.call(this,e),l.putImageData(e,0,0)}catch(u){Kinetic.Util.warn("Unable to apply filter. "+u.message)}this._filterUpToDate=!0}return a}return o},_drawCachedHitCanvas:function(t){var e=this._cache.canvas,n=e.hit;t.save(),this.getLayer()._applyTransform(this,t),t.drawImage(n._canvas,0,0),t.restore()},on:function(t,e){var n,i,o,a,l,u=t.split(b),c=u.length;for(n=0;c>n;n++)i=u[n],o=i.split(r),a=o[0],l=o[1]||s,this.eventListeners[a]||(this.eventListeners[a]=[]),this.eventListeners[a].push({name:l,handler:e});return this},off:function(t){var e,n,i,s,o,a,l=t.split(b),u=l.length;for(e=0;u>e;e++)if(i=l[e],s=i.split(r),o=s[0],a=s[1],o)this.eventListeners[o]&&this._off(o,a);else for(n in this.eventListeners)this._off(n,a);return this},dispatchEvent:function(t){var e={target:this,type:t.type,evt:t};this.fire(t.type,e)},addEventListener:function(t,e){this.on(t,function(t){e.call(this,t.evt)})},remove:function(){var n=this.getParent();return n&&n.children&&(n.children.splice(this.index,1),n._setChildrenIndices(),delete this.parent),this._clearSelfAndDescendantCache(m),this._clearSelfAndDescendantCache(e),this._clearSelfAndDescendantCache(y),this._clearSelfAndDescendantCache(u),this._clearSelfAndDescendantCache(t),this},destroy:function(){Kinetic._removeId(this.getId()),Kinetic._removeName(this.getName(),this._id),this.remove()},getAttr:function(t){var e=o+Kinetic.Util._capitalize(t);return Kinetic.Util._isFunction(this[e])?this[e]():this.attrs[t]},getAncestors:function(){for(var t=this.getParent(),e=new Kinetic.Collection;t;)e.push(t),t=t.getParent();return e},getAttrs:function(){return this.attrs||{}},setAttrs:function(t){var e,n;if(t)for(e in t)e===i||(n=p+Kinetic.Util._capitalize(e),Kinetic.Util._isFunction(this[n])?this[n](t[e]):this._setAttr(e,t[e]));return this},isListening:function(){return this._getCache(u,this._isListening)},_isListening:function(){var t=this.getListening(),e=this.getParent();return"inherit"===t?e?e.isListening():!0:t},isVisible:function(){return this._getCache(y,this._isVisible)},_isVisible:function(){var t=this.getVisible(),e=this.getParent();return"inherit"===t?e?e.isVisible():!0:t},shouldDrawHit:function(){var t=this.getLayer();return t&&t.hitGraphEnabled()&&this.isListening()&&this.isVisible()&&!Kinetic.isDragging()},show:function(){return this.setVisible(!0),this},hide:function(){return this.setVisible(!1),this},getZIndex:function(){return this.index||0},getAbsoluteZIndex:function(){function t(l){for(e=[],n=l.length,i=0;n>i;i++)r=l[i],a++,r.nodeType!==d&&(e=e.concat(r.getChildren().toArray())),r._id===o._id&&(i=n);e.length>0&&e[0].getDepth()<=s&&t(e)}var e,n,i,r,s=this.getDepth(),o=this,a=0;return o.nodeType!==v&&t(o.getStage().getChildren()),a},getDepth:function(){for(var t=0,e=this.parent;e;)t++,e=e.parent;return t},setPosition:function(t){return this.setX(t.x),this.setY(t.y),this},getPosition:function(){return{x:this.getX(),y:this.getY()}},getAbsolutePosition:function(){var t=this.getAbsoluteTransform().getMatrix(),e=new Kinetic.Transform,n=this.offset();return e.m=t.slice(),e.translate(n.x,n.y),e.getTranslation()},setAbsolutePosition:function(t){var e,n=this._clearTransform();return this.attrs.x=n.x,this.attrs.y=n.y,delete n.x,delete n.y,e=this.getAbsoluteTransform(),e.invert(),e.translate(t.x,t.y),t={x:this.attrs.x+e.getTranslation().x,y:this.attrs.y+e.getTranslation().y},this.setPosition({x:t.x,y:t.y}),this._setTransform(n),this},_setTransform:function(t){var n;for(n in t)this.attrs[n]=t[n];this._clearCache(g),this._clearSelfAndDescendantCache(e)},_clearTransform:function(){var t={x:this.getX(),y:this.getY(),rotation:this.getRotation(),scaleX:this.getScaleX(),scaleY:this.getScaleY(),offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),skewX:this.getSkewX(),skewY:this.getSkewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,this._clearCache(g),this._clearSelfAndDescendantCache(e),t},move:function(t){var e=t.x,n=t.y,i=this.getX(),r=this.getY();return void 0!==e&&(i+=e),void 0!==n&&(r+=n),this.setPosition({x:i,y:r}),this},_eachAncestorReverse:function(t,e){var n,i,r=[],s=this.getParent();if(e&&e._id===this._id)return t(this),!0;for(r.unshift(this);s&&(!e||s._id!==e._id);)r.unshift(s),s=s.parent;for(n=r.length,i=0;n>i;i++)t(r[i])},rotate:function(t){return this.setRotation(this.getRotation()+t),this},moveToTop:function(){if(!this.parent)return void Kinetic.Util.warn("Node has no parent. moveToTop function is ignored.");var t=this.index;return this.parent.children.splice(t,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0},moveUp:function(){if(!this.parent)return void Kinetic.Util.warn("Node has no parent. moveUp function is ignored.");var t=this.index,e=this.parent.getChildren().length;return e-1>t?(this.parent.children.splice(t,1),this.parent.children.splice(t+1,0,this),this.parent._setChildrenIndices(),!0):!1},moveDown:function(){if(!this.parent)return void Kinetic.Util.warn("Node has no parent. moveDown function is ignored.");var t=this.index;return t>0?(this.parent.children.splice(t,1),this.parent.children.splice(t-1,0,this),this.parent._setChildrenIndices(),!0):!1},moveToBottom:function(){if(!this.parent)return void Kinetic.Util.warn("Node has no parent. moveToBottom function is ignored.");var t=this.index;return t>0?(this.parent.children.splice(t,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0):!1},setZIndex:function(t){if(!this.parent)return void Kinetic.Util.warn("Node has no parent. zIndex parameter is ignored.");var e=this.index;return this.parent.children.splice(e,1),this.parent.children.splice(t,0,this),this.parent._setChildrenIndices(),this},getAbsoluteOpacity:function(){return this._getCache(t,this._getAbsoluteOpacity)},_getAbsoluteOpacity:function(){var t=this.getOpacity();return this.getParent()&&(t*=this.getParent().getAbsoluteOpacity()),t},moveTo:function(t){return Kinetic.Node.prototype.remove.call(this),t.add(this),this},toObject:function(){var t,e,n,i,r=Kinetic.Util,s={},o=this.getAttrs();s.attrs={};for(t in o)e=o[t],r._isFunction(e)||r._isElement(e)||r._isObject(e)&&r._hasMethods(e)||(n=this[t],delete o[t],i=n?n.call(this):null,o[t]=e,i!==e&&(s.attrs[t]=e));return s.className=this.getClassName(),s},toJSON:function(){return JSON.stringify(this.toObject())},getParent:function(){return this.parent},getLayer:function(){var t=this.getParent();return t?t.getLayer():null},getStage:function(){return this._getCache(m,this._getStage)},_getStage:function(){var t=this.getParent();return t?t.getStage():void 0},fire:function(t,e,n){return n?this._fireAndBubble(t,e||{}):this._fire(t,e||{}),this},getAbsoluteTransform:function(t){return t?this._getAbsoluteTransform(t):this._getCache(e,this._getAbsoluteTransform)},_getAbsoluteTransform:function(t){var e,n,i=new Kinetic.Transform;return this._eachAncestorReverse(function(t){e=t.transformsEnabled(),n=t.getTransform(),"all"===e?i.multiply(n):"position"===e&&i.translate(t.x(),t.y())},t),i},getTransform:function(){return this._getCache(g,this._getTransform)},_getTransform:function(){var t=new Kinetic.Transform,e=this.getX(),n=this.getY(),i=Kinetic.getAngle(this.getRotation()),r=this.getScaleX(),s=this.getScaleY(),o=this.getSkewX(),a=this.getSkewY(),l=this.getOffsetX(),u=this.getOffsetY();return(0!==e||0!==n)&&t.translate(e,n),0!==i&&t.rotate(i),(0!==o||0!==a)&&t.skew(o,a),(1!==r||1!==s)&&t.scale(r,s),(0!==l||0!==u)&&t.translate(-1*l,-1*u),t},clone:function(t){var e,n,i,r,s,o=this.getClassName(),a=Kinetic.Util.cloneObject(this.attrs);for(var u in _){var c=_[u];delete a[c]}for(e in t)a[e]=t[e];var f=new Kinetic[o](a);for(e in this.eventListeners)for(n=this.eventListeners[e],i=n.length,r=0;i>r;r++)s=n[r],s.name.indexOf(l)<0&&(f.eventListeners[e]||(f.eventListeners[e]=[]),f.eventListeners[e].push(s));return f},toDataURL:function(t){t=t||{};var e=t.mimeType||null,n=t.quality||null,i=this.getStage(),r=t.x||0,s=t.y||0,o=new Kinetic.SceneCanvas({width:t.width||this.getWidth()||(i?i.getWidth():0),height:t.height||this.getHeight()||(i?i.getHeight():0),pixelRatio:1}),a=o.getContext();return a.save(),(r||s)&&a.translate(-1*r,-1*s),this.drawScene(o),a.restore(),o.toDataURL(e,n)},toImage:function(t){Kinetic.Util._getImage(this.toDataURL(t),function(e){t.callback(e)})},setSize:function(t){return this.setWidth(t.width),this.setHeight(t.height),this},getSize:function(){return{width:this.getWidth(),height:this.getHeight()}},getWidth:function(){return this.attrs.width||0},getHeight:function(){return this.attrs.height||0},getClassName:function(){return this.className||this.nodeType},getType:function(){return this.nodeType},getDragDistance:function(){return void 0!==this.attrs.dragDistance?this.attrs.dragDistance:this.parent?this.parent.getDragDistance():Kinetic.dragDistance},_get:function(t){return this.nodeType===t?[this]:[]},_off:function(t,e){var n,i,r=this.eventListeners[t];for(n=0;n<r.length;n++)if(i=r[n].name,!("kinetic"===i&&"kinetic"!==e||e&&i!==e)){if(r.splice(n,1),0===r.length){delete this.eventListeners[t];break}n--}},_fireChangeEvent:function(t,e,i){this._fire(t+n,{oldVal:e,newVal:i})},setId:function(t){var e=this.getId();return Kinetic._removeId(e),Kinetic._addId(this,t),this._setAttr(a,t),this},setName:function(t){var e=this.getName();return Kinetic._removeName(e,this._id),Kinetic._addName(this,t),this._setAttr(h,t),this},setAttr:function(){var t=Array.prototype.slice.call(arguments),e=t[0],n=t[1],i=p+Kinetic.Util._capitalize(e),r=this[i];return Kinetic.Util._isFunction(r)?r.call(this,n):this._setAttr(e,n),this},_setAttr:function(t,e){var n;void 0!==e&&(n=this.attrs[t],this.attrs[t]=e,this._fireChangeEvent(t,n,e))},_setComponentAttr:function(t,e,n){var i;void 0!==n&&(i=this.attrs[t],i||(this.attrs[t]=this.getAttr(t)),this.attrs[t][e]=n,this._fireChangeEvent(t,i,n))},_fireAndBubble:function(t,e,n){var i=!0;e&&this.nodeType===d&&(e.target=this),t===c&&n&&this._id===n._id?i=!1:t===f&&n&&this._id===n._id&&(i=!1),i&&(this._fire(t,e),e&&!e.cancelBubble&&this.parent&&(n&&n.parent?this._fireAndBubble.call(this.parent,t,e,n.parent):this._fireAndBubble.call(this.parent,t,e)))
},_fire:function(t,e){var n,i=this.eventListeners[t];if(e.type=t,i)for(n=0;n<i.length;n++)i[n].handler.call(this,e)},draw:function(){return this.drawScene(),this.drawHit(),this}}),Kinetic.Node.create=function(t,e){return this._createNode(JSON.parse(t),e)},Kinetic.Node._createNode=function(t,e){var n,i,r,s=Kinetic.Node.prototype.getClassName.call(t),o=t.children;if(e&&(t.attrs.container=e),n=new Kinetic[s](t.attrs),o)for(i=o.length,r=0;i>r;r++)n.add(this._createNode(o[r]));return n},Kinetic.Factory.addOverloadedGetterSetter(Kinetic.Node,"position"),Kinetic.Factory.addGetterSetter(Kinetic.Node,"x",0),Kinetic.Factory.addGetterSetter(Kinetic.Node,"y",0),Kinetic.Factory.addGetterSetter(Kinetic.Node,"opacity",1),Kinetic.Factory.addGetter(Kinetic.Node,"name"),Kinetic.Factory.addOverloadedGetterSetter(Kinetic.Node,"name"),Kinetic.Factory.addGetter(Kinetic.Node,"id"),Kinetic.Factory.addOverloadedGetterSetter(Kinetic.Node,"id"),Kinetic.Factory.addGetterSetter(Kinetic.Node,"rotation",0),Kinetic.Factory.addComponentsGetterSetter(Kinetic.Node,"scale",["x","y"]),Kinetic.Factory.addGetterSetter(Kinetic.Node,"scaleX",1),Kinetic.Factory.addGetterSetter(Kinetic.Node,"scaleY",1),Kinetic.Factory.addComponentsGetterSetter(Kinetic.Node,"skew",["x","y"]),Kinetic.Factory.addGetterSetter(Kinetic.Node,"skewX",0),Kinetic.Factory.addGetterSetter(Kinetic.Node,"skewY",0),Kinetic.Factory.addComponentsGetterSetter(Kinetic.Node,"offset",["x","y"]),Kinetic.Factory.addGetterSetter(Kinetic.Node,"offsetX",0),Kinetic.Factory.addGetterSetter(Kinetic.Node,"offsetY",0),Kinetic.Factory.addSetter(Kinetic.Node,"dragDistance"),Kinetic.Factory.addOverloadedGetterSetter(Kinetic.Node,"dragDistance"),Kinetic.Factory.addSetter(Kinetic.Node,"width",0),Kinetic.Factory.addOverloadedGetterSetter(Kinetic.Node,"width"),Kinetic.Factory.addSetter(Kinetic.Node,"height",0),Kinetic.Factory.addOverloadedGetterSetter(Kinetic.Node,"height"),Kinetic.Factory.addGetterSetter(Kinetic.Node,"listening","inherit"),Kinetic.Factory.addGetterSetter(Kinetic.Node,"filters",void 0,function(t){return this._filterUpToDate=!1,t}),Kinetic.Factory.addGetterSetter(Kinetic.Node,"visible","inherit"),Kinetic.Factory.addGetterSetter(Kinetic.Node,"transformsEnabled","all"),Kinetic.Factory.addOverloadedGetterSetter(Kinetic.Node,"size"),Kinetic.Factory.backCompat(Kinetic.Node,{rotateDeg:"rotate",setRotationDeg:"setRotation",getRotationDeg:"getRotation"}),Kinetic.Collection.mapMethods(Kinetic.Node)}(),function(){Kinetic.Filters.Grayscale=function(t){var e,n,i=t.data,r=i.length;for(e=0;r>e;e+=4)n=.34*i[e]+.5*i[e+1]+.16*i[e+2],i[e]=n,i[e+1]=n,i[e+2]=n}}(),function(){Kinetic.Filters.Brighten=function(t){var e,n=255*this.brightness(),i=t.data,r=i.length;for(e=0;r>e;e+=4)i[e]+=n,i[e+1]+=n,i[e+2]+=n},Kinetic.Factory.addGetterSetter(Kinetic.Node,"brightness",0,null,Kinetic.Factory.afterSetFilter)}(),function(){Kinetic.Filters.Invert=function(t){var e,n=t.data,i=n.length;for(e=0;i>e;e+=4)n[e]=255-n[e],n[e+1]=255-n[e+1],n[e+2]=255-n[e+2]}}(),function(){function t(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}function e(e,r){var s,o,a,l,u,c,f,h,p,d,b,m,g,v,y,_,w,k,x,S,T,C,E,$,A=e.data,N=e.width,L=e.height,M=r+r+1,I=N-1,R=L-1,D=r+1,K=D*(D+1)/2,F=new t,B=null,P=F,O=null,j=null,G=n[r],q=i[r];for(a=1;M>a;a++)P=P.next=new t,a==D&&(B=P);for(P.next=F,f=c=0,o=0;L>o;o++){for(_=w=k=x=h=p=d=b=0,m=D*(S=A[c]),g=D*(T=A[c+1]),v=D*(C=A[c+2]),y=D*(E=A[c+3]),h+=K*S,p+=K*T,d+=K*C,b+=K*E,P=F,a=0;D>a;a++)P.r=S,P.g=T,P.b=C,P.a=E,P=P.next;for(a=1;D>a;a++)l=c+((a>I?I:a)<<2),h+=(P.r=S=A[l])*($=D-a),p+=(P.g=T=A[l+1])*$,d+=(P.b=C=A[l+2])*$,b+=(P.a=E=A[l+3])*$,_+=S,w+=T,k+=C,x+=E,P=P.next;for(O=F,j=B,s=0;N>s;s++)A[c+3]=E=b*G>>q,0!==E?(E=255/E,A[c]=(h*G>>q)*E,A[c+1]=(p*G>>q)*E,A[c+2]=(d*G>>q)*E):A[c]=A[c+1]=A[c+2]=0,h-=m,p-=g,d-=v,b-=y,m-=O.r,g-=O.g,v-=O.b,y-=O.a,l=f+((l=s+r+1)<I?l:I)<<2,_+=O.r=A[l],w+=O.g=A[l+1],k+=O.b=A[l+2],x+=O.a=A[l+3],h+=_,p+=w,d+=k,b+=x,O=O.next,m+=S=j.r,g+=T=j.g,v+=C=j.b,y+=E=j.a,_-=S,w-=T,k-=C,x-=E,j=j.next,c+=4;f+=N}for(s=0;N>s;s++){for(w=k=x=_=p=d=b=h=0,c=s<<2,m=D*(S=A[c]),g=D*(T=A[c+1]),v=D*(C=A[c+2]),y=D*(E=A[c+3]),h+=K*S,p+=K*T,d+=K*C,b+=K*E,P=F,a=0;D>a;a++)P.r=S,P.g=T,P.b=C,P.a=E,P=P.next;for(u=N,a=1;r>=a;a++)c=u+s<<2,h+=(P.r=S=A[c])*($=D-a),p+=(P.g=T=A[c+1])*$,d+=(P.b=C=A[c+2])*$,b+=(P.a=E=A[c+3])*$,_+=S,w+=T,k+=C,x+=E,P=P.next,R>a&&(u+=N);for(c=s,O=F,j=B,o=0;L>o;o++)l=c<<2,A[l+3]=E=b*G>>q,E>0?(E=255/E,A[l]=(h*G>>q)*E,A[l+1]=(p*G>>q)*E,A[l+2]=(d*G>>q)*E):A[l]=A[l+1]=A[l+2]=0,h-=m,p-=g,d-=v,b-=y,m-=O.r,g-=O.g,v-=O.b,y-=O.a,l=s+((l=o+D)<R?l:R)*N<<2,h+=_+=O.r=A[l],p+=w+=O.g=A[l+1],d+=k+=O.b=A[l+2],b+=x+=O.a=A[l+3],O=O.next,m+=S=j.r,g+=T=j.g,v+=C=j.b,y+=E=j.a,_-=S,w-=T,k-=C,x-=E,j=j.next,c+=N}}var n=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],i=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];Kinetic.Filters.Blur=function(t){var n=Math.round(this.blurRadius());n>0&&e(t,n)},Kinetic.Factory.addGetterSetter(Kinetic.Node,"blurRadius",0,null,Kinetic.Factory.afterSetFilter)}(),function(){function t(t,e,n){var i=4*(n*t.width+e),r=[];return r.push(t.data[i++],t.data[i++],t.data[i++],t.data[i++]),r}function e(t,e){return Math.sqrt(Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2)+Math.pow(t[2]-e[2],2))}function n(t){for(var e=[0,0,0],n=0;n<t.length;n++)e[0]+=t[n][0],e[1]+=t[n][1],e[2]+=t[n][2];return e[0]/=t.length,e[1]/=t.length,e[2]/=t.length,e}function i(i,r){var s=t(i,0,0),o=t(i,i.width-1,0),a=t(i,0,i.height-1),l=t(i,i.width-1,i.height-1),u=r||10;if(e(s,o)<u&&e(o,l)<u&&e(l,a)<u&&e(a,s)<u){for(var c=n([o,s,l,a]),f=[],h=0;h<i.width*i.height;h++){var p=e(c,[i.data[4*h],i.data[4*h+1],i.data[4*h+2]]);f[h]=u>p?0:255}return f}}function r(t,e){for(var n=0;n<t.width*t.height;n++)t.data[4*n+3]=e[n]}function s(t,e,n){for(var i=[1,1,1,1,0,1,1,1,1],r=Math.round(Math.sqrt(i.length)),s=Math.floor(r/2),o=[],a=0;n>a;a++)for(var l=0;e>l;l++){for(var u=a*e+l,c=0,f=0;r>f;f++)for(var h=0;r>h;h++){var p=a+f-s,d=l+h-s;if(p>=0&&n>p&&d>=0&&e>d){var b=p*e+d,m=i[f*r+h];c+=t[b]*m}}o[u]=2040===c?255:0}return o}function o(t,e,n){for(var i=[1,1,1,1,1,1,1,1,1],r=Math.round(Math.sqrt(i.length)),s=Math.floor(r/2),o=[],a=0;n>a;a++)for(var l=0;e>l;l++){for(var u=a*e+l,c=0,f=0;r>f;f++)for(var h=0;r>h;h++){var p=a+f-s,d=l+h-s;if(p>=0&&n>p&&d>=0&&e>d){var b=p*e+d,m=i[f*r+h];c+=t[b]*m}}o[u]=c>=1020?255:0}return o}function a(t,e,n){for(var i=[1/9,1/9,1/9,1/9,1/9,1/9,1/9,1/9,1/9],r=Math.round(Math.sqrt(i.length)),s=Math.floor(r/2),o=[],a=0;n>a;a++)for(var l=0;e>l;l++){for(var u=a*e+l,c=0,f=0;r>f;f++)for(var h=0;r>h;h++){var p=a+f-s,d=l+h-s;if(p>=0&&n>p&&d>=0&&e>d){var b=p*e+d,m=i[f*r+h];c+=t[b]*m}}o[u]=c}return o}Kinetic.Filters.Mask=function(t){var e=this.threshold(),n=i(t,e);return n&&(n=s(n,t.width,t.height),n=o(n,t.width,t.height),n=a(n,t.width,t.height),r(t,n)),t},Kinetic.Factory.addGetterSetter(Kinetic.Node,"threshold",0,null,Kinetic.Factory.afterSetFilter)}(),function(){Kinetic.Filters.RGB=function(t){var e,n,i=t.data,r=i.length,s=this.red(),o=this.green(),a=this.blue();for(e=0;r>e;e+=4)n=(.34*i[e]+.5*i[e+1]+.16*i[e+2])/255,i[e]=n*s,i[e+1]=n*o,i[e+2]=n*a,i[e+3]=i[e+3]},Kinetic.Factory.addGetterSetter(Kinetic.Node,"red",0,function(t){return this._filterUpToDate=!1,t>255?255:0>t?0:Math.round(t)}),Kinetic.Factory.addGetterSetter(Kinetic.Node,"green",0,function(t){return this._filterUpToDate=!1,t>255?255:0>t?0:Math.round(t)}),Kinetic.Factory.addGetterSetter(Kinetic.Node,"blue",0,Kinetic.Validators.RGBComponent,Kinetic.Factory.afterSetFilter)}(),function(){Kinetic.Filters.HSV=function(t){var e,n,i,r,s,o=t.data,a=o.length,l=Math.pow(2,this.value()),u=Math.pow(2,this.saturation()),c=Math.abs(this.hue()+360)%360,f=l*u*Math.cos(c*Math.PI/180),h=l*u*Math.sin(c*Math.PI/180),p=.299*l+.701*f+.167*h,d=.587*l-.587*f+.33*h,b=.114*l-.114*f-.497*h,m=.299*l-.299*f-.328*h,g=.587*l+.413*f+.035*h,v=.114*l-.114*f+.293*h,y=.299*l-.3*f+1.25*h,_=.587*l-.586*f-1.05*h,w=.114*l+.886*f-.2*h;for(e=0;a>e;e+=4)n=o[e+0],i=o[e+1],r=o[e+2],s=o[e+3],o[e+0]=p*n+d*i+b*r,o[e+1]=m*n+g*i+v*r,o[e+2]=y*n+_*i+w*r,o[e+3]=s},Kinetic.Factory.addGetterSetter(Kinetic.Node,"hue",0,null,Kinetic.Factory.afterSetFilter),Kinetic.Factory.addGetterSetter(Kinetic.Node,"saturation",0,null,Kinetic.Factory.afterSetFilter),Kinetic.Factory.addGetterSetter(Kinetic.Node,"value",0,null,Kinetic.Factory.afterSetFilter)}(),function(){Kinetic.Factory.addGetterSetter(Kinetic.Node,"hue",0,null,Kinetic.Factory.afterSetFilter),Kinetic.Factory.addGetterSetter(Kinetic.Node,"saturation",0,null,Kinetic.Factory.afterSetFilter),Kinetic.Factory.addGetterSetter(Kinetic.Node,"luminance",0,null,Kinetic.Factory.afterSetFilter),Kinetic.Filters.HSL=function(t){var e,n,i,r,s,o=t.data,a=o.length,l=1,u=Math.pow(2,this.saturation()),c=Math.abs(this.hue()+360)%360,f=127*this.luminance(),h=l*u*Math.cos(c*Math.PI/180),p=l*u*Math.sin(c*Math.PI/180),d=.299*l+.701*h+.167*p,b=.587*l-.587*h+.33*p,m=.114*l-.114*h-.497*p,g=.299*l-.299*h-.328*p,v=.587*l+.413*h+.035*p,y=.114*l-.114*h+.293*p,_=.299*l-.3*h+1.25*p,w=.587*l-.586*h-1.05*p,k=.114*l+.886*h-.2*p;for(e=0;a>e;e+=4)n=o[e+0],i=o[e+1],r=o[e+2],s=o[e+3],o[e+0]=d*n+b*i+m*r+f,o[e+1]=g*n+v*i+y*r+f,o[e+2]=_*n+w*i+k*r+f,o[e+3]=s}}(),function(){Kinetic.Filters.Emboss=function(t){var e=10*this.embossStrength(),n=255*this.embossWhiteLevel(),i=this.embossDirection(),r=this.embossBlend(),s=0,o=0,a=t.data,l=t.width,u=t.height,c=4*l,f=u;switch(i){case"top-left":s=-1,o=-1;break;case"top":s=-1,o=0;break;case"top-right":s=-1,o=1;break;case"right":s=0,o=1;break;case"bottom-right":s=1,o=1;break;case"bottom":s=1,o=0;break;case"bottom-left":s=1,o=-1;break;case"left":s=0,o=-1}do{var h=(f-1)*c,p=s;1>f+p&&(p=0),f+p>u&&(p=0);var d=(f-1+p)*l*4,b=l;do{var m=h+4*(b-1),g=o;1>b+g&&(g=0),b+g>l&&(g=0);var v=d+4*(b-1+g),y=a[m]-a[v],_=a[m+1]-a[v+1],w=a[m+2]-a[v+2],k=y,x=k>0?k:-k,S=_>0?_:-_,T=w>0?w:-w;if(S>x&&(k=_),T>x&&(k=w),k*=e,r){var C=a[m]+k,E=a[m+1]+k,$=a[m+2]+k;a[m]=C>255?255:0>C?0:C,a[m+1]=E>255?255:0>E?0:E,a[m+2]=$>255?255:0>$?0:$}else{var A=n-k;0>A?A=0:A>255&&(A=255),a[m]=a[m+1]=a[m+2]=A}}while(--b)}while(--f)},Kinetic.Factory.addGetterSetter(Kinetic.Node,"embossStrength",.5,null,Kinetic.Factory.afterSetFilter),Kinetic.Factory.addGetterSetter(Kinetic.Node,"embossWhiteLevel",.5,null,Kinetic.Factory.afterSetFilter),Kinetic.Factory.addGetterSetter(Kinetic.Node,"embossDirection","top-left",null,Kinetic.Factory.afterSetFilter),Kinetic.Factory.addGetterSetter(Kinetic.Node,"embossBlend",!1,null,Kinetic.Factory.afterSetFilter)}(),function(){function t(t,e,n,i,r){var s,o=n-e,a=r-i;return 0===o?i+a/2:0===a?i:(s=(t-e)/o,s=a*s+i)}Kinetic.Filters.Enhance=function(e){var n,i,r,s,o=e.data,a=o.length,l=o[0],u=l,c=o[1],f=c,h=o[2],p=h,d=o[3],b=d,m=this.enhance();if(0!==m){for(s=0;a>s;s+=4)n=o[s+0],l>n?l=n:n>u&&(u=n),i=o[s+1],c>i?c=i:i>f&&(f=i),r=o[s+2],h>r?h=r:r>p&&(p=r);u===l&&(u=255,l=0),f===c&&(f=255,c=0),p===h&&(p=255,h=0),b===d&&(b=255,d=0);var g,v,y,_,w,k,x,S,T,C,E,$;for(m>0?(v=u+m*(255-u),y=l-m*(l-0),w=f+m*(255-f),k=c-m*(c-0),S=p+m*(255-p),$=h-m*(h-0),E=b+m*(255-b),T=d-m*(d-0)):(g=.5*(u+l),v=u+m*(u-g),y=l+m*(l-g),_=.5*(f+c),w=f+m*(f-_),k=c+m*(c-_),x=.5*(p+h),S=p+m*(p-x),$=h+m*(h-x),C=.5*(b+d),E=b+m*(b-C),T=d+m*(d-C)),s=0;a>s;s+=4)o[s+0]=t(o[s+0],l,u,y,v),o[s+1]=t(o[s+1],c,f,k,w),o[s+2]=t(o[s+2],h,p,$,S)}},Kinetic.Factory.addGetterSetter(Kinetic.Node,"enhance",0,null,Kinetic.Factory.afterSetFilter)}(),function(){Kinetic.Filters.Posterize=function(t){var e,n=Math.round(254*this.levels())+1,i=t.data,r=i.length,s=255/n;for(e=0;r>e;e+=1)i[e]=Math.floor(i[e]/s)*s},Kinetic.Factory.addGetterSetter(Kinetic.Node,"levels",.5,null,Kinetic.Factory.afterSetFilter)}(),function(){Kinetic.Filters.Noise=function(t){var e,n=255*this.noise(),i=t.data,r=i.length,s=n/2;for(e=0;r>e;e+=4)i[e+0]+=s-2*s*Math.random(),i[e+1]+=s-2*s*Math.random(),i[e+2]+=s-2*s*Math.random()},Kinetic.Factory.addGetterSetter(Kinetic.Node,"noise",.2,null,Kinetic.Factory.afterSetFilter)}(),function(){Kinetic.Filters.Pixelate=function(t){var e,n,i,r,s,o,a,l,u,c,f,h,p,d,b=Math.ceil(this.pixelSize()),m=t.width,g=t.height,v=Math.ceil(m/b),y=Math.ceil(g/b);for(t=t.data,h=0;v>h;h+=1)for(p=0;y>p;p+=1){for(r=0,s=0,o=0,a=0,l=h*b,u=l+b,c=p*b,f=c+b,d=0,e=l;u>e;e+=1)if(!(e>=m))for(n=c;f>n;n+=1)n>=g||(i=4*(m*n+e),r+=t[i+0],s+=t[i+1],o+=t[i+2],a+=t[i+3],d+=1);for(r/=d,s/=d,o/=d,e=l;u>e;e+=1)if(!(e>=m))for(n=c;f>n;n+=1)n>=g||(i=4*(m*n+e),t[i+0]=r,t[i+1]=s,t[i+2]=o,t[i+3]=a)}},Kinetic.Factory.addGetterSetter(Kinetic.Node,"pixelSize",8,null,Kinetic.Factory.afterSetFilter)}(),function(){Kinetic.Filters.Threshold=function(t){var e,n=255*this.threshold(),i=t.data,r=i.length;for(e=0;r>e;e+=1)i[e]=i[e]<n?0:255},Kinetic.Factory.addGetterSetter(Kinetic.Node,"threshold",.5,null,Kinetic.Factory.afterSetFilter)}(),function(){Kinetic.Filters.Sepia=function(t){var e,n,i,r,s,o,a,l,u,c=t.data,f=t.width,h=t.height,p=4*f;do{e=(h-1)*p,n=f;do i=e+4*(n-1),r=c[i],s=c[i+1],o=c[i+2],a=.393*r+.769*s+.189*o,l=.349*r+.686*s+.168*o,u=.272*r+.534*s+.131*o,c[i]=a>255?255:a,c[i+1]=l>255?255:l,c[i+2]=u>255?255:u,c[i+3]=c[i+3];while(--n)}while(--h)}}(),function(){Kinetic.Filters.Solarize=function(t){var e=t.data,n=t.width,i=t.height,r=4*n,s=i;do{var o=(s-1)*r,a=n;do{var l=o+4*(a-1),u=e[l],c=e[l+1],f=e[l+2];u>127&&(u=255-u),c>127&&(c=255-c),f>127&&(f=255-f),e[l]=u,e[l+1]=c,e[l+2]=f}while(--a)}while(--s)}}(),function(){var t=function(t,e,n){var i,r,s,o,a=t.data,l=e.data,u=t.width,c=t.height,f=n.polarCenterX||u/2,h=n.polarCenterY||c/2,p=0,d=0,b=0,m=0,g=Math.sqrt(f*f+h*h);r=u-f,s=c-h,o=Math.sqrt(r*r+s*s),g=o>g?o:g;var v,y,_,w,k=c,x=u,S=360/x*Math.PI/180;for(y=0;x>y;y+=1)for(_=Math.sin(y*S),w=Math.cos(y*S),v=0;k>v;v+=1)r=Math.floor(f+g*v/k*w),s=Math.floor(h+g*v/k*_),i=4*(s*u+r),p=a[i+0],d=a[i+1],b=a[i+2],m=a[i+3],i=4*(y+v*u),l[i+0]=p,l[i+1]=d,l[i+2]=b,l[i+3]=m},e=function(t,e,n){var i,r,s,o,a,l,u=t.data,c=e.data,f=t.width,h=t.height,p=n.polarCenterX||f/2,d=n.polarCenterY||h/2,b=0,m=0,g=0,v=0,y=Math.sqrt(p*p+d*d);r=f-p,s=h-d,l=Math.sqrt(r*r+s*s),y=l>y?l:y;var _,w,k,x,S=h,T=f,C=n.polarRotation||0;for(r=0;f>r;r+=1)for(s=0;h>s;s+=1)o=r-p,a=s-d,_=Math.sqrt(o*o+a*a)*S/y,w=(180*Math.atan2(a,o)/Math.PI+360+C)%360,w=w*T/360,k=Math.floor(w),x=Math.floor(_),i=4*(x*f+k),b=u[i+0],m=u[i+1],g=u[i+2],v=u[i+3],i=4*(s*f+r),c[i+0]=b,c[i+1]=m,c[i+2]=g,c[i+3]=v},n=Kinetic.Util.createCanvasElement();Kinetic.Filters.Kaleidoscope=function(i){var r,s,o,a,l,u,c,f,h,p,d=i.width,b=i.height,m=Math.round(this.kaleidoscopePower()),g=Math.round(this.kaleidoscopeAngle()),v=Math.floor(d*(g%360)/360);if(!(1>m)){n.width=d,n.height=b;var y=n.getContext("2d").getImageData(0,0,d,b);t(i,y,{polarCenterX:d/2,polarCenterY:b/2});for(var _=d/Math.pow(2,m);8>=_;)_=2*_,m-=1;_=Math.ceil(_);var w=_,k=0,x=w,S=1;for(v+_>d&&(k=w,x=0,S=-1),s=0;b>s;s+=1)for(r=k;r!==x;r+=S)o=Math.round(r+v)%d,h=4*(d*s+o),l=y.data[h+0],u=y.data[h+1],c=y.data[h+2],f=y.data[h+3],p=4*(d*s+r),y.data[p+0]=l,y.data[p+1]=u,y.data[p+2]=c,y.data[p+3]=f;for(s=0;b>s;s+=1)for(w=Math.floor(_),a=0;m>a;a+=1){for(r=0;w+1>r;r+=1)h=4*(d*s+r),l=y.data[h+0],u=y.data[h+1],c=y.data[h+2],f=y.data[h+3],p=4*(d*s+2*w-r-1),y.data[p+0]=l,y.data[p+1]=u,y.data[p+2]=c,y.data[p+3]=f;w*=2}e(y,i,{polarRotation:0})}},Kinetic.Factory.addGetterSetter(Kinetic.Node,"kaleidoscopePower",2,null,Kinetic.Factory.afterSetFilter),Kinetic.Factory.addGetterSetter(Kinetic.Node,"kaleidoscopeAngle",0,null,Kinetic.Factory.afterSetFilter)}(),function(){function t(t){Kinetic.root.setTimeout(t,1e3/60)}function e(){return r.apply(Kinetic.root,arguments)}var n=500,i=function(){return Kinetic.root.performance&&Kinetic.root.performance.now?function(){return Kinetic.root.performance.now()}:function(){return(new Date).getTime()}}(),r=function(){return Kinetic.root.requestAnimationFrame||Kinetic.root.webkitRequestAnimationFrame||Kinetic.root.mozRequestAnimationFrame||Kinetic.root.oRequestAnimationFrame||Kinetic.root.msRequestAnimationFrame||t}();Kinetic.Animation=function(t,e){var n=Kinetic.Animation;this.func=t,this.setLayers(e),this.id=n.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:i()}},Kinetic.Animation.prototype={setLayers:function(t){var e=[];e=t?t.length>0?t:[t]:[],this.layers=e},getLayers:function(){return this.layers},addLayer:function(t){var e,n,i=this.layers;if(i){for(e=i.length,n=0;e>n;n++)if(i[n]._id===t._id)return!1}else this.layers=[];return this.layers.push(t),!0},isRunning:function(){var t,e=Kinetic.Animation,n=e.animations,i=n.length;for(t=0;i>t;t++)if(n[t].id===this.id)return!0;return!1},start:function(){var t=Kinetic.Animation;this.stop(),this.frame.timeDiff=0,this.frame.lastTime=i(),t._addAnimation(this)},stop:function(){Kinetic.Animation._removeAnimation(this)},_updateFrameObject:function(t){this.frame.timeDiff=t-this.frame.lastTime,this.frame.lastTime=t,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff}},Kinetic.Animation.animations=[],Kinetic.Animation.animIdCounter=0,Kinetic.Animation.animRunning=!1,Kinetic.Animation._addAnimation=function(t){this.animations.push(t),this._handleAnimation()},Kinetic.Animation._removeAnimation=function(t){var e,n=t.id,i=this.animations,r=i.length;for(e=0;r>e;e++)if(i[e].id===n){this.animations.splice(e,1);break}},Kinetic.Animation._runFrames=function(){var t,e,n,r,s,o,a,l,u={},c=this.animations;for(r=0;r<c.length;r++){for(t=c[r],e=t.layers,n=t.func,t._updateFrameObject(i()),o=e.length,s=0;o>s;s++)a=e[s],void 0!==a._id&&(u[a._id]=a);n&&n.call(t,t.frame)}for(l in u)u[l].draw()},Kinetic.Animation._animationLoop=function(){var t=Kinetic.Animation;t.animations.length?(e(t._animationLoop),t._runFrames()):t.animRunning=!1},Kinetic.Animation._handleAnimation=function(){var t=this;this.animRunning||(this.animRunning=!0,t._animationLoop())};var s=Kinetic.Node.prototype.moveTo;Kinetic.Node.prototype.moveTo=function(t){s.call(this,t)},Kinetic.Layer.prototype.batchDraw=function(){var t=this,e=Kinetic.Animation;this.batchAnim||(this.batchAnim=new e(function(){t.lastBatchDrawTime&&i()-t.lastBatchDrawTime>n&&t.batchAnim.stop()},this)),this.lastBatchDrawTime=i(),this.batchAnim.isRunning()||(this.draw(),this.batchAnim.start())},Kinetic.Stage.prototype.batchDraw=function(){this.getChildren().each(function(t){t.batchDraw()})}}((1,eval)("this")),function(){var t={node:1,duration:1,easing:1,onFinish:1,yoyo:1},e=1,n=2,i=3,r=0;Kinetic.Tween=function(e){var n,i=this,o=e.node,a=o._id,l=e.duration||1,u=e.easing||Kinetic.Easings.Linear,c=!!e.yoyo;this.node=o,this._id=r++,this.anim=new Kinetic.Animation(function(){i.tween.onEnterFrame()},o.getLayer()),this.tween=new s(n,function(t){i._tweenFunc(t)},u,0,1,1e3*l,c),this._addListeners(),Kinetic.Tween.attrs[a]||(Kinetic.Tween.attrs[a]={}),Kinetic.Tween.attrs[a][this._id]||(Kinetic.Tween.attrs[a][this._id]={}),Kinetic.Tween.tweens[a]||(Kinetic.Tween.tweens[a]={});for(n in e)void 0===t[n]&&this._addAttr(n,e[n]);this.reset(),this.onFinish=e.onFinish,this.onReset=e.onReset},Kinetic.Tween.attrs={},Kinetic.Tween.tweens={},Kinetic.Tween.prototype={_addAttr:function(t,e){var n,i,r,s,o,a=this.node,l=a._id;if(r=Kinetic.Tween.tweens[l][t],r&&delete Kinetic.Tween.attrs[l][r][t],n=a.getAttr(t),Kinetic.Util._isArray(e))for(i=[],o=e.length,s=0;o>s;s++)i.push(e[s]-n[s]);else i=e-n;Kinetic.Tween.attrs[l][this._id][t]={start:n,diff:i},Kinetic.Tween.tweens[l][t]=this._id},_tweenFunc:function(t){var e,n,i,r,s,o,a,l=this.node,u=Kinetic.Tween.attrs[l._id][this._id];for(e in u){if(n=u[e],i=n.start,r=n.diff,Kinetic.Util._isArray(i))for(s=[],a=i.length,o=0;a>o;o++)s.push(i[o]+r[o]*t);else s=i+r*t;l.setAttr(e,s)}},_addListeners:function(){var t=this;this.tween.onPlay=function(){t.anim.start()},this.tween.onReverse=function(){t.anim.start()},this.tween.onPause=function(){t.anim.stop()},this.tween.onFinish=function(){t.onFinish&&t.onFinish()},this.tween.onReset=function(){t.onReset&&t.onReset()}},play:function(){return this.tween.play(),this},reverse:function(){return this.tween.reverse(),this},reset:function(){return this.node,this.tween.reset(),this},seek:function(t){return this.node,this.tween.seek(1e3*t),this},pause:function(){return this.tween.pause(),this},finish:function(){return this.node,this.tween.finish(),this},destroy:function(){var t,e=this.node._id,n=this._id,i=Kinetic.Tween.tweens[e];this.pause();for(t in i)delete Kinetic.Tween.tweens[e][t];delete Kinetic.Tween.attrs[e][n]}};var s=function(t,e,n,i,r,s,o){this.prop=t,this.propFunc=e,this.begin=i,this._pos=i,this.duration=s,this._change=0,this.prevPos=0,this.yoyo=o,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.func=n,this._change=r-this.begin,this.pause()};s.prototype={fire:function(t){var e=this[t];e&&e()},setTime:function(t){t>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():0>t?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=t,this.update())},getTime:function(){return this._time},setPosition:function(t){this.prevPos=this._pos,this.propFunc(t),this._pos=t},getPosition:function(t){return void 0===t&&(t=this._time),this.func(t,this.begin,this._change,this.duration)},play:function(){this.state=n,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onPlay")},reverse:function(){this.state=i,this._time=this.duration-this._time,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onReverse")},seek:function(t){this.pause(),this._time=t,this.update(),this.fire("onSeek")},reset:function(){this.pause(),this._time=0,this.update(),this.fire("onReset")},finish:function(){this.pause(),this._time=this.duration,this.update(),this.fire("onFinish")},update:function(){this.setPosition(this.getPosition(this._time))},onEnterFrame:function(){var t=this.getTimer()-this._startTime;this.state===n?this.setTime(t):this.state===i&&this.setTime(this.duration-t)},pause:function(){this.state=e,this.fire("onPause")},getTimer:function(){return(new Date).getTime()}},Kinetic.Easings={BackEaseIn:function(t,e,n,i){var r=1.70158;return n*(t/=i)*t*((r+1)*t-r)+e},BackEaseOut:function(t,e,n,i){var r=1.70158;return n*((t=t/i-1)*t*((r+1)*t+r)+1)+e},BackEaseInOut:function(t,e,n,i){var r=1.70158;return(t/=i/2)<1?n/2*t*t*(((r*=1.525)+1)*t-r)+e:n/2*((t-=2)*t*(((r*=1.525)+1)*t+r)+2)+e},ElasticEaseIn:function(t,e,n,i,r,s){var o=0;return 0===t?e:1==(t/=i)?e+n:(s||(s=.3*i),!r||r<Math.abs(n)?(r=n,o=s/4):o=s/(2*Math.PI)*Math.asin(n/r),-(r*Math.pow(2,10*(t-=1))*Math.sin(2*(t*i-o)*Math.PI/s))+e)},ElasticEaseOut:function(t,e,n,i,r,s){var o=0;return 0===t?e:1==(t/=i)?e+n:(s||(s=.3*i),!r||r<Math.abs(n)?(r=n,o=s/4):o=s/(2*Math.PI)*Math.asin(n/r),r*Math.pow(2,-10*t)*Math.sin(2*(t*i-o)*Math.PI/s)+n+e)},ElasticEaseInOut:function(t,e,n,i,r,s){var o=0;return 0===t?e:2==(t/=i/2)?e+n:(s||(s=.3*i*1.5),!r||r<Math.abs(n)?(r=n,o=s/4):o=s/(2*Math.PI)*Math.asin(n/r),1>t?-.5*r*Math.pow(2,10*(t-=1))*Math.sin(2*(t*i-o)*Math.PI/s)+e:r*Math.pow(2,-10*(t-=1))*Math.sin(2*(t*i-o)*Math.PI/s)*.5+n+e)},BounceEaseOut:function(t,e,n,i){return(t/=i)<1/2.75?7.5625*n*t*t+e:2/2.75>t?n*(7.5625*(t-=1.5/2.75)*t+.75)+e:2.5/2.75>t?n*(7.5625*(t-=2.25/2.75)*t+.9375)+e:n*(7.5625*(t-=2.625/2.75)*t+.984375)+e},BounceEaseIn:function(t,e,n,i){return n-Kinetic.Easings.BounceEaseOut(i-t,0,n,i)+e},BounceEaseInOut:function(t,e,n,i){return i/2>t?.5*Kinetic.Easings.BounceEaseIn(2*t,0,n,i)+e:.5*Kinetic.Easings.BounceEaseOut(2*t-i,0,n,i)+.5*n+e},EaseIn:function(t,e,n,i){return n*(t/=i)*t+e},EaseOut:function(t,e,n,i){return-n*(t/=i)*(t-2)+e},EaseInOut:function(t,e,n,i){return(t/=i/2)<1?n/2*t*t+e:-n/2*(--t*(t-2)-1)+e},StrongEaseIn:function(t,e,n,i){return n*(t/=i)*t*t*t*t+e},StrongEaseOut:function(t,e,n,i){return n*((t=t/i-1)*t*t*t*t+1)+e},StrongEaseInOut:function(t,e,n,i){return(t/=i/2)<1?n/2*t*t*t*t*t+e:n/2*((t-=2)*t*t*t*t+2)+e},Linear:function(t,e,n,i){return n*t/i+e}}}(),function(){Kinetic.DD={anim:new Kinetic.Animation,isDragging:!1,offset:{x:0,y:0},node:null,_drag:function(t){var e=Kinetic.DD,n=e.node;if(n){if(!e.isDragging){var i=n.getStage().getPointerPosition(),r=n.dragDistance(),s=Math.max(Math.abs(i.x-e.startPointerPos.x),Math.abs(i.y-e.startPointerPos.y));if(r>s)return}n._setDragPosition(t),e.isDragging||(e.isDragging=!0,n.fire("dragstart",{type:"dragstart",target:n,evt:t},!0)),n.fire("dragmove",{type:"dragmove",target:n,evt:t},!0)}},_endDragBefore:function(t){var e,n,i=Kinetic.DD,r=i.node;r&&(e=r.nodeType,n=r.getLayer(),i.anim.stop(),i.isDragging&&(i.isDragging=!1,Kinetic.listenClickTap=!1,t&&(t.dragEndNode=r)),delete i.node,(n||r).draw())},_endDragAfter:function(t){t=t||{};var e=t.dragEndNode;t&&e&&e.fire("dragend",{type:"dragend",target:e,evt:t},!0)}},Kinetic.Node.prototype.startDrag=function(){var t=Kinetic.DD,e=this.getStage(),n=this.getLayer(),i=e.getPointerPosition(),r=this.getAbsolutePosition();i&&(t.node&&t.node.stopDrag(),t.node=this,t.startPointerPos=i,t.offset.x=i.x-r.x,t.offset.y=i.y-r.y,t.anim.setLayers(n||this.getLayers()),t.anim.start(),this._setDragPosition())},Kinetic.Node.prototype._setDragPosition=function(t){var e=Kinetic.DD,n=this.getStage().getPointerPosition(),i=this.getDragBoundFunc();if(n){var r={x:n.x-e.offset.x,y:n.y-e.offset.y};void 0!==i&&(r=i.call(this,r,t)),this.setAbsolutePosition(r)}},Kinetic.Node.prototype.stopDrag=function(){var t=Kinetic.DD,e={};t._endDragBefore(e),t._endDragAfter(e)},Kinetic.Node.prototype.setDraggable=function(t){this._setAttr("draggable",t),this._dragChange()};var t=Kinetic.Node.prototype.destroy;Kinetic.Node.prototype.destroy=function(){var e=Kinetic.DD;e.node&&e.node._id===this._id&&this.stopDrag(),t.call(this)},Kinetic.Node.prototype.isDragging=function(){var t=Kinetic.DD;return t.node&&t.node._id===this._id&&t.isDragging},Kinetic.Node.prototype._listenDrag=function(){var t=this;this._dragCleanup(),"Stage"===this.getClassName()?this.on("contentMousedown.kinetic contentTouchstart.kinetic",function(e){Kinetic.DD.node||t.startDrag(e)}):this.on("mousedown.kinetic touchstart.kinetic",function(e){Kinetic.DD.node||t.startDrag(e)})},Kinetic.Node.prototype._dragChange=function(){if(this.attrs.draggable)this._listenDrag();else{this._dragCleanup();var t=this.getStage(),e=Kinetic.DD;t&&e.node&&e.node._id===this._id&&e.node.stopDrag()}},Kinetic.Node.prototype._dragCleanup=function(){"Stage"===this.getClassName()?(this.off("contentMousedown.kinetic"),this.off("contentTouchstart.kinetic")):(this.off("mousedown.kinetic"),this.off("touchstart.kinetic"))},Kinetic.Factory.addGetterSetter(Kinetic.Node,"dragBoundFunc"),Kinetic.Factory.addGetter(Kinetic.Node,"draggable",!1),Kinetic.Factory.addOverloadedGetterSetter(Kinetic.Node,"draggable");var e=Kinetic.document.documentElement;e.addEventListener("mouseup",Kinetic.DD._endDragBefore,!0),e.addEventListener("touchend",Kinetic.DD._endDragBefore,!0),e.addEventListener("mouseup",Kinetic.DD._endDragAfter,!1),e.addEventListener("touchend",Kinetic.DD._endDragAfter,!1)}(),function(){Kinetic.Util.addMethods(Kinetic.Container,{__init:function(t){this.children=new Kinetic.Collection,Kinetic.Node.call(this,t)},getChildren:function(t){if(t){var e=new Kinetic.Collection;return this.children.each(function(n){t(n)&&e.push(n)}),e}return this.children},hasChildren:function(){return this.getChildren().length>0},removeChildren:function(){for(var t,e=Kinetic.Collection.toCollection(this.children),n=0;n<e.length;n++)t=e[n],delete t.parent,t.index=0,t.hasChildren()&&t.removeChildren(),t.remove();return e=null,this.children=new Kinetic.Collection,this},destroyChildren:function(){for(var t,e=Kinetic.Collection.toCollection(this.children),n=0;n<e.length;n++)t=e[n],delete t.parent,t.index=0,t.destroy();return e=null,this.children=new Kinetic.Collection,this},add:function(t){if(!(arguments.length>1)){if(t.getParent())return void t.moveTo(this);var e=this.children;return this._validateAdd(t),t.index=e.length,t.parent=this,e.push(t),this._fire("add",{child:t}),this}for(var n=0;n<arguments.length;n++)this.add(arguments[n])},destroy:function(){this.hasChildren()&&this.destroyChildren(),Kinetic.Node.prototype.destroy.call(this)},find:function(t){var e,n,i,r,s,o,a,l=[],u=t.replace(/ /g,"").split(","),c=u.length;for(e=0;c>e;e++)if(i=u[e],"#"===i.charAt(0))s=this._getNodeById(i.slice(1)),s&&l.push(s);else if("."===i.charAt(0))r=this._getNodesByName(i.slice(1)),l=l.concat(r);else for(o=this.getChildren(),a=o.length,n=0;a>n;n++)l=l.concat(o[n]._get(i));return Kinetic.Collection.toCollection(l)},_getNodeById:function(t){var e=Kinetic.ids[t];return void 0!==e&&this.isAncestorOf(e)?e:null},_getNodesByName:function(t){var e=Kinetic.names[t]||[];return this._getDescendants(e)},_get:function(t){for(var e=Kinetic.Node.prototype._get.call(this,t),n=this.getChildren(),i=n.length,r=0;i>r;r++)e=e.concat(n[r]._get(t));return e},toObject:function(){var t=Kinetic.Node.prototype.toObject.call(this);t.children=[];for(var e=this.getChildren(),n=e.length,i=0;n>i;i++){var r=e[i];t.children.push(r.toObject())}return t},_getDescendants:function(t){for(var e=[],n=t.length,i=0;n>i;i++){var r=t[i];this.isAncestorOf(r)&&e.push(r)}return e},isAncestorOf:function(t){for(var e=t.getParent();e;){if(e._id===this._id)return!0;e=e.getParent()}return!1},clone:function(t){var e=Kinetic.Node.prototype.clone.call(this,t);return this.getChildren().each(function(t){e.add(t.clone())}),e},getAllIntersections:function(t){var e=[];return this.find("Shape").each(function(n){n.isVisible()&&n.intersects(t)&&e.push(n)}),e},_setChildrenIndices:function(){this.children.each(function(t,e){t.index=e})},drawScene:function(t,e){var n=this.getLayer(),i=t||n&&n.getCanvas(),r=i&&i.getContext(),s=this._cache.canvas,o=s&&s.scene;return this.isVisible()&&(o?this._drawCachedSceneCanvas(r):this._drawChildren(i,"drawScene",e)),this},drawHit:function(t,e){var n=this.getLayer(),i=t||n&&n.hitCanvas,r=i&&i.getContext(),s=this._cache.canvas,o=s&&s.hit;return this.shouldDrawHit()&&(o?this._drawCachedHitCanvas(r):this._drawChildren(i,"drawHit",e)),this},_drawChildren:function(t,e,n){var i,r,s=this.getLayer(),o=t&&t.getContext(),a=this.getClipWidth(),l=this.getClipHeight(),u=a&&l;u&&s&&(i=this.getClipX(),r=this.getClipY(),o.save(),s._applyTransform(this,o),o.beginPath(),o.rect(i,r,a,l),o.clip(),o.reset()),this.children.each(function(i){i[e](t,n)}),u&&o.restore()}}),Kinetic.Util.extend(Kinetic.Container,Kinetic.Node),Kinetic.Container.prototype.get=Kinetic.Container.prototype.find,Kinetic.Factory.addComponentsGetterSetter(Kinetic.Container,"clip",["x","y","width","height"]),Kinetic.Factory.addGetterSetter(Kinetic.Container,"clipX"),Kinetic.Factory.addGetterSetter(Kinetic.Container,"clipY"),Kinetic.Factory.addGetterSetter(Kinetic.Container,"clipWidth"),Kinetic.Factory.addGetterSetter(Kinetic.Container,"clipHeight"),Kinetic.Collection.mapMethods(Kinetic.Container)}(),function(){function t(t){t.fill()}function e(t){t.stroke()}function n(t){t.fill()}function i(t){t.stroke()}function r(){this._clearCache(s)}var s="hasShadow";Kinetic.Util.addMethods(Kinetic.Shape,{__init:function(s){this.nodeType="Shape",this._fillFunc=t,this._strokeFunc=e,this._fillFuncHit=n,this._strokeFuncHit=i;for(var o,a=Kinetic.shapes;o=Kinetic.Util.getRandomColor(),!o||o in a;);this.colorKey=o,a[o]=this,Kinetic.Node.call(this,s),this.on("shadowColorChange.kinetic shadowBlurChange.kinetic shadowOffsetChange.kinetic shadowOpacityChange.kinetic shadowEnabledChange.kinetic",r)
},hasChildren:function(){return!1},getChildren:function(){return[]},getContext:function(){return this.getLayer().getContext()},getCanvas:function(){return this.getLayer().getCanvas()},hasShadow:function(){return this._getCache(s,this._hasShadow)},_hasShadow:function(){return this.getShadowEnabled()&&0!==this.getShadowOpacity()&&!!(this.getShadowColor()||this.getShadowBlur()||this.getShadowOffsetX()||this.getShadowOffsetY())},hasFill:function(){return!!(this.getFill()||this.getFillPatternImage()||this.getFillLinearGradientColorStops()||this.getFillRadialGradientColorStops())},hasStroke:function(){return!!(this.stroke()||this.strokeRed()||this.strokeGreen()||this.strokeBlue())},_get:function(t){return this.className===t||this.nodeType===t?[this]:[]},intersects:function(t){var e,n=this.getStage(),i=n.bufferHitCanvas;return i.getContext().clear(),this.drawScene(i),e=i.context.getImageData(Math.round(t.x),Math.round(t.y),1,1).data,e[3]>0},destroy:function(){Kinetic.Node.prototype.destroy.call(this),delete Kinetic.shapes[this.colorKey]},_useBufferCanvas:function(){return(this.hasShadow()||1!==this.getAbsoluteOpacity())&&this.hasFill()&&this.hasStroke()&&this.getStage()},drawScene:function(t,e){var n,i,r,s=this.getLayer(),o=t||s.getCanvas(),a=o.getContext(),l=this._cache.canvas,u=this.sceneFunc(),c=this.hasShadow();return this.isVisible()&&(l?this._drawCachedSceneCanvas(a):u&&(a.save(),this._useBufferCanvas()?(n=this.getStage(),i=n.bufferCanvas,r=i.getContext(),r.clear(),r.save(),r._applyLineJoin(this),s._applyTransform(this,r,e),u.call(this,r),r.restore(),c&&(a.save(),a._applyShadow(this),a.drawImage(i._canvas,0,0),a.restore()),a._applyOpacity(this),a.drawImage(i._canvas,0,0)):(a._applyLineJoin(this),s._applyTransform(this,a,e),c&&(a.save(),a._applyShadow(this),u.call(this,a),a.restore()),a._applyOpacity(this),u.call(this,a)),a.restore())),this},drawHit:function(t,e){var n=this.getLayer(),i=t||n.hitCanvas,r=i.getContext(),s=this.hitFunc()||this.sceneFunc(),o=this._cache.canvas,a=o&&o.hit;return this.shouldDrawHit()&&(a?this._drawCachedHitCanvas(r):s&&(r.save(),r._applyLineJoin(this),n._applyTransform(this,r,e),s.call(this,r),r.restore())),this},drawHitFromCache:function(t){var e,n,i,r,s,o,a,l,u=t||0,c=this._cache.canvas,f=this._getCachedSceneCanvas(),h=f.getContext(),p=c.hit,d=p.getContext(),b=f.getWidth(),m=f.getHeight();d.clear();try{for(e=h.getImageData(0,0,b,m),n=e.data,i=d.getImageData(0,0,b,m),r=i.data,s=n.length,o=Kinetic.Util._hexToRgb(this.colorKey),a=0;s>a;a+=4)l=n[a+3],l>u&&(r[a]=o.r,r[a+1]=o.g,r[a+2]=o.b,r[a+3]=255);d.putImageData(i,0,0)}catch(g){Kinetic.Util.warn("Unable to draw hit graph from cached scene canvas. "+g.message)}return this}}),Kinetic.Util.extend(Kinetic.Shape,Kinetic.Node),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"stroke"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"strokeRed",0,Kinetic.Validators.RGBComponent),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"strokeGreen",0,Kinetic.Validators.RGBComponent),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"strokeBlue",0,Kinetic.Validators.RGBComponent),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"strokeAlpha",1,Kinetic.Validators.alphaComponent),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"strokeWidth",2),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"lineJoin"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"lineCap"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"sceneFunc"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"hitFunc"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"dash"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"shadowColor"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"shadowRed",0,Kinetic.Validators.RGBComponent),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"shadowGreen",0,Kinetic.Validators.RGBComponent),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"shadowBlue",0,Kinetic.Validators.RGBComponent),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"shadowAlpha",1,Kinetic.Validators.alphaComponent),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"shadowBlur"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"shadowOpacity"),Kinetic.Factory.addComponentsGetterSetter(Kinetic.Shape,"shadowOffset",["x","y"]),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"shadowOffsetX",0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"shadowOffsetY",0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillPatternImage"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fill"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillRed",0,Kinetic.Validators.RGBComponent),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillGreen",0,Kinetic.Validators.RGBComponent),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillBlue",0,Kinetic.Validators.RGBComponent),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillAlpha",1,Kinetic.Validators.alphaComponent),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillPatternX",0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillPatternY",0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillLinearGradientColorStops"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillRadialGradientStartRadius",0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillRadialGradientEndRadius",0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillRadialGradientColorStops"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillPatternRepeat","repeat"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillEnabled",!0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"strokeEnabled",!0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"shadowEnabled",!0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"dashEnabled",!0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"strokeScaleEnabled",!0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillPriority","color"),Kinetic.Factory.addComponentsGetterSetter(Kinetic.Shape,"fillPatternOffset",["x","y"]),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillPatternOffsetX",0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillPatternOffsetY",0),Kinetic.Factory.addComponentsGetterSetter(Kinetic.Shape,"fillPatternScale",["x","y"]),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillPatternScaleX",1),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillPatternScaleY",1),Kinetic.Factory.addComponentsGetterSetter(Kinetic.Shape,"fillLinearGradientStartPoint",["x","y"]),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillLinearGradientStartPointX",0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillLinearGradientStartPointY",0),Kinetic.Factory.addComponentsGetterSetter(Kinetic.Shape,"fillLinearGradientEndPoint",["x","y"]),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillLinearGradientEndPointX",0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillLinearGradientEndPointY",0),Kinetic.Factory.addComponentsGetterSetter(Kinetic.Shape,"fillRadialGradientStartPoint",["x","y"]),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillRadialGradientStartPointX",0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillRadialGradientStartPointY",0),Kinetic.Factory.addComponentsGetterSetter(Kinetic.Shape,"fillRadialGradientEndPoint",["x","y"]),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillRadialGradientEndPointX",0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillRadialGradientEndPointY",0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillPatternRotation",0),Kinetic.Factory.backCompat(Kinetic.Shape,{dashArray:"dash",getDashArray:"getDash",setDashArray:"getDash",drawFunc:"sceneFunc",getDrawFunc:"getSceneFunc",setDrawFunc:"setSceneFunc",drawHitFunc:"hitFunc",getDrawHitFunc:"getHitFunc",setDrawHitFunc:"setHitFunc"}),Kinetic.Collection.mapMethods(Kinetic.Shape)}(),function(){function t(t,e){t.content.addEventListener(e,function(n){t[R+e](n)},!1)}var e="Stage",n="string",i="px",r="mouseout",s="mouseleave",o="mouseover",a="mouseenter",l="mousemove",u="mousedown",c="mouseup",f="click",h="dblclick",p="touchstart",d="touchend",b="tap",m="dbltap",g="touchmove",v="contentMouseout",y="contentMouseover",_="contentMousemove",w="contentMousedown",k="contentMouseup",x="contentClick",S="contentDblclick",T="contentTouchstart",C="contentTouchend",E="contentDbltap",$="contentTouchmove",A="div",N="relative",L="inline-block",M="kineticjs-content",I=" ",R="_",D="container",K="",F=[u,l,c,r,p,g,d,o],B=F.length;Kinetic.Util.addMethods(Kinetic.Stage,{___init:function(t){this.nodeType=e,Kinetic.Container.call(this,t),this._id=Kinetic.idCounter++,this._buildDOM(),this._bindContentEvents(),this._enableNestedTransforms=!1,Kinetic.stages.push(this)},_validateAdd:function(t){"Layer"!==t.getType()&&Kinetic.Util.error("You may only add layers to the stage.")},setContainer:function(t){if(typeof t===n){var e=t;if(t=Kinetic.document.getElementById(t),!t)throw"Can not find container in document with id "+e}return this._setAttr(D,t),this},shouldDrawHit:function(){return!0},draw:function(){return Kinetic.Node.prototype.draw.call(this),this},setHeight:function(t){return Kinetic.Node.prototype.setHeight.call(this,t),this._resizeDOM(),this},setWidth:function(t){return Kinetic.Node.prototype.setWidth.call(this,t),this._resizeDOM(),this},clear:function(){var t,e=this.children,n=e.length;for(t=0;n>t;t++)e[t].clear();return this},clone:function(t){return t||(t={}),t.container=Kinetic.document.createElement(A),Kinetic.Container.prototype.clone.call(this,t)},destroy:function(){var t=this.content;Kinetic.Container.prototype.destroy.call(this),t&&Kinetic.Util._isInDocument(t)&&this.getContainer().removeChild(t);var e=Kinetic.stages.indexOf(this);e>-1&&Kinetic.stages.splice(e,1)},getPointerPosition:function(){return this.pointerPos},getStage:function(){return this},getContent:function(){return this.content},toDataURL:function(t){function e(r){var s=l[r],u=s.toDataURL(),c=new Kinetic.window.Image;c.onload=function(){a.drawImage(c,0,0),r<l.length-1?e(r+1):t.callback(o.toDataURL(n,i))},c.src=u}t=t||{};var n=t.mimeType||null,i=t.quality||null,r=t.x||0,s=t.y||0,o=new Kinetic.SceneCanvas({width:t.width||this.getWidth(),height:t.height||this.getHeight(),pixelRatio:1}),a=o.getContext()._context,l=this.children;(r||s)&&a.translate(-1*r,-1*s),e(0)},toImage:function(t){var e=t.callback;t.callback=function(t){Kinetic.Util._getImage(t,function(t){e(t)})},this.toDataURL(t)},getIntersection:function(t){var e,n,i=this.getChildren(),r=i.length,s=r-1;for(e=s;e>=0;e--)if(n=i[e].getIntersection(t))return n;return null},_resizeDOM:function(){if(this.content){var t,e,n=this.getWidth(),r=this.getHeight(),s=this.getChildren(),o=s.length;for(this.content.style.width=n+i,this.content.style.height=r+i,this.bufferCanvas.setSize(n,r),this.bufferHitCanvas.setSize(n,r),t=0;o>t;t++)e=s[t],e.getCanvas().setSize(n,r),e.hitCanvas.setSize(n,r),e.draw()}},add:function(t){if(!(arguments.length>1))return Kinetic.Container.prototype.add.call(this,t),t._setCanvasSize(this.width(),this.height()),t.draw(),this.content.appendChild(t.canvas._canvas),this;for(var e=0;e<arguments.length;e++)this.add(arguments[e])},getParent:function(){return null},getLayer:function(){return null},getLayers:function(){return this.getChildren()},_bindContentEvents:function(){for(var e=0;B>e;e++)t(this,F[e])},_mouseover:function(t){Kinetic.UA.mobile||(this._setPointerPosition(t),this._fire(y,{evt:t}))},_mouseout:function(t){if(!Kinetic.UA.mobile){this._setPointerPosition(t);var e=this.targetShape;e&&!Kinetic.isDragging()&&(e._fireAndBubble(r,{evt:t}),e._fireAndBubble(s,{evt:t}),this.targetShape=null),this.pointerPos=void 0,this._fire(v,{evt:t})}},_mousemove:function(t){if(!Kinetic.UA.mobile){this._setPointerPosition(t);var e=Kinetic.DD,n=this.getIntersection(this.getPointerPosition());n&&n.isListening()?Kinetic.isDragging()||this.targetShape&&this.targetShape._id===n._id?n._fireAndBubble(l,{evt:t}):(this.targetShape&&(this.targetShape._fireAndBubble(r,{evt:t},n),this.targetShape._fireAndBubble(s,{evt:t},n)),n._fireAndBubble(o,{evt:t},this.targetShape),n._fireAndBubble(a,{evt:t},this.targetShape),this.targetShape=n):this.targetShape&&!Kinetic.isDragging()&&(this.targetShape._fireAndBubble(r,{evt:t}),this.targetShape._fireAndBubble(s,{evt:t}),this.targetShape=null),this._fire(_,{evt:t}),e&&e._drag(t)}t.preventDefault&&t.preventDefault()},_mousedown:function(t){if(!Kinetic.UA.mobile){this._setPointerPosition(t);var e=this.getIntersection(this.getPointerPosition());Kinetic.listenClickTap=!0,e&&e.isListening()&&(this.clickStartShape=e,e._fireAndBubble(u,{evt:t})),this._fire(w,{evt:t})}t.preventDefault&&t.preventDefault()},_mouseup:function(t){if(!Kinetic.UA.mobile){this._setPointerPosition(t);var e=this.getIntersection(this.getPointerPosition()),n=this.clickStartShape,i=!1;Kinetic.inDblClickWindow?(i=!0,Kinetic.inDblClickWindow=!1):Kinetic.inDblClickWindow=!0,setTimeout(function(){Kinetic.inDblClickWindow=!1},Kinetic.dblClickWindow),e&&e.isListening()&&(e._fireAndBubble(c,{evt:t}),Kinetic.listenClickTap&&n&&n._id===e._id&&(e._fireAndBubble(f,{evt:t}),i&&e._fireAndBubble(h,{evt:t}))),this._fire(k,{evt:t}),Kinetic.listenClickTap&&(this._fire(x,{evt:t}),i&&this._fire(S,{evt:t})),Kinetic.listenClickTap=!1}t.preventDefault&&t.preventDefault()},_touchstart:function(t){this._setPointerPosition(t);var e=this.getIntersection(this.getPointerPosition());Kinetic.listenClickTap=!0,e&&e.isListening()&&(this.tapStartShape=e,e._fireAndBubble(p,{evt:t}),e.isListening()&&t.preventDefault&&t.preventDefault()),this._fire(T,{evt:t})},_touchend:function(t){this._setPointerPosition(t);var e=this.getIntersection(this.getPointerPosition()),n=!1;Kinetic.inDblClickWindow?(n=!0,Kinetic.inDblClickWindow=!1):Kinetic.inDblClickWindow=!0,setTimeout(function(){Kinetic.inDblClickWindow=!1},Kinetic.dblClickWindow),e&&e.isListening()&&(e._fireAndBubble(d,{evt:t}),Kinetic.listenClickTap&&e._id===this.tapStartShape._id&&(e._fireAndBubble(b,{evt:t}),n&&e._fireAndBubble(m,{evt:t})),e.isListening()&&t.preventDefault&&t.preventDefault()),Kinetic.listenClickTap&&(this._fire(C,{evt:t}),n&&this._fire(E,{evt:t})),Kinetic.listenClickTap=!1},_touchmove:function(t){this._setPointerPosition(t);var e=Kinetic.DD,n=this.getIntersection(this.getPointerPosition());n&&n.isListening()&&(n._fireAndBubble(g,{evt:t}),n.isListening()&&t.preventDefault&&t.preventDefault()),this._fire($,{evt:t}),e&&e._drag(t)},_setPointerPosition:function(t){var e,n=this._getContentPosition(),i=t.offsetX,r=t.clientX,s=null,o=null;t=t?t:window.event,void 0!==t.touches?t.touches.length>0&&(e=t.touches[0],s=e.clientX-n.left,o=e.clientY-n.top):void 0!==i?(s=i,o=t.offsetY):"mozilla"===Kinetic.UA.browser?(s=t.layerX,o=t.layerY):void 0!==r&&n&&(s=r-n.left,o=t.clientY-n.top),null!==s&&null!==o&&(this.pointerPos={x:s,y:o})},_getContentPosition:function(){var t=this.content.getBoundingClientRect?this.content.getBoundingClientRect():{top:0,left:0};return{top:t.top,left:t.left}},_buildDOM:function(){var t=this.getContainer();if(!t){if(Kinetic.Util.isBrowser())throw"Stage has not container. But container is required";t=Kinetic.document.createElement(A)}t.innerHTML=K,this.content=Kinetic.document.createElement(A),this.content.style.position=N,this.content.style.display=L,this.content.className=M,this.content.setAttribute("role","presentation"),t.appendChild(this.content),this.bufferCanvas=new Kinetic.SceneCanvas({pixelRatio:1}),this.bufferHitCanvas=new Kinetic.HitCanvas,this._resizeDOM()},_onContent:function(t,e){var n,i,r=t.split(I),s=r.length;for(n=0;s>n;n++)i=r[n],this.content.addEventListener(i,e,!1)},cache:function(){Kinetic.Util.warn("Cache function is not allowed for stage. You may use cache only for layers, groups and shapes.")},clearCache:function(){}}),Kinetic.Util.extend(Kinetic.Stage,Kinetic.Container),Kinetic.Factory.addGetter(Kinetic.Stage,"container"),Kinetic.Factory.addOverloadedGetterSetter(Kinetic.Stage,"container")}(),function(){Kinetic.Util.addMethods(Kinetic.BaseLayer,{___init:function(t){this.nodeType="Layer",Kinetic.Container.call(this,t)},createPNGStream:function(){return this.canvas._canvas.createPNGStream()},getCanvas:function(){return this.canvas},getHitCanvas:function(){return this.hitCanvas},getContext:function(){return this.getCanvas().getContext()},clear:function(t){return this.getContext().clear(t),this.getHitCanvas().getContext().clear(t),this},setZIndex:function(t){Kinetic.Node.prototype.setZIndex.call(this,t);var e=this.getStage();return e&&(e.content.removeChild(this.getCanvas()._canvas),t<e.getChildren().length-1?e.content.insertBefore(this.getCanvas()._canvas,e.getChildren()[t+1].getCanvas()._canvas):e.content.appendChild(this.getCanvas()._canvas)),this},moveToTop:function(){Kinetic.Node.prototype.moveToTop.call(this);var t=this.getStage();t&&(t.content.removeChild(this.getCanvas()._canvas),t.content.appendChild(this.getCanvas()._canvas))},moveUp:function(){if(Kinetic.Node.prototype.moveUp.call(this)){var t=this.getStage();t&&(t.content.removeChild(this.getCanvas()._canvas),this.index<t.getChildren().length-1?t.content.insertBefore(this.getCanvas()._canvas,t.getChildren()[this.index+1].getCanvas()._canvas):t.content.appendChild(this.getCanvas()._canvas))}},moveDown:function(){if(Kinetic.Node.prototype.moveDown.call(this)){var t=this.getStage();if(t){var e=t.getChildren();t.content.removeChild(this.getCanvas()._canvas),t.content.insertBefore(this.getCanvas()._canvas,e[this.index+1].getCanvas()._canvas)}}},moveToBottom:function(){if(Kinetic.Node.prototype.moveToBottom.call(this)){var t=this.getStage();if(t){var e=t.getChildren();t.content.removeChild(this.getCanvas()._canvas),t.content.insertBefore(this.getCanvas()._canvas,e[1].getCanvas()._canvas)}}},getLayer:function(){return this},remove:function(){var t=this.getCanvas()._canvas;return Kinetic.Node.prototype.remove.call(this),t&&t.parentNode&&Kinetic.Util._isInDocument(t)&&t.parentNode.removeChild(t),this},getStage:function(){return this.parent}}),Kinetic.Util.extend(Kinetic.BaseLayer,Kinetic.Container),Kinetic.Factory.addGetterSetter(Kinetic.BaseLayer,"clearBeforeDraw",!0),Kinetic.Collection.mapMethods(Kinetic.BaseLayer)}(),function(){var t="#",e="beforeDraw",n="draw",i=[{x:0,y:0},{x:-1,y:0},{x:-1,y:-1},{x:0,y:-1},{x:1,y:-1},{x:1,y:0},{x:1,y:1},{x:0,y:1},{x:-1,y:1}],r=i.length;Kinetic.Util.addMethods(Kinetic.Layer,{____init:function(t){this.nodeType="Layer",this.canvas=new Kinetic.SceneCanvas,this.hitCanvas=new Kinetic.HitCanvas,Kinetic.BaseLayer.call(this,t)},_setCanvasSize:function(t,e){this.canvas.setSize(t,e),this.hitCanvas.setSize(t,e)},_validateAdd:function(t){var e=t.getType();"Group"!==e&&"Shape"!==e&&Kinetic.Util.error("You may only add groups and shapes to a layer.")},getIntersection:function(t){var e,n,s,o;if(!this.hitGraphEnabled()||!this.isVisible())return null;for(n=0;r>n;n++){if(s=i[n],e=this._getIntersection({x:t.x+s.x,y:t.y+s.y}),o=e.shape)return o;if(!e.antialiased)return null}},_getIntersection:function(e){var n,i,r=this.hitCanvas.context._context.getImageData(e.x,e.y,1,1).data,s=r[3];return 255===s?(n=Kinetic.Util._rgbToHex(r[0],r[1],r[2]),i=Kinetic.shapes[t+n],{shape:i}):s>0?{antialiased:!0}:{}},drawScene:function(t,i){var r=this.getLayer(),s=t||r&&r.getCanvas();return this._fire(e,{node:this}),this.getClearBeforeDraw()&&s.getContext().clear(),Kinetic.Container.prototype.drawScene.call(this,s,i),this._fire(n,{node:this}),this},_applyTransform:function(t,e,n){var i=t.getAbsoluteTransform(n).getMatrix();e.transform(i[0],i[1],i[2],i[3],i[4],i[5])},drawHit:function(t,e){var n=this.getLayer(),i=t||n&&n.hitCanvas;return n&&n.getClearBeforeDraw()&&n.getHitCanvas().getContext().clear(),Kinetic.Container.prototype.drawHit.call(this,i,e),this},clear:function(t){return this.getContext().clear(t),this.getHitCanvas().getContext().clear(t),this},setVisible:function(t){return Kinetic.Node.prototype.setVisible.call(this,t),t?(this.getCanvas()._canvas.style.display="block",this.hitCanvas._canvas.style.display="block"):(this.getCanvas()._canvas.style.display="none",this.hitCanvas._canvas.style.display="none"),this},enableHitGraph:function(){return this.setHitGraphEnabled(!0),this},disableHitGraph:function(){return this.setHitGraphEnabled(!1),this}}),Kinetic.Util.extend(Kinetic.Layer,Kinetic.BaseLayer),Kinetic.Factory.addGetterSetter(Kinetic.Layer,"hitGraphEnabled",!0),Kinetic.Collection.mapMethods(Kinetic.Layer)}(),function(){Kinetic.Util.addMethods(Kinetic.FastLayer,{____init:function(t){this.nodeType="Layer",this.canvas=new Kinetic.SceneCanvas,Kinetic.BaseLayer.call(this,t)},_validateAdd:function(t){var e=t.getType();"Shape"!==e&&Kinetic.Util.error("You may only add shapes to a fast layer.")},_setCanvasSize:function(t,e){this.canvas.setSize(t,e)},hitGraphEnabled:function(){return!1},getIntersection:function(){return null},drawScene:function(t){var e=this.getLayer(),n=t||e&&e.getCanvas();return this.getClearBeforeDraw()&&n.getContext().clear(),Kinetic.Container.prototype.drawScene.call(this,n),this},_applyTransform:function(t,e,n){if(!n||n._id!==this._id){var i=t.getTransform().getMatrix();e.transform(i[0],i[1],i[2],i[3],i[4],i[5])}},draw:function(){return this.drawScene(),this},clear:function(t){return this.getContext().clear(t),this},setVisible:function(t){return Kinetic.Node.prototype.setVisible.call(this,t),this.getCanvas()._canvas.style.display=t?"block":"none",this}}),Kinetic.Util.extend(Kinetic.FastLayer,Kinetic.BaseLayer),Kinetic.Collection.mapMethods(Kinetic.FastLayer)}(),function(){Kinetic.Util.addMethods(Kinetic.Group,{___init:function(t){this.nodeType="Group",Kinetic.Container.call(this,t)},_validateAdd:function(t){var e=t.getType();"Group"!==e&&"Shape"!==e&&Kinetic.Util.error("You may only add groups and shapes to groups.")}}),Kinetic.Util.extend(Kinetic.Group,Kinetic.Container),Kinetic.Collection.mapMethods(Kinetic.Group)}(),function(){Kinetic.Rect=function(t){this.___init(t)},Kinetic.Rect.prototype={___init:function(t){Kinetic.Shape.call(this,t),this.className="Rect",this.sceneFunc(this._sceneFunc)},_sceneFunc:function(t){var e=this.getCornerRadius(),n=this.getWidth(),i=this.getHeight();t.beginPath(),e?(t.moveTo(e,0),t.lineTo(n-e,0),t.arc(n-e,e,e,3*Math.PI/2,0,!1),t.lineTo(n,i-e),t.arc(n-e,i-e,e,0,Math.PI/2,!1),t.lineTo(e,i),t.arc(e,i-e,e,Math.PI/2,Math.PI,!1),t.lineTo(0,e),t.arc(e,e,e,Math.PI,3*Math.PI/2,!1)):t.rect(0,0,n,i),t.closePath(),t.fillStrokeShape(this)}},Kinetic.Util.extend(Kinetic.Rect,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.Rect,"cornerRadius",0),Kinetic.Collection.mapMethods(Kinetic.Rect)}(),function(){var t=2*Math.PI-1e-4,e="Circle";Kinetic.Circle=function(t){this.___init(t)},Kinetic.Circle.prototype={___init:function(t){Kinetic.Shape.call(this,t),this.className=e,this.sceneFunc(this._sceneFunc)},_sceneFunc:function(e){e.beginPath(),e.arc(0,0,this.getRadius(),0,t,!1),e.closePath(),e.fillStrokeShape(this)},getWidth:function(){return 2*this.getRadius()},getHeight:function(){return 2*this.getRadius()},setWidth:function(t){Kinetic.Node.prototype.setWidth.call(this,t),this.setRadius(t/2)},setHeight:function(t){Kinetic.Node.prototype.setHeight.call(this,t),this.setRadius(t/2)}},Kinetic.Util.extend(Kinetic.Circle,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.Circle,"radius",0),Kinetic.Collection.mapMethods(Kinetic.Circle)}(),function(){var t=2*Math.PI-1e-4,e="Ellipse";Kinetic.Ellipse=function(t){this.___init(t)},Kinetic.Ellipse.prototype={___init:function(t){Kinetic.Shape.call(this,t),this.className=e,this.sceneFunc(this._sceneFunc)},_sceneFunc:function(e){var n=this.getRadius(),i=n.x,r=n.y;e.beginPath(),e.save(),i!==r&&e.scale(1,r/i),e.arc(0,0,i,0,t,!1),e.restore(),e.closePath(),e.fillStrokeShape(this)},getWidth:function(){return 2*this.getRadius().x},getHeight:function(){return 2*this.getRadius().y},setWidth:function(t){Kinetic.Node.prototype.setWidth.call(this,t),this.setRadius({x:t/2})},setHeight:function(t){Kinetic.Node.prototype.setHeight.call(this,t),this.setRadius({y:t/2})}},Kinetic.Util.extend(Kinetic.Ellipse,Kinetic.Shape),Kinetic.Factory.addComponentsGetterSetter(Kinetic.Ellipse,"radius",["x","y"]),Kinetic.Factory.addGetterSetter(Kinetic.Ellipse,"radiusX",0),Kinetic.Factory.addGetterSetter(Kinetic.Ellipse,"radiusY",0),Kinetic.Collection.mapMethods(Kinetic.Ellipse)}(),function(){var t=2*Math.PI-1e-4;Kinetic.Ring=function(t){this.___init(t)},Kinetic.Ring.prototype={___init:function(t){Kinetic.Shape.call(this,t),this.className="Ring",this.sceneFunc(this._sceneFunc)},_sceneFunc:function(e){e.beginPath(),e.arc(0,0,this.getInnerRadius(),0,t,!1),e.moveTo(this.getOuterRadius(),0),e.arc(0,0,this.getOuterRadius(),t,0,!0),e.closePath(),e.fillStrokeShape(this)},getWidth:function(){return 2*this.getOuterRadius()},getHeight:function(){return 2*this.getOuterRadius()},setWidth:function(t){Kinetic.Node.prototype.setWidth.call(this,t),this.setOuterRadius(t/2)},setHeight:function(t){Kinetic.Node.prototype.setHeight.call(this,t),this.setOuterRadius(t/2)}},Kinetic.Util.extend(Kinetic.Ring,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.Ring,"innerRadius",0),Kinetic.Factory.addGetterSetter(Kinetic.Ring,"outerRadius",0),Kinetic.Collection.mapMethods(Kinetic.Ring)}(),function(){Kinetic.Wedge=function(t){this.___init(t)},Kinetic.Wedge.prototype={___init:function(t){Kinetic.Shape.call(this,t),this.className="Wedge",this.sceneFunc(this._sceneFunc)},_sceneFunc:function(t){t.beginPath(),t.arc(0,0,this.getRadius(),0,Kinetic.getAngle(this.getAngle()),this.getClockwise()),t.lineTo(0,0),t.closePath(),t.fillStrokeShape(this)}},Kinetic.Util.extend(Kinetic.Wedge,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.Wedge,"radius",0),Kinetic.Factory.addGetterSetter(Kinetic.Wedge,"angle",0),Kinetic.Factory.addGetterSetter(Kinetic.Wedge,"clockwise",!1),Kinetic.Factory.backCompat(Kinetic.Wedge,{angleDeg:"angle",getAngleDeg:"getAngle",setAngleDeg:"setAngle"}),Kinetic.Collection.mapMethods(Kinetic.Wedge)}(),function(){Math.PI/180,Kinetic.Arc=function(t){this.___init(t)},Kinetic.Arc.prototype={___init:function(t){Kinetic.Shape.call(this,t),this.className="Arc",this.sceneFunc(this._sceneFunc)},_sceneFunc:function(t){var e=Kinetic.getAngle(this.angle()),n=this.clockwise();t.beginPath(),t.arc(0,0,this.getOuterRadius(),0,e,n),t.arc(0,0,this.getInnerRadius(),e,0,!n),t.closePath(),t.fillStrokeShape(this)}},Kinetic.Util.extend(Kinetic.Arc,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.Arc,"innerRadius",0),Kinetic.Factory.addGetterSetter(Kinetic.Arc,"outerRadius",0),Kinetic.Factory.addGetterSetter(Kinetic.Arc,"angle",0),Kinetic.Factory.addGetterSetter(Kinetic.Arc,"clockwise",!1),Kinetic.Collection.mapMethods(Kinetic.Arc)}(),function(){var t="Image";Kinetic.Image=function(t){this.___init(t)},Kinetic.Image.prototype={___init:function(e){Kinetic.Shape.call(this,e),this.className=t,this.sceneFunc(this._sceneFunc),this.hitFunc(this._hitFunc)},_useBufferCanvas:function(){return(this.hasShadow()||1!==this.getAbsoluteOpacity())&&this.hasStroke()},_sceneFunc:function(t){var e,n,i,r,s=this.getWidth(),o=this.getHeight(),a=this.getImage();a&&(e=this.getCrop(),n=e.width,i=e.height,r=n&&i?[a,e.x,e.y,n,i,0,0,s,o]:[a,0,0,s,o]),t.beginPath(),t.rect(0,0,s,o),t.closePath(),t.fillStrokeShape(this),a&&t.drawImage.apply(t,r)},_hitFunc:function(t){var e=this.getWidth(),n=this.getHeight();t.beginPath(),t.rect(0,0,e,n),t.closePath(),t.fillStrokeShape(this)},getWidth:function(){var t=this.getImage();return this.attrs.width||(t?t.width:0)},getHeight:function(){var t=this.getImage();return this.attrs.height||(t?t.height:0)}},Kinetic.Util.extend(Kinetic.Image,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.Image,"image"),Kinetic.Factory.addComponentsGetterSetter(Kinetic.Image,"crop",["x","y","width","height"]),Kinetic.Factory.addGetterSetter(Kinetic.Image,"cropX",0),Kinetic.Factory.addGetterSetter(Kinetic.Image,"cropY",0),Kinetic.Factory.addGetterSetter(Kinetic.Image,"cropWidth",0),Kinetic.Factory.addGetterSetter(Kinetic.Image,"cropHeight",0),Kinetic.Collection.mapMethods(Kinetic.Image)}(),function(){function t(t){t.fillText(this.partialText,0,0)}function e(t){t.strokeText(this.partialText,0,0)}var n="auto",i="center",r="Change.kinetic",s="2d",o="-",a="",l="left",u="text",c="Text",f="middle",h="normal",p="px ",d=" ",b="right",m="word",g="char",v="none",y=["fontFamily","fontSize","fontStyle","fontVariant","padding","align","lineHeight","text","width","height","wrap"],_=y.length,w=Kinetic.Util.createCanvasElement().getContext(s);Kinetic.Text=function(t){this.___init(t)},Kinetic.Text.prototype={___init:function(i){var s=this;void 0===i.width&&(i.width=n),void 0===i.height&&(i.height=n),Kinetic.Shape.call(this,i),this._fillFunc=t,this._strokeFunc=e,this.className=c;for(var o=0;_>o;o++)this.on(y[o]+r,s._setTextData);this._setTextData(),this.sceneFunc(this._sceneFunc),this.hitFunc(this._hitFunc)},_sceneFunc:function(t){var e,n=this.getPadding(),r=this.getTextHeight(),s=this.getLineHeight()*r,o=this.textArr,a=o.length,u=this.getWidth();for(t.setAttr("font",this._getContextFont()),t.setAttr("textBaseline",f),t.setAttr("textAlign",l),t.save(),t.translate(n,0),t.translate(0,n+r/2),e=0;a>e;e++){var c=o[e],h=c.text,p=c.width;t.save(),this.getAlign()===b?t.translate(u-p-2*n,0):this.getAlign()===i&&t.translate((u-p-2*n)/2,0),this.partialText=h,t.fillStrokeShape(this),t.restore(),t.translate(0,s)}t.restore()},_hitFunc:function(t){var e=this.getWidth(),n=this.getHeight();t.beginPath(),t.rect(0,0,e,n),t.closePath(),t.fillStrokeShape(this)},setText:function(t){var e=Kinetic.Util._isString(t)?t:t.toString();return this._setAttr(u,e),this},getWidth:function(){return this.attrs.width===n?this.getTextWidth()+2*this.getPadding():this.attrs.width},getHeight:function(){return this.attrs.height===n?this.getTextHeight()*this.textArr.length*this.getLineHeight()+2*this.getPadding():this.attrs.height},getTextWidth:function(){return this.textWidth},getTextHeight:function(){return this.textHeight},_getTextSize:function(t){var e,n=w,i=this.getFontSize();return n.save(),n.font=this._getContextFont(),e=n.measureText(t),n.restore(),{width:e.width,height:parseInt(i,10)}},_getContextFont:function(){return this.getFontStyle()+d+this.getFontVariant()+d+this.getFontSize()+p+this.getFontFamily()},_addTextLine:function(t,e){return this.textArr.push({text:t,width:e})},_getTextWidth:function(t){return w.measureText(t).width},_setTextData:function(){var t=this.getText().split("\n"),e=+this.getFontSize(),i=0,r=this.getLineHeight()*e,s=this.attrs.width,a=this.attrs.height,l=s!==n,u=a!==n,c=this.getPadding(),f=s-2*c,h=a-2*c,p=0,b=this.getWrap(),m=b!==v,y=b!==g&&m;this.textArr=[],w.save(),w.font=this._getContextFont();for(var _=0,k=t.length;k>_;++_){var x=t[_],S=this._getTextWidth(x);if(l&&S>f)for(;x.length>0;){for(var T=0,C=x.length,E="",$=0;C>T;){var A=T+C>>>1,N=x.slice(0,A+1),L=this._getTextWidth(N);f>=L?(T=A+1,E=N,$=L):C=A}if(!E)break;if(y){var M=Math.max(E.lastIndexOf(d),E.lastIndexOf(o))+1;M>0&&(T=M,E=E.slice(0,T),$=this._getTextWidth(E))}if(this._addTextLine(E,$),i=Math.max(i,$),p+=r,!m||u&&p+r>h)break;if(x=x.slice(T),x.length>0&&(S=this._getTextWidth(x),f>=S)){this._addTextLine(x,S),p+=r,i=Math.max(i,S);break}}else this._addTextLine(x,S),p+=r,i=Math.max(i,S);if(u&&p+r>h)break}w.restore(),this.textHeight=e,this.textWidth=i}},Kinetic.Util.extend(Kinetic.Text,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.Text,"fontFamily","Arial"),Kinetic.Factory.addGetterSetter(Kinetic.Text,"fontSize",12),Kinetic.Factory.addGetterSetter(Kinetic.Text,"fontStyle",h),Kinetic.Factory.addGetterSetter(Kinetic.Text,"fontVariant",h),Kinetic.Factory.addGetterSetter(Kinetic.Text,"padding",0),Kinetic.Factory.addGetterSetter(Kinetic.Text,"align",l),Kinetic.Factory.addGetterSetter(Kinetic.Text,"lineHeight",1),Kinetic.Factory.addGetterSetter(Kinetic.Text,"wrap",m),Kinetic.Factory.addGetter(Kinetic.Text,"text",a),Kinetic.Factory.addOverloadedGetterSetter(Kinetic.Text,"text"),Kinetic.Collection.mapMethods(Kinetic.Text)}(),function(){Kinetic.Line=function(t){this.___init(t)},Kinetic.Line.prototype={___init:function(t){Kinetic.Shape.call(this,t),this.className="Line",this.on("pointsChange.kinetic tensionChange.kinetic closedChange.kinetic",function(){this._clearCache("tensionPoints")}),this.sceneFunc(this._sceneFunc)},_sceneFunc:function(t){var e,n,i,r=this.getPoints(),s=r.length,o=this.getTension(),a=this.getClosed();if(t.beginPath(),t.moveTo(r[0],r[1]),0!==o&&s>4){for(e=this.getTensionPoints(),n=e.length,i=a?0:4,a||t.quadraticCurveTo(e[0],e[1],e[2],e[3]);n-2>i;)t.bezierCurveTo(e[i++],e[i++],e[i++],e[i++],e[i++],e[i++]);a||t.quadraticCurveTo(e[n-2],e[n-1],r[s-2],r[s-1])}else for(i=2;s>i;i+=2)t.lineTo(r[i],r[i+1]);a?(t.closePath(),t.fillStrokeShape(this)):t.strokeShape(this)},getTensionPoints:function(){return this._getCache("tensionPoints",this._getTensionPoints)},_getTensionPoints:function(){return this.getClosed()?this._getTensionPointsClosed():Kinetic.Util._expandPoints(this.getPoints(),this.getTension())},_getTensionPointsClosed:function(){var t=this.getPoints(),e=t.length,n=this.getTension(),i=Kinetic.Util,r=i._getControlPoints(t[e-2],t[e-1],t[0],t[1],t[2],t[3],n),s=i._getControlPoints(t[e-4],t[e-3],t[e-2],t[e-1],t[0],t[1],n),o=Kinetic.Util._expandPoints(t,n),a=[r[2],r[3]].concat(o).concat([s[0],s[1],t[e-2],t[e-1],s[2],s[3],r[0],r[1],t[0],t[1]]);
return a}},Kinetic.Util.extend(Kinetic.Line,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.Line,"closed",!1),Kinetic.Factory.addGetterSetter(Kinetic.Line,"tension",0),Kinetic.Factory.addGetterSetter(Kinetic.Line,"points"),Kinetic.Collection.mapMethods(Kinetic.Line)}(),function(){Kinetic.Sprite=function(t){this.___init(t)},Kinetic.Sprite.prototype={___init:function(t){Kinetic.Shape.call(this,t),this.className="Sprite",this.anim=new Kinetic.Animation,this.on("animationChange.kinetic",function(){this.frameIndex(0)}),this.on("frameRateChange.kinetic",function(){this.anim.isRunning()&&(clearInterval(this.interval),this._setInterval())}),this.sceneFunc(this._sceneFunc),this.hitFunc(this._hitFunc)},_sceneFunc:function(t){var e=this.getAnimation(),n=this.frameIndex(),i=4*n,r=this.getAnimations()[e],s=r[i+0],o=r[i+1],a=r[i+2],l=r[i+3],u=this.getImage();u&&t.drawImage(u,s,o,a,l,0,0,a,l)},_hitFunc:function(t){var e=this.getAnimation(),n=this.frameIndex(),i=4*n,r=this.getAnimations()[e],s=r[i+2],o=r[i+3];t.beginPath(),t.rect(0,0,s,o),t.closePath(),t.fillShape(this)},_useBufferCanvas:function(){return(this.hasShadow()||1!==this.getAbsoluteOpacity())&&this.hasStroke()},_setInterval:function(){var t=this;this.interval=setInterval(function(){t._updateIndex()},1e3/this.getFrameRate())},start:function(){var t=this.getLayer();this.anim.setLayers(t),this._setInterval(),this.anim.start()},stop:function(){this.anim.stop(),clearInterval(this.interval)},isRunning:function(){return this.anim.isRunning()},_updateIndex:function(){var t=this.frameIndex(),e=this.getAnimation(),n=this.getAnimations(),i=n[e],r=i.length/4;this.frameIndex(r-1>t?t+1:0)}},Kinetic.Util.extend(Kinetic.Sprite,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.Sprite,"animation"),Kinetic.Factory.addGetterSetter(Kinetic.Sprite,"animations"),Kinetic.Factory.addGetterSetter(Kinetic.Sprite,"image"),Kinetic.Factory.addGetterSetter(Kinetic.Sprite,"frameIndex",0),Kinetic.Factory.addGetterSetter(Kinetic.Sprite,"frameRate",17),Kinetic.Factory.backCompat(Kinetic.Sprite,{index:"frameIndex",getIndex:"getFrameIndex",setIndex:"setFrameIndex"}),Kinetic.Collection.mapMethods(Kinetic.Sprite)}(),function(){Kinetic.Path=function(t){this.___init(t)},Kinetic.Path.prototype={___init:function(t){this.dataArray=[];var e=this;Kinetic.Shape.call(this,t),this.className="Path",this.dataArray=Kinetic.Path.parsePathData(this.getData()),this.on("dataChange.kinetic",function(){e.dataArray=Kinetic.Path.parsePathData(this.getData())}),this.sceneFunc(this._sceneFunc)},_sceneFunc:function(t){var e=this.dataArray,n=!1;t.beginPath();for(var i=0;i<e.length;i++){var r=e[i].command,s=e[i].points;switch(r){case"L":t.lineTo(s[0],s[1]);break;case"M":t.moveTo(s[0],s[1]);break;case"C":t.bezierCurveTo(s[0],s[1],s[2],s[3],s[4],s[5]);break;case"Q":t.quadraticCurveTo(s[0],s[1],s[2],s[3]);break;case"A":var o=s[0],a=s[1],l=s[2],u=s[3],c=s[4],f=s[5],h=s[6],p=s[7],d=l>u?l:u,b=l>u?1:l/u,m=l>u?u/l:1;t.translate(o,a),t.rotate(h),t.scale(b,m),t.arc(0,0,d,c,c+f,1-p),t.scale(1/b,1/m),t.rotate(-h),t.translate(-o,-a);break;case"z":t.closePath(),n=!0}}n?t.fillStrokeShape(this):t.strokeShape(this)}},Kinetic.Util.extend(Kinetic.Path,Kinetic.Shape),Kinetic.Path.getLineLength=function(t,e,n,i){return Math.sqrt((n-t)*(n-t)+(i-e)*(i-e))},Kinetic.Path.getPointOnLine=function(t,e,n,i,r,s,o){void 0===s&&(s=e),void 0===o&&(o=n);var a=(r-n)/(i-e+1e-8),l=Math.sqrt(t*t/(1+a*a));e>i&&(l*=-1);var u,c=a*l;if(i===e)u={x:s,y:o+c};else if((o-n)/(s-e+1e-8)===a)u={x:s+l,y:o+c};else{var f,h,p=this.getLineLength(e,n,i,r);if(1e-8>p)return void 0;var d=(s-e)*(i-e)+(o-n)*(r-n);d/=p*p,f=e+d*(i-e),h=n+d*(r-n);var b=this.getLineLength(s,o,f,h),m=Math.sqrt(t*t-b*b);l=Math.sqrt(m*m/(1+a*a)),e>i&&(l*=-1),c=a*l,u={x:f+l,y:h+c}}return u},Kinetic.Path.getPointOnCubicBezier=function(t,e,n,i,r,s,o,a,l){function u(t){return t*t*t}function c(t){return 3*t*t*(1-t)}function f(t){return 3*t*(1-t)*(1-t)}function h(t){return(1-t)*(1-t)*(1-t)}var p=a*u(t)+s*c(t)+i*f(t)+e*h(t),d=l*u(t)+o*c(t)+r*f(t)+n*h(t);return{x:p,y:d}},Kinetic.Path.getPointOnQuadraticBezier=function(t,e,n,i,r,s,o){function a(t){return t*t}function l(t){return 2*t*(1-t)}function u(t){return(1-t)*(1-t)}var c=s*a(t)+i*l(t)+e*u(t),f=o*a(t)+r*l(t)+n*u(t);return{x:c,y:f}},Kinetic.Path.getPointOnEllipticalArc=function(t,e,n,i,r,s){var o=Math.cos(s),a=Math.sin(s),l={x:n*Math.cos(r),y:i*Math.sin(r)};return{x:t+(l.x*o-l.y*a),y:e+(l.x*a+l.y*o)}},Kinetic.Path.parsePathData=function(t){if(!t)return[];var e=t,n=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"];e=e.replace(new RegExp(" ","g"),",");for(var i=0;i<n.length;i++)e=e.replace(new RegExp(n[i],"g"),"|"+n[i]);var r=e.split("|"),s=[],o=0,a=0;for(i=1;i<r.length;i++){var l=r[i],u=l.charAt(0);l=l.slice(1),l=l.replace(new RegExp(",-","g"),"-"),l=l.replace(new RegExp("-","g"),",-"),l=l.replace(new RegExp("e,-","g"),"e-");var c=l.split(",");c.length>0&&""===c[0]&&c.shift();for(var f=0;f<c.length;f++)c[f]=parseFloat(c[f]);for(;c.length>0&&!isNaN(c[0]);){var h,p,d,b,m,g,v,y,_,w,k=null,x=[],S=o,T=a;switch(u){case"l":o+=c.shift(),a+=c.shift(),k="L",x.push(o,a);break;case"L":o=c.shift(),a=c.shift(),x.push(o,a);break;case"m":var C=c.shift(),E=c.shift();if(o+=C,a+=E,k="M",s.length>2&&"z"===s[s.length-1].command)for(var $=s.length-2;$>=0;$--)if("M"===s[$].command){o=s[$].points[0]+C,a=s[$].points[1]+E;break}x.push(o,a),u="l";break;case"M":o=c.shift(),a=c.shift(),k="M",x.push(o,a),u="L";break;case"h":o+=c.shift(),k="L",x.push(o,a);break;case"H":o=c.shift(),k="L",x.push(o,a);break;case"v":a+=c.shift(),k="L",x.push(o,a);break;case"V":a=c.shift(),k="L",x.push(o,a);break;case"C":x.push(c.shift(),c.shift(),c.shift(),c.shift()),o=c.shift(),a=c.shift(),x.push(o,a);break;case"c":x.push(o+c.shift(),a+c.shift(),o+c.shift(),a+c.shift()),o+=c.shift(),a+=c.shift(),k="C",x.push(o,a);break;case"S":p=o,d=a,h=s[s.length-1],"C"===h.command&&(p=o+(o-h.points[2]),d=a+(a-h.points[3])),x.push(p,d,c.shift(),c.shift()),o=c.shift(),a=c.shift(),k="C",x.push(o,a);break;case"s":p=o,d=a,h=s[s.length-1],"C"===h.command&&(p=o+(o-h.points[2]),d=a+(a-h.points[3])),x.push(p,d,o+c.shift(),a+c.shift()),o+=c.shift(),a+=c.shift(),k="C",x.push(o,a);break;case"Q":x.push(c.shift(),c.shift()),o=c.shift(),a=c.shift(),x.push(o,a);break;case"q":x.push(o+c.shift(),a+c.shift()),o+=c.shift(),a+=c.shift(),k="Q",x.push(o,a);break;case"T":p=o,d=a,h=s[s.length-1],"Q"===h.command&&(p=o+(o-h.points[0]),d=a+(a-h.points[1])),o=c.shift(),a=c.shift(),k="Q",x.push(p,d,o,a);break;case"t":p=o,d=a,h=s[s.length-1],"Q"===h.command&&(p=o+(o-h.points[0]),d=a+(a-h.points[1])),o+=c.shift(),a+=c.shift(),k="Q",x.push(p,d,o,a);break;case"A":b=c.shift(),m=c.shift(),g=c.shift(),v=c.shift(),y=c.shift(),_=o,w=a,o=c.shift(),a=c.shift(),k="A",x=this.convertEndpointToCenterParameterization(_,w,o,a,v,y,b,m,g);break;case"a":b=c.shift(),m=c.shift(),g=c.shift(),v=c.shift(),y=c.shift(),_=o,w=a,o+=c.shift(),a+=c.shift(),k="A",x=this.convertEndpointToCenterParameterization(_,w,o,a,v,y,b,m,g)}s.push({command:k||u,points:x,start:{x:S,y:T},pathLength:this.calcLength(S,T,k||u,x)})}("z"===u||"Z"===u)&&s.push({command:"z",points:[],start:void 0,pathLength:0})}return s},Kinetic.Path.calcLength=function(t,e,n,i){var r,s,o,a,l=Kinetic.Path;switch(n){case"L":return l.getLineLength(t,e,i[0],i[1]);case"C":for(r=0,s=l.getPointOnCubicBezier(0,t,e,i[0],i[1],i[2],i[3],i[4],i[5]),a=.01;1>=a;a+=.01)o=l.getPointOnCubicBezier(a,t,e,i[0],i[1],i[2],i[3],i[4],i[5]),r+=l.getLineLength(s.x,s.y,o.x,o.y),s=o;return r;case"Q":for(r=0,s=l.getPointOnQuadraticBezier(0,t,e,i[0],i[1],i[2],i[3]),a=.01;1>=a;a+=.01)o=l.getPointOnQuadraticBezier(a,t,e,i[0],i[1],i[2],i[3]),r+=l.getLineLength(s.x,s.y,o.x,o.y),s=o;return r;case"A":r=0;var u=i[4],c=i[5],f=i[4]+c,h=Math.PI/180;if(Math.abs(u-f)<h&&(h=Math.abs(u-f)),s=l.getPointOnEllipticalArc(i[0],i[1],i[2],i[3],u,0),0>c)for(a=u-h;a>f;a-=h)o=l.getPointOnEllipticalArc(i[0],i[1],i[2],i[3],a,0),r+=l.getLineLength(s.x,s.y,o.x,o.y),s=o;else for(a=u+h;f>a;a+=h)o=l.getPointOnEllipticalArc(i[0],i[1],i[2],i[3],a,0),r+=l.getLineLength(s.x,s.y,o.x,o.y),s=o;return o=l.getPointOnEllipticalArc(i[0],i[1],i[2],i[3],f,0),r+=l.getLineLength(s.x,s.y,o.x,o.y)}return 0},Kinetic.Path.convertEndpointToCenterParameterization=function(t,e,n,i,r,s,o,a,l){var u=l*(Math.PI/180),c=Math.cos(u)*(t-n)/2+Math.sin(u)*(e-i)/2,f=-1*Math.sin(u)*(t-n)/2+Math.cos(u)*(e-i)/2,h=c*c/(o*o)+f*f/(a*a);h>1&&(o*=Math.sqrt(h),a*=Math.sqrt(h));var p=Math.sqrt((o*o*a*a-o*o*f*f-a*a*c*c)/(o*o*f*f+a*a*c*c));r===s&&(p*=-1),isNaN(p)&&(p=0);var d=p*o*f/a,b=p*-a*c/o,m=(t+n)/2+Math.cos(u)*d-Math.sin(u)*b,g=(e+i)/2+Math.sin(u)*d+Math.cos(u)*b,v=function(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])},y=function(t,e){return(t[0]*e[0]+t[1]*e[1])/(v(t)*v(e))},_=function(t,e){return(t[0]*e[1]<t[1]*e[0]?-1:1)*Math.acos(y(t,e))},w=_([1,0],[(c-d)/o,(f-b)/a]),k=[(c-d)/o,(f-b)/a],x=[(-1*c-d)/o,(-1*f-b)/a],S=_(k,x);return y(k,x)<=-1&&(S=Math.PI),y(k,x)>=1&&(S=0),0===s&&S>0&&(S-=2*Math.PI),1===s&&0>S&&(S+=2*Math.PI),[m,g,o,a,w,S,u,s]},Kinetic.Factory.addGetterSetter(Kinetic.Path,"data"),Kinetic.Collection.mapMethods(Kinetic.Path)}(),function(){function t(t){t.fillText(this.partialText,0,0)}function e(t){t.strokeText(this.partialText,0,0)}var n="",i="normal";Kinetic.TextPath=function(t){this.___init(t)},Kinetic.TextPath.prototype={___init:function(n){var i=this;this.dummyCanvas=Kinetic.Util.createCanvasElement(),this.dataArray=[],Kinetic.Shape.call(this,n),this._fillFunc=t,this._strokeFunc=e,this._fillFuncHit=t,this._strokeFuncHit=e,this.className="TextPath",this.dataArray=Kinetic.Path.parsePathData(this.attrs.data),this.on("dataChange.kinetic",function(){i.dataArray=Kinetic.Path.parsePathData(this.attrs.data)}),this.on("textChange.kinetic textStroke.kinetic textStrokeWidth.kinetic",i._setTextData),i._setTextData(),this.sceneFunc(this._sceneFunc)},_sceneFunc:function(t){t.setAttr("font",this._getContextFont()),t.setAttr("textBaseline","middle"),t.setAttr("textAlign","left"),t.save();for(var e=this.glyphInfo,n=0;n<e.length;n++){t.save();var i=e[n].p0;t.translate(i.x,i.y),t.rotate(e[n].rotation),this.partialText=e[n].text,t.fillStrokeShape(this),t.restore()}t.restore()},getTextWidth:function(){return this.textWidth},getTextHeight:function(){return this.textHeight},setText:function(t){Kinetic.Text.prototype.setText.call(this,t)},_getTextSize:function(t){var e=this.dummyCanvas,n=e.getContext("2d");n.save(),n.font=this._getContextFont();var i=n.measureText(t);return n.restore(),{width:i.width,height:parseInt(this.attrs.fontSize,10)}},_setTextData:function(){var t=this,e=this._getTextSize(this.attrs.text);this.textWidth=e.width,this.textHeight=e.height,this.glyphInfo=[];for(var n,i,r,s=this.attrs.text.split(""),o=-1,a=0,l=function(){a=0;for(var e=t.dataArray,i=o+1;i<e.length;i++){if(e[i].pathLength>0)return o=i,e[i];"M"==e[i].command&&(n={x:e[i].points[0],y:e[i].points[1]})}return{}},u=function(e){var s=t._getTextSize(e).width,o=0,u=0;for(i=void 0;Math.abs(s-o)/s>.01&&25>u;){u++;for(var c=o;void 0===r;)r=l(),r&&c+r.pathLength<s&&(c+=r.pathLength,r=void 0);if(r==={}||void 0===n)return void 0;var f=!1;switch(r.command){case"L":Kinetic.Path.getLineLength(n.x,n.y,r.points[0],r.points[1])>s?i=Kinetic.Path.getPointOnLine(s,n.x,n.y,r.points[0],r.points[1],n.x,n.y):r=void 0;break;case"A":var h=r.points[4],p=r.points[5],d=r.points[4]+p;0===a?a=h+1e-8:s>o?a+=Math.PI/180*p/Math.abs(p):a-=Math.PI/360*p/Math.abs(p),(0>p&&d>a||p>=0&&a>d)&&(a=d,f=!0),i=Kinetic.Path.getPointOnEllipticalArc(r.points[0],r.points[1],r.points[2],r.points[3],a,r.points[6]);break;case"C":0===a?a=s>r.pathLength?1e-8:s/r.pathLength:s>o?a+=(s-o)/r.pathLength:a-=(o-s)/r.pathLength,a>1&&(a=1,f=!0),i=Kinetic.Path.getPointOnCubicBezier(a,r.start.x,r.start.y,r.points[0],r.points[1],r.points[2],r.points[3],r.points[4],r.points[5]);break;case"Q":0===a?a=s/r.pathLength:s>o?a+=(s-o)/r.pathLength:a-=(o-s)/r.pathLength,a>1&&(a=1,f=!0),i=Kinetic.Path.getPointOnQuadraticBezier(a,r.start.x,r.start.y,r.points[0],r.points[1],r.points[2],r.points[3])}void 0!==i&&(o=Kinetic.Path.getLineLength(n.x,n.y,i.x,i.y)),f&&(f=!1,r=void 0)}},c=0;c<s.length&&(u(s[c]),void 0!==n&&void 0!==i);c++){var f=Kinetic.Path.getLineLength(n.x,n.y,i.x,i.y),h=0,p=Kinetic.Path.getPointOnLine(h+f/2,n.x,n.y,i.x,i.y),d=Math.atan2(i.y-n.y,i.x-n.x);this.glyphInfo.push({transposeX:p.x,transposeY:p.y,text:s[c],rotation:d,p0:n,p1:i}),n=i}}},Kinetic.TextPath.prototype._getContextFont=Kinetic.Text.prototype._getContextFont,Kinetic.Util.extend(Kinetic.TextPath,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.TextPath,"fontFamily","Arial"),Kinetic.Factory.addGetterSetter(Kinetic.TextPath,"fontSize",12),Kinetic.Factory.addGetterSetter(Kinetic.TextPath,"fontStyle",i),Kinetic.Factory.addGetterSetter(Kinetic.TextPath,"fontVariant",i),Kinetic.Factory.addGetter(Kinetic.TextPath,"text",n),Kinetic.Collection.mapMethods(Kinetic.TextPath)}(),function(){Kinetic.RegularPolygon=function(t){this.___init(t)},Kinetic.RegularPolygon.prototype={___init:function(t){Kinetic.Shape.call(this,t),this.className="RegularPolygon",this.sceneFunc(this._sceneFunc)},_sceneFunc:function(t){var e,n,i,r=this.attrs.sides,s=this.attrs.radius;for(t.beginPath(),t.moveTo(0,0-s),e=1;r>e;e++)n=s*Math.sin(2*e*Math.PI/r),i=-1*s*Math.cos(2*e*Math.PI/r),t.lineTo(n,i);t.closePath(),t.fillStrokeShape(this)}},Kinetic.Util.extend(Kinetic.RegularPolygon,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.RegularPolygon,"radius",0),Kinetic.Factory.addGetterSetter(Kinetic.RegularPolygon,"sides",0),Kinetic.Collection.mapMethods(Kinetic.RegularPolygon)}(),function(){Kinetic.Star=function(t){this.___init(t)},Kinetic.Star.prototype={___init:function(t){Kinetic.Shape.call(this,t),this.className="Star",this.sceneFunc(this._sceneFunc)},_sceneFunc:function(t){var e=this.innerRadius(),n=this.outerRadius(),i=this.numPoints();t.beginPath(),t.moveTo(0,0-n);for(var r=1;2*i>r;r++){var s=r%2===0?n:e,o=s*Math.sin(r*Math.PI/i),a=-1*s*Math.cos(r*Math.PI/i);t.lineTo(o,a)}t.closePath(),t.fillStrokeShape(this)}},Kinetic.Util.extend(Kinetic.Star,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.Star,"numPoints",5),Kinetic.Factory.addGetterSetter(Kinetic.Star,"innerRadius",0),Kinetic.Factory.addGetterSetter(Kinetic.Star,"outerRadius",0),Kinetic.Collection.mapMethods(Kinetic.Star)}(),function(){var t=["fontFamily","fontSize","fontStyle","padding","lineHeight","text"],e="Change.kinetic",n="none",i="up",r="right",s="down",o="left",a="Label",l=t.length;Kinetic.Label=function(t){this.____init(t)},Kinetic.Label.prototype={____init:function(t){var e=this;this.className=a,Kinetic.Group.call(this,t),this.on("add.kinetic",function(t){e._addListeners(t.child),e._sync()})},getText:function(){return this.find("Text")[0]},getTag:function(){return this.find("Tag")[0]},_addListeners:function(n){var i,r=this,s=function(){r._sync()};for(i=0;l>i;i++)n.on(t[i]+e,s)},getWidth:function(){return this.getText().getWidth()},getHeight:function(){return this.getText().getHeight()},_sync:function(){var t,e,n,a,l,u,c,f=this.getText(),h=this.getTag();if(f&&h){switch(t=f.getWidth(),e=f.getHeight(),n=h.getPointerDirection(),a=h.getPointerWidth(),c=h.getPointerHeight(),l=0,u=0,n){case i:l=t/2,u=-1*c;break;case r:l=t+a,u=e/2;break;case s:l=t/2,u=e+c;break;case o:l=-1*a,u=e/2}h.setAttrs({x:-1*l,y:-1*u,width:t,height:e}),f.setAttrs({x:-1*l,y:-1*u})}}},Kinetic.Util.extend(Kinetic.Label,Kinetic.Group),Kinetic.Collection.mapMethods(Kinetic.Label),Kinetic.Tag=function(t){this.___init(t)},Kinetic.Tag.prototype={___init:function(t){Kinetic.Shape.call(this,t),this.className="Tag",this.sceneFunc(this._sceneFunc)},_sceneFunc:function(t){var e=this.getWidth(),n=this.getHeight(),a=this.getPointerDirection(),l=this.getPointerWidth(),u=this.getPointerHeight();t.beginPath(),t.moveTo(0,0),a===i&&(t.lineTo((e-l)/2,0),t.lineTo(e/2,-1*u),t.lineTo((e+l)/2,0)),t.lineTo(e,0),a===r&&(t.lineTo(e,(n-u)/2),t.lineTo(e+l,n/2),t.lineTo(e,(n+u)/2)),t.lineTo(e,n),a===s&&(t.lineTo((e+l)/2,n),t.lineTo(e/2,n+u),t.lineTo((e-l)/2,n)),t.lineTo(0,n),a===o&&(t.lineTo(0,(n+u)/2),t.lineTo(-1*l,n/2),t.lineTo(0,(n-u)/2)),t.closePath(),t.fillStrokeShape(this)}},Kinetic.Util.extend(Kinetic.Tag,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.Tag,"pointerDirection",n),Kinetic.Factory.addGetterSetter(Kinetic.Tag,"pointerWidth",0),Kinetic.Factory.addGetterSetter(Kinetic.Tag,"pointerHeight",0),Kinetic.Factory.addGetterSetter(Kinetic.Tag,"cornerRadius",0),Kinetic.Collection.mapMethods(Kinetic.Tag)}(),function(){}.call(this),function(){}.call(this),function(){}.call(this),function(){}.call(this),function(){}.call(this),$(document).ready(function(){var t="#001600",e="#00b500",n="yellow",i="black",r=MAP_MAX_INDEX;Bq.Cell=function(t,e,n){this.outer=t,this.inner=e,this.layer=n},Bq.Cell.cellCache={},Bq.Cell.prototype.alert=function(){this.outer.setAttr("fill",n),this.inner.setAttr("fill",i),this.layer.draw();var r=this;window.setTimeout(function(){r.outer.setAttr("fill",t),r.inner.setAttr("fill",e),r.layer.draw()},1500)},Bq.Cell.prototype.update=function(t){t.outer&&this.outer.setAttrs(t.outer),t.inner&&this.inner.setAttrs(t.inner),t.text&&this.inner.setText(t.text)},Bq.Cell.prototype.flash=function(t){var e=this.inner.getText();this.update({text:t});var n=this;window.setTimeout(function(){n.update({text:e})},1500)},Bq.Cell.getCellById=function(t){var e=Bq.map.stage.find("#"+t)[0],n=e.getChildren()[0],i=e.getChildren()[1];return t in Bq.Cell.cellCache||(Bq.Cell.cellCache[t]=new Bq.Cell(n,i,Bq.map.fgLayer)),Bq.Cell.cellCache[t]},Bq.Cell.hashCellPair=function(t,e){return t+=r,e+=r,t*Bq.mapData.n+e}});var MAP_MAX_INDEX=12,direction={0:"north",1:"east",2:"south",3:"west"},itemId={rubbish:0},tileChars={0:" ",1:"…",2:"~",3:"%",4:"█",5:"¯",6:"]",7:"_",8:"[",9:"╗",10:"╔",11:"╚",12:"╝",50:"#",51:"^",52:"v",53:">",54:"<",65:"A",66:"B",67:"C",68:"D",69:"E",70:"F",71:"G",72:"H",73:"I",74:"J",75:"K",76:"L",77:"M",78:"N",79:"O",80:"P",81:"Q",82:"R",83:"S",84:"T",85:"U",86:"V",87:"W",88:"X",89:"Y",90:"Z",97:"a",98:"b",99:"c",100:"d",101:"e",102:"f",103:"g",104:"h",105:"i",106:"j",107:"k",108:"l",109:"m",110:"n",111:"o",112:"p",113:"q",114:"r",115:"s",116:"t",117:"u",118:"v",119:"w",120:"x",121:"y",122:"z",200:"█",201:"╗",202:"╔",203:"═",204:"╚",205:"╝",206:"║",207:"_",208:"|",209:"[",210:"]",211:"\\",212:"/",213:"(",214:")",215:"^",216:",",217:"¯",218:".",219:">"},splashArt=[[200,200,200,200,200,200,201,0,0,200,200,200,200,200,200,201,0,200,200,200,200,200,200,200,200],[200,200,202,203,203,200,200,201,200,200,202,203,203,203,200,200,201,204,203,203,200,200,202,203,203],[200,200,200,200,200,200,202,205,200,200,206,0,0,0,200,200,206,0,0,0,200,200,206,0,0],[200,200,202,203,203,200,200,201,200,200,206,0,0,0,200,200,206,0,0,0,200,200,206,0,0],[200,200,200,200,200,200,202,205,204,200,200,200,200,200,200,202,205,0,0,0,200,200,206,0,0],[204,203,203,203,203,203,205,0,0,204,203,203,203,203,203,205,0,0,0,0,204,203,205,0,0],[0,0,207,207,207,207,0,207,0,0,207,0,207,207,207,207,0,207,207,207,207,0,207,207,207],[0,0,208,0,0,208,0,208,0,0,208,0,208,207,207,207,0,209,207,207,0,0,0,208,0],[0,0,208,207,211,208,0,208,207,207,208,0,208,207,207,207,0,207,207,207,210,0,0,208,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,207,0,0,0,0,0,0,0,0,207,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,213,207,214,0,0,0,0,0,0,213,207,214,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,211,211,207,207,207,207,207,207,212,212,207,207,0,0],[0,0,0,0,0,0,0,0,0,0,0,212,211,211,0,0,0,0,212,212,0,0,212,208,0],[0,0,207,0,0,207,0,0,0,0,212,207,207,207,207,207,207,207,207,207,207,212,0,208,0],[0,212,212,0,0,211,211,0,0,0,208,0,0,0,0,0,0,0,0,0,0,208,0,208,0],[208,208,0,0,0,208,208,0,0,0,208,0,0,0,215,0,0,215,0,0,0,208,0,208,0],[0,211,211,0,212,212,0,0,0,0,208,0,0,0,0,207,207,216,0,0,0,208,0,212,0],[0,0,208,0,208,0,0,0,0,212,208,207,207,207,207,207,207,207,207,207,207,208,212,217,212],[0,0,211,0,211,0,0,0,212,0,0,0,0,0,208,0,0,0,208,0,0,0,0,212,0],[0,0,0,211,0,211,0,208,217,217,217,217,217,217,217,217,217,217,217,217,217,217,217,208,0],[0,0,0,0,211,0,217,208,0,208,217,217,217,217,217,217,217,217,217,217,217,208,0,208,0],[0,0,0,0,0,211,207,208,0,208,80,121,116,104,111,110,0,2,218,6,0,208,0,208,0],[0,0,0,0,0,0,0,208,0,208,219,219,219,0,0,0,0,0,0,0,0,208,0,208,0]];Bq.constants.MAP_MAX_INDEX=MAP_MAX_INDEX,Bq.constants.direction=direction,Bq.constants.itemId=itemId,Bq.constants.tileChars=tileChars,Bq.constants.splashArt=splashArt,$(function(){var t=new CodeMirrorREPL("interactive",{mode:"python",theme:"solarized dark"}),e=[],n=new RegExp("\\s*print"),i=new RegExp("\\s*import"),r=(new RegExp("'''"),new RegExp("def.*|class.*")),s=new RegExp("^\\s*$");t.print("This is a terminal. You can enter commands here."),t.isBalanced=function(t){var e=t.split("\n"),n=0,i=!1;for(var r in e)null!==e[r].match(/'''/)&&1==e[r].match(/'''/).length&&(i=!i),i||":"!=e[r].substr(e[r].length-1)||n++,!i&&""==e[r]&&n>0&&n--;return 0==n&&!i},t.eval=function(o){Sk.configure({output:function(e){""!=e.replace(/\n/g,"")&&t.print(e)},read:function(t){if(void 0===Sk.builtinFiles||void 0===Sk.builtinFiles.files[t])throw"File not found: '"+t+"'";return Sk.builtinFiles.files[t]}});var a=o.split("\n"),a=a.filter(function(t){return!s.test(t)}),l=e.concat(a);if(1==a.length&&-1==a[0].indexOf("=")&&!r.test(a[0])&&!i.test(a[0])&&a[0].length>0&&(n.test(a[0])||(l.pop(),l.push("evaluationresult = "+a[0]),l.push("if not evaluationresult == None: print evaluationresult")),a.pop()),a=a.filter(function(t){return!s.test(t)}),0!==l.length)try{Sk.importMainWithBody("repl",!1,l.join("\n"));var u=!1;e=e.concat(a.map(function(t){return":"!=t.substr(t.length-1)||r.test(t)?""==t&&u?(u=!1,t):n.test(t)&&u?t.replace(/print.*/g,"pass"):t:(u=!0,t)}))}catch(c){t.print(c);var f=-1;-1!=(f=c.toString().indexOf("on line"))&&(f=parseInt(c.toString().substr(f+8),10));var h=0;t.print(l.map(function(t){return++h+(f==h?">":" ")+": "+t}).join("\n"))}}}),CodeMirrorREPL.prototype.isBalanced=function(){return!0},CodeMirrorREPL.prototype.eval=function(){};var CodeMirror=function(){function t(o,c){function v(t){Gn.onDragEvent&&Gn.onDragEvent(Oi,y(t))||k(t)}function w(t){return t>=0&&t<fi.size}function $(t){return p(fi,t)}function A(t,e){ki=!0;for(var n=e-t.height,i=t;i;i=i.parent)i.height+=n}function K(t){var e={line:0,ch:0};ge(e,{line:fi.size-1,ch:$(fi.size-1).text.length},se(t),e,e),mi=!0}function G(){var t=[];return fi.iter(0,fi.size,function(e){t.push(e.text)}),t.join("\n")}function q(t){function e(e){Z&&(Jn.draggable=!1),bi=!1,u(),c(),Math.abs(t.clientX-e.clientX)+Math.abs(t.clientY-e.clientY)<10&&(_(e),Ue(s.line,s.ch,!0),Me())}function n(t){var e=An(t,!0);if(e&&!I(e,l)){li||be(),l=e,qe(s,e),mi=!1;var i=Ke();(e.line>=i.to||e.line<i.from)&&(a=setTimeout(On(function(){n(t)}),150))}}function i(t){clearTimeout(a);var e=An(t);e&&qe(s,e),_(t),Me(),mi=!0,f(),u()}Ge(T(t,"shiftKey"));for(var r=x(t);r!=Hn;r=r.parentNode)if(r.parentNode==Xn&&r!=Qn)return;for(var r=x(t);r!=Hn;r=r.parentNode)if(r.parentNode==Zn)return Gn.onGutterClick&&Gn.onGutterClick(Oi,B(Zn.childNodes,r)+Mi,t),_(t);var s=An(t);switch(S(t)){case 3:return V&&!j&&Nn(t),void 0;case 2:return s&&Ue(s.line,s.ch,!0),setTimeout(Me,20),void 0}if(!s)return x(t)==Vn&&_(t),void 0;li||be();var o=+new Date;if(di&&di.time>o-400&&I(di.pos,s))return _(t),setTimeout(Me,20),tn(s.line);if(pi&&pi.time>o-400&&I(pi.pos,s))return di={time:o,pos:s},_(t),Je(s);pi={time:o,pos:s};var a,l=s;if(Gn.dragDrop&&ne&&!Gn.readOnly&&!I(Ei.from,Ei.to)&&!R(s,Ei.from)&&!R(Ei.to,s)){Z&&(Jn.draggable=!0);var u=C(document,"mouseup",On(e),!0),c=C(Vn,"drop",On(e),!0);return bi=!0,Jn.dragDrop&&Jn.dragDrop(),void 0}_(t),Ue(s.line,s.ch,!0);var f=C(document,"mousemove",On(function(t){clearTimeout(a),_(t),X||S(t)?n(t):i(t)}),!0),u=C(document,"mouseup",On(i),!0)}function te(t){for(var e=x(t);e!=Hn;e=e.parentNode)if(e.parentNode==Zn)return _(t);var n=An(t);n&&(di={time:+new Date,pos:n},_(t),Je(n))}function re(t){function e(t,e){var i=new FileReader;i.onload=function(){s[e]=i.result,++o==r&&(n=Ve(n),On(function(){var t=xe(s.join(""),n,n);qe(n,t)})())},i.readAsText(t)}if(!Gn.onDragEvent||!Gn.onDragEvent(Oi,y(t))){t.preventDefault();var n=An(t,!0),i=t.dataTransfer.files;if(n&&!Gn.readOnly)if(i&&i.length&&window.FileReader&&window.File)for(var r=i.length,s=Array(r),o=0,a=0;r>a;++a)e(i[a],a);else try{var s=t.dataTransfer.getData("Text");s&&jn(function(){var t=Ei.from,e=Ei.to;qe(n,n),bi&&xe("",t,e),Se(s),Me()})}catch(t){}}}function le(t){var e=Ee();if(t.dataTransfer.setData("Text",e),V||J){var n=document.createElement("img");n.scr="data:image/gif;base64,R0lGODdhAgACAIAAAAAAAP///ywAAAAAAgACAAACAoRRADs=",t.dataTransfer.setDragImage(n,0,0)}}function ue(t,e){if("string"==typeof t&&(t=H[t],!t))return!1;var n=hi;try{Gn.readOnly&&(Ni=!0),e&&(hi=null),t(Oi)}catch(i){if(i!=W)throw i;return!1}finally{hi=n,Ni=!1}return!0}function ce(t){function r(){u=!0}var s=e(Gn.keyMap),o=s.auto;clearTimeout(Pi),o&&!i(t)&&(Pi=setTimeout(function(){e(Gn.keyMap)==s&&(Gn.keyMap=o.call?o.call(null,Oi):o)},50));var a=ae[T(t,"keyCode")],l=!1;if(null==a||t.altGraphKey)return!1;T(t,"altKey")&&(a="Alt-"+a),T(t,"ctrlKey")&&(a="Ctrl-"+a),T(t,"metaKey")&&(a="Cmd-"+a);var u=!1;return l=T(t,"shiftKey")?n("Shift-"+a,Gn.extraKeys,Gn.keyMap,function(t){return ue(t,!0)},r)||n(a,Gn.extraKeys,Gn.keyMap,function(t){return"string"==typeof t&&/^go[A-Z]/.test(t)?ue(t):void 0},r):n(a,Gn.extraKeys,Gn.keyMap,ue,r),u&&(l=!1),l&&(_(t),Ln(),X&&(t.oldKeyCode=t.keyCode,t.keyCode=0)),l}function fe(t,e){var i=n("'"+e+"'",Gn.extraKeys,Gn.keyMap,function(t){return ue(t,!0)});return i&&(_(t),Ln()),i}function he(t){if(li||be(),X&&27==t.keyCode&&(t.returnValue=!1),Gi&&Ne()&&(Gi=!1),!Gn.onKeyEvent||!Gn.onKeyEvent(Oi,y(t))){var e=T(t,"keyCode");Ge(16==e||T(t,"shiftKey"));var n=ce(t);window.opera&&(ji=n?e:null,!n&&88==e&&T(t,j?"metaKey":"ctrlKey")&&Se(""))}}function pe(t){if(Gi&&Ne(),!Gn.onKeyEvent||!Gn.onKeyEvent(Oi,y(t))){var e=T(t,"keyCode"),n=T(t,"charCode");if(window.opera&&e==ji)return ji=null,_(t),void 0;if(!(window.opera&&(!t.which||t.which<10)||ee)||!ce(t)){var i=String.fromCharCode(null==n?e:n);Gn.electricChars&&oi.electricChars&&Gn.smartIndent&&!Gn.readOnly&&oi.electricChars.indexOf(i)>-1&&setTimeout(On(function(){nn(Ei.to.line,"smart")}),75),fe(t,i)||Ae()}}}function de(t){Gn.onKeyEvent&&Gn.onKeyEvent(Oi,y(t))||16==T(t,"keyCode")&&(hi=null)}function be(){"nocursor"!=Gn.readOnly&&(li||(Gn.onFocus&&Gn.onFocus(Oi),li=!0,-1==Hn.className.search(/\bCodeMirror-focused\b/)&&(Hn.className+=" CodeMirror-focused"),wi||Le(!0)),$e(),Ln())}function me(){li&&(Gn.onBlur&&Gn.onBlur(Oi),li=!1,Ti&&On(function(){Ti&&(Ti(),Ti=null)})(),Hn.className=Hn.className.replace(" CodeMirror-focused","")),clearInterval(si),setTimeout(function(){li||(hi=null)},150)}function ge(t,e,n,i,r){if(!Ni){if(Fi){var s=[];for(fi.iter(t.line,e.line+1,function(t){s.push(t.text)}),Fi.addChange(t.line,n.length,s);Fi.done.length>Gn.undoDepth;)Fi.done.shift()}we(t,e,n,i,r)}}function ve(t,e){if(t.length){for(var n=t.pop(),i=[],r=n.length-1;r>=0;r-=1){var s=n[r],o=[],a=s.start+s.added;fi.iter(s.start,a,function(t){o.push(t.text)}),i.push({start:s.start,added:s.old.length,old:o});var l=Ve({line:s.start+s.old.length-1,ch:F(o[o.length-1],s.old[s.old.length-1])});we({line:s.start,ch:0},{line:a-1,ch:$(a-1).text.length},s.old,l,l)}mi=!0,e.push(i)}}function ye(){ve(Fi.done,Fi.undone)}function _e(){ve(Fi.undone,Fi.done)}function we(t,e,n,i,r){function s(t){return t<=Math.min(e.line,e.line+v)?t:t+v}if(!Ni){var o=!1,a=Di.length;Gn.lineWrapping||fi.iter(t.line,e.line+1,function(t){return t.hidden||t.text.length!=a?void 0:(o=!0,!0)}),(t.line!=e.line||n.length>1)&&(ki=!0);var l=e.line-t.line,c=$(t.line),f=$(e.line);if(0==t.ch&&0==e.ch&&""==n[n.length-1]){var h=[],p=null;t.line?(p=$(t.line-1),p.fixMarkEnds(f)):f.fixMarkStarts();for(var d=0,b=n.length-1;b>d;++d)h.push(u.inheritMarks(n[d],p));l&&fi.remove(t.line,l,xi),h.length&&fi.insert(t.line,h)}else if(c==f)if(1==n.length)c.replace(t.ch,e.ch,n[0]);else{f=c.split(e.ch,n[n.length-1]),c.replace(t.ch,null,n[0]),c.fixMarkEnds(f);for(var h=[],d=1,b=n.length-1;b>d;++d)h.push(u.inheritMarks(n[d],c));h.push(f),fi.insert(t.line+1,h)}else if(1==n.length)c.replace(t.ch,null,n[0]),f.replace(null,e.ch,""),c.append(f),fi.remove(t.line+1,l,xi);else{var h=[];c.replace(t.ch,null,n[0]),f.replace(null,e.ch,n[n.length-1]),c.fixMarkEnds(f);for(var d=1,b=n.length-1;b>d;++d)h.push(u.inheritMarks(n[d],c));l>1&&fi.remove(t.line+1,l-1,xi),fi.insert(t.line+1,h)}if(Gn.lineWrapping){var m=Math.max(5,Vn.clientWidth/Cn()-3);fi.iter(t.line,t.line+n.length,function(t){if(!t.hidden){var e=Math.ceil(t.text.length/m)||1;e!=t.height&&A(t,e)}})}else fi.iter(t.line,t.line+n.length,function(t){var e=t.text;!t.hidden&&e.length>a&&(Di=e,a=e.length,Ci=null,o=!1)}),o&&(Si=!0);for(var g=[],v=n.length-l-1,d=0,y=ai.length;y>d;++d){var _=ai[d];_<t.line?g.push(_):_>e.line&&g.push(_+v)}var w=t.line+Math.min(n.length,500);Dn(t.line,w),g.push(w),ai=g,Fn(100),vi.push({from:t.line,to:e.line+1,diff:v});var k={from:t,to:e,text:n};if(yi){for(var x=yi;x.next;x=x.next);x.next=k}else yi=k;ze(i,r,s(Ei.from.line),s(Ei.to.line)),Vn.clientHeight&&(Xn.style.height=fi.height*Tn()+2*En()+"px")}}function ke(){var t=0;Di="",Ci=null,fi.iter(0,fi.size,function(e){var n=e.text;!e.hidden&&n.length>t&&(t=n.length,Di=n)}),Si=!1}function xe(t,e,n){function i(i){if(R(i,e))return i;if(!R(n,i))return r;var s=i.line+t.length-(n.line-e.line)-1,o=i.ch;return i.line==n.line&&(o+=t[t.length-1].length-(n.ch-(n.line==e.line?e.ch:0))),{line:s,ch:o}}e=Ve(e),n=n?Ve(n):e,t=se(t);var r;return Te(t,e,n,function(t){return r=t,{from:i(Ei.from),to:i(Ei.to)}}),r}function Se(t,e){Te(se(t),Ei.from,Ei.to,function(t){return"end"==e?{from:t,to:t}:"start"==e?{from:Ei.from,to:Ei.from}:{from:Ei.from,to:t}})}function Te(t,e,n,i){var r=1==t.length?t[0].length+e.ch:t[t.length-1].length,s=i({line:e.line+t.length-1,ch:r});ge(e,n,t,s.from,s.to)}function Ce(t,e){var n=t.line,i=e.line;if(n==i)return $(n).text.slice(t.ch,e.ch);var r=[$(n).text.slice(t.ch)];return fi.iter(n+1,i,function(t){r.push(t.text)}),r.push($(i).text.slice(0,e.ch)),r.join("\n")}function Ee(){return Ce(Ei.from,Ei.to)}function $e(){Gi||ui.set(Gn.pollInterval,function(){Bn(),Ne(),li&&$e(),Pn()})}function Ae(){function t(){Bn();var n=Ne();n||e?(Gi=!1,$e()):(e=!0,ui.set(60,t)),Pn()}var e=!1;Gi=!0,ui.set(20,t)}function Ne(){if(wi||!li||oe(Wn)||Gn.readOnly)return!1;var t=Wn.value;if(t==qi)return!1;hi=null;for(var e=0,n=Math.min(qi.length,t.length);n>e&&qi[e]==t[e];)++e;return e<qi.length?Ei.from={line:Ei.from.line,ch:Ei.from.ch-(qi.length-e)}:Ai&&I(Ei.from,Ei.to)&&(Ei.to={line:Ei.to.line,ch:Math.min($(Ei.to.line).text.length,Ei.to.ch+(t.length-e))}),Se(t.slice(e),"end"),t.length>1e3?Wn.value=qi="":qi=t,!0}function Le(t){I(Ei.from,Ei.to)?t&&(qi=Wn.value=""):(qi="",Wn.value=Ee(),M(Wn))}function Me(){"nocursor"!=Gn.readOnly&&Wn.focus()}function Ie(){if(ei.getBoundingClientRect){var t=ei.getBoundingClientRect();if(!X||t.top!=t.bottom){var e=window.innerHeight||Math.max(document.body.offsetHeight,document.documentElement.offsetHeight);(t.top<0||t.bottom>e)&&ei.scrollIntoView()}}}function Re(){var t=kn(Ei.inverted?Ei.from:Ei.to),e=Gn.lineWrapping?Math.min(t.x,Jn.offsetWidth):t.x;return De(e,t.y,e,t.yBot)}function De(t,e,n,i){var r=$n(),s=En();e+=s,i+=s,t+=r,n+=r;var o=Vn.clientHeight,a=Vn.scrollTop,l=!1,u=!0;a>e?(Vn.scrollTop=Math.max(0,e),l=!0):i>a+o&&(Vn.scrollTop=i-o,l=!0);var c=Vn.clientWidth,f=Vn.scrollLeft,h=Gn.fixedGutter?Yn.clientWidth:0,p=h+r+10>t;return f+h>t||p?(p&&(t=0),Vn.scrollLeft=Math.max(0,t-10-h),l=!0):n>c+f-3&&(Vn.scrollLeft=n+10-c,l=!0,n>Xn.clientWidth&&(u=!1)),l&&Gn.onScroll&&Gn.onScroll(Oi),u}function Ke(){var t=Tn(),e=Vn.scrollTop-En(),n=Math.max(0,Math.floor(e/t)),i=Math.ceil((e+Vn.clientHeight)/t);return{from:b(fi,n),to:b(fi,i)}}function Fe(t,e){function n(){Ci=Vn.clientWidth;var t=ii.firstChild,e=!1;return fi.iter(Mi,Ii,function(n){if(!n.hidden){var i=Math.round(t.offsetHeight/c)||1;n.height!=i&&(A(n,i),ki=e=!0)}t=t.nextSibling}),e&&(Xn.style.height=fi.height*c+2*En()+"px"),e}if(!Vn.clientWidth)return Mi=Ii=Li=0,void 0;var i=Ke();if(!(t!==!0&&0==t.length&&i.from>Mi&&i.to<Ii)){var r=Math.max(i.from-100,0),s=Math.min(fi.size,i.to+100);r>Mi&&20>r-Mi&&(r=Mi),Ii>s&&20>Ii-s&&(s=Math.min(fi.size,Ii));for(var o=t===!0?[]:Be([{from:Mi,to:Ii,domStart:0}],t),a=0,l=0;l<o.length;++l){var u=o[l];u.from<r&&(u.domStart+=r-u.from,u.from=r),u.to>s&&(u.to=s),u.from>=u.to?o.splice(l--,1):a+=u.to-u.from}if(a!=s-r||r!=Mi||s!=Ii){o.sort(function(t,e){return t.domStart-e.domStart});var c=Tn(),f=Yn.style.display;ii.style.display="none",Pe(r,s,o),ii.style.display=Yn.style.display="";var h=r!=Mi||s!=Ii||Ri!=Vn.clientHeight+c;if(h&&(Ri=Vn.clientHeight+c),Mi=r,Ii=s,Li=m(fi,r),Qn.style.top=Li*c+"px",Vn.clientHeight&&(Xn.style.height=fi.height*c+2*En()+"px"),ii.childNodes.length!=Ii-Mi)throw new Error("BAD PATCH! "+JSON.stringify(o)+" size="+(Ii-Mi)+" nodes="+ii.childNodes.length);
return Gn.lineWrapping?n():(null==Ci&&(Ci=_n(Di)),Ci>Vn.clientWidth?(Jn.style.width=Ci+"px",Xn.style.width="",Xn.style.width=Vn.scrollWidth+"px"):Jn.style.width=Xn.style.width=""),Yn.style.display=f,(h||ki)&&Oe()&&Gn.lineWrapping&&n()&&Oe(),je(),!e&&Gn.onUpdate&&Gn.onUpdate(Oi),!0}}}function Be(t,e){for(var n=0,i=e.length||0;i>n;++n){for(var r=e[n],s=[],o=r.diff||0,a=0,l=t.length;l>a;++a){var u=t[a];r.to<=u.from&&r.diff?s.push({from:u.from+o,to:u.to+o,domStart:u.domStart}):r.to<=u.from||r.from>=u.to?s.push(u):(r.from>u.from&&s.push({from:u.from,to:r.from,domStart:u.domStart}),r.to<u.to&&s.push({from:r.to+o,to:u.to+o,domStart:u.domStart+(r.to-u.from)}))}t=s}return t}function Pe(t,e,n){function i(t){var e=t.nextSibling;return t.parentNode.removeChild(t),e}if(n.length){for(var r=0,s=ii.firstChild,o=0;o<n.length;++o){for(var a=n[o];a.domStart>r;)s=i(s),r++;for(var l=0,u=a.to-a.from;u>l;++l)s=s.nextSibling,r++}for(;s;)s=i(s)}else ii.innerHTML="";var c=n.shift(),s=ii.firstChild,l=t,f=document.createElement("div");fi.iter(t,e,function(t){if(c&&c.to==l&&(c=n.shift()),!c||c.from>l){if(t.hidden)var e=f.innerHTML="<pre></pre>";else{var e="<pre"+(t.className?' class="'+t.className+'"':"")+">"+t.getHTML(an)+"</pre>";t.bgClassName&&(e='<div style="position: relative"><pre class="'+t.bgClassName+'" style="position: absolute; left: 0; right: 0; top: 0; bottom: 0; z-index: -2">&#160;</pre>'+e+"</div>")}f.innerHTML=e,ii.insertBefore(f.firstChild,s)}else s=s.nextSibling;++l})}function Oe(){if(Gn.gutter||Gn.lineNumbers){var t=Qn.offsetHeight,e=Vn.clientHeight;Yn.style.height=(2>t-e?e:t)+"px";var n,i=[],r=Mi;if(fi.iter(Mi,Math.max(Ii,Mi+1),function(t){if(t.hidden)i.push("<pre></pre>");else{var e=t.gutterMarker,s=Gn.lineNumbers?r+Gn.firstLineNumber:null;e&&e.text?s=e.text.replace("%N%",null!=s?s:""):null==s&&(s=" "),i.push(e&&e.style?'<pre class="'+e.style+'">':"<pre>",s);for(var o=1;o<t.height;++o)i.push("<br/>&#160;");i.push("</pre>"),e||(n=r)}++r}),Yn.style.display="none",Zn.innerHTML=i.join(""),null!=n){for(var s=Zn.childNodes[n-Mi],o=String(fi.size).length,a=L(s),l="";a.length+l.length<o;)l+=" ";l&&s.insertBefore(document.createTextNode(l),s.firstChild)}Yn.style.display="";var u=Math.abs((parseInt(Jn.style.marginLeft)||0)-Yn.offsetWidth)>2;return Jn.style.marginLeft=Yn.offsetWidth+"px",ki=!1,u}}function je(){function t(t,e,n,i){var r=Y?"width: "+(n?c-n-t:c)+"px":"right: "+n+"px";u+='<div class="CodeMirror-selected" style="position: absolute; left: '+t+"px; top: "+e+"px; "+r+"; height: "+i+'px"></div>'}var e=I(Ei.from,Ei.to),n=kn(Ei.from,!0),i=e?n:kn(Ei.to,!0),r=Ei.inverted?n:i,s=Tn(),o=N(Hn),a=N(ii);if(Un.style.top=Math.max(0,Math.min(Vn.offsetHeight,r.y+a.top-o.top))+"px",Un.style.left=Math.max(0,Math.min(Vn.offsetWidth,r.x+a.left-o.left))+"px",e)ei.style.top=r.y+"px",ei.style.left=(Gn.lineWrapping?Math.min(r.x,Jn.offsetWidth):r.x)+"px",ei.style.display="",ni.style.display="none";else{var l=n.y==i.y,u="",c=Jn.clientWidth||Jn.offsetWidth,f=Jn.clientHeight||Jn.offsetHeight;if(Ei.from.ch&&n.y>=0){var h=l?c-i.x:0;t(n.x,n.y,h,s)}var p=Math.max(0,n.y+(Ei.from.ch?s:0)),d=Math.min(i.y,f)-p;d>.2*s&&t(0,p,0,d),l&&Ei.from.ch||!(i.y<f-.5*s)||t(0,i.y,c-i.x,s),ni.innerHTML=u,ei.style.display="none",ni.style.display=""}}function Ge(t){hi=t?hi||(Ei.inverted?Ei.to:Ei.from):null}function qe(t,e){var n=hi&&Ve(hi);n&&(R(n,t)?t=n:R(e,n)&&(e=n)),ze(t,e),gi=!0}function ze(t,e,n,i){if(zi=null,null==n&&(n=Ei.from.line,i=Ei.to.line),!I(Ei.from,t)||!I(Ei.to,e)){if(R(e,t)){var r=e;e=t,t=r}if(t.line!=n){var s=He(t,n,Ei.from.ch);s?t=s:vn(t.line,!1)}if(e.line!=i&&(e=He(e,i,Ei.to.ch)),I(t,e)?Ei.inverted=!1:I(t,Ei.to)?Ei.inverted=!1:I(e,Ei.from)&&(Ei.inverted=!0),Gn.autoClearEmptyLines&&I(Ei.from,Ei.to)){var o=Ei.inverted?t:e;if(o.line!=Ei.from.line&&Ei.from.line<fi.size){var a=$(Ei.from.line);/^\s+$/.test(a.text)&&setTimeout(On(function(){if(a.parent&&/^\s+$/.test(a.text)){var t=d(a);xe("",{line:t,ch:0},{line:t,ch:a.text.length})}},10))}}Ei.from=t,Ei.to=e,_i=!0}}function He(t,e,n){function i(e){for(var i=t.line+e,r=1==e?fi.size:-1;i!=r;){var o=$(i);if(!o.hidden){var a=t.ch;return(s||a>n||a>o.text.length)&&(a=o.text.length),{line:i,ch:a}}i+=e}}var r=$(t.line),s=t.ch==r.text.length&&t.ch!=n;return r.hidden?t.line>=e?i(1)||i(-1):i(-1)||i(1):t}function Ue(t,e,n){var i=Ve({line:t,ch:e||0});(n?qe:ze)(i,i)}function We(t){return Math.max(0,Math.min(t,fi.size-1))}function Ve(t){if(t.line<0)return{line:0,ch:0};if(t.line>=fi.size)return{line:fi.size-1,ch:$(fi.size-1).text.length};var e=t.ch,n=$(t.line).text.length;return null==e||e>n?{line:t.line,ch:n}:0>e?{line:t.line,ch:0}:t}function Xe(t,e){function n(){for(var e=s+t,n=0>t?-1:fi.size;e!=n;e+=t){var i=$(e);if(!i.hidden)return s=e,a=i,!0}}function i(e){if(o==(0>t?0:a.text.length)){if(e||!n())return!1;o=0>t?a.text.length:0}else o+=t;return!0}var r=Ei.inverted?Ei.from:Ei.to,s=r.line,o=r.ch,a=$(s);if("char"==e)i();else if("column"==e)i(!0);else if("word"==e)for(var l=!1;!(0>t)||i();){if(P(a.text.charAt(o)))l=!0;else if(l){0>t&&(t=1,i());break}if(t>0&&!i())break}return{line:s,ch:o}}function Qe(t,e){var n=0>t?Ei.from:Ei.to;(hi||I(Ei.from,Ei.to))&&(n=Xe(t,e)),Ue(n.line,n.ch,!0)}function Ye(t,e){I(Ei.from,Ei.to)?0>t?xe("",Xe(t,e),Ei.to):xe("",Ei.from,Xe(t,e)):xe("",Ei.from,Ei.to),gi=!0}function Ze(t,e){var n=0,i=kn(Ei.inverted?Ei.from:Ei.to,!0);null!=zi&&(i.x=zi),"page"==e?n=Math.min(Vn.clientHeight,window.innerHeight||document.documentElement.clientHeight):"line"==e&&(n=Tn());var r=xn(i.x,i.y+n*t+2);"page"==e&&(Vn.scrollTop+=kn(r,!0).y-i.y),Ue(r.line,r.ch,!0),zi=i.x}function Je(t){for(var e=$(t.line).text,n=t.ch,i=t.ch;n>0&&P(e.charAt(n-1));)--n;for(;i<e.length&&P(e.charAt(i));)++i;qe({line:t.line,ch:n},{line:t.line,ch:i})}function tn(t){qe({line:t,ch:0},Ve({line:t+1,ch:0}))}function en(t){if(I(Ei.from,Ei.to))return nn(Ei.from.line,t);for(var e=Ei.to.line-(Ei.to.ch?0:1),n=Ei.from.line;e>=n;++n)nn(n,t)}function nn(t,e){if(e||(e="add"),"smart"==e)if(oi.indent)var n=Rn(t);else e="prev";var i,r=$(t),s=r.indentation(Gn.tabSize),o=r.text.match(/^\s*/)[0];"prev"==e?i=t?$(t-1).indentation(Gn.tabSize):0:"smart"==e?i=oi.indent(n,r.text.slice(o.length),r.text):"add"==e?i=s+Gn.indentUnit:"subtract"==e&&(i=s-Gn.indentUnit),i=Math.max(0,i);var a=i-s;if(a){var l="",u=0;if(Gn.indentWithTabs)for(var c=Math.floor(i/Gn.tabSize);c;--c)u+=Gn.tabSize,l+="	";for(;i>u;)++u,l+=" "}else{if(Ei.from.line!=t&&Ei.to.line!=t)return;var l=o}xe(l,{line:t,ch:0},{line:t,ch:o.length})}function rn(){oi=t.getMode(Gn,Gn.mode),fi.iter(0,fi.size,function(t){t.stateAfter=null}),ai=[0],Fn()}function sn(){var t=Gn.gutter||Gn.lineNumbers;Yn.style.display=t?"":"none",t?ki=!0:ii.parentNode.style.marginLeft=0}function on(){if(Gn.lineWrapping){Hn.className+=" CodeMirror-wrap";var t=Vn.clientWidth/Cn()-3;fi.iter(0,fi.size,function(e){if(!e.hidden){var n=Math.ceil(e.text.length/t)||1;1!=n&&A(e,n)}}),Jn.style.width=Xn.style.width=""}else Hn.className=Hn.className.replace(" CodeMirror-wrap",""),Ci=null,Di="",fi.iter(0,fi.size,function(t){1==t.height||t.hidden||A(t,1),t.text.length>Di.length&&(Di=t.text)});vi.push({from:0,to:fi.size})}function an(t){var e=Gn.tabSize-t%Gn.tabSize,n=Ki[e];if(n)return n;for(var i='<span class="cm-tab">',r=0;e>r;++r)i+=" ";return Ki[e]={html:i+"</span>",width:e}}function ln(){Vn.className=Vn.className.replace(/\s*cm-s-\S+/g,"")+Gn.theme.replace(/(^|\s)\s*/g," cm-s-")}function un(){var t=U[Gn.keyMap].style;Hn.className=Hn.className.replace(/\s*cm-keymap-\S+/g,"")+(t?" cm-keymap-"+t:"")}function cn(){this.set=[]}function fn(t,e,n){function i(t,e,n,i){$(t).addMark(new a(e,n,i,r))}t=Ve(t),e=Ve(e);var r=new cn;if(!R(t,e))return r;if(t.line==e.line)i(t.line,t.ch,e.ch,n);else{i(t.line,t.ch,null,n);for(var s=t.line+1,o=e.line;o>s;++s)i(s,null,null,n);i(e.line,null,e.ch,n)}return vi.push({from:t.line,to:e.line+1}),r}function hn(t){t=Ve(t);var e=new l(t.ch);return $(t.line).addMark(e),e}function pn(t){t=Ve(t);var e=[],n=$(t.line).marked;if(!n)return e;for(var i=0,r=n.length;r>i;++i){var s=n[i];(null==s.from||s.from<=t.ch)&&(null==s.to||s.to>=t.ch)&&e.push(s.marker||s)}return e}function dn(t,e,n){return"number"==typeof t&&(t=$(We(t))),t.gutterMarker={text:e,style:n},ki=!0,t}function bn(t){"number"==typeof t&&(t=$(We(t))),t.gutterMarker=null,ki=!0}function mn(t,e){var n=t,i=t;return"number"==typeof t?i=$(We(t)):n=d(t),null==n?null:e(i,n)?(vi.push({from:n,to:n+1}),i):null}function gn(t,e,n){return mn(t,function(t){return t.className!=e||t.bgClassName!=n?(t.className=e,t.bgClassName=n,!0):void 0})}function vn(t,e){return mn(t,function(t,n){if(t.hidden!=e){if(t.hidden=e,!Gn.lineWrapping){var i=t.text;e&&i.length==Di.length?Si=!0:!e&&i.length>Di.length&&(Di=i,Ci=null,Si=!1)}A(t,e?0:1);var r=Ei.from.line,s=Ei.to.line;if(e&&(r==n||s==n)){var o=r==n?He({line:r,ch:0},r,0):Ei.from,a=s==n?He({line:s,ch:0},s,0):Ei.to;if(!a)return;ze(o,a)}return ki=!0}})}function yn(t){if("number"==typeof t){if(!w(t))return null;var e=t;if(t=$(t),!t)return null}else{var e=d(t);if(null==e)return null}var n=t.gutterMarker;return{line:e,handle:t,text:t.text,markerText:n&&n.text,markerClass:n&&n.style,lineClass:t.className,bgClass:t.bgClassName}}function _n(t){return ti.innerHTML="<pre><span>x</span></pre>",ti.firstChild.firstChild.firstChild.nodeValue=t,ti.firstChild.firstChild.offsetWidth||10}function wn(t,e){if(0==e)return{top:0,left:0};var n=Gn.lineWrapping&&e<t.text.length&&ie.test(t.text.slice(e-1,e+1));ti.innerHTML="<pre>"+t.getHTML(an,e,Xi,n)+"</pre>";var i=document.getElementById(Xi),r=i.offsetTop,s=i.offsetLeft;if(X&&0==r&&0==s){var o=document.createElement("span");o.innerHTML="x",i.parentNode.insertBefore(o,i.nextSibling),r=o.offsetTop}return{top:r,left:s}}function kn(t,e){var n,i=Tn(),r=i*(m(fi,t.line)-(e?Li:0));if(0==t.ch)n=0;else{var s=wn($(t.line),t.ch);n=s.left,Gn.lineWrapping&&(r+=Math.max(0,s.top))}return{x:n,y:r,yBot:r+i}}function xn(t,e){function n(t){var e=wn(a,t);if(u){var n=Math.round(e.top/i);return Math.max(0,e.left+(n-c)*Vn.clientWidth)}return e.left}0>e&&(e=0);var i=Tn(),r=Cn(),s=Li+Math.floor(e/i),o=b(fi,s);if(o>=fi.size)return{line:fi.size-1,ch:$(fi.size-1).text.length};var a=$(o),l=a.text,u=Gn.lineWrapping,c=u?s-m(fi,o):0;if(0>=t&&0==c)return{line:o,ch:0};for(var f,h=0,p=0,d=l.length,g=Math.min(d,Math.ceil((t+c*Vn.clientWidth*.9)/r));;){var v=n(g);if(!(t>=v&&d>g)){f=v,d=g;break}g=Math.min(d,Math.ceil(1.2*g))}if(t>f)return{line:o,ch:d};for(g=Math.floor(.8*d),v=n(g),t>v&&(h=g,p=v);;){if(1>=d-h)return{line:o,ch:f-t>t-p?h:d};var y=Math.ceil((h+d)/2),_=n(y);_>t?(d=y,f=_):(h=y,p=_)}}function Sn(t){var e=kn(t,!0),n=N(Jn);return{x:n.left+e.x,y:n.top+e.y,yBot:n.top+e.yBot}}function Tn(){if(null==Wi){Wi="<pre>";for(var t=0;49>t;++t)Wi+="x<br/>";Wi+="x</pre>"}var e=ii.clientHeight;return e==Ui?Hi:(Ui=e,ti.innerHTML=Wi,Hi=ti.firstChild.offsetHeight/50||1,ti.innerHTML="",Hi)}function Cn(){return Vn.clientWidth==Qi?Vi:(Qi=Vn.clientWidth,Vi=_n("x"))}function En(){return Jn.offsetTop}function $n(){return Jn.offsetLeft}function An(t,e){var n,i,r=N(Vn,!0);try{n=t.clientX,i=t.clientY}catch(t){return null}if(!e&&(n-r.left>Vn.clientWidth||i-r.top>Vn.clientHeight))return null;var s=N(Jn,!0);return xn(n-s.left,i-s.top)}function Nn(t){function e(){var t=se(Wn.value).join("\n");t!=s&&On(Se)(t,"end"),Un.style.position="relative",Wn.style.cssText=r,Q&&(Vn.scrollTop=i),wi=!1,Le(!0),$e()}var n=An(t),i=Vn.scrollTop;if(n&&!window.opera){(I(Ei.from,Ei.to)||R(n,Ei.from)||!R(n,Ei.to))&&On(Ue)(n.line,n.ch);var r=Wn.style.cssText;Un.style.position="absolute",Wn.style.cssText="position: fixed; width: 30px; height: 30px; top: "+(t.clientY-5)+"px; left: "+(t.clientX-5)+"px; z-index: 1000; background: white; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);",wi=!0;var s=Wn.value=Ee();if(Me(),M(Wn),V){k(t);var o=C(window,"mouseup",function(){o(),setTimeout(e,20)},!0)}else setTimeout(e,50)}}function Ln(){clearInterval(si);var t=!0;ei.style.visibility="",si=setInterval(function(){ei.style.visibility=(t=!t)?"":"hidden"},650)}function Mn(t){function e(t,e,n){if(t.text)for(var i,r=t.styles,s=o?0:t.text.length-1,l=o?0:r.length-2,u=o?r.length:-2;l!=u;l+=2*a){var c=r[l];if(null==r[l+1]||r[l+1]==h){for(var f=o?0:c.length-1,b=o?c.length:-1;f!=b;f+=a,s+=a)if(s>=e&&n>s&&d.test(i=c.charAt(f))){var m=Yi[i];if(">"==m.charAt(1)==o)p.push(i);else{if(p.pop()!=m.charAt(0))return{pos:s,match:!1};if(!p.length)return{pos:s,match:!0}}}}else s+=a*c.length}}var n=Ei.inverted?Ei.from:Ei.to,i=$(n.line),r=n.ch-1,s=r>=0&&Yi[i.text.charAt(r)]||Yi[i.text.charAt(++r)];if(s){for(var o=(s.charAt(0),">"==s.charAt(1)),a=o?1:-1,l=i.styles,u=r+1,c=0,f=l.length;f>c;c+=2)if((u-=l[c].length)<=0){var h=l[c+1];break}for(var p=[i.text.charAt(r)],d=/[(){}[\]]/,c=n.line,f=o?Math.min(c+100,fi.size):Math.max(-1,c-100);c!=f;c+=a){var i=$(c),b=c==n.line,m=e(i,b&&o?r+1:0,b&&!o?r:i.text.length);if(m)break}m||(m={pos:null,match:!1});var h=m.match?"CodeMirror-matchingbracket":"CodeMirror-nonmatchingbracket",g=fn({line:n.line,ch:r},{line:n.line,ch:r+1},h),v=null!=m.pos&&fn({line:c,ch:m.pos},{line:c,ch:m.pos+1},h),y=On(function(){g.clear(),v&&v.clear()});t?setTimeout(y,800):Ti=y}}function In(t){for(var e,n,i=t,r=t-40;i>r;--i){if(0==i)return 0;var s=$(i-1);if(s.stateAfter)return i;var o=s.indentation(Gn.tabSize);(null==n||e>o)&&(n=i-1,e=o)}return n}function Rn(t){var e=In(t),n=e&&$(e-1).stateAfter;return n=n?r(oi,n):s(oi),fi.iter(e,t,function(t){t.highlight(oi,n,Gn.tabSize),t.stateAfter=r(oi,n)}),t>e&&vi.push({from:e,to:t}),t<fi.size&&!$(t).stateAfter&&ai.push(t),n}function Dn(t,e){var n=Rn(t);fi.iter(t,e,function(t){t.highlight(oi,n,Gn.tabSize),t.stateAfter=r(oi,n)})}function Kn(){for(var t=+new Date+Gn.workTime,e=ai.length;ai.length;){if($(Mi).stateAfter)var n=ai.pop();else var n=Mi;if(!(n>=fi.size)){var i=In(n),o=i&&$(i-1).stateAfter;o=o?r(oi,o):s(oi);var a=0,l=oi.compareStates,u=!1,c=i,f=!1;if(fi.iter(c,fi.size,function(e){var i=e.stateAfter;if(+new Date>t)return ai.push(c),Fn(Gn.workDelay),u&&vi.push({from:n,to:c+1}),f=!0;var s=e.highlight(oi,o,Gn.tabSize);s&&(u=!0),e.stateAfter=r(oi,o);var h=null;if(l){var p=i&&l(i,o);p!=W&&(h=!!p)}return null==h&&(s===!1&&i?++a>3&&(!oi.indent||oi.indent(i,"")==oi.indent(o,""))&&(h=!0):a=0),h?!0:(++c,void 0)}),f)return;u&&vi.push({from:n,to:c+1})}}e&&Gn.onHighlightComplete&&Gn.onHighlightComplete(Oi)}function Fn(t){ai.length&&ci.set(t,On(Kn))}function Bn(){mi=gi=yi=null,vi=[],_i=!1,xi=[]}function Pn(){var t,e=!1;Si&&ke(),_i&&(e=!Re()),vi.length?t=Fe(vi,!0):(_i&&je(),ki&&Oe()),e&&Re(),_i&&(Ie(),Ln()),li&&!wi&&(mi===!0||mi!==!1&&_i)&&Le(gi),_i&&Gn.matchBrackets&&setTimeout(On(function(){Ti&&(Ti(),Ti=null),I(Ei.from,Ei.to)&&Mn(!1)}),20);var n=yi,i=xi;_i&&Gn.onCursorActivity&&Gn.onCursorActivity(Oi),n&&Gn.onChange&&Oi&&Gn.onChange(Oi,n);for(var r=0;r<i.length;++r)i[r](Oi);t&&Gn.onUpdate&&Gn.onUpdate(Oi)}function On(t){return function(){Zi++||Bn();try{var e=t.apply(this,arguments)}finally{--Zi||Pn()}return e}}function jn(t){Fi.startCompound();try{return t()}finally{Fi.endCompound()}}var Gn={},qn=t.defaults;for(var zn in qn)qn.hasOwnProperty(zn)&&(Gn[zn]=(c&&c.hasOwnProperty(zn)?c:qn)[zn]);var Hn=document.createElement("div");Hn.className="CodeMirror"+(Gn.lineWrapping?" CodeMirror-wrap":""),Hn.innerHTML='<div style="overflow: hidden; position: relative; width: 3px; height: 0px;"><textarea style="position: absolute; padding: 0; width: 1px; height: 1em" wrap="off" autocorrect="off" autocapitalize="off"></textarea></div><div class="CodeMirror-scroll" tabindex="-1"><div style="position: relative"><div style="position: relative"><div class="CodeMirror-gutter"><div class="CodeMirror-gutter-text"></div></div><div class="CodeMirror-lines"><div style="position: relative; z-index: 0"><div style="position: absolute; width: 100%; height: 0; overflow: hidden; visibility: hidden;"></div><pre class="CodeMirror-cursor">&#160;</pre><div style="position: relative; z-index: -1"></div><div></div></div></div></div></div></div>',o.appendChild?o.appendChild(Hn):o(Hn);var Un=Hn.firstChild,Wn=Un.firstChild,Vn=Hn.lastChild,Xn=Vn.firstChild,Qn=Xn.firstChild,Yn=Qn.firstChild,Zn=Yn.firstChild,Jn=Yn.nextSibling.firstChild,ti=Jn.firstChild,ei=ti.nextSibling,ni=ei.nextSibling,ii=ni.nextSibling;ln(),un(),O&&(Wn.style.width="0px"),Z||(Jn.draggable=!0),Jn.style.outline="none",null!=Gn.tabindex&&(Wn.tabIndex=Gn.tabindex),Gn.autofocus&&Me(),Gn.gutter||Gn.lineNumbers||(Yn.style.display="none"),ee&&(Un.style.height="1px",Un.style.position="absolute");try{_n("x")}catch(ri){throw ri.message.match(/runtime/i)&&(ri=new Error("A CodeMirror inside a P-style element does not work in Internet Explorer. (innerHTML bug)")),ri}var si,oi,ai,li,ui=new E,ci=new E,fi=new h([new f([new u("")])]);rn();var hi,pi,di,bi,mi,gi,vi,yi,_i,wi,ki,xi,Si,Ti,Ci,Ei={from:{line:0,ch:0},to:{line:0,ch:0},inverted:!1},$i=0,Ai=!1,Ni=!1,Li=0,Mi=0,Ii=0,Ri=0,Di="",Ki={};On(function(){K(Gn.value||""),mi=!1})();var Fi=new g;C(Vn,"mousedown",On(q)),C(Vn,"dblclick",On(te)),C(Jn,"selectstart",_),V||C(Vn,"contextmenu",Nn),C(Vn,"scroll",function(){$i=Vn.scrollTop,Fe([]),Gn.fixedGutter&&(Yn.style.left=Vn.scrollLeft+"px"),Gn.onScroll&&Gn.onScroll(Oi)}),C(window,"resize",function(){Fe(!0)}),C(Wn,"keyup",On(de)),C(Wn,"input",Ae),C(Wn,"keydown",On(he)),C(Wn,"keypress",On(pe)),C(Wn,"focus",be),C(Wn,"blur",me),Gn.dragDrop&&(C(Jn,"dragstart",le),C(Vn,"dragenter",v),C(Vn,"dragover",v),C(Vn,"drop",On(re))),C(Vn,"paste",function(){Me(),Ae()}),C(Wn,"paste",Ae),C(Wn,"cut",On(function(){Gn.readOnly||Se("")})),ee&&C(Xn,"mouseup",function(){document.activeElement==Wn&&Wn.blur(),Me()});var Bi;try{Bi=document.activeElement==Wn}catch(ri){}Bi||Gn.autofocus?setTimeout(be,20):me();var Pi,Oi=Hn.CodeMirror={getValue:G,setValue:On(K),getSelection:Ee,replaceSelection:On(Se),focus:function(){window.focus(),Me(),be(),Ae()},setOption:function(t,e){var n=Gn[t];Gn[t]=e,"mode"==t||"indentUnit"==t?rn():"readOnly"==t&&"nocursor"==e?(me(),Wn.blur()):"readOnly"!=t||e?"theme"==t?ln():"lineWrapping"==t&&n!=e?On(on)():"tabSize"==t?Fe(!0):"keyMap"==t&&un():Le(!0),("lineNumbers"==t||"gutter"==t||"firstLineNumber"==t||"theme"==t)&&(sn(),Fe(!0))},getOption:function(t){return Gn[t]},undo:On(ye),redo:On(_e),indentLine:On(function(t,e){"string"!=typeof e&&(e=null==e?Gn.smartIndent?"smart":"prev":e?"add":"subtract"),w(t)&&nn(t,e)}),indentSelection:On(en),historySize:function(){return{undo:Fi.done.length,redo:Fi.undone.length}},clearHistory:function(){Fi=new g},matchBrackets:On(function(){Mn(!0)}),getTokenAt:On(function(t){return t=Ve(t),$(t.line).getTokenAt(oi,Rn(t.line),t.ch)}),getStateAfter:function(t){return t=We(null==t?fi.size-1:t),Rn(t+1)},cursorCoords:function(t,e){return null==t&&(t=Ei.inverted),this.charCoords(t?Ei.from:Ei.to,e)},charCoords:function(t,e){return t=Ve(t),"local"==e?kn(t,!1):"div"==e?kn(t,!0):Sn(t)},coordsChar:function(t){var e=N(Jn);return xn(t.x-e.left,t.y-e.top)},markText:On(fn),setBookmark:hn,findMarksAt:pn,setMarker:On(dn),clearMarker:On(bn),setLineClass:On(gn),hideLine:On(function(t){return vn(t,!0)}),showLine:On(function(t){return vn(t,!1)}),onDeleteLine:function(t,e){if("number"==typeof t){if(!w(t))return null;t=$(t)}return(t.handlers||(t.handlers=[])).push(e),t},lineInfo:yn,addWidget:function(t,e,n,i,r){t=kn(Ve(t));var s=t.yBot,o=t.x;if(e.style.position="absolute",Xn.appendChild(e),"over"==i)s=t.y;else if("near"==i){var a=Math.max(Vn.offsetHeight,fi.height*Tn()),l=Math.max(Xn.clientWidth,Jn.clientWidth)-$n();t.yBot+e.offsetHeight>a&&t.y>e.offsetHeight&&(s=t.y-e.offsetHeight),o+e.offsetWidth>l&&(o=l-e.offsetWidth)}e.style.top=s+En()+"px",e.style.left=e.style.right="","right"==r?(o=Xn.clientWidth-e.offsetWidth,e.style.right="0px"):("left"==r?o=0:"middle"==r&&(o=(Xn.clientWidth-e.offsetWidth)/2),e.style.left=o+$n()+"px"),n&&De(o,s,o+e.offsetWidth,s+e.offsetHeight)},lineCount:function(){return fi.size},clipPos:Ve,getCursor:function(t){return null==t&&(t=Ei.inverted),D(t?Ei.from:Ei.to)},somethingSelected:function(){return!I(Ei.from,Ei.to)},setCursor:On(function(t,e,n){null==e&&"number"==typeof t.line?Ue(t.line,t.ch,n):Ue(t,e,n)}),setSelection:On(function(t,e,n){(n?qe:ze)(Ve(t),Ve(e||t))}),getLine:function(t){return w(t)?$(t).text:void 0},getLineHandle:function(t){return w(t)?$(t):void 0},setLine:On(function(t,e){w(t)&&xe(e,{line:t,ch:0},{line:t,ch:$(t).text.length})}),removeLine:On(function(t){w(t)&&xe("",{line:t,ch:0},Ve({line:t+1,ch:0}))}),replaceRange:On(xe),getRange:function(t,e){return Ce(Ve(t),Ve(e))},triggerOnKeyDown:On(he),execCommand:function(t){return H[t](Oi)},moveH:On(Qe),deleteH:On(Ye),moveV:On(Ze),toggleOverwrite:function(){Ai?(Ai=!1,ei.className=ei.className.replace(" CodeMirror-overwrite","")):(Ai=!0,ei.className+=" CodeMirror-overwrite")},posFromIndex:function(t){var e,n=0;return fi.iter(0,fi.size,function(i){var r=i.text.length+1;return r>t?(e=t,!0):(t-=r,++n,void 0)}),Ve({line:n,ch:e})},indexFromPos:function(t){if(t.line<0||t.ch<0)return 0;var e=t.ch;return fi.iter(0,t.line,function(t){e+=t.text.length+1}),e},scrollTo:function(t,e){null!=t&&(Vn.scrollLeft=t),null!=e&&(Vn.scrollTop=e),Fe([])},operation:function(t){return On(t)()},compoundChange:function(t){return jn(t)},refresh:function(){Fe(!0),Vn.scrollHeight>$i&&(Vn.scrollTop=$i)},getInputField:function(){return Wn},getWrapperElement:function(){return Hn},getScrollerElement:function(){return Vn},getGutterElement:function(){return Yn}},ji=null,Gi=!1,qi="",zi=null;cn.prototype.clear=On(function(){for(var t=1/0,e=-1/0,n=0,i=this.set.length;i>n;++n){var r=this.set[n],s=r.marked;if(s&&r.parent){var o=d(r);t=Math.min(t,o),e=Math.max(e,o);for(var a=0;a<s.length;++a)s[a].marker==this&&s.splice(a--,1)}}1/0!=t&&vi.push({from:t,to:e+1})}),cn.prototype.find=function(){for(var t,e,n=0,i=this.set.length;i>n;++n)for(var r=this.set[n],s=r.marked,o=0;o<s.length;++o){var a=s[o];if(a.marker==this&&(null!=a.from||null!=a.to)){var l=d(r);null!=l&&(null!=a.from&&(t={line:l,ch:a.from}),null!=a.to&&(e={line:l,ch:a.to}))}}return{from:t,to:e}};var Hi,Ui,Wi,Vi,Xi="CodeMirror-temp-"+Math.floor(16777215*Math.random()).toString(16),Qi=0,Yi={"(":")>",")":"(<","[":"]>","]":"[<","{":"}>","}":"{<"},Zi=0;for(var Ji in z)z.propertyIsEnumerable(Ji)&&!Oi.propertyIsEnumerable(Ji)&&(Oi[Ji]=z[Ji]);return Oi}function e(t){return"string"==typeof t?U[t]:t}function n(t,n,i,r,s){function o(n){n=e(n);var i=n[t];if(null!=i&&r(i))return!0;if(n.nofallthrough)return s&&s(),!0;var a=n.fallthrough;if(null==a)return!1;if("[object Array]"!=Object.prototype.toString.call(a))return o(a);for(var l=0,u=a.length;u>l;++l)if(o(a[l]))return!0;return!1}return n&&o(n)?!0:o(i)}function i(t){var e=ae[T(t,"keyCode")];return"Ctrl"==e||"Alt"==e||"Shift"==e||"Mod"==e}function r(t,e){if(e===!0)return e;if(t.copyState)return t.copyState(e);var n={};for(var i in e){var r=e[i];r instanceof Array&&(r=r.concat([])),n[i]=r}return n}function s(t,e,n){return t.startState?t.startState(e,n):!0}function o(t,e){this.pos=this.start=0,this.string=t,this.tabSize=e||8}function a(t,e,n,i){this.from=t,this.to=e,this.style=n,this.marker=i}function l(t){this.from=t,this.to=t,this.line=null}function u(t,e){this.styles=e||[t,null],this.text=t,this.height=1,this.marked=this.gutterMarker=this.className=this.bgClassName=this.handlers=null,this.stateAfter=this.parent=this.hidden=null}function c(t,e,n,i){for(var r=0,s=0,o=0;e>s;r+=2){var a=n[r],l=s+a.length;0==o?(l>t&&i.push(a.slice(t-s,Math.min(a.length,e-s)),n[r+1]),l>=t&&(o=1)):1==o&&(l>e?i.push(a.slice(0,e-s),n[r+1]):i.push(a,n[r+1])),s=l}}function f(t){this.lines=t,this.parent=null;for(var e=0,n=t.length,i=0;n>e;++e)t[e].parent=this,i+=t[e].height;this.height=i}function h(t){this.children=t;for(var e=0,n=0,i=0,r=t.length;r>i;++i){var s=t[i];e+=s.chunkSize(),n+=s.height,s.parent=this}this.size=e,this.height=n,this.parent=null}function p(t,e){for(;!t.lines;)for(var n=0;;++n){var i=t.children[n],r=i.chunkSize();if(r>e){t=i;break}e-=r}return t.lines[e]}function d(t){if(null==t.parent)return null;for(var e=t.parent,n=B(e.lines,t),i=e.parent;i;e=i,i=i.parent){var r=0;for(i.children.length;i.children[r]!=e;++r)n+=i.children[r].chunkSize()}return n}function b(t,e){var n=0;t:do{for(var i=0,r=t.children.length;r>i;++i){var s=t.children[i],o=s.height;if(o>e){t=s;continue t}e-=o,n+=s.chunkSize()}return n}while(!t.lines);for(var i=0,r=t.lines.length;r>i;++i){var a=t.lines[i],l=a.height;if(l>e)break;e-=l}return n+i}function m(t,e){var n=0;t:do{for(var i=0,r=t.children.length;r>i;++i){var s=t.children[i],o=s.chunkSize();if(o>e){t=s;continue t}e-=o,n+=s.height}return n}while(!t.lines);for(var i=0;e>i;++i)n+=t.lines[i].height;return n}function g(){this.time=0,this.done=[],this.undone=[],this.compound=0,this.closed=!1}function v(){k(this)}function y(t){return t.stop||(t.stop=v),t}function _(t){t.preventDefault?t.preventDefault():t.returnValue=!1}function w(t){t.stopPropagation?t.stopPropagation():t.cancelBubble=!0}function k(t){_(t),w(t)}function x(t){return t.target||t.srcElement}function S(t){return t.which?t.which:1&t.button?1:2&t.button?3:4&t.button?2:void 0}function T(t,e){var n=t.override&&t.override.hasOwnProperty(e);return n?t.override[e]:t[e]}function C(t,e,n,i){if("function"==typeof t.addEventListener){if(t.addEventListener(e,n,!1),i)return function(){t.removeEventListener(e,n,!1)}}else{var r=function(t){n(t||window.event)};if(t.attachEvent("on"+e,r),i)return function(){t.detachEvent("on"+e,r)}}}function E(){this.id=null}function $(t,e,n){null==e&&(e=t.search(/[^\s\u00a0]/),-1==e&&(e=t.length));for(var i=0,r=0;e>i;++i)"	"==t.charAt(i)?r+=n-r%n:++r;return r}function A(t){return t.currentStyle?t.currentStyle:window.getComputedStyle(t,null)}function N(t,e){for(var n=t.ownerDocument.body,i=0,r=0,s=!1,o=t;o;o=o.offsetParent){var a=o.offsetLeft,l=o.offsetTop;o==n?(i+=Math.abs(a),r+=Math.abs(l)):(i+=a,r+=l),e&&"fixed"==A(o).position&&(s=!0)}for(var u=e&&!s?null:n,o=t.parentNode;o!=u;o=o.parentNode)null!=o.scrollLeft&&(i-=o.scrollLeft,r-=o.scrollTop);return{left:i,top:r}}function L(t){return t.textContent||t.innerText||t.nodeValue||""}function M(t){O?(t.selectionStart=0,t.selectionEnd=t.value.length):t.select()}function I(t,e){return t.line==e.line&&t.ch==e.ch}function R(t,e){return t.line<e.line||t.line==e.line&&t.ch<e.ch}function D(t){return{line:t.line,ch:t.ch}}function K(t){return re.textContent=t,re.innerHTML}function F(t,e){if(!e)return 0;if(!t)return e.length;for(var n=t.length,i=e.length;n>=0&&i>=0&&t.charAt(n)==e.charAt(i);--n,--i);return i+1}function B(t,e){if(t.indexOf)return t.indexOf(e);for(var n=0,i=t.length;i>n;++n)if(t[n]==e)return n;return-1}function P(t){return/\w/.test(t)||t.toUpperCase()!=t.toLowerCase()}t.defaults={value:"",mode:null,theme:"default",indentUnit:2,indentWithTabs:!1,smartIndent:!0,tabSize:4,keyMap:"default",extraKeys:null,electricChars:!0,autoClearEmptyLines:!1,onKeyEvent:null,onDragEvent:null,lineWrapping:!1,lineNumbers:!1,gutter:!1,fixedGutter:!1,firstLineNumber:1,readOnly:!1,dragDrop:!0,onChange:null,onCursorActivity:null,onGutterClick:null,onHighlightComplete:null,onUpdate:null,onFocus:null,onBlur:null,onScroll:null,matchBrackets:!1,workTime:100,workDelay:200,pollInterval:100,undoDepth:40,tabindex:null,autofocus:null};var O=/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent),j=O||/Mac/.test(navigator.platform),G=(/Win/.test(navigator.platform),t.modes={}),q=t.mimeModes={};t.defineMode=function(e,n){if(t.defaults.mode||"null"==e||(t.defaults.mode=e),arguments.length>2){n.dependencies=[];for(var i=2;i<arguments.length;++i)n.dependencies.push(arguments[i])}G[e]=n},t.defineMIME=function(t,e){q[t]=e},t.resolveMode=function(e){if("string"==typeof e&&q.hasOwnProperty(e))e=q[e];else if("string"==typeof e&&/^[\w\-]+\/[\w\-]+\+xml$/.test(e))return t.resolveMode("application/xml");return"string"==typeof e?{name:e}:e||{name:"null"}},t.getMode=function(e,n){var n=t.resolveMode(n),i=G[n.name];return i?i(e,n):t.getMode(e,"text/plain")},t.listModes=function(){var t=[];for(var e in G)G.propertyIsEnumerable(e)&&t.push(e);return t},t.listMIMEs=function(){var t=[];for(var e in q)q.propertyIsEnumerable(e)&&t.push({mime:e,mode:q[e]});return t};var z=t.extensions={};t.defineExtension=function(t,e){z[t]=e};var H=t.commands={selectAll:function(t){t.setSelection({line:0,ch:0},{line:t.lineCount()-1})},killLine:function(t){var e=t.getCursor(!0),n=t.getCursor(!1),i=!I(e,n);i||t.getLine(e.line).length!=e.ch?t.replaceRange("",e,i?n:{line:e.line}):t.replaceRange("",e,{line:e.line+1,ch:0})},deleteLine:function(t){var e=t.getCursor().line;t.replaceRange("",{line:e,ch:0},{line:e})},undo:function(t){t.undo()},redo:function(t){t.redo()},goDocStart:function(t){t.setCursor(0,0,!0)},goDocEnd:function(t){t.setSelection({line:t.lineCount()-1},null,!0)},goLineStart:function(t){t.setCursor(t.getCursor().line,0,!0)},goLineStartSmart:function(t){var e=t.getCursor(),n=t.getLine(e.line),i=Math.max(0,n.search(/\S/));t.setCursor(e.line,e.ch<=i&&e.ch?0:i,!0)},goLineEnd:function(t){t.setSelection({line:t.getCursor().line},null,!0)},goLineUp:function(t){t.moveV(-1,"line")},goLineDown:function(t){t.moveV(1,"line")},goPageUp:function(t){t.moveV(-1,"page")},goPageDown:function(t){t.moveV(1,"page")},goCharLeft:function(t){t.moveH(-1,"char")},goCharRight:function(t){t.moveH(1,"char")},goColumnLeft:function(t){t.moveH(-1,"column")},goColumnRight:function(t){t.moveH(1,"column")},goWordLeft:function(t){t.moveH(-1,"word")},goWordRight:function(t){t.moveH(1,"word")},delCharLeft:function(t){t.deleteH(-1,"char")},delCharRight:function(t){t.deleteH(1,"char")},delWordLeft:function(t){t.deleteH(-1,"word")},delWordRight:function(t){t.deleteH(1,"word")},indentAuto:function(t){t.indentSelection("smart")},indentMore:function(t){t.indentSelection("add")},indentLess:function(t){t.indentSelection("subtract")},insertTab:function(t){t.replaceSelection("	","end")},defaultTab:function(t){t.somethingSelected()?t.indentSelection("add"):t.replaceSelection("	","end")},transposeChars:function(t){var e=t.getCursor(),n=t.getLine(e.line);e.ch>0&&e.ch<n.length-1&&t.replaceRange(n.charAt(e.ch)+n.charAt(e.ch-1),{line:e.line,ch:e.ch-1},{line:e.line,ch:e.ch+1})},newlineAndIndent:function(t){t.replaceSelection("\n","end"),t.indentLine(t.getCursor().line)},toggleOverwrite:function(t){t.toggleOverwrite()}},U=t.keyMap={};U.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharRight",Backspace:"delCharLeft",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite"},U.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Alt-Up":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Down":"goDocEnd","Ctrl-Left":"goWordLeft","Ctrl-Right":"goWordRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delWordLeft","Ctrl-Delete":"delWordRight","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore",fallthrough:"basic"},U.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goWordLeft","Alt-Right":"goWordRight","Cmd-Left":"goLineStart","Cmd-Right":"goLineEnd","Alt-Backspace":"delWordLeft","Ctrl-Alt-Backspace":"delWordRight","Alt-Delete":"delWordRight","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore",fallthrough:["basic","emacsy"]},U["default"]=j?U.macDefault:U.pcDefault,U.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageUp","Shift-Ctrl-V":"goPageDown","Ctrl-D":"delCharRight","Ctrl-H":"delCharLeft","Alt-D":"delWordRight","Alt-Backspace":"delWordLeft","Ctrl-K":"killLine","Ctrl-T":"transposeChars"},t.fromTextArea=function(e,n){function i(){e.value=a.getValue()}function r(){i(),e.form.submit=o,e.form.submit(),e.form.submit=r}if(n||(n={}),n.value=e.value,!n.tabindex&&e.tabindex&&(n.tabindex=e.tabindex),null==n.autofocus&&null!=e.getAttribute("autofocus")&&(n.autofocus=!0),e.form){var s=C(e.form,"submit",i,!0);if("function"==typeof e.form.submit){var o=e.form.submit;e.form.submit=r}}e.style.display="none";var a=t(function(t){e.parentNode.insertBefore(t,e.nextSibling)},n);return a.save=i,a.getTextArea=function(){return e},a.toTextArea=function(){i(),e.parentNode.removeChild(a.getWrapperElement()),e.style.display="",e.form&&(s(),"function"==typeof e.form.submit&&(e.form.submit=o))},a},t.copyState=r,t.startState=s,o.prototype={eol:function(){return this.pos>=this.string.length
},sol:function(){return 0==this.pos},peek:function(){return this.string.charAt(this.pos)},next:function(){return this.pos<this.string.length?this.string.charAt(this.pos++):void 0},eat:function(t){var e=this.string.charAt(this.pos);if("string"==typeof t)var n=e==t;else var n=e&&(t.test?t.test(e):t(e));return n?(++this.pos,e):void 0},eatWhile:function(t){for(var e=this.pos;this.eat(t););return this.pos>e},eatSpace:function(){for(var t=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>t},skipToEnd:function(){this.pos=this.string.length},skipTo:function(t){var e=this.string.indexOf(t,this.pos);return e>-1?(this.pos=e,!0):void 0},backUp:function(t){this.pos-=t},column:function(){return $(this.string,this.start,this.tabSize)},indentation:function(){return $(this.string,null,this.tabSize)},match:function(t,e,n){function i(t){return n?t.toLowerCase():t}if("string"!=typeof t){var r=this.string.slice(this.pos).match(t);return r&&e!==!1&&(this.pos+=r[0].length),r}return i(this.string).indexOf(i(t),this.pos)==this.pos?(e!==!1&&(this.pos+=t.length),!0):void 0},current:function(){return this.string.slice(this.start,this.pos)}},t.StringStream=o,a.prototype={attach:function(t){this.marker.set.push(t)},detach:function(t){var e=B(this.marker.set,t);e>-1&&this.marker.set.splice(e,1)},split:function(t,e){if(this.to<=t&&null!=this.to)return null;var n=this.from<t||null==this.from?null:this.from-t+e,i=null==this.to?null:this.to-t+e;return new a(n,i,this.style,this.marker)},dup:function(){return new a(null,null,this.style,this.marker)},clipTo:function(t,e,n,i,r){t&&i>this.from&&(i<this.to||null==this.to)?this.from=null:null!=this.from&&this.from>=e&&(this.from=Math.max(i,this.from)+r),n&&(e<this.to||null==this.to)&&(e>this.from||null==this.from)?this.to=null:null!=this.to&&this.to>e&&(this.to=i<this.to?this.to+r:e)},isDead:function(){return null!=this.from&&null!=this.to&&this.from>=this.to},sameSet:function(t){return this.marker==t.marker}},l.prototype={attach:function(t){this.line=t},detach:function(t){this.line==t&&(this.line=null)},split:function(t,e){return t<this.from?(this.from=this.to=this.from-t+e,this):void 0},isDead:function(){return this.from>this.to},clipTo:function(t,e,n,i,r){(t||e<this.from)&&(n||i>this.to)?(this.from=0,this.to=-1):this.from>e&&(this.from=this.to=Math.max(i,this.from)+r)},sameSet:function(){return!1},find:function(){return this.line&&this.line.parent?{line:d(this.line),ch:this.from}:null},clear:function(){if(this.line){var t=B(this.line.marked,this);-1!=t&&this.line.marked.splice(t,1),this.line=null}}},u.inheritMarks=function(t,e){var n=new u(t),i=e&&e.marked;if(i)for(var r=0;r<i.length;++r)if(null==i[r].to&&i[r].style){var s=n.marked||(n.marked=[]),o=i[r],a=o.dup();s.push(a),a.attach(n)}return n},u.prototype={replace:function(t,e,n){var i=[],r=this.marked,s=null==e?this.text.length:e;if(c(0,t,this.styles,i),n&&i.push(n,null),c(s,this.text.length,this.styles,i),this.styles=i,this.text=this.text.slice(0,t)+n+this.text.slice(s),this.stateAfter=null,r)for(var o=n.length-(s-t),a=0;a<r.length;++a){var l=r[a];l.clipTo(null==t,t||0,null==e,s,o),l.isDead()&&(l.detach(this),r.splice(a--,1))}},split:function(t,e){var n=[e,null],i=this.marked;c(t,this.text.length,this.styles,n);var r=new u(e+this.text.slice(t),n);if(i)for(var s=0;s<i.length;++s){var o=i[s],a=o.split(t,e.length);a&&(r.marked||(r.marked=[]),r.marked.push(a),a.attach(r),a==o&&i.splice(s--,1))}return r},append:function(t){var e=this.text.length,n=t.marked,i=this.marked;if(this.text+=t.text,c(0,t.text.length,t.styles,this.styles),i)for(var r=0;r<i.length;++r)null==i[r].to&&(i[r].to=e);if(n&&n.length){i||(this.marked=i=[]);t:for(var r=0;r<n.length;++r){var s=n[r];if(!s.from)for(var o=0;o<i.length;++o){var a=i[o];if(a.to==e&&a.sameSet(s)){a.to=null==s.to?null:s.to+e,a.isDead()&&(a.detach(this),n.splice(r--,1));continue t}}i.push(s),s.attach(this),s.from+=e,null!=s.to&&(s.to+=e)}}},fixMarkEnds:function(t){var e=this.marked,n=t.marked;if(e)for(var i=0;i<e.length;++i){var r=e[i],s=null==r.to;if(s&&n)for(var o=0;o<n.length;++o)if(n[o].sameSet(r)){s=!1;break}s&&(r.to=this.text.length)}},fixMarkStarts:function(){var t=this.marked;if(t)for(var e=0;e<t.length;++e)null==t[e].from&&(t[e].from=0)},addMark:function(t){t.attach(this),null==this.marked&&(this.marked=[]),this.marked.push(t),this.marked.sort(function(t,e){return(t.from||0)-(e.from||0)})},highlight:function(t,e,n){var i,r=new o(this.text,n),s=this.styles,a=0,l=!1,u=s[0];for(""==this.text&&t.blankLine&&t.blankLine(e);!r.eol();){var c=t.token(r,e),f=this.text.slice(r.start,r.pos);if(r.start=r.pos,a&&s[a-1]==c?s[a-2]+=f:f&&(!l&&(s[a+1]!=c||a&&s[a-2]!=i)&&(l=!0),s[a++]=f,s[a++]=c,i=u,u=s[a]),r.pos>5e3){s[a++]=this.text.slice(r.pos),s[a++]=null;break}}return s.length!=a&&(s.length=a,l=!0),a&&s[a-2]!=i&&(l=!0),l||(s.length<5&&this.text.length<10?null:!1)},getTokenAt:function(t,e,n){for(var i=this.text,r=new o(i);r.pos<n&&!r.eol();){r.start=r.pos;var s=t.token(r,e)}return{start:r.start,end:r.pos,string:r.current(),className:s||null,state:e}},indentation:function(t){return $(this.text,null,t)},getHTML:function(t,e,n,i){function r(e,n){if(e){if(l&&X&&" "==e.charAt(0)&&(e=" "+e.slice(1)),l=!1,-1==e.indexOf("	")){u+=e.length;var i=K(e)}else for(var i="",r=0;;){var s=e.indexOf("	",r);if(-1==s){i+=K(e.slice(r)),u+=e.length-r;break}u+=s-r;var o=t(u);i+=K(e.slice(r,s))+o.html,u+=o.width,r=s+1}n?a.push('<span class="',n,'">',i,"</span>"):a.push(i)}}function s(t){return t?"cm-"+t.replace(/ +/g," cm-"):null}function o(){for(var t;x<b.length&&((t=b[x]).from==v||null==t.from);)null!=t.style&&k.push(t),++x;w=x<b.length?b[x].from:1/0;for(var e=0;e<k.length;++e){var n=k[e].to||1/0;n==v?k.splice(e--,1):w=Math.min(n,w)}}var a=[],l=!0,u=0,c=r;if(null!=e){var f=0,h='<span id="'+n+'">';c=function(t,n){var s=t.length;if(e>=f&&f+s>e){e>f&&(r(t.slice(0,e-f),n),i&&a.push("<wbr>")),a.push(h);var o=e-f;r(window.opera?t.slice(o,o+1):t.slice(o),n),a.push("</span>"),window.opera&&r(t.slice(o+1),n),e--,f+=s}else f+=s,r(t,n),f==e&&f==m?a.push(h+" </span>"):f>e+10&&/\s/.test(t)&&(c=function(){})}}var p=this.styles,d=this.text,b=this.marked,m=d.length;if(d||null!=e)if(b&&b.length)for(var g,v=0,y=0,_="",w=b[0].from||0,k=[],x=0;m>v;){w==v&&o();for(var S=Math.min(m,w);;){if(_){for(var T=v+_.length,C=g,E=0;E<k.length;++E)C=(C?C+" ":"")+k[E].style;if(c(T>S?_.slice(0,S-v):_,C),T>=S){_=_.slice(S-v),v=S;break}v=T}_=p[y++],g=s(p[y++])}}else for(var y=0,$=0;m>$;y+=2){var A=p[y],g=p[y+1],N=A.length;$+N>m&&(A=A.slice(0,m-$)),$+=N,c(A,s(g))}else c(" ");return a.join("")},cleanUp:function(){if(this.parent=null,this.marked)for(var t=0,e=this.marked.length;e>t;++t)this.marked[t].detach(this)}},f.prototype={chunkSize:function(){return this.lines.length},remove:function(t,e,n){for(var i=t,r=t+e;r>i;++i){var s=this.lines[i];if(this.height-=s.height,s.cleanUp(),s.handlers)for(var o=0;o<s.handlers.length;++o)n.push(s.handlers[o])}this.lines.splice(t,e)},collapse:function(t){t.splice.apply(t,[t.length,0].concat(this.lines))},insertHeight:function(t,e,n){this.height+=n,this.lines=this.lines.slice(0,t).concat(e).concat(this.lines.slice(t));for(var i=0,r=e.length;r>i;++i)e[i].parent=this},iterN:function(t,e,n){for(var i=t+e;i>t;++t)if(n(this.lines[t]))return!0}},h.prototype={chunkSize:function(){return this.size},remove:function(t,e,n){this.size-=e;for(var i=0;i<this.children.length;++i){var r=this.children[i],s=r.chunkSize();if(s>t){var o=Math.min(e,s-t),a=r.height;if(r.remove(t,o,n),this.height-=a-r.height,s==o&&(this.children.splice(i--,1),r.parent=null),0==(e-=o))break;t=0}else t-=s}if(this.size-e<25){var l=[];this.collapse(l),this.children=[new f(l)],this.children[0].parent=this}},collapse:function(t){for(var e=0,n=this.children.length;n>e;++e)this.children[e].collapse(t)},insert:function(t,e){for(var n=0,i=0,r=e.length;r>i;++i)n+=e[i].height;this.insertHeight(t,e,n)},insertHeight:function(t,e,n){this.size+=e.length,this.height+=n;for(var i=0,r=this.children.length;r>i;++i){var s=this.children[i],o=s.chunkSize();if(o>=t){if(s.insertHeight(t,e,n),s.lines&&s.lines.length>50){for(;s.lines.length>50;){var a=s.lines.splice(s.lines.length-25,25),l=new f(a);s.height-=l.height,this.children.splice(i+1,0,l),l.parent=this}this.maybeSpill()}break}t-=o}},maybeSpill:function(){if(!(this.children.length<=10)){var t=this;do{var e=t.children.splice(t.children.length-5,5),n=new h(e);if(t.parent){t.size-=n.size,t.height-=n.height;var i=B(t.parent.children,t);t.parent.children.splice(i+1,0,n)}else{var r=new h(t.children);r.parent=t,t.children=[r,n],t=r}n.parent=t.parent}while(t.children.length>10);t.parent.maybeSpill()}},iter:function(t,e,n){this.iterN(t,e-t,n)},iterN:function(t,e,n){for(var i=0,r=this.children.length;r>i;++i){var s=this.children[i],o=s.chunkSize();if(o>t){var a=Math.min(e,o-t);if(s.iterN(t,a,n))return!0;if(0==(e-=a))break;t=0}else t-=o}}},g.prototype={addChange:function(t,e,n){this.undone.length=0;var i=+new Date,r=this.done[this.done.length-1],s=r&&r[r.length-1],o=i-this.time;if(this.compound&&r&&!this.closed)r.push({start:t,added:e,old:n});else if(o>400||!s||this.closed||s.start>t+n.length||s.start+s.added<t)this.done.push([{start:t,added:e,old:n}]),this.closed=!1;else{for(var a=Math.max(0,s.start-t),l=Math.max(0,t+n.length-(s.start+s.added)),u=a;u>0;--u)s.old.unshift(n[u-1]);for(var u=l;u>0;--u)s.old.push(n[n.length-u]);a&&(s.start=t),s.added+=e-(n.length-a-l)}this.time=i},startCompound:function(){this.compound++||(this.closed=!0)},endCompound:function(){--this.compound||(this.closed=!0)}},t.e_stop=k,t.e_preventDefault=_,t.e_stopPropagation=w,t.connect=C,E.prototype={set:function(t,e){clearTimeout(this.id),this.id=setTimeout(e,t)}};var W=t.Pass={toString:function(){return"CodeMirror.Pass"}},V=/gecko\/\d{7}/i.test(navigator.userAgent),X=/MSIE \d/.test(navigator.userAgent),Q=/MSIE [1-8]\b/.test(navigator.userAgent),Y=X&&5==document.documentMode,Z=/WebKit\//.test(navigator.userAgent),J=/Chrome\//.test(navigator.userAgent),te=/Apple Computer/.test(navigator.vendor),ee=/KHTML\//.test(navigator.userAgent),ne=function(){if(Q)return!1;var t=document.createElement("div");return"draggable"in t||"dragDrop"in t}(),ie=(function(){var t=document.createElement("textarea");return t.value="foo\nbar",t.value.indexOf("\r")>-1?"\r\n":"\n"}(),/^$/);V?ie=/$'/:te?ie=/\-[^ \-?]|\?[^ !'\"\),.\-\/:;\?\]\}]/:J&&(ie=/\-[^ \-\.?]|\?[^ \-\.?\]\}:;!'\"\),\/]|[\.!\"#&%\)*+,:;=>\]|\}~][\(\{\[<]|\$'/),null!=document.documentElement.getBoundingClientRect&&(N=function(t,e){try{var n=t.getBoundingClientRect();n={top:n.top,left:n.left}}catch(i){n={top:0,left:0}}if(!e)if(null==window.pageYOffset){var r=document.documentElement||document.body.parentNode;null==r.scrollTop&&(r=document.body),n.top+=r.scrollTop,n.left+=r.scrollLeft}else n.top+=window.pageYOffset,n.left+=window.pageXOffset;return n});var re=document.createElement("pre");"\na"==K("a")?K=function(t){return re.textContent=t,re.innerHTML.slice(1)}:"	"!=K("	")&&(K=function(t){return re.innerHTML="",re.appendChild(document.createTextNode(t)),re.innerHTML}),t.htmlEscape=K;var se=3!="\n\nb".split(/\n/).length?function(t){for(var e,n=0,i=[];(e=t.indexOf("\n",n))>-1;)i.push(t.slice(n,"\r"==t.charAt(e-1)?e-1:e)),n=e+1;return i.push(t.slice(n)),i}:function(t){return t.split(/\r?\n/)};t.splitLines=se;var oe=window.getSelection?function(t){try{return t.selectionStart!=t.selectionEnd}catch(e){return!1}}:function(t){try{var e=t.ownerDocument.selection.createRange()}catch(n){}return e&&e.parentElement()==t?0!=e.compareEndPoints("StartToEnd",e):!1};t.defineMode("null",function(){return{token:function(t){t.skipToEnd()}}}),t.defineMIME("text/plain","null");var ae={3:"Enter",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",91:"Mod",92:"Mod",93:"Mod",127:"Delete",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63276:"PageUp",63277:"PageDown",63275:"End",63273:"Home",63234:"Left",63232:"Up",63235:"Right",63233:"Down",63302:"Insert",63272:"Delete"};return t.keyNames=ae,function(){for(var t=0;10>t;t++)ae[t+48]=String(t);for(var t=65;90>=t;t++)ae[t]=String.fromCharCode(t);for(var t=1;12>=t;t++)ae[t+111]=ae[t+63235]="F"+t}(),t}();CodeMirror.defineMode("python",function(t,e){function n(t){return new RegExp("^(("+t.join(")|(")+"))\\b")}function i(t,e){if(t.sol()){var n=e.scopes[0].offset;if(t.eatSpace()){var i=t.indentation();return i>n?x="indent":n>i&&(x="dedent"),null}n>0&&o(t,e)}if(t.eatSpace())return null;var s=t.peek();if("#"===s)return t.skipToEnd(),"comment";if(t.match(/^[0-9\.]/,!1)){var a=!1;if(t.match(/^\d*\.\d+(e[\+\-]?\d+)?/i)&&(a=!0),t.match(/^\d+\.\d*/)&&(a=!0),t.match(/^\.\d+/)&&(a=!0),a)return t.eat(/J/i),"number";var m=!1;if(t.match(/^0x[0-9a-f]+/i)&&(m=!0),t.match(/^0b[01]+/i)&&(m=!0),t.match(/^0o[0-7]+/i)&&(m=!0),t.match(/^[1-9]\d*(e[\+\-]?\d+)?/)&&(t.eat(/J/i),m=!0),t.match(/^0(?![\dx])/i)&&(m=!0),m)return t.eat(/L/i),"number"}return t.match(_)?(e.tokenize=r(t.current()),e.tokenize(t,e)):t.match(p)||t.match(h)?null:t.match(f)||t.match(u)||t.match(b)?"operator":t.match(c)?null:t.match(w)?"keyword":t.match(k)?"builtin":t.match(d)?"variable":(t.next(),l)}function r(t){function n(n,o){for(;!n.eol();)if(n.eatWhile(/[^'"\\]/),n.eat("\\")){if(n.next(),r&&n.eol())return s}else{if(n.match(t))return o.tokenize=i,s;n.eat(/['"]/)}if(r){if(e.singleLineStringErrors)return l;o.tokenize=i}return s}for(;"rub".indexOf(t.charAt(0).toLowerCase())>=0;)t=t.substr(1);var r=1==t.length,s="string";return n.isString=!0,n}function s(e,n,i){i=i||"py";var r=0;if("py"===i){if("py"!==n.scopes[0].type)return n.scopes[0].offset=e.indentation(),void 0;for(var s=0;s<n.scopes.length;++s)if("py"===n.scopes[s].type){r=n.scopes[s].offset+t.indentUnit;break}}else r=e.column()+e.current().length;n.scopes.unshift({offset:r,type:i})}function o(t,e,n){if(n=n||"py",1!=e.scopes.length){if("py"===e.scopes[0].type){for(var i=t.indentation(),r=-1,s=0;s<e.scopes.length;++s)if(i===e.scopes[s].offset){r=s;break}if(-1===r)return!0;for(;e.scopes[0].offset!==i;)e.scopes.shift();return!1}return"py"===n?(e.scopes[0].offset=t.indentation(),!1):e.scopes[0].type!=n?!0:(e.scopes.shift(),!1)}}function a(t,e){x=null;var n=e.tokenize(t,e),i=t.current();if("."===i)return n=t.match(d,!1)?null:l,null===n&&"meta"===e.lastToken&&(n="meta"),n;if("@"===i)return t.match(d,!1)?"meta":l;"variable"!==n&&"builtin"!==n||"meta"!==e.lastToken||(n="meta"),("pass"===i||"return"===i)&&(e.dedent+=1),"lambda"===i&&(e.lambda=!0),(":"===i&&!e.lambda&&"py"==e.scopes[0].type||"indent"===x)&&s(t,e);var r="[({".indexOf(i);return-1!==r&&s(t,e,"])}".slice(r,r+1)),"dedent"===x&&o(t,e)?l:(r="])}".indexOf(i),-1!==r&&o(t,e,i)?l:(e.dedent>0&&t.eol()&&"py"==e.scopes[0].type&&(e.scopes.length>1&&e.scopes.shift(),e.dedent-=1),n))}var l="error",u=e.singleOperators||new RegExp("^[\\+\\-\\*/%&|\\^~<>!]"),c=e.singleDelimiters||new RegExp("^[\\(\\)\\[\\]\\{\\}@,:`=;\\.]"),f=e.doubleOperators||new RegExp("^((==)|(!=)|(<=)|(>=)|(<>)|(<<)|(>>)|(//)|(\\*\\*))"),h=e.doubleDelimiters||new RegExp("^((\\+=)|(\\-=)|(\\*=)|(%=)|(/=)|(&=)|(\\|=)|(\\^=))"),p=e.tripleDelimiters||new RegExp("^((//=)|(>>=)|(<<=)|(\\*\\*=))"),d=e.identifiers||new RegExp("^[_A-Za-z][_A-Za-z0-9]*"),b=n(["and","or","not","is","in"]),m=["as","assert","break","class","continue","def","del","elif","else","except","finally","for","from","global","if","import","lambda","pass","raise","return","try","while","with","yield"],g=["abs","all","any","bin","bool","bytearray","callable","chr","classmethod","compile","complex","delattr","dict","dir","divmod","enumerate","eval","filter","float","format","frozenset","getattr","globals","hasattr","hash","help","hex","id","input","int","isinstance","issubclass","iter","len","list","locals","map","max","memoryview","min","next","object","oct","open","ord","pow","property","range","repr","reversed","round","set","setattr","slice","sorted","staticmethod","str","sum","super","tuple","type","vars","zip","__import__","NotImplemented","Ellipsis","__debug__"],v={builtins:["apply","basestring","buffer","cmp","coerce","execfile","file","intern","long","raw_input","reduce","reload","unichr","unicode","xrange","False","True","None"],keywords:["exec","print"]},y={builtins:["ascii","bytes","exec","print"],keywords:["nonlocal","False","True","None"]};if(void 0!=e.extra_keywords&&(m=m.concat(e.extra_keywords)),void 0!=e.extra_builtins&&(g=g.concat(e.extra_builtins)),e.version&&3===parseInt(e.version,10)){m=m.concat(y.keywords),g=g.concat(y.builtins);var _=new RegExp("^(([rb]|(br))?('{3}|\"{3}|['\"]))","i")}else{m=m.concat(v.keywords),g=g.concat(v.builtins);var _=new RegExp("^(([rub]|(ur)|(br))?('{3}|\"{3}|['\"]))","i")}var w=n(m),k=n(g),x=null,S={startState:function(t){return{tokenize:i,scopes:[{offset:t||0,type:"py"}],lastToken:null,lambda:!1,dedent:0}},token:function(t,e){var n=a(t,e);return e.lastToken=n,t.eol()&&e.lambda&&(e.lambda=!1),n},indent:function(t){return t.tokenize!=i?t.tokenize.isString?CodeMirror.Pass:0:t.scopes[0].offset},lineComment:"#",fold:"indent"};return S}),CodeMirror.defineMIME("text/x-python","python");var words=function(t){return t.split(" ")};CodeMirror.defineMIME("text/x-cython",{name:"python",extra_keywords:words("by cdef cimport cpdef ctypedef enum exceptextern gil include nogil property publicreadonly struct union DEF IF ELIF ELSE")});var cellWidth=14,cellHeight=cellWidth,textWidth=14,textHeight=textWidth,cellBgColor="#001600",cellFgColor="#00b500",cellHighlightBgColor="yellow",cellHighlightFgColor="black",layers=[],cells=[],offset=MAP_MAX_INDEX;Bq.Map=function(t,e,n){this.stage=t,this.stage.add(n),this.stage.add(e),this.fgLayer=e,this.bgLayer=n},Bq.Map.prototype.render=function(t){for(var e;e=t.pop();){var n=Bq.Cell.getCellById(Bq.Cell.hashCellPair(e[0]-1,Bq.mapData.n-e[1])),i=tileChars[70];if(Bq.playerData.display&&0===e[0]&&0===e[1]){var r=Bq.playerData.facing;"north"===r&&(i=tileChars[11]),"south"===r&&(i=tileChars[12]),"east"===r&&(i=tileChars[13]),"west"===r&&(i=tileChars[14])}else tileId=Bq.mapData.tileAt(e[0],e[1]),-1===tileId&&(tileId=15),i=tileChars[tileId];n.update({text:i})}this.fgLayer.draw()},Bq.Map.getIndices=function(){for(var t=[],e=-MAP_MAX_INDEX;MAP_MAX_INDEX>=e;e++)for(var n=-MAP_MAX_INDEX;MAP_MAX_INDEX>=n;n++)t.push([e,n]);return t},Bq.Map.prototype.getIndices=Bq.Map.getIndices,Bq.Map.prototype.displayTileArray=function(t){for(i=0;i<Bq.mapData.n;i++){var e=t[i],n=MAP_MAX_INDEX-i;for(j=0;j<Bq.mapData.n;j++)x=j-MAP_MAX_INDEX,Bq.mapData.setTile(x,n,e[j])}this.render(Bq.Map.getIndices())},function(){}.call(this),function(){}.call(this),$(document).ready(function(){var t=new Kinetic.Stage({container:"map-container",width:Bq.mapData.n*cellWidth,height:Bq.mapData.n*cellHeight}),e=new Kinetic.Layer,n=new Kinetic.Rect({width:cellWidth*Bq.mapData.n,height:cellHeight*Bq.mapData.n,x:0,y:0,fill:"black"});e.add(n);for(var i=new Kinetic.Layer,r=0;r<Bq.mapData.n;r++){cells[r]||(cells[r]=[]);for(var s=0;s<Bq.mapData.n;s++){var o=s,a=r,l=new Kinetic.Group({x:o*cellWidth,y:a*cellHeight,width:cellWidth,height:cellHeight,id:Bq.Cell.hashCellPair(o-offset,a-offset)}),u=new Kinetic.Rect({width:cellWidth,height:cellHeight,fill:cellBgColor}),c=new Kinetic.Text({text:Bq.mapData.tileAt(o-offset,a-offset),fill:cellFgColor,width:textWidth,height:textHeight,align:"center",fontFamily:"Lucida Console,Monaco,Courier New,Consolas,Liberation Mono,Bitstream Vera Sans Mono, DejaVu Sans Mono, monospace",x:0,y:0});l.add(u),l.add(c),cells[r].push(l)}}for(var r=0;r<cells.length;r++)for(var s=0;s<cells[r].length;s++)i.add(cells[r][s]);Bq.map=new Bq.Map(t,i,e),Bq.renderMap=function(t){var e;for(console.log(e);e=t.pop();){var n=Bq.Cell.getCellById(Bq.Cell.hashCellPair(e[0]-1,Bq.mapData.n-e[1])),r=tileChars[70];if(Bq.playerData.display&&0===e[0]&&0===e[1]){var s=Bq.playerData.facing;"north"===s&&(r=tileChars[51]),"south"===s&&(r=tileChars[52]),"east"===s&&(r=tileChars[53]),"west"===s&&(r=tileChars[54])}else tileId=Bq.mapData.tileAt(e[0],e[1]),-1===tileId&&(tileId=50),r=tileChars[tileId];n.update({text:r})}i.draw()},Bq.map.displayTileArray(splashArt),Sk.builtin.statusFunction()});